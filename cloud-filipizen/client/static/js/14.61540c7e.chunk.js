(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[14],{240:function(e,t,n){"use strict";n.r(t),n.d(t,"RealtyTaxClearanceWebController",(function(){return O})),n.d(t,"RptBillingWebController",(function(){return d}));var a=n(0),r=n.n(a),i=n(36),l=(n(18),n(92));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var c=function(e){var t=e.initialValue,n=e.open,l=e.onAccept,o=e.onCancel,c=Object(a.useState)(void 0===t?{}:t),m=c[0],u=c[1],p=Object(i.fb)(e.initialValue.fromyear,Object(i.ab)()+3);return r.a.createElement(i.F,{open:n,caption:"Pay Options",onAccept:function(){l(m)},onCancel:o,maxWidth:100},r.a.createElement(i.t,{context:m,handler:u},r.a.createElement(i.l,{caption:"Year to Bill",name:"billtoyear",items:p}),r.a.createElement(i.N,{caption:"Quarter to Bill",name:"billtoqtr",items:[1,2,3,4]})))},m=function(e){var t=e.title,n=e.partner,l=e.onCancel,m=e.onSubmit,u=e.error,p=Object(i.hb)()[0],s=p.refno,d=p.txntype,f=p.contact,b=Object(a.useState)(p.bill),y=b[0],E=b[1],O=Object(a.useState)(u),v=O[0],S=O[1],g=Object(a.useState)(!1),h=g[0],x=g[1],P=Object(a.useState)(!1),j=P[0],C=P[1],T=(Object(a.useState)(),Object(a.useState)(),Object(a.useState)()),B=T[0],W=T[1],N=f.email!==y.email;return r.a.createElement(i.g,{style:{maxWidth:500}},r.a.createElement(i.X,null,t),r.a.createElement(i.S,null,"Billing Information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:v}),r.a.createElement(i.t,{context:y,handler:E},r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{name:"billno",caption:"Bill No.",readOnly:!0}),r.a.createElement(i.W,{name:"billdate",caption:"Bill Date",readOnly:!0})),r.a.createElement(i.W,{name:"tdno",caption:"TD No.",readOnly:!0}),r.a.createElement(i.W,{name:"fullpin",caption:"PIN",readOnly:!0}),r.a.createElement(i.W,{name:"taxpayer.name",caption:"Property Owner",readOnly:!0,blur:N}),r.a.createElement(i.W,{name:"taxpayer.address",caption:"Owner Address",readOnly:!0,blur:N}),r.a.createElement(i.W,{name:"billperiod",caption:"Bill Period",readOnly:!0}),r.a.createElement(i.o,{name:"amount",caption:"Amount Due",readOnly:!0,textAlign:"left"})),r.a.createElement(i.a,{disabled:h},r.a.createElement(i.c,{caption:"Back",action:function(){l(0)}}),r.a.createElement(i.J,{row:!0},r.a.createElement(i.e,{caption:"Pay Option",action:function(){return C(!0)},variant:"outlined"}),r.a.createElement(i.e,{caption:"Confirm Payment",action:function(){var e=o({},y,{barcode:B}),t=e.items;delete e.items,m({refno:s,txntype:d,origin:"filipizen",orgcode:n.id,billtoyear:y.billtoyear,billtoqtr:y.billtoqtr,paidby:y.paidby,paidbyaddress:y.paidbyaddress,amount:y.amount,particulars:"Real Property TD No. "+y.tdno+" "+y.billperiod,items:t,info:{data:e}})},disableWhen:0===y.amount}))),r.a.createElement(c,{initialValue:y&&{billtoyear:y.billtoyear,billtoqtr:y.billtoqtr,fromyear:y.fromyear},open:j,onAccept:function(e){var t;C(!1),void 0===(t=e)&&(t={}),x(!0),S(null),function(e){void 0===e&&(e={});try{return Promise.resolve(i.O.lookupAsync(n.id+":OnlineLandTaxBillingService","rpt")).then((function(t){var n=o({txntype:d,refno:s},e);return Promise.resolve(t.invoke("getBilling",n))}))}catch(e){return Promise.reject(e)}}(t).then((function(e){E(e.info),W(e.info.billno),x(!1)})).catch((function(e){S(e.toString()),x(!1)}))},onCancel:function(){return C(!1)}}))},u={txntype:"rptcol",refno:null,bill:{},contact:{}},p=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},s=[{step:1,name:"verification",caption:"Verification",Component:l.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,l=e.moveNextStep,c=e.movePrevStep,m=Object(i.hb)(),u=m[1],p=m[0].txntype,s=Object(a.useState)(),d=s[0],f=s[1],b=Object(a.useState)(!1),y=b[0],E=b[1],O=Object(a.useState)(),v=O[0],S=O[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.g,null,r.a.createElement(i.X,null,t),r.a.createElement(i.S,null,"Initial Information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.W,{caption:"Tax Declaration No.",name:"refno",value:v,onChange:S,readOnly:y,autoFocus:!0}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",variant:"text",action:c}),r.a.createElement(i.e,{caption:"Next",action:function(e){void 0===e&&(e={}),E(!0),f(null),function(e){void 0===e&&(e={});try{return Promise.resolve(i.O.lookupAsync(n.id+":OnlineLandTaxBillingService","rpt")).then((function(t){var n=o({txntype:p,refno:v},e);return Promise.resolve(t.invoke("getBilling",n))}))}catch(e){return Promise.reject(e)}}(e).then((function(e){u({type:"SET_BILL",refno:v,bill:e.info}),l()})).catch((function(e){f(e.toString()),E(!1)}))},loading:y,disabled:y}))))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(i.hb)();return r.a.createElement(l.d,o({module:{title:"Realty Tax Online Billing",component:m}},e,{initialContact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],d=function(e){var t=e.partner,n=e.service,l=e.location,c=e.history,m=e.initialStep,d=Object(a.useState)(void 0===m?0:m),f=d[0],b=d[1],y=s[f];return r.a.createElement(i.Q,{initialState:u,reducer:p},r.a.createElement(i.H,null,r.a.createElement(i.m,{center:!0},r.a.createElement(y.Component,o({page:y},{partner:t,service:n,location:l,history:c,moveNextStep:function(){b((function(e){return e+1}))},movePrevStep:function(){0===f?c.goBack():b((function(e){return e-1}))},cancelPayment:function(){b(1)},title:"Realty Tax Online Billing"})))))},f=function(e){var t=e.title,n=e.partner,l=e.onCancel,c=e.onSubmit,m=e.error,u=Object(i.hb)()[0],p=u.refno,s=u.txntype,d=Object(a.useState)(u.bill),f=d[0],b=d[1],y=Object(a.useState)(m)[0],E=Object(a.useState)(!1)[0],O=(Object(a.useState)(!1),Object(a.useState)(),Object(a.useState)(),Object(a.useState)()[0]);return r.a.createElement(i.g,{style:{maxWidth:500}},r.a.createElement(i.X,null,t),r.a.createElement(i.S,null,"Billing Information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:y}),r.a.createElement(i.t,{context:f,handler:b},r.a.createElement(i.W,{name:"tdno",caption:"TD No.",readOnly:!0}),r.a.createElement(i.W,{name:"pin",caption:"PIN",readOnly:!0}),r.a.createElement(i.W,{name:"owner.name",caption:"Property Owner",readOnly:!0}),r.a.createElement(i.W,{name:"owner.address",caption:"Owner Address",readOnly:!0}),r.a.createElement(i.W,{name:"purpose",caption:"Purpose",readOnly:!0}),r.a.createElement(i.P,null),r.a.createElement(i.o,{name:"amount",caption:"Amount Due",readOnly:!0,textAlign:"left"})),r.a.createElement(i.a,{disabled:E},r.a.createElement(i.c,{caption:"Back",action:function(){l(0)}}),r.a.createElement(i.e,{caption:"Confirm Payment",action:function(){delete o({},f,{barcode:O}).items,c({refno:p,txntype:s,origin:"filipizen",orgcode:n.id,paidby:f.paidby,paidbyaddress:f.paidbyaddress,amount:f.amount,particulars:"Realty Tax Clearance for TD No. "+f.tdno,items:f.billitems,info:{data:f}})},disableWhen:0===f.amount})))},b={txntype:"rpttaxclearance",refno:null,bill:{},contact:{}},y=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},E=[{step:1,name:"verification",caption:"Verification",Component:l.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,l=e.moveNextStep,c=e.movePrevStep,m=Object(i.hb)(),u=m[1],p=m[0].txntype,s=Object(a.useState)(),d=s[0],f=s[1],b=Object(a.useState)({}),y=b[0],E=b[1],O=Object(a.useState)(!1),v=O[0],S=O[1],g=Object(a.useState)(),h=g[0],x=g[1],P=Object(a.useState)(),j=P[0],C=P[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.g,null,r.a.createElement(i.X,null,t),r.a.createElement(i.S,null,"Initial Information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.W,{caption:"Tax Declaration No.",name:"refno",value:h,onChange:x,readOnly:v,autoFocus:!0,error:y.refno,helperText:y.refno}),r.a.createElement(i.W,{caption:"Purpose",name:"purpose",value:j,onChange:C,readOnly:v,error:y.purpose,helperText:y.purpose}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",variant:"text",action:c}),r.a.createElement(i.e,{caption:"Next",action:function(){h||E(o({},y,{refno:"Tax Declaration No. is required."})),j||E(o({},y,{purpose:"Purpose is required."})),0===Object.keys(y).length&&(S(!0),f(null),function(){try{return Promise.resolve(i.O.lookupAsync(n.id+":OnlineRealtyTaxClearanceService","rpt")).then((function(e){return Promise.resolve(e.invoke("getBilling",{txntype:p,refno:h,purpose:j}))}))}catch(e){return Promise.reject(e)}}().then((function(e){u({type:"SET_BILL",refno:h,bill:e}),l()})).catch((function(e){f(e.toString()),S(!1)})))},loading:v,disabled:v}))))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(i.hb)();return r.a.createElement(l.d,o({module:{title:"Online Realty Tax Clearance",component:f}},e,{initialContact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],O=function(e){var t=e.partner,n=e.service,l=e.location,c=e.history,m=e.initialStep,u=Object(a.useState)(void 0===m?0:m),p=u[0],s=u[1],d=E[p];return r.a.createElement(i.Q,{initialState:b,reducer:y},r.a.createElement(i.H,null,r.a.createElement(i.m,{center:!0},r.a.createElement(d.Component,o({page:d},{partner:t,service:n,location:l,history:c,moveNextStep:function(){s((function(e){return e+1}))},movePrevStep:function(){0===p?c.goBack():s((function(e){return e-1}))},cancelPayment:function(){s(1)},title:"Online Realty Tax Clearance"})))))}}}]);
//# sourceMappingURL=14.61540c7e.chunk.js.map
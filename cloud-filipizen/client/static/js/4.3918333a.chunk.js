(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{537:function(e,t,n){"use strict";n.r(t),n.d(t,"AppTrackingWebController",(function(){return Ye})),n.d(t,"BuildingPermitWebController",(function(){return ue})),n.d(t,"OboBillingWebController",(function(){return $e})),n.d(t,"OccupancyPermitWebController",(function(){return Se})),n.d(t,"ProfessionalWebController",(function(){return Ae})),n.d(t,"PtrBillingWebController",(function(){return lt})),n.d(t,"UpdateProfessionalWebController",(function(){return Be}));var a=n(0),r=n.n(a),l=n(2);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t.indexOf(n=l[a])>=0||(r[n]=e[n]);return r}var c=function(e){var t=Object(a.useState)(e)[0],n=Object(a.useState)([]),r=n[0],i=n[1];return Object(a.useEffect)((function(){t&&l.N.lookup("CloudPartnerService","partner").invoke("getBarangayList",{orgcode:t},(function(e,t){if(e)throw e;i(t)}))}),[t]),r},s=function(e){var t=e.orgcode,n=e.name,a=e.caption,s=e.barangays,u=o(e,["orgcode","name","caption","barangays"]),m=s||c(t);return r.a.createElement(l.i,i({name:n,caption:a},u,{items:m,expr:function(e){return e.name},renderValue:function(e){return e.name}}))},u=function(e){var t=e.orgcode,n=e.name,a=e.editable,i=void 0===a||a,c=e.visibleWhen,u=void 0===c||c;return o(e,["orgcode","name","editable","visibleWhen"]),u?r.a.createElement(l.I,null,r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:n+".unitno",caption:"Unit No",editable:i}),r.a.createElement(l.V,{name:n+".bldgno",caption:"Building No",editable:i}),r.a.createElement(l.V,{name:n+".bldgname",caption:"Building Name",editable:i})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:n+".street",caption:"Street",editable:i}),r.a.createElement(l.V,{name:n+".subdivision",caption:"Subdivision",editable:i})),r.a.createElement(l.I,{row:!0},i?r.a.createElement(s,{orgcode:t,name:n+".barangay",caption:"Barangay"}):r.a.createElement(l.V,{name:n+".barangay.name",caption:"Barangay",editable:i}))):null},m=function(e){var t=e.name,n=e.editable,a=void 0===n||n,i=e.visibleWhen,c=void 0===i||i;return o(e,["name","editable","visibleWhen"]),c?r.a.createElement(l.I,null,r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:t+".unitno",caption:"Unit No",editable:a}),r.a.createElement(l.V,{name:t+".bldgno",caption:"Building No",editable:a}),r.a.createElement(l.V,{name:t+".bldgname",caption:"Building Name",editable:a})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:t+".street",caption:"Street",editable:a}),r.a.createElement(l.V,{name:t+".subdivision",caption:"Subdivision",editable:a})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:t+".barangay.name",caption:"Barangay",editable:a}),r.a.createElement(l.V,{name:t+".citymunicipality",caption:"City/Municipality",editable:a}),r.a.createElement(l.V,{name:t+".province",caption:"Province",editable:a}))):null},p=function(e){var t=e.person,n=e.orgcode,a=e.name,i=e.editable,c=void 0===i||i,s=e.visibleWhen,p=void 0===s||s;if(o(e,["person","orgcode","name","editable","visibleWhen"]),!p)return null;var d,f="boolean"==typeof(d=t.resident)?d:"number"!=typeof d||1===d;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.h,{caption:"Resident?",name:a+".resident",editable:c}),f?r.a.createElement(u,{orgcode:n,name:a+".address",caption:"Address",editable:c}):r.a.createElement(m,{name:a+".address",caption:"Address",editable:c}))},d=[{name:"ctc",title:"Community Tax Certficate",caption:"CTC No"},{name:"drivers",title:"Drivers License",caption:"License No"},{name:"sss",title:"SSS",caption:"SSS No"},{name:"gsis",title:"GSIS",caption:"GSIS No"},{name:"umid",title:"UMID",caption:"UMID No"},{name:"passport",title:"PASSPORT",caption:"Passport No."},{name:"tin",title:"TIN",caption:"TIN"}],f=function(e){var t,n,o=e.name,c=e.dtIssued,s=e.visibleWhen,u=e.showIdTypes,m=void 0===u||u,p=e.disableIdNo,f=void 0!==p&&p,E=e.caption,b=e.onError,y=void 0===b?function(){}:b;if(void 0!==s&&!s)return null;var v=Object(a.useState)(d)[0],h=Object(a.useState)({}),g=h[0],O=h[1],S=Object(a.useState)(c),j=S[0],x=S[1];return Object(a.useEffect)((function(){x(c)}),[c]),r.a.createElement(l.I,null,E&&r.a.createElement(l.S,null,E),m&&r.a.createElement(l.i,{name:o+".type",items:v,caption:"ID Type",expr:function(e){return e.title},renderValue:function(e){return e.title},required:!0}),r.a.createElement(l.V,{name:o+".idno",required:!0,caption:"ID No.",readOnly:f}),r.a.createElement(l.V,{name:o+".placeissued",required:!0,caption:"Place Issued"}),r.a.createElement(l.k,((t={name:o+".dtissued",required:!0,caption:"Date Issued",helperText:"mm/dd/yyyy",onBlur:function(e){O({}),x(null);var t=e.target.value;t&&(Object(l.fb)(t)?(O(i({},g,{dtissued:"Date issued should be on or before this day"})),y(!0,"id.dtissued")):(x(t),y(!1)))},error:g.dtissued}).helperText=g.dtissued,t.disableFuture=!0,t)),r.a.createElement(l.k,((n={name:o+".dtvalid",caption:"Validity Date",helperText:"mm/dd/yyyy",onBlur:function(e){var t=e.target.value;t&&(Object(l.gb)(t,j)?(O(i({},g,{dtvalid:"Date should be after date issued"})),y(!0)):(O(i({},g,{dtvalid:null})),y(!1)))},error:g.dtvalid}).helperText=g.dtvalid,n.disabled=!j,n.disablePast=!0,n)))},E=function(e){return r.a.createElement(l.I,{row:!0},r.a.createElement(l.L,i({caption:"Gender"},e),r.a.createElement(l.w,{caption:"Male",value:"M"}),r.a.createElement(l.w,{caption:"Female",value:"F"})))},b=function(e){var t=e.name,n=e.showTitle,a=e.person,i=e.editable,o=e.orgcode,c=e.title,s=e.showIdEntry,u=void 0!==s&&s,m=e.showAddress,d=void 0!==m&&m,b=e.showExtended,y=void 0!==b&&b;return r.a.createElement(r.a.Fragment,null,void 0!==n&&n&&r.a.createElement(l.S,null,void 0===c?"Personal Information":c),r.a.createElement(l.I,null,r.a.createElement(l.V,{caption:"Last Name",name:t+".lastname",editable:i,required:!0}),r.a.createElement(l.V,{caption:"First Name",name:t+".firstname",editable:i,required:!0}),r.a.createElement(l.V,{caption:"Middle Name",name:t+".middlename",editable:i}),y&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.k,{caption:"Birth Date",name:t+".birthdate",editable:i}),r.a.createElement(E,{name:t+".gender",editable:i}),r.a.createElement(l.V,{caption:"TIN",name:t+".tin",editable:i}),r.a.createElement(l.O,null)),d&&r.a.createElement(p,{person:a,orgcode:o,name:t,editable:i}),r.a.createElement(l.q,{name:t+".email"}),r.a.createElement(l.E,{name:t+".mobileno"}),r.a.createElement(l.J,{name:t+".phoneno"}),u&&r.a.createElement(f,{name:t+".id",editable:i})))},y=function(e){var t=e.partner,n=e.hiddenCode,i=e.email,o=e.onCancel,c=e.onVerified,s=e.onResendCode,u=void 0===s?function(){}:s,m=e.connection,p=void 0===m?"epayment":m,d=Object(a.useState)(),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],h=b[1],g=Object(a.useState)(!1),O=g[1];return r.a.createElement(l.I,null,r.a.createElement(l.G,{open:g[0],title:"Email Verification",msg:"Resend verification code?",onAccept:function(){h(null),function(){try{var e=l.N.lookupAsync(t.id+":VerifyEmailService",p);return Promise.resolve(e.invoke("verifyEmail",{email:i}))}catch(e){return Promise.reject(e)}}().then((function(e){u(e.key),O(!1)})).catch((function(e){h(e),O(!1)}))},onCancel:function(){return O(!1)}}),r.a.createElement(l.I,null,r.a.createElement(l.I,{style:v.container},r.a.createElement(l.V,{label:"Key",placeholder:"Enter code sent to your email",name:"keycode",value:f,onChange:E,maxLength:6,fullWidth:!1,variant:"outlined",error:y,helperText:y}),r.a.createElement(l.d,{label:"Resend Code",action:function(){return O(!0)},variant:"text"})),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:o}),r.a.createElement(l.d,{caption:"Verify",action:function(){h(null),n!==f?h("Invalid code"):c()}}))))},v={container:{}},h=function(e){var t=e.partner,n=e.onCancel,i=e.onSubmit,o=Object(a.useState)(!1),c=o[0],s=o[1];return r.a.createElement(l.I,null,r.a.createElement(l.R,null,"New Building Permit Application"),r.a.createElement(l.O,{height:30}),r.a.createElement(l.S,null,"Please read thoroughly before proceeding"),r.a.createElement("p",{style:{opacity:.8}},"This online service will require personal information from the applicant, lot owner(s) and professionals involved in this transaction. In compliance with the Data Privacy Act, we are securing your consent that you have been authorized by the aforementioned parties to act on their behalf. The data collected will be stored, processed and used for effectively carrying out legitimate transactions with the local government of ",t.title,". If you do not agree to these terms, you can cancel out by click on the Cancel button. If you agree to these terms, tick on the checkbox and click Continue."),r.a.createElement(l.h,{caption:"Yes, I have read and agree to the terms and conditions",value:c,name:"agreeDisclaimer",onChange:s}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:n}),r.a.createElement(l.d,{caption:"Continue",action:i,disableWhen:!c})))},g=function(e){var t,n,o=e.name,c=e.dtIssued,s=e.editable,u=e.readOnly,m=e.visibleWhen,p=e.disableIdNo,d=e.editValidity,f=e.onError,E=void 0===f?function(){}:f,b=e.caption,y=void 0===b?"Professional Regulation Commission [PRC]":b;if(void 0!==m&&!m)return null;var v=void 0!==u&&u||!(void 0===s||s),h=v||void 0!==p&&p,g=!(void 0!==d&&d)&&v,O=Object(a.useState)({}),S=O[0],j=O[1],x=Object(a.useState)(c),I=x[0],k=x[1];return Object(a.useEffect)((function(){k(c)}),[c]),r.a.createElement(l.I,null,y&&r.a.createElement(l.S,null,y),r.a.createElement(l.D,{name:o+".idno",required:!0,caption:"ID No.",readOnly:h,autoFocus:!0}),r.a.createElement(l.V,{name:o+".placeissued",required:!0,caption:"Place Issued",readOnly:v}),r.a.createElement(l.k,((t={name:o+".dtissued",required:!0,caption:"Date Issued",defaultValue:null,readOnly:v,helperText:"mm/dd/yyyy",onBlur:function(e){j({}),k(null);var t=e.target.value;t&&(Object(l.fb)(t)?(j(i({},S,{dtissued:"Date issued should be on or before this day"})),E(!0,"prc.dtissued")):(k(t),E(!1)))},error:S.dtissued}).helperText=S.dtissued,t.disableFuture=!0,t)),r.a.createElement(l.k,((n={name:o+".dtvalid",required:!0,caption:"Validity Date",defaultValue:null,readOnly:g,helperText:"mm/dd/yyyy",onBlur:function(e){var t=e.target.value;t&&(Object(l.gb)(t,I)?(j(i({},S,{dtvalid:"Date should be after date issued"})),E(!0)):(j(i({},S,{dtvalid:null})),E(!1)))},error:S.dtvalid}).helperText=S.dtvalid,n.disabled=!I,n.disablePast=!0,n)))},O=function(e){var t,n=e.name,o=e.editable,c=e.readOnly,s=e.visibleWhen,u=e.disableRefNo,m=e.onError,p=void 0===m?function(){}:m,d=e.caption,f=void 0===d?"Professional Tax Receipt [PTR]":d;if(void 0!==s&&!s)return null;var E=void 0!==c&&c||!(void 0===o||o),b=E||void 0!==u&&u,y=Object(a.useState)({}),v=y[0],h=y[1];return r.a.createElement(l.I,null,f&&r.a.createElement(l.S,null,f),r.a.createElement(l.V,{name:n+".refno",required:!0,caption:"Receipt No.",readOnly:b}),r.a.createElement(l.V,{name:n+".placeissued",required:!0,caption:"Place Issued",readOnly:E}),r.a.createElement(l.k,((t={name:n+".dtissued",required:!0,caption:"Date Issued",defaultValue:null,readOnly:E,helperText:"mm/dd/yyyy",onBlur:function(e){h({});var t=e.target.value;t&&(Object(l.fb)(t)?(h(i({},v,{dtissued:"Date issued should be on or before this day"})),p(!0)):p(!1))},error:v.dtissued}).helperText=v.dtissued,t.disableFuture=!0,t)))},S=function(e){var t=e.partner,n=e.onVerify,i=e.onCancel,o=e.connection,c=void 0===o?"epayment":o,s=e.visibleWhen,u=e.history,m=e.showName,p=void 0!==m&&m,d=e.module,f=e.title,E=e.subtitle,b=void 0===E?"Email Verification":E,y=e.emailRequired,v=e.contact;if(void 0!==s&&!s)return null;var h=Object(a.useState)(),g=h[0],O=h[1],S=Object(a.useState)(v),j=S[0],x=S[1],I=Object(a.useState)({})[0],k=Object(a.useState)(),C=k[0],w=k[1],P=Object(a.useState)(),N=P[0],T=P[1],A=Object(a.useState)(!1),W=A[0],V=A[1],R=Object(a.useState)(!1),D=R[0],L=R[1],q=function(){try{var e=l.N.lookupAsync(t.id+":VerifyEmailService",c);return Promise.resolve(e.invoke("verifyEmail",{email:j.email,mobileno:j.mobileno}))}catch(e){return Promise.reject(e)}},B=Object(a.useRef)(),_=d&&d.title||f||null;return r.a.createElement(l.e,null,_&&r.a.createElement(l.W,null,_),r.a.createElement(l.R,null,b),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:N}),r.a.createElement(l.s,{visibleWhen:!g,context:j,handler:x},r.a.createElement("form",{ref:B},!0===p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.V,{label:"Full Name",name:"name",autoFocus:!0,required:!0}),r.a.createElement(l.V,{label:"Address",name:"address",required:!0})),r.a.createElement(l.q,{name:"email",required:y,error:I.email,helperText:I.email,autoFocus:!p}),r.a.createElement(l.E,{name:"mobileno"}),r.a.createElement(l.a,{disabled:W},r.a.createElement(l.b,{action:function(){"function"==typeof i&&i(),u&&u.goBack()}}),r.a.createElement(l.d,{label:"Submit",action:function(){B.current.reportValidity()&&(j.email||j.mobileno?(T(null),V(!0),q().then((function(e){O(e.key),V(!1)})).catch((function(e){T(e),V(!1)}))):T("Please specify email or Mobile No."))},loading:W})))),r.a.createElement(l.G,{open:D,title:"Email Verification",msg:"Resend verification code?",onAccept:function(){T(null),q().then((function(e){O(e.key),L(!1)})).catch((function(e){T(e),L(!1)}))},onCancel:function(){return L(!1)}}),r.a.createElement(l.I,{visibleWhen:!!g},r.a.createElement(l.V,{label:"Email Code",placeholder:"Enter code sent to your email",name:"keycode",value:C,onChange:w,maxLength:6,autoFocus:!0}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},r.a.createElement(l.d,{label:"Resend Code",action:function(){return L(!0)},variant:"text"})),r.a.createElement(l.a,null,r.a.createElement(l.d,{label:"Verify",visibleWhen:g,action:function(){g!==C?T("Code is incorrect"):n(j)}}))))},j=function(e){var t,n=e.partner,i=e.moveNextStep,o=e.movePrevStep,c=e.title,s=e.subtitle,u=void 0===s?"Email Verification":s,m=e.visibleWhen,p=e.emailRequired,d=void 0!==p&&p,f=e.showName,E=void 0!==f&&f,b=e.contact,y=void 0===b?{}:b;if(void 0!==m&&!m)return null;var v=Object(l.hb)()[1];return Object(a.useState)(!1),Object(a.useState)(!1),r.a.createElement(S,((t={emailRequired:!1,partner:n,title:c,subtitle:u,onVerify:function(e){v({type:"SET_CONTACT",contact:e}),i(e)},onCancel:o}).emailRequired=d,t.contact=y,t.showName=E,t))},x=function(e){var t=e.onCancel,n=e.onSubmit,o=e.bill,c=e.loading,s=e.error,u=Object(a.useState)({}),m=u[0],p=u[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(!1),y=b[0],v=b[1];return Object(a.useEffect)((function(){v(null!=s)}),[s]),r.a.createElement(l.e,null,r.a.createElement(l.I,{style:{maxWidth:400}},r.a.createElement(l.j,{center:!0},r.a.createElement(l.W,null,"Confirm Transaction"),r.a.createElement(l.O,null),r.a.createElement(l.x,{style:i({},I.text)},"Please confirm and fill up name and address of the payer for your electronic official receipt and click Continue to proceed for payment."),r.a.createElement(l.O,null)),r.a.createElement(l.s,{context:m,handler:p},r.a.createElement(l.V,{name:"paidby",caption:"Paid By Name",required:!0,error:f.paidby,helperText:f.paidby,autoFocus:!0}),r.a.createElement(l.V,{name:"paidbyaddress",caption:"Paid By Address",required:!0,error:f.paidbyaddress,helperText:f.paidbyaddress})),r.a.createElement(l.O,null),r.a.createElement(l.I,{style:I.infoContainer},r.a.createElement("div",{style:i({},I.infoContainer,{alignItems:"center"})},r.a.createElement("label",null,"Payment Details"),r.a.createElement("h4",null,o.paymentdetails)),r.a.createElement("div",{style:I.amountContainer},r.a.createElement("label",{style:I.amount},"Php ",Object(l.Y)(o.amount)))),r.a.createElement(l.O,null),r.a.createElement(l.G,{open:y,title:"Error",onAccept:function(){return v(!1)},msg:"An error was encountered when processing your order. Please try again later or contact LGU for assistance."}),r.a.createElement(l.a,null,r.a.createElement(l.d,{variant:"text",caption:"Back",action:t}),r.a.createElement(l.d,{caption:"Continue",action:function(){var e={};m.paidby||(e.paidby="Required"),m.paidbyaddress||(e.paidbyaddress="Required"),E(e),0===Object.keys(e).length&&n(m)},disableWhen:c,loading:c}))))},I={text:{display:"block",textAlign:"center"},infoContainer:{display:"flex",flexDirection:"column"},amountContainer:{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #aaa"},amount:{fontSize:24,fontWeight:800,padding:10}},k={paymentTypeContainer:{display:"flex",flexDirection:"column",width:"400px"},paymentType:{paddingLeft:20},label:{fontWeight:"bold",textAlign:"right"},row:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},C={paymaya:{component:function(e){var t=e.po,n=e.onCancel,i=e.onCheckout,o=Object(a.useState)("wallet"),c=o[0],s=o[1],u=Object(a.useState)(0),m=u[0],p=u[1];return Object(a.useEffect)((function(){if("wallet"===c)p(30);else{var e=Math.round(100*(t.amount/.985-t.amount))/100;p(e+20)}}),[c]),r.a.createElement(l.e,{style:{minWidth:"400px"}},r.a.createElement(l.j,{center:!0},r.a.createElement(l.u,{src:"/assets/paymaya.png",width:"150",style:{cursor:"pointer"}})),r.a.createElement(l.O,null),r.a.createElement("div",{style:k.paymentTypeContainer},r.a.createElement(l.x,{labelStyle:k.label},"Select Type of Payment"),r.a.createElement("div",{style:k.paymentType},r.a.createElement(l.L,{name:"payType",value:c,onChange:s},r.a.createElement(l.w,{caption:"Wallet",value:"wallet"}),r.a.createElement(l.w,{caption:"Credit/Debit Card",value:"card"})))),r.a.createElement(l.O,null),r.a.createElement(l.I,{row:!0,style:k.row},r.a.createElement(l.x,{labelStyle:k.label},"Amount"),r.a.createElement(l.x,{labelStyle:k.label},"PHP "+Object(l.Y)(t.amount))),r.a.createElement(l.I,{row:!0,style:k.row},r.a.createElement(l.x,{labelStyle:k.label},"Convenience Fee"),r.a.createElement(l.x,{labelStyle:k.label},"PHP "+Object(l.Y)(m))),r.a.createElement(l.I,{row:!0,style:k.row},r.a.createElement(l.x,{labelStyle:k.label},"Sub-Total"),r.a.createElement(l.x,{labelStyle:k.label},"PHP "+Object(l.Y)(t.amount+m))),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:n}),r.a.createElement(l.d,{caption:"Proceed Payment",action:function(){i({type:c,fee:m})}})))}}},w=function(e){var t=e.po,n=e.error,o=e.payOptions,c=e.partner,s=Object(a.useState)(!1)[0],u=Object(a.useState)(!1),m=u[0],p=u[1],d=Object(a.useState)(),f=d[0],E=d[1],b=Object(a.useState)(!1),y=b[0],v=b[1],h=Object(a.useState)(!1),g=h[0],O=h[1],S=Object(a.useState)(!1),j=S[0],x=S[1],I=Object(a.useState)({}),k=I[0],w=I[1],N=Object(a.useState)("payment"),T=N[0],A=N[1],W=Object(a.useState)({}),V=W[0],R=W[1],D=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=document.getElementById("postform");e&&k.formaction&&e.submit()}),[k]);var L=function(e){E(null),p(!0),l.N.lookup("CloudPaymentService","epayment").invoke("getPayPartner",{objid:t.objid,payoption:e.objid,checkout:e.checkout},(function(e,t){e?("string"==typeof e?/syntax/gi.test(e)?E("Could not contact payment partner. Please try again."):E(e):E(e.errormsg),p(!1),v(!0)):w(t)}))};if("checkout"===T){var q=C[V.paypartnerid.toLowerCase()].component;return r.a.createElement(q,{po:t,onCancel:function(){A("payment")},onCheckout:function(e){A("payment"),L(i({},V,{checkout:e}))}})}var B=[];return k.params&&Object.keys(k.params).forEach((function(e){B.push([e,k.params[e]])})),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.G,{title:"Acknowledgement",msg:"Kindly acknowledge and confirm with the Terms and Conditions before proceeding.",open:j,onAccept:function(){return x(!1)}}),r.a.createElement(l.G,{title:"Payment Processing Error",msg:"An error occurred while processing your request. Correct the problem and resubmit your request or kindly contact the LGU for assistance",open:y,onAccept:function(){return v(!1)}},r.a.createElement("ul",null,r.a.createElement("li",null,f))),r.a.createElement(l.F,{open:m,showActions:!1},r.a.createElement(l.I,{center:!0},r.a.createElement(l.O,null),r.a.createElement("label",{style:{fontSize:20,fontWeight:800}},"Contacting Partner"),r.a.createElement("label",{style:{fontSize:14,opacity:.75}},"Kindly wait while we send your payment request to our partner."),r.a.createElement(l.B,{showMessage:!1}),r.a.createElement(l.O,null))),r.a.createElement(l.O,null),r.a.createElement(l.I,{center:!0},r.a.createElement(l.I,{style:P.poContainer},r.a.createElement(l.I,{center:!0},r.a.createElement(l.W,{color:"green"},"Your Order")),r.a.createElement(l.O,null),r.a.createElement(l.I,null,r.a.createElement(l.x,{context:c,caption:"Agency",expr:"title"}),r.a.createElement(l.x,{context:t,caption:"Reference No.",expr:"objid"}),r.a.createElement(l.x,{context:t,caption:"Transaction Type",expr:"txntypename"}),r.a.createElement(l.x,{context:t,caption:"Particulars",expr:"particulars"}),r.a.createElement(l.x,{context:t,caption:"Paid By",expr:"paidby"}),r.a.createElement(l.O,{height:10}),r.a.createElement(l.x,{caption:"Amount"},t&&Object(l.Y)(t.amount))),r.a.createElement(l.t,{row:!0,style:{marginTop:10}},r.a.createElement(l.x,{style:{color:"blue",paddingRight:5}},"Note:"),r.a.createElement(l.x,{style:{color:"red"}},t&&"Pay on or before "+t.expirydate)),r.a.createElement(l.h,{checked:g,onChange:O,style:{marginRight:5},caption:r.a.createElement("span",{style:{fontSize:14,paddingTop:8}},"I acknowledge and agree to the Terms and Conditions of this e-payment facility.")}),r.a.createElement(l.O,{height:10})),!s&&g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.r,{msg:n}),r.a.createElement(l.O,null),r.a.createElement(l.x,null,"Click to choose Type of Payment:"),r.a.createElement(l.t,{row:!0},o&&o.map((function(e){return r.a.createElement("button",{type:"submit",style:P.payButton,onClick:function(){return t=e,void(g?function(e){return void 0!==C[e.paypartnerid.toLowerCase()]}(t)?(A("checkout"),R(t)):L(t):x(!0));var t}},r.a.createElement("input",{type:"hidden",name:"refno",value:t.objid}),r.a.createElement("input",{type:"hidden",name:"payoption",value:e.objid}),r.a.createElement(l.u,{src:"/assets/"+e.paypartnerid.toLowerCase()+".png",width:"150",style:{cursor:"pointer"}}))}))))),!0===k.isredirect?r.a.createElement("form",{id:"postform",method:"GET",action:k.formaction,ref:D},r.a.createElement("input",{type:"hidden",name:"id",value:k.id})):r.a.createElement("form",{id:"postform",method:"POST",action:k.formaction,ref:D},r.a.createElement(r.a.Fragment,null,B.map((function(e){return r.a.createElement("input",{key:e[0],type:"hidden",name:e[0],value:e[1]})})),r.a.createElement("input",{type:"hidden",name:"orgcode",value:"${po.orgcode}"}))))},P={poContainer:{display:"flex",flexDirection:"column",border:"1px solid #aaa",borderRadius:5,padding:15,maxWidth:450},payButton:{border:"none",background:"none"}},N=function(e){var t=e.module,n=e.partner,o=e.contact,c=e.initialStep,s=void 0===c?0:c,u=e.cancelPayment,m=function(){I((function(e){return e+1!==d.length?e+1:e}))},p=function(){I((function(e){return e-1>=0?e-1:e}))},d=[{name:"verifyemail",title:"Email Verification",component:S,actions:{onCancel:function(){e.history.goBack()},onVerify:function(e){setContact(e),m()}}},{name:"billing",title:t.title,component:t.component,actions:{onCancel:function(e){u?u():p()},onSubmit:function(e){A(e),I(d.findIndex(o.email?function(e){return"checkout"===e.name}:function(e){return"verification"===e.name}))}}},{name:"verification",caption:"Email Verification",component:j,actions:{movePrevStep:function(){I(1)},moveNextStep:function(){I(d.findIndex((function(e){return"checkout"===e.name})))}}},{name:"checkout",title:"Checkout Order",component:x,actions:{onCancel:function(){I(1)},onSubmit:function(e){b(!0),h(null),function(){try{var t=i({},T);t.paidby=e.paidby,t.paidbyaddress=e.paidbyaddress,t.email=o.email,t.mobileno=o.mobileno;var a=l.N.lookupAsync(n.id+":EPaymentService","epayment");return Promise.resolve(a.invoke("createPaymentOrder",t)).then((function(e){var t=l.N.lookupAsync("CloudPaymentService","epayment");return Promise.resolve(t.invoke("getPaymentOrder",{objid:e.objid})).then((function(a){return e=a,Promise.resolve(t.invoke("getPaymentPartnerOptions",{partnerid:e.orgcode})).then((function(t){return{po:e,payOptions:t,partner:n}}))}))}))}catch(e){return Promise.reject(e)}}().then((function(e){R(e.po),q(e.payOptions),m(),b(!1)})).catch((function(e){h(e.toString()),b(!1)}))}}},{name:"payment",title:"Online Payment",component:w,actions:{onCancel:p,onSubmit:function(){}}}],f=Object(a.useState)(!1),E=f[0],b=f[1],y=Object(a.useState)(),v=y[0],h=y[1],g=Object(a.useState)(s),O=g[0],I=g[1],k=Object(a.useState)(d[s]),C=k[0],P=k[1],N=Object(a.useState)(),T=N[0],A=N[1],W=Object(a.useState)(),V=W[0],R=W[1],D=Object(a.useState)(),L=D[0],q=D[1],B=Object(a.useState)(0)[0];return Object(a.useEffect)((function(){P(d[O])}),[O]),r.a.createElement(C.component,i({},e,{contact:o,bill:T,po:V,payOptions:L},C.actions,{error:v,module:t,loading:E,page:C,initialStep:B,emailRequired:!0}))};n(86);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t.indexOf(n=l[a])>=0||(r[n]=e[n]);return r}var W=function(e){var t=e.onCancel,n=e.onSubmit,i=e.service,o=e.partner,c=e.appService,s=Object(a.useState)({}),u=s[0],m=s[1],p=Object(a.useState)("new"),d=p[0],f=p[1],E=Object(a.useState)(),b=E[0],y=E[1],v=Object(a.useState)(!1),h=v[0],g=v[1],O=Object(a.useState)(),S=O[0],j=O[1];return r.a.createElement(l.H,null,r.a.createElement(l.e,null,r.a.createElement(l.W,null,i.title),r.a.createElement(l.R,null,"Select an action"),r.a.createElement(l.O,{height:30}),r.a.createElement(l.r,{msg:S}),r.a.createElement(l.L,{value:d,onChange:f},r.a.createElement(l.w,{caption:"Create New Application",value:"new"}),r.a.createElement(l.w,{caption:"Resume Pending Application",value:"resume"})),r.a.createElement(l.I,{style:{paddingLeft:30}},r.a.createElement(l.V,{caption:"Application Tracking No.",value:b,onChange:y,visibleWhen:"resume"===d,variant:"outlined",fullWidth:!1,required:!0,style:{marginLeft:40},error:u.appno||S,helperText:u.appno||S,size:"small"})),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:t}),r.a.createElement(l.d,{caption:"Next",action:function(){"new"!==d?b?(g(!0),j(null),c.invoke("findCurrentInfo",{appid:b},(function(e,t){e?j(e):t?o.id!==t.orgcode?m({appno:"The application number provided is not for this local government"}):n({appType:d,appno:b,step:t.step}):m({appno:"Application no. does not exist"}),g(!1)}))):m({appno:"Tracking No. is required."}):n({appType:d,appno:b})},loading:h,disableWhen:h}))))},V=function(e){var t=e.partner,n=e.title,i=void 0===n?"New Permit Application":n,o=e.onCancel,c=e.onContinue,s=e.error,u=Object(a.useState)(!1),m=u[0],p=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.R,null,i),r.a.createElement(l.O,{height:30}),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.S,null,"Please read thoroughly before proceeding"),r.a.createElement("p",{style:{opacity:.8}},"This online service will require personal information from the applicant, lot owner(s) and professionals involved in this transaction. In compliance with the Data Privacy Act, we are securing your consent that you have been authorized by the aforementioned parties to act on their behalf. The data collected will be stored, processed and used for effectively carrying out legitimate transactions with the local government of ",t.title,". If you do not agree to these terms, you can cancel out by click on the Cancel button. If you agree to these terms, tick on the checkbox and click Continue."),r.a.createElement(l.h,{caption:"Yes, I have read and agree to the terms and conditions",value:m,name:"agreeDisclaimer",onChange:p}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:o}),r.a.createElement(l.d,{caption:"Continue",action:c,disableWhen:!m})))},R=function(e){var t=e.title,n=e.appno,a=e.onContinue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.R,null,void 0===t?"New Permit Application":t),r.a.createElement(l.O,{height:30}),r.a.createElement(l.S,null,"Application created"),r.a.createElement("p",null,"Please take note of the tracking number for this application. This will be your tracking reference for completing and follow up for this application."),r.a.createElement(l.S,null,n),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Continue",action:a})))},D=l.N.lookup("OnlineBuildingPermitService","obo"),L=[{name:"email",caption:"Email Verification"},{name:"select-apptype",caption:"Select Application Type"},{name:"project-name",caption:"Project Name"},{name:"confirmation",caption:"Confirmation"},{name:"newapp",caption:"New Application "}],q=function(e){var t=Object(a.useState)({}),n=t[0],i=t[1],o=(Object(a.useState)(!1),Object(a.useState)("new")[0]),c=(Object(a.useState)(),Object(a.useState)()),s=c[0],u=c[1],m=Object(a.useState)({apptype:"NEW"}),p=m[0],d=m[1],f=Object(a.useState)(0),E=f[0],b=f[1],y=Object(a.useState)(),v=y[0],h=y[1],g=e.partner,O=e.service,j=e.handler,x=e.onCancel,I=L[E],k=Object(a.useRef)(),C=function(){b((function(e){return e+1}))};return r.a.createElement(l.H,null,"email"===I.name?r.a.createElement(S,{title:O.title,visibleWhen:"email"===I.name,showName:!0,onCancel:x,onVerify:function(e){i(e),C()},partner:g,connection:"obo"}):r.a.createElement(l.e,null,r.a.createElement(l.W,null,O.title),r.a.createElement(l.s,{visibleWhen:"select-apptype"===I.name,context:p,handler:d},r.a.createElement(l.R,null,"Select Application Type"),r.a.createElement(l.O,null),r.a.createElement(l.I,{style:{marginLeft:20}},r.a.createElement(l.L,{name:"apptype"},r.a.createElement(l.w,{caption:"New Construction",value:"NEW"}),r.a.createElement(l.w,{caption:"Renovation",value:"RENOVATION",editable:!1}),r.a.createElement(l.w,{caption:"Demolition",value:"DEMOLITION",editable:!1}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Back",action:x}),r.a.createElement(l.d,{caption:"Next",action:C}))),r.a.createElement(l.s,{visibleWhen:"project-name"===I.name,context:p,handler:d},r.a.createElement(l.R,null,"New Building Permit Application"),r.a.createElement(l.O,{height:30}),r.a.createElement(l.S,null,"Project Information"),r.a.createElement("form",{ref:k},r.a.createElement(l.V,{caption:"Project Name",name:"title",required:!0,autoFocus:!0}),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){b((function(e){return e-1}))}}),r.a.createElement(l.d,{caption:"Next",action:function(){k.current.reportValidity()&&C()}})))),r.a.createElement(l.I,{visibleWhen:"confirmation"===I.name},r.a.createElement(V,{partner:g,error:v,onCancel:e.goBack,onContinue:function(){var e=T({},p,{orgcode:g.orgcode||g.id,apptype:o,contact:n,worktypes:[]});D.invoke("create",e,(function(e,t){e?h(e):(u(t.objid),C())}))}})),r.a.createElement(l.I,{visibleWhen:"newapp"===I.name,width:400},r.a.createElement(R,{appno:s,onContinue:function(){j(s)}}))))},B=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],_=function(e){var t=e.name,n=e.caption,a=void 0===n?"Lot Ownership":n,i=e.showCaption,o=void 0===i||i,c=A(e,["name","caption","showCaption"]);return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(l.S,null,a),r.a.createElement(l.L,T({name:t},c),r.a.createElement(l.w,{caption:"Lot Owned",value:"1"}),r.a.createElement(l.w,{caption:"Leased",value:"0"})))},F=["INDIVIDUAL","MULTIPLE","CORPORATION","GOVERNMENT","OTHER"],G=function(e){var t=e.owner,n=e.editable,a=e.editableAddress,i=void 0!==a&&a,o=e.editableIdEntry,c=void 0!==o&&o,s=e.orgcode,u=e.onError,m=void 0===u?function(){}:u,d=A(e,["owner","editable","editableAddress","editableIdEntry","orgcode","onError"]),E=d.showIdEntry||!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.S,null,d.title||"Lot Owner Information"),r.a.createElement(l.I,null,r.a.createElement(l.V,{caption:"Profile No.",name:"owner.profileno",editable:n}),r.a.createElement(l.i,{items:F,name:"owner.entitytype",caption:"Ownership Type",editable:n}),"INDIVIDUAL"!==t.entitytype&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.V,{caption:"Lot Owner Name",name:"owner.name",editable:n}),r.a.createElement(l.x,null,"Name of administrator/contact of property owner")),r.a.createElement(l.V,{caption:"Last Name",name:"owner.lastname",editable:n}),r.a.createElement(l.V,{caption:"First Name",name:"owner.firstname",editable:n}),r.a.createElement(l.V,{caption:"Middle Name",name:"owner.middlename",editable:n}),r.a.createElement(p,{person:t,orgcode:s,name:"owner",editable:n||i}),E&&r.a.createElement(f,{name:"owner.id",onError:m,editable:n||c,dtIssued:t.id?t.id.dtissued:null})))},H=function(e){var t=e.editable,n=A(e,["editable"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.S,null,n.title||"Lot Information"),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"PIN",name:"pin",editable:t}),r.a.createElement(l.V,{caption:"Lot No.",name:"lotno",editable:t}),r.a.createElement(l.V,{caption:"Block No.",name:"blockno",editable:t})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"Street",name:"street",editable:t}),r.a.createElement(l.V,{caption:"Barangay",name:"barangay",editable:t})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"TD No.",name:"tdno",editable:t}),r.a.createElement(l.V,{caption:"Title No.",name:"titleno",editable:t})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"Classification",name:"classcode",editable:t}),r.a.createElement(l.V,{caption:"Area",name:"areasqm",editable:t})))},U={balanceText:{color:"red",fontWeight:"bold",fontSize:"14px",paddingBottom:10},locationContainer:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",marginBottom:10},tdno:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},rpuInfoContainer:{padding:"10px"}},z=l.N.lookup("OboMiscListService","obo"),M={column:{display:"flex",flexDirection:"column",marginLeft:20}},Y=l.N.lookup("OboProfessionalService","obo"),K=function(e){var t=e.caption,n=void 0===t?"Search Professional":t,i=e.searchFieldTitle,o=void 0===i?"PRC No.":i,c=e.onSelect,s=e.hideSearchText,u=void 0!==s&&s,m=e.fullWidth,p=void 0===m||m,d=e.role,f=Object(a.useState)({prc:{}}),E=f[0],b=f[1],y=Object(a.useState)(),v=y[0],h=y[1],g=Object(a.useState)(),O=g[0],S=g[1],j=Object(a.useState)(!1),x=j[0],I=j[1],k=Object(a.useState)(!1),C=k[0],w=k[1],P=Object(a.useState)(),N=P[0],A=P[1],W=function(){var e=window.location.pathname;if(!e)return"";var t=e.match(/\/(.*?)\/(.*?)\/(.*)/);return t.length>3?"/"+t[1]+"/"+t[2]+"/obo/registerprofessionals?ref="+window.location.href.match(/\/partner.*/):"/partners"}(),V=function(e){if(Y&&E.prc.idno){var t=T({},E,e);Y.invoke("getList",t,(function(e,t){e?console.log("ERROR",e):(S(t),0===t.length&&w(!0))}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.G,{title:"Invalid Profession",open:x,msg:N,onAccept:function(){return I(!1)}}),r.a.createElement(l.G,{title:"Invalid PRC No. "+E.prc.idno,open:C,msg:N,onAccept:function(){return w(!1)}},r.a.createElement("p",null,"The PRC No you are looking for is not found in our database. Please register professional first. You can do so by selecting Register Professional in the transaction page under Building Permits. You can also click ",r.a.createElement("a",{href:W},"here")," to register.")),r.a.createElement(l.C,{caption:n,query:E,setQuery:b,searchFieldTitle:o,searchField:"prc.idno",onSelect:function(){var e=v[0];return function(e){if(!d)return!0;var t=d.toLowerCase(),n="";if(!(t.indexOf(e.profession.toLowerCase())>=0)){var a=t.split(",");if(1==a.length)n="Only "+a[0].toLowerCase()+" is allowed.";else{var r=(n="Only "+a.join(", ")+" are allowed.").lastIndexOf(",");n=n.substring(0,r)+" and "+n.substring(r+2)}return A("The profession of the selected professional is invalid. "+n),!1}return!0}(e)?(c(e),!0):(I(!0),!1)},fetchList:V,hideSearchText:u,enableSelect:v&&v.length>0,fullWidth:p,rootStyle:{minWidth:400}},r.a.createElement(l.s,{context:E,handler:b},r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"PRC No.",name:"prc.idno",width:200,variant:"outlined"}),r.a.createElement(l.d,{caption:"Search",action:function(){V({limit:5,start:0})}}))),r.a.createElement(l.T,{items:O,fetchList:V,rowsPerPage:5,showPagination:!1,singleSelect:!0,keyId:"objid",onSelectItems:function(e){h(e)}},r.a.createElement(l.U,{caption:"PRC",expr:"prc.idno"}),r.a.createElement(l.U,{caption:"Name",expr:function(e){return e.lastname+", "+e.firstname+" "+e.middlename}}),r.a.createElement(l.U,{caption:"Profession",expr:"profession"}))))},Q=function(e){var t=e.professional,n=void 0===t?{prc:{},ptr:{}}:t,a=e.caption,i=e.onSelectProfessional,o=e.photoUrl,c=e.role,s="";n.lastname&&(s=n.lastname+", "+n.firstname+" "+n.middlename);var u=J.container,m=J.lookupContainer,p=J.caption;return"string"==typeof n.lastname&&(u=T({},u,{backgroundColor:"#d1d7f8"}),m=T({},m,{backgroundColor:"#454f88"}),p=T({},p,{color:"white"})),r.a.createElement("div",{style:u},r.a.createElement(l.I,{style:m},r.a.createElement(l.x,{captionStyle:p,caption:a}),r.a.createElement(K,{hideSearchText:!0,onSelect:i,fullWidth:!1,role:c})),r.a.createElement("div",{style:{marginTop:10,marginBottom:10,padding:10}},r.a.createElement("div",{style:J.nameContainer},r.a.createElement(l.I,{center:!0},r.a.createElement(l.x,{labelStyle:J.name},s),r.a.createElement(l.x,{labelStyle:J.profession},n.profession)),r.a.createElement(l.u,{src:o})),r.a.createElement(l.I,{style:J.row},r.a.createElement(l.I,null,r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"PRC ID No."},n.prc.idno),r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"Date Issued"},n.prc.dtissued),r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"Valid Until"},n.prc.dtvalid),r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"Place Issued"},n.prc.placeissued)),r.a.createElement(l.I,null,r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"PTR ID No."},n.ptr.refno),r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"Date Issued"},n.ptr.dtissued),r.a.createElement(l.x,{style:J.label,captionStyle:{width:120},caption:"Place Issued"},n.ptr.placeissued)))))},J={container:{borderWidth:1,borderColor:"#aaa",boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",backgroundColor:"#d1d1d1",borderRadius:5},caption:{fontSize:18,width:"100%"},lookupContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#8b8b8b",paddingTop:5,paddingLeft:10,paddingRight:10,borderRadius:5,minWidth:400},nameContainer:{dipslay:"flex",justifyContent:"space-between",marginBottom:5},name:{fontSize:18,fontWeight:800},profession:{fontSize:14,fontWeight:600,backgroundColor:"#ddddd",width:"100%"},row:{display:"flex",flexDirection:"row",justifyContent:"space-between"},label:{paddingBottom:2}},X=l.N.lookup("OboMiscListService","obo"),$={row:{display:"flex",alignItems:"flex-start"},group:{fontSize:20,fontWeight:700,marginRight:15,paddingTop:8}},Z=function(e){var t=e.item;return r.a.createElement(l.I,{style:{paddingBottom:5}},r.a.createElement(l.I,{style:$.row},r.a.createElement("div",{style:$.group},t.objid),r.a.createElement(l.I,null,r.a.createElement(l.S,null,t.title),r.a.createElement("label",null,t.description))))},ee={decimal:l.l,integer:l.v,boolean:function(e){return r.a.createElement("div",{style:ne.checkInfo},r.a.createElement(l.h,e))}},te=function(e){var t=e.category,n=e.dataType,a=void 0===n?"integer":n,i=e.unit,o=e.name,c=ee[a],s=e.caption.toLowerCase();return"boolean"!==a&&(s+=" ("+i.toLowerCase()+")"),r.a.createElement(l.I,null,t&&r.a.createElement(l.x,{style:ne.category},t),r.a.createElement("div",{style:ne.infoContainer},r.a.createElement("label",null,s),r.a.createElement(c,{name:o,fullWidth:!1,variant:"outlined",size:"small",width:120,style:{flexBasis:100}})))},ne={infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20},category:{fontSize:16,fontWeight:600,border:"1px solid #aaa",backgroundColor:"#eee",padding:"2px 10px",margin:"10px 0px"},checkInfo:{width:100,display:"flex",justifyContent:"flex-start",alignItems:"center",borderWidth:1,borderColor:"#aaa",borderRadius:3}},ae={infoTitle:{fontWeight:"bold"},infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20}},re={professionalLookup:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"lightgray"},itemsContainer:{marginLeft:20,display:"flex",flexDirection:"column"},workTypeContainer:{display:"flex",flexDirection:"column",marginLeft:20}},le={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},ancillaryContainer:{marginRight:15,marginBottom:20},ancillaryItem:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginRight:10,border:"1px solid #aaa"}},ie=function(e,t){void 0===t&&(t="");var n=e||{officename:"<OFFICE>",address1:"<ADDRESS1>",address2:"<ADDRESS2>"},a="";a+="Please download and print the "+t+" forms, prepare the ",a+="requirements listed below, and submit at the receiving window of our ",a+=n.officename,a+=" at the ",a+=n.address1,a+=n.address2?", "+n.address2+". ":". ";var r=[];return n.phoneno&&r.push(n.phoneno),n.mobileno&&r.push(n.mobileno),n.email?(r.length>0?(a+="You can email at "+n.email,a+=" or contact us on "+r.join(" or ")):a+="You can email us at "+n.email,a+=" for any inquiries on application."):r.length>0&&(a+="You can contact us on "+r.join(" or ")+" for any inquiries on application."),a},oe={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},infoContainer:{display:"flex",flexDirection:"column",marginRight:10,width:"100%"},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},requirementsContainer:{marginRight:15,marginBottom:20},requirement:{fontSize:"0.9rem"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},ce=l.N.lookup("OnlineBuildingPermitService","obo"),se=[{step:0,component:null},{step:1,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,i=e.appService,o=e.moveNextStep,c=Object(a.useState)(!1)[1],s=Object(a.useState)(!1),p=s[0],d=s[1],E=Object(a.useState)("read")[1],b=Object(a.useState)(!1),y=b[0],v=b[1],h=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1,id:{}}),g=h[0],O=h[1],S=Object(a.useRef)();return Object(a.useEffect)((function(){c(!0),d(null),i.invoke("getApplicant",{appid:t},(function(e,n){e?d(e):n?(n.id||(n.id={}),n.appid=t,O(n),E("read")):E("create"),c(!1)}))}),[]),r.a.createElement("form",{ref:S},r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Building Applicant Details"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:p}),r.a.createElement(l.s,{context:g,handler:O},r.a.createElement(l.i,{items:B,name:"entitytype",caption:"Type of Applicant"}),r.a.createElement(l.V,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==g.entitytype}),r.a.createElement(l.O,null),r.a.createElement(l.I,null,r.a.createElement(l.S,null,"Administrator or contact name of applicant"),r.a.createElement(l.V,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(l.V,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(l.V,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(l.q,{name:"email"}),r.a.createElement(l.E,{name:"mobileno"})),r.a.createElement(l.O,null),r.a.createElement(l.S,null,"Applicant Address"),r.a.createElement(l.h,{caption:"Resident",name:"resident",onChange:function(){var e=T({},g,{appid:t,resident:!g.resident,address:{}});O(e)}}),g.resident?r.a.createElement(u,{orgcode:n.id,name:"address",caption:"Address"}):r.a.createElement(m,{name:"address",caption:"Address"}),r.a.createElement(l.O,null),r.a.createElement(l.S,null,"Proof of Identity"),r.a.createElement(f,{name:"id",onError:function(e){v(e)},dtIssued:g.id.dtissued})),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){!y&&S.current.reportValidity()&&(d(null),i.invoke("saveApplicant",g,(function(e,t){e?d(e):o(),c(!1)})))}}))))}},{step:2,name:"rpu",caption:"Real Property Info",component:function(e){var t=e.partner,n=e.appno,i=e.appService,o=e.moveNextStep,c=Object(a.useState)(),s=c[0],u=c[1],m=Object(a.useState)(!1),p=m[0],d=m[1],f=Object(a.useState)("view-rpus"),E=f[0],b=f[1],y=Object(a.useState)(),v=y[0],h=y[1],g=Object(a.useState)([]),O=g[0],S=g[1],j=Object(a.useState)({}),x=j[0],I=j[1],k=Object(a.useState)(!1),C=k[0],w=k[1],P=Object(a.useRef)();Object(a.useEffect)((function(){"view-rpus"===E&&T()}),[E]);var N=function(){h(),u(null),b("initial")},T=function(){i.invoke("getRpus",{appid:n},(function(e,t){e?u(e):S(t)}))};return r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+n),r.a.createElement(l.R,null,"Real Property Information"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.I,{visibleWhen:"view-rpus"===E},r.a.createElement(l.S,null,"Lot Information"),O.map((function(e){return r.a.createElement(l.I,{style:U.locationContainer,key:e.tdno},r.a.createElement("div",{style:U.tdno},r.a.createElement(l.S,null,"TD No. "+e.tdno)),r.a.createElement("div",{style:U.rpuInfoContainer},r.a.createElement(l.x,{caption:"Title No."},e.titleno),r.a.createElement(l.x,{caption:"PIN"},e.pin),r.a.createElement(l.x,{caption:"Address"},(n=[],(t=e).lotno&&n.push("Lot: "+t.lotno),t.blockno&&n.push("Block: "+t.blockno),t.street&&n.push("Street: "+t.street),t.barangay&&n.push("Barangay: "+t.barangay),n.join(" "))),r.a.createElement(l.x,{caption:"Class"},e.classcode),r.a.createElement(l.x,{caption:"Area"},e.areasqm),r.a.createElement(l.x,{caption:"Owner"},e.owner.name)));var t,n})),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Add Lot Info",action:N}),r.a.createElement(l.d,{caption:"Next",action:function(){u(null),0===O.length?u("Add at least one Lot Information."):o()}}))),r.a.createElement(l.I,{visibleWhen:"initial"===E},r.a.createElement(l.S,null,"Specify the Site Location/Property"),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.O,null),r.a.createElement(l.V,{caption:"Tax Declaration No.",value:v,onChange:h,autoFocus:!0}),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Back to List",action:function(){b("view-rpus")},variant:"text"}),r.a.createElement(l.d,{caption:"Search",action:function(){d(!0),l.N.lookup((t.orgcode||t.id)+":OboOnlineService","obo").invoke("findLocation",{refno:v||newRefno},(function(e,t){e?u(e):(t.owner.resident="local"==t.owner.address.type?1:0,t.owner.address.city&&(t.owner.address.citymunicipality=t.owner.address.city),t.owner.address.municipality&&(t.owner.address.citymunicipality=t.owner.address.municipality),t.owner.ctc={},t.lotowned="1",t.appid=n,"boolean"!=typeof t.bill.ispaid&&(t.bill.ispaid=!0),I(t),b("view-lot")),d(!1)}))},disableWhen:p,loading:p}))),r.a.createElement(l.I,{visibleWhen:"view-lot"===E},r.a.createElement("p",null,"Please check carefully if the information is correct. For any discrepancies, please contact the Assessor's Office before proceeding."),x&&x.bill&&0==x.bill.ispaid&&r.a.createElement("label",{style:U.balanceText},"Note: There is still an unpaid balance of ",r.a.createElement("u",null,"Php ",Object(l.Y)(x.bill.amtdue)),". You can settle this by paying online ",r.a.createElement("a",{href:"/partner/"+t.group.name+"_"+t.name+"/rptis/rptbilling",target:"0"},r.a.createElement("u",null,"here"))),r.a.createElement(l.s,{context:x,handler:I},r.a.createElement(H,{editable:!1}),r.a.createElement(l.O,null),r.a.createElement(G,{name:"owner",orgcode:t.id,owner:x.owner,editable:!0})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:N,caption:"Back"}),r.a.createElement(l.d,{action:function(e){null!==x.bill&&!1===x.bill.ispaid?u("Please settle all unpaid balances first before proceeding"):(u(null),b("edit-owner-info"))},caption:"Next"}))),r.a.createElement(l.I,{visibleWhen:"edit-owner-info"===E},r.a.createElement("form",{ref:P},r.a.createElement("label",null,"Please update the information if necessary"),r.a.createElement(l.s,{context:x,handler:I},r.a.createElement(_,{caption:"Is lot owned or leased?",property:x,name:"lotowned",row:!0,autoFocus:!0}),r.a.createElement(G,{name:"owner",owner:x.owner,orgcode:t.id,editable:!0,showIdEntry:!0,editableAddress:!0,editableIdEntry:!0,onError:function(e){w(e)}})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return b("view-lot")},caption:"Back"}),r.a.createElement(l.d,{action:function(){!C&&P.current.reportValidity()&&(u(null),i.invoke("saveRpu",x,(function(e,t){e?u(e):(T(),b("view-rpus"))})))},caption:"Next"})))))}},{step:3,name:"location",caption:"Project Location",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=c(e.partner.id),u=Object(a.useState)(),m=u[0],p=u[1],d=Object(a.useState)(!1),f=d[0],E=d[1],b=Object(a.useState)({}),y=b[0],v=b[1],h=Object(a.useState)(),g=h[0],O=h[1];return Object(a.useEffect)((function(){E(!0),n.invoke("getLocation",{appid:e.appno},(function(e,t){e?(p(e),E(!1)):t&&t.barangay&&t.barangay.name?(v(t),O(t.barangay.name)):v({})}))}),[]),Object(a.useEffect)((function(){o.length>0&&n.invoke("getRpus",{appid:e.appno},(function(e,t){if(e)p(e);else{var n=t[0],a=y&&y.barangay?y.barangay.name:n.barangay,r=T({},y);y&&y.barangay&&y.barangay.objid||(r.lotno=n.lotno,r.lotarea=n.areasqm,r.blockno=n.blockno,r.street=n.street),r.barangay=o.find((function(e){return e.name===a})),v(r),E(!1)}}))}),[g,o]),f?r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Project Location")):r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Project Location"),r.a.createElement(l.O,null),r.a.createElement(l.I,null,r.a.createElement(l.S,null,"Specify Project Location"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:m}),r.a.createElement(l.s,{context:y,handler:v},r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:"lotno",caption:"Lot No."}),r.a.createElement(l.V,{name:"blockno",caption:"Block No."})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{name:"unitno",caption:"Unit No."}),r.a.createElement(l.V,{name:"bldgno",caption:"Building No."})),r.a.createElement(l.V,{name:"bldgname",caption:"Building Name"}),r.a.createElement(l.V,{name:"street",caption:"Street"}),r.a.createElement(l.V,{name:"subdivision",caption:"Subdivision"}),r.a.createElement(s,{barangays:o,name:"barangay",caption:"Barangay"}),r.a.createElement(l.l,{name:"lotarea",caption:"Lot Area (sq.m.)",textAlign:"left"})),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){p(null),n.invoke("saveLocation",T({appid:t},y),(function(e,t){e?p(e):i()}))}}))))}},{step:4,name:"project",caption:"Project Details",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o={appid:t,apptype:"NEW",worktypes:[],numfloors:1,numunits:1,occupancytype:{objid:null,group:{},division:{}}},c=Object(a.useState)(),s=c[0],u=c[1],m=(Object(a.useState)({}),Object(a.useState)(!1)),p=m[0],d=m[1],f=Object(a.useState)("project-detail"),E=f[0],b=f[1],y=Object(a.useState)("group")[0],v=Object(a.useState)(o),h=v[0],g=v[1],O=Object(a.useState)([])[1],S=Object(a.useState)([])[1],j=Object(a.useState)([])[1],x=Object(a.useState)()[1],I=Object(a.useState)([]),k=I[0],C=I[1],w=Object(a.useState)(!1),P=w[0],N=w[1],A=Object(a.useRef)();return Object(a.useEffect)((function(){d(!0),u(null),z.invoke("getWorkTypes",null,(function(e,t){e?u(e):C(t),d(!1)}))}),[]),Object(a.useEffect)((function(){0!==k.length&&(d(!0),u(null),n.invoke("getProjectInfo",{appid:t},(function(e,t){if(e)u(e);else{if(0===t.worktypes.length)t.worktypes=k;else{var n=k.map((function(e){return t.worktypes.find((function(t){return e.objid===t}))?T({},e,{checked:!0}):e}));t.worktypes=n}t.numunits=t.numunits||1,t.numfloors=t.numfloors||1,x(t.contractor),g(t),b("project-detail")}d(!1)})))}),[k]),Object(a.useEffect)((function(){"group"===y?z.invoke("getOccupancyTypeGroups",null,(function(e,t){e?u(e):O(t)})):"division"===y?z.invoke("getOccupancyTypeDivisions",{groupid:h.occupancytype.group.objid},(function(e,t){e?u(e):S(t)})):"type"===y&&z.invoke("getOccupancyTypes",{divisionid:h.occupancytype.division.objid},(function(e,t){e?u(e):j(t)}))}),[y]),p?r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Project Details")):r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Project Details"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.s,{visibleWhen:"project-detail"===E,context:h,handler:g},r.a.createElement("form",{ref:A},r.a.createElement(l.V,{caption:"Project Title",name:"title",required:!0,autoFocus:!0}),r.a.createElement(l.V,{caption:"Project Description",name:"description",required:!0}),h.occupancytypeid&&r.a.createElement(l.V,{caption:"Occupancy Type",name:"occupancytype.title",required:!0}),r.a.createElement(l.O,null),r.a.createElement(l.v,{caption:"No of Units",name:"numunits",required:!0,fullWidth:!0}),r.a.createElement(l.I,{row:!0},r.a.createElement(l.l,{caption:"Total Floor Area [sq.meter]",name:"totalfloorarea",required:!0,fullWidth:!0,textAlign:"left"}),r.a.createElement(l.l,{caption:"Building Height [meter]",name:"height",required:!0,fullWidth:!0,textAlign:"left"})),r.a.createElement(l.v,{caption:"No. of Storeys",name:"numfloors",required:!0,fullWidth:!0}),r.a.createElement(l.O,null),r.a.createElement(l.l,{caption:"Estimated Cost [Php]",name:"projectcost",required:!0,decimalScale:2,textAlign:"left",fullWidth:!0}),r.a.createElement(l.I,{row:!0},r.a.createElement(l.k,{caption:"Proposed Construction Date",name:"dtproposedconstruction",required:!0}),r.a.createElement(l.k,{caption:"Expected Completion Date",name:"dtexpectedcompletion",required:!0,minDate:h.dtproposedconstruction,helperText:P?"Date should not be before proposed date":null,onError:function(){N(!0)}})),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){A.current.reportValidity()&&(Object(l.gb)(h.dtexpectedcompletion,h.dtproposedconstruction)||(u(null),n.invoke("update",{appid:t,title:h.title,description:h.description,numunits:h.numunits,totalfloorarea:h.totalfloorarea,height:h.height,numfloors:h.numfloors,projectcost:h.projectcost,dtproposedconstruction:h.dtproposedconstruction,dtexpectedcompletion:h.dtexpectedcompletion},(function(e,t){e?u(e):(u(null),d(!1),b("select-worktype"))}))))}})))),r.a.createElement(l.s,{visibleWhen:"select-worktype"===E,context:h,handler:g},r.a.createElement(l.S,null,"Select Work Types"),r.a.createElement(l.I,{style:M.column},h.worktypes.map((function(e,t){return r.a.createElement(l.h,{caption:e.name,name:"worktypes["+t+"].checked",value:e.objid})}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return b("project-detail")}}),r.a.createElement(l.d,{caption:"Next",action:function(){if(u(null),h.worktypes.findIndex((function(e){return!0===e.checked}))>=0){u(null);var e={appid:t,worktypes:h.worktypes.filter((function(e){return e.checked})).map((function(e){return e.objid}))};n.invoke("update",e,(function(e,t){e?u(s):(d(!1),i())}))}else u("Please check at least one work type.")}}))))}},{step:5,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o={appid:t,apptype:"NEW"},c=Object(a.useState)(),s=c[0],u=c[1],m=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)(o)),p=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getProjectInfo",{appid:t},(function(e,t){e?u(e):(b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{appid:t,supervisorid:e.objid},(function(t,n){t?u(t):(u(null),b(e))}))};return r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Project Details"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.I,null,r.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),r.a.createElement(l.O,{height:10}),E&&E.lastname&&r.a.createElement(l.I,null,r.a.createElement(Q,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y,role:p.type?p.type.supervisorrole:null})),(!E||!E.lastname)&&r.a.createElement(K,{caption:"Search Professional",onSelect:y,fullWidth:!1}),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){E?i():u("Please select a professional.")},disableWhen:!E||!E.objid}))))}},{step:6,name:"occupancy",caption:"Occupancy Type",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)(!1),m=u[0],p=u[1],d=Object(a.useState)("select-occupancytype")[0],f=Object(a.useState)("group"),E=f[0],b=f[1],y=Object(a.useState)({}),v=y[0],h=y[1],g=Object(a.useState)([]),O=g[0],S=g[1],j=Object(a.useState)([]),x=j[0],I=j[1],k=Object(a.useState)([]),C=k[0],w=k[1],P=Object(a.useState)(!1)[1],N=Object(a.useState)(!1)[1];return Object(a.useEffect)((function(){p(!0),n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):(h({occupancytype:t.occupancytype}),P(t.occupancytype.objid)),p(!1)}))}),[]),Object(a.useEffect)((function(){"group"===E?(p(!0),X.invoke("getOccupancyTypeGroups",null,(function(e,t){e?s(e):S(t),p(!1)}))):"division"===E?(p(!0),X.invoke("getOccupancyTypeDivisions",{groupid:v.occupancytype.group.objid},(function(e,t){e?s(e):I(t),p(!1)}))):"type"===E&&(p(!0),X.invoke("getOccupancyTypes",{divisionid:v.occupancytype.division.objid},(function(e,t){e?s(e):w(t),p(!1)})))}),[E]),r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Occupancy Type"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:c}),r.a.createElement(l.I,{visibleWhen:"select-occupancytype"===d},r.a.createElement(l.s,{visibleWhen:"group"===E,context:v,handler:h},r.a.createElement(l.S,null,"Select Occupancy Group"),r.a.createElement(l.L,{name:"occupancytype.group.objid",list:O,Control:Z}),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){v.occupancytype.group.objid?b("division"):s("Kindly select an occupancy group.")},disableWhen:m,loading:m}))),r.a.createElement(l.s,{visibleWhen:"division"===E,context:v,handler:h},r.a.createElement(l.S,null,"Select Occupancy Group Division"),r.a.createElement(l.L,{name:"occupancytype.division.objid",list:x,Control:Z}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Back",action:function(){return b("group")}}),r.a.createElement(l.d,{caption:"Next",action:function(){v.occupancytype.division.objid?b("type"):s("Kindly select an occupancy division group.")},disableWhen:m,loading:m}))),r.a.createElement(l.s,{visibleWhen:"type"===E,context:v,handler:h},r.a.createElement(l.S,null,"Select Occupancy Type"),r.a.createElement(l.L,{name:"occupancytype.objid",list:C,Control:Z}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Back",action:function(){return b("division")}}),r.a.createElement(l.d,{caption:"Next",action:function(){v.occupancytype.objid?(p(!0),n.invoke("updateOccupancyType",{appid:t,occupancytype:v.occupancytype},(function(e,t){e?s(e):(s(null),p(!1),N(!1),i()),p(!1)}))):s("Kindly select an occupancy type.")},disableWhen:m,loading:m})))))}},{step:7,name:"accessories",caption:"Accessories",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)(!1),m=u[0],p=u[1],d=Object(a.useState)("initial"),f=d[0],E=d[1],b=Object(a.useState)("TRUE"),y=b[0],v=b[1],h=Object(a.useState)([]),g=h[0],O=h[1],S=Object(a.useState)([]),j=S[0],x=S[1],I=Object(a.useState)([]),k=I[0],C=I[1],w=function(){p(!0),n.invoke("getAccessories",{appid:t},(function(e,t){t||(t=[]),O(t),function(e){return!!(e.length>0&&/j.*/i.test(e[0].occupancytypeid))}(t)&&E("infos"),p(!1)}))};return Object(a.useEffect)((function(){p(!0),l.N.lookup("OboMiscListService","obo").invoke("getAccessoryOccupancyTypes",null,(function(e,t){if(e)s(e);else{var n={};t.forEach((function(e){n[""+e.objid.toLowerCase()]=!1})),C(t),x(n)}p(!1)})),w()}),[]),r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(l.R,null,"Accessories"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:c}),r.a.createElement(l.I,{visibleWhen:"initial"===f},r.a.createElement("p",null,"Does the plan include accessories?"),r.a.createElement(l.L,{name:"hasAccessories",value:y,onChange:v},r.a.createElement(l.w,{caption:"Yes",value:"TRUE"}),r.a.createElement(l.w,{caption:"No",value:"FALSE"})),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){"TRUE"===y?E("select-accessories"):(s(null),p(!0),n.invoke("saveAccessories",{appid:t,items:[]},(function(e,t){e?s(e):i(),p(!1)})))},disableWhen:m,loading:m}))),r.a.createElement(l.I,{visibleWhen:"select-accessories"===f},r.a.createElement(l.S,null,"Select accessory to add if applicable"),r.a.createElement(l.s,{context:j,handler:x},k.map((function(e){return r.a.createElement(l.h,{key:e.objid,caption:e.title,name:""+e.objid.toLowerCase()})}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return E("initial")}}),r.a.createElement(l.d,{caption:"Next",action:function(){if(Object.keys(j).length>0){p(!0);var e=function(){var e=[];for(var n in j)j[n]&&e.push(n);return{appid:t,items:e}}();n.invoke("saveAccessories",e,(function(e,t){e?s(e):(w(),E("infos")),p(!1)}))}else s("Select at least one accessory type before proceeding.")},disableWhen:m,loading:m}))),r.a.createElement(l.s,{visibleWhen:"infos"===f,context:g,handler:O},g.map((function(e,t){return r.a.createElement("div",{key:e.objid},r.a.createElement(l.x,{style:ae.infoTitle},e.type.title),e.infos.map((function(e,n){return r.a.createElement(te,{key:e.name+":"+t+":"+n,name:"["+t+"].infos["+n+"].value",dataType:e.datatype,caption:e.caption,unit:e.unit})})))})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return E("select-accessories")}}),r.a.createElement(l.d,{caption:"Next",action:function(){p(!0);var e={appid:t,infos:[]};g.forEach((function(t){var n;(n=e.infos).push.apply(n,t.infos)})),n.invoke("saveAccessoryInfos",e,(function(e,t){e?s(e):i(),p(!1)}))},disableWhen:m,loading:m}))))}},{step:8,name:"ancillarylist",caption:"Other Permits",component:function(e){var t,n,i,o=e.partner,c=e.appno,s=e.appService,u=e.moveNextStep,m=Object(a.useState)(!1),p=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],h=y[1],g=Object(a.useState)("permit-list"),O=g[0],S=g[1],j=Object(a.useState)([]),x=j[0],I=j[1],k=Object(a.useState)([]),C=k[0],w=k[1],P=Object(a.useState)({worktypes:[],type:{}}),N=P[0],A=P[1],W=function(){h(!0),s.invoke("getAncillaryPermits",{appid:c},(function(e,t){e?b(e):(w(t),p||0!==t.length||(d(!0),S("available-list"))),h(!1)}))};Object(a.useEffect)((function(){h(!0),s.invoke("getAvailableAncillaryPermitTypes",{appid:c},(function(e,t){e?b(e):I(t),h(!1)}))}),[C]),Object(a.useEffect)((function(){W()}),[O,p]);var V=!1;C.length>0&&(V=C.findIndex((function(e){return!e.designprofessionalid}))>=0);var R=null;return r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+c),r.a.createElement(l.R,null,"Other Permits"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:E}),r.a.createElement(l.I,{visibleWhen:"permit-list"===O},r.a.createElement("label",null,"Click on edit ",r.a.createElement(l.p,{fontSize:"small",color:"primary"})," for each document and complete the details."),r.a.createElement(l.O,{height:40}),C.map((function(e){return r.a.createElement(l.I,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement(l.I,{row:!0},e.designprofessionalid?r.a.createElement("div",{style:{width:40}},r.a.createElement(l.g,{style:{color:"green",paddingRight:10}})):r.a.createElement("div",{style:{width:40}}),r.a.createElement("label",null,e.type.title)),r.a.createElement(l.I,{row:!0},e.designprofessionalid&&r.a.createElement(l.K,{caption:null,href:"/jreports/partner/"+o.group.name+"_"+o.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),r.a.createElement(l.o,{action:function(){return t=e,h(!0),void s.invoke("getAncillaryPermit",{objid:t.objid},(function(e,t){e?b(e):(b(null),function(e){h(!0),l.N.lookup("OboMiscListService","obo").invoke("getWorkTypes",{typeid:e.type.objid},(function(t,n){t?b(t):n&&n.length>0?(n.forEach((function(t){e.worktypes.findIndex((function(e){return e.toLowerCase()===t.name.toLowerCase()}))>=0&&(t.checked=!0)})),A(T({},e,{worktypes:n})),S("select-worktypes")):(S(e.infos.length>0?"infos":1===e.type.includecost?"cost":"professional"),A(e)),h(!1)}))}(t)),h(!1)}));var t},size:"small"}),r.a.createElement(l.m,{action:function(){return t=e,h(!0),void s.invoke("removeAncillaryPermit",{objid:t.objid},(function(e,t){e?b(e):(b(null),W()),h(!1)}));var t},size:"small"})))})),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Add New Permits",action:function(){return S("available-list")}}),r.a.createElement(l.d,{caption:"Next",action:function(){var e=[];C.forEach((function(t){t.designprofessionalid||e.push(t.type.title)})),1===e.length?b("Permit "+e[0]+" is not processed"):e.length>1?b("The following permist are not processed: "+e.join(",")):u()},disableWhen:V}))),r.a.createElement(l.s,{visibleWhen:"select-worktypes"===O,context:N,handler:A},r.a.createElement("h4",null,N.type.title),r.a.createElement(l.S,null,"Select Work Types"),r.a.createElement(l.I,{style:re.workTypeContainer},N.worktypes.map((function(e,t){return r.a.createElement(l.h,{caption:e.name.toUpperCase(),name:"worktypes["+t+"].checked",value:e.name})}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return S("permit-list")}}),r.a.createElement(l.d,{caption:"Next",action:function(){b(null),b(null),h(!0);var e={objid:N.objid,worktypes:N.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))};s.invoke("updateAncillaryPermit",e,(function(e,t){e?b(E):(S("infos"),h(!1)),h(!1)}))},disableWhen:v,loading:v}))),r.a.createElement(l.s,{visibleWhen:"infos"===O,context:N,handler:A},r.a.createElement(l.S,null,null===(t=N.type)||void 0===t?void 0:t.title),r.a.createElement(l.O,null),r.a.createElement("p",null,"Please fill the applicable values and click Save and Complete when done."),N.infos&&N.infos.map((function(e,t){var n=null;return null!==R&&R.category===e.category||(n=e.category,R=e),r.a.createElement(te,{key:e.name+":"+t,name:"infos["+t+"].value",category:n,dataType:e.datatype,caption:e.caption,unit:e.unit})})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){S(N.worktypes&&N.worktypes.length>0?"select-worktypes":"permit-list")}}),r.a.createElement(l.d,{caption:"Next",action:function(){h(!0),s.invoke("updateAncillaryPermit",{objid:N.objid,projectcost:N.projectcost,equipmentcost:N.equipmentcost},(function(e,t){e?b(e):S(1===N.type.includecost?"cost":"professional"),h(!1)}))},disableWhen:v,loading:v}))),r.a.createElement(l.I,{visibleWhen:"available-list"===O},r.a.createElement(l.S,null,"Select ancillary and other permits to include in the project"),r.a.createElement(l.s,{context:x,handler:I,style:re.itemsContainer},x.map((function(e,t){return r.a.createElement(l.h,{key:e.objid,caption:e.title,name:"["+t+"].selected"})}))),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){var e=x.filter((function(e){return!0===e.selected}));e.length>0?(h(!0),w(e),s.invoke("saveAncillaryPermits",{appid:c,permits:e},(function(e,t){e?b(e):(b(null),S("permit-list")),h(!1)}))):S("permit-list")},disableWhen:v,loading:v}))),r.a.createElement(l.s,{visibleWhen:"cost"===O,context:N,handler:A},r.a.createElement(l.S,null,null===(n=N.type)||void 0===n?void 0:n.title),r.a.createElement(l.l,{name:"projectcost",caption:"Project Cost",textAlign:"left",fullWidth:!1}),r.a.createElement(l.l,{name:"equipmentcost",caption:"Equipment Cost",textAlign:"left"}),r.a.createElement(l.O,null),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return S("infos")}}),r.a.createElement(l.d,{caption:"Next",action:function(){h(!0),b(null),s.invoke("saveAncillaryPermit",{appid:c,objid:N.objid,infos:N.infos},(function(e,t){e?b(e):S("professional"),h(!1)}))},disableWhen:v,loading:v}))),r.a.createElement(l.s,{visibleWhen:"professional"===O,context:N,handler:A},r.a.createElement(l.S,null,null===(i=N.type)||void 0===i?void 0:i.title),r.a.createElement(l.O,null),r.a.createElement(Q,{caption:"Design Professional",professional:N.designprofessional,onSelectProfessional:function(e){A(T({},N,{designprofessional:e,designprofessionalid:e.objid}))},role:N.type.designprofessionalrole}),r.a.createElement(l.O,null),r.a.createElement(Q,{caption:"Supervisor in Charge Professional",professional:N.supervisor,onSelectProfessional:function(e){A(T({},N,{supervisor:e,supervisorid:e.objid}))},role:N.type.supervisorrole}),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return S("permit-list")}}),r.a.createElement(l.d,{caption:"Save and Complete",action:function(){if(b(null),N.designprofessionalid)if(N.supervisorid){h(!0);var e=T({},N,{worktypes:N.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))});s.invoke("saveAncillaryPermit",e,(function(e,t){e?b(e):S("permit-list"),h(!1)}))}else b("Supervisor is required.");else b("Design Professional is required.")},disableWhen:v,loading:v}))))}},{step:9,name:"confirm",caption:"Confirm",component:function(e){var t=e.partner,n=e.appno,i=e.appService,o=e.moveNextStep,c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)()[1],p=Object(a.useState)(!1),d=p[0],f=p[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)([]),h=v[0],g=v[1],O=(Object(a.useState)(!1),function(){m(null),f(!1)});return Object(a.useEffect)((function(){f(!0),i.invoke("getApplication",{appid:n},(function(e,t){e?m(e):(y(t),O())})),f(!0),i.invoke("getAncillaryPermits",{appid:n},(function(e,t){e?m(e):(g(t),O())}))}),[]),r.a.createElement(l.I,null,r.a.createElement("label",null,"Tracking No. "+n),r.a.createElement(l.R,null,"Confirm Application"),r.a.createElement(l.O,null),r.a.createElement(l.G,{open:s,type:"confirm",msg:"Permit processing will now be completed. Make sure that all information are correct.",onAccept:function(){u(!1),o("END")},onCancel:function(){return u(!1)}}),r.a.createElement(l.B,{visibleWhen:d}),r.a.createElement("p",null,"Please confirm the info and preview each permit application before submitting"),r.a.createElement(l.s,{visibleWhen:!d,context:b,handler:y},r.a.createElement(l.I,{style:le.container},r.a.createElement(l.I,{style:le.linkContainer},r.a.createElement(l.K,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n}),r.a.createElement(l.n,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n})),r.a.createElement(l.I,null,r.a.createElement(l.V,{caption:"Tracking No.",name:"objid",readOnly:!0}),r.a.createElement(l.V,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(l.V,{caption:"Project Location",expr:function(){if(!b.location)return"";var e=[];return b.location.lotno&&e.push("Lot: "+b.location.lotno),b.location.blockno&&e.push("Block: "+b.location.blockno),b.location.street&&e.push("Street: "+b.location.street),b.location.barangay.name&&e.push("Barangay: "+b.location.barangay.name),e.join(" ")},readOnly:!0}),r.a.createElement(l.O,null),r.a.createElement(l.V,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(l.V,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),r.a.createElement(l.V,{caption:"Type of Work",expr:function(){var e,t="";return b.worktypes&&b.worktypes.length>0&&(t=null===(e=b.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0}),r.a.createElement(l.V,{caption:"Supervisor in Charge of Construction",expr:function(){var e="";return b.contractor&&(e=b.contractor.lastname+", "+b.contractor.firstname+" "+b.contractor.middlename),e},readOnly:!0})),r.a.createElement(l.I,null,r.a.createElement(l.I,{row:!0},r.a.createElement(l.v,{caption:"No. of Units",name:"numunits",readOnly:!0}),r.a.createElement(l.v,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),r.a.createElement(l.l,{caption:"Bldg. Height",name:"height",readOnly:!0,textAlign:"left"})),r.a.createElement(l.O,null),r.a.createElement(l.I,{row:!0},r.a.createElement(l.l,{caption:"Total Area (sqm)",name:"totalfloorarea",readOnly:!0,textAlign:"left",fullWidth:!0}),r.a.createElement(l.l,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left",fullWidth:!0})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(l.V,{caption:"Est. Completion Date",name:"dtexpectedcompletion",readOnly:!0})))),r.a.createElement(l.O,null),r.a.createElement(l.I,{style:le.ancillaryContainer},r.a.createElement(l.S,{style:le.label},"Other Permits"),r.a.createElement(l.I,{visibleWhen:h.length>0},h.map((function(e){return r.a.createElement(l.I,{style:le.ancillaryItem},r.a.createElement("label",{style:{marginLeft:20}},e.type.title),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),r.a.createElement(l.n,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid})))})))),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Submit",action:function(){u(!0)}}))))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.partner,n=e.appno,i=e.appService,o=e.history,c=Object(a.useState)(),s=c[0],u=c[1],m=Object(a.useState)(!1)[1],p=Object(a.useState)({}),d=p[0],f=p[1],E=Object(a.useState)([]),b=E[0],y=E[1],v=function(){u(null),m(!1)};Object(a.useEffect)((function(){m(!0),i.invoke("getProjectInfo",{appid:n},(function(e,t){e?u(e):(f(t),v())})),m(!0),i.invoke("getRequirements",{appid:n},(function(e,t){e?u(e):(y(t),v())}))}),[]);var h=[];d.location&&(d.location.lotno&&h.push("Lot: "+d.location.lotno),d.location.blockno&&h.push("Block: "+d.location.blockno),d.location.street&&h.push("Street: "+d.location.street),d.location.barangay.name&&h.push("Barangay: "+d.location.barangay.name));var g="";d.contractor&&(g=d.contractor.lastname+", "+d.contractor.firstname+" "+d.contractor.middlename,g+="\n"+d.contractor.profession,g+=" PRC NO.: "+d.contractor.prc.idno+" Issued: "+d.contractor.prc.dtissued);var O=ie(d.obocontactinfo,"Building and Ancillary Permit");return r.a.createElement(l.I,null,r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.s,{context:d,handler:f},r.a.createElement("label",null,O),r.a.createElement(l.O,{height:10}),r.a.createElement(l.I,{style:oe.container},r.a.createElement(l.I,{style:oe.infoContainer},r.a.createElement(l.V,{caption:"Tracking No.",name:"objid",readOnly:!0}),r.a.createElement(l.V,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(l.V,{caption:"Location",expr:function(){return h.join(" ,")},readOnly:!0}),r.a.createElement(l.V,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(l.l,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left"}),r.a.createElement(l.I,{row:!0},r.a.createElement(l.k,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(l.k,{caption:"Est. End Date",name:"dtexpectedcompletion",readOnly:!0})),r.a.createElement(l.V,{caption:"Supervisor/In Charge of Project",expr:function(){return g},readOnly:!0,multiline:!0,rows:2})))),r.a.createElement(l.O,null),r.a.createElement("h3",null,"List of Requirements:"),r.a.createElement(l.I,{style:oe.requirementsContainer},b.map((function(e,n){var a=e.title.split("\n"),i=function(e){if(1===e.length)return null;var t=e.map((function(e,t){return 0!==t&&e?r.a.createElement("li",{style:oe.requirement},e):null}));return r.a.createElement("ul",null,t)}(a),o=function(e,t){var n;return t.docs?(n=t.docs.map((function(t){return r.a.createElement(l.I,{key:t.reportid,style:oe.document},r.a.createElement("label",{style:{marginLeft:20}},t.title),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),r.a.createElement(l.n,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))})),r.a.createElement(l.I,{style:{margin:"0px 20px"}},n)):null}(t,e);return r.a.createElement(l.I,null,r.a.createElement("p",{key:n,style:oe.requirement},n+1+".  "+a[0]),o,i)}))),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Return",action:function(){return o.push("/partner/"+t.group.name+"_"+t.name+"/services")}})))}}],ue=function(e){var t=Object(a.useState)(!1),n=t[0],i=t[1],o=Object(a.useState)(!1),c=o[0],s=o[1],u=Object(a.useState)("init"),m=u[0],p=u[1],d=Object(a.useState)(Object(l.bb)(e.location,"appid")),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1],h=Object(a.useState)({step:1}),g=h[0],O=h[1],S=Object(a.useState)(1),j=S[0],x=S[1],I=e.partner,k=e.service,C=e.history;y!==e.location.hash&&v(e.location.hash);var w=function(){"init"===m&&(p("apptype"),e.history.push(""+location.pathname))};Object(a.useEffect)((function(){f?(i(!0),ce.invoke("findCurrentInfo",{appid:f},(function(t,n){var a=I.orgcode||I.id;t?s(t):n?a!=n.orgcode?(s("The application number provided is not for this local government"),w()):(O(n),x(n.step),p("processing"),e.history.push(location.pathname+"?appid="+f+"#"+se[n.step].name)):(s("Application no. does not exist"),w()),i(!1)}))):p("apptype")}),[f]),Object(a.useEffect)((function(){if(y){var e=se.find((function(e){return e.name===y.substring(1)}));x(e.step)}}),[y]);var P=function(t){x(t),e.history.push(location.pathname+"?appid="+f+"#"+se[t].name)};if("init"===m||n)return r.a.createElement("div",null,r.a.createElement(l.y,null));if("apptype"===m)return r.a.createElement(W,{partner:I,appService:ce,service:k,error:c,onCancel:C.goBack,onSubmit:function(e){var t=e.appType,n=e.appno;"new"===t?p(t):n&&E(n)}});if("new"===m)return r.a.createElement(q,T({},e,{handler:function(e){E(e),p("processing")},onCancel:function(){return e.history.goBack()}}));var N=se[j],A=N.component,V={partner:I,appno:f,pages:se,moveNextStep:function(e){j<g.step&&1!==g.step?(x(g.step),P(g.step)):ce.invoke("update",{appid:f,state:e,step:j+1},(function(e,t){e?s(e):(x(t.step),O(T({},g,{step:t.step})),P(t.step))}))},appService:ce,stepCompleted:j<g.step,history:e.history};return r.a.createElement(l.H,null,g.step<se.length&&r.a.createElement(l.I,{target:"left",style:me.stepperContainer},r.a.createElement(l.Q,{steps:se,completedStep:g.step,activeStep:j,handleStep:P})),r.a.createElement(l.e,null,r.a.createElement(l.W,null,k.title),r.a.createElement(A,T({page:N},V))))},me={stepperContainer:{paddingLeft:40,marginBottom:50,overflowY:"auto",overflowX:"hidden",height:"80vh"}},pe=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],de=[{name:"email",title:"Email Verification"},{name:"specifybldgpermit",title:"Specify Building Permit"},{name:"verifybldgpermit",title:"Verify Building Permit Information"},{name:"confirmation",title:"Confirmation"},{name:"newapp",title:"New Application "}],fe=function(e){var t=e.partner,n=e.service,i=e.onComplete,o=e.appService,c=e.onCancel,s=Object(a.useState)(),u=s[0],m=s[1],p=Object(a.useState)({}),d=p[0],f=p[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)("new")[0],h=Object(a.useState)(),g=h[0],O=h[1],j=Object(a.useState)(),x=j[0],I=j[1],k=Object(a.useState)({}),C=k[0],w=k[1],P=Object(a.useState)(0),N=P[1],T=de[P[0]],A=function(){N((function(e){return e+1}))},W=function(){N((function(e){return e-1}))};return r.a.createElement(l.H,null,"email"===T.name?r.a.createElement(S,{title:n.title,showName:!0,onCancel:c,onVerify:function(e){y(e),A()},partner:t,connection:"obo"}):r.a.createElement(l.e,null,r.a.createElement(l.W,null,n.title),r.a.createElement(l.I,{visibleWhen:"specifybldgpermit"===T.name},r.a.createElement(l.R,null,T.title),r.a.createElement(l.O,{height:30}),r.a.createElement(l.V,{caption:"Building Permit No.",value:x,onChange:I,variant:"outlined",fullWidth:!1,required:!0,error:d.bldgPermitNo||u,helperText:d.bldgPermitNo||u,size:"small",autoFocus:!0}),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:W}),r.a.createElement(l.d,{caption:"Next",action:function(){x?(m(null),l.N.lookup(t.id+":OboOnlineService","obo").invoke("findBldgPermitNo",{permitno:x},(function(e,t){e?m(e):(w(t),A())}))):f({bldgPermitNo:"Please specify the Building Permit No."})}}))),r.a.createElement(l.s,{visibleWhen:"verifybldgpermit"===T.name,context:C,handler:w},r.a.createElement(l.R,null,"Verify Building Permit Information"),r.a.createElement(l.O,{height:30}),r.a.createElement(l.V,{caption:"Building Permit No.",name:"permitno",readOnly:!0}),r.a.createElement(l.V,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(l.O,null),r.a.createElement(l.V,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(l.V,{caption:"Location",name:"location.text",readOnly:!0}),r.a.createElement(l.l,{caption:"Project Cost",name:"projectcost",readOnly:!0}),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:W}),r.a.createElement(l.d,{caption:"Next",action:function(){A()}}))),r.a.createElement(l.I,{visibleWhen:"confirmation"===T.name},r.a.createElement(V,{partner:t,error:u,onCancel:W,onContinue:function(){o.invoke("create",{orgcode:t.id,apptype:v,permittype:C.apptype,applicant:C.applicant,bldgpermit:C,contact:b},(function(e,t){e?m(e):(O(t.objid),A())}))}})),r.a.createElement(l.I,{visibleWhen:"newapp"===T.name,width:400},r.a.createElement(R,{appno:g,onContinue:function(){i({appType:"new",appno:g})}}))))},Ee={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},columnTitle:{fontWeight:"bold",textAlign:"center",width:300,padding:10},row:{display:"flex",flexDirection:"row",alignItems:"flex-start"},label:{width:"100%"},item:{width:400,marginRight:10}},be={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},ye={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},ve={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"}},he={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"},requirementsContainer:{marginRight:15,marginBottom:20},requirement:{fontSize:"0.9rem"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},ge=l.N.lookup("OnlineOccupancyPermitService","obo"),Oe=[{step:0,component:null},{step:1,name:"apptype",caption:"Application Type",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=Object(a.useState)(),c=o[0],s=o[1],u=(Object(a.useState)(!1),Object(a.useState)({})),m=u[0],p=u[1];return Object(a.useEffect)((function(){s(null),n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):p(t)}))}),[]),r.a.createElement(l.I,null,r.a.createElement(l.r,{msg:c}),r.a.createElement(l.s,{context:m,handler:p},r.a.createElement(l.L,{name:"apptype"},r.a.createElement(l.w,{caption:"Full (Completed)",value:"full"}),r.a.createElement(l.w,{caption:"Partial",value:"partial"}))),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){n.invoke("update",{objid:m.objid,apptype:m.apptype},(function(e,t){e?s(e):i()}))}})))}},{step:2,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,i=e.appService,o=e.movePrevStep,c=e.moveNextStep,s=Object(a.useState)(!1),p=s[0],d=s[1],E=Object(a.useState)(!1),b=E[0],y=E[1],v=Object(a.useState)("read")[1],h=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1}),g=h[0],O=h[1],S=Object(a.useRef)();return Object(a.useEffect)((function(){d(!0),y(null),i.invoke("getApplicant",{appid:t},(function(e,t){e?y(e):O(t||{}),d(!1),v("read")}))}),[]),r.a.createElement(l.I,null,r.a.createElement(l.r,{msg:b}),r.a.createElement(l.s,{context:g,handler:O},r.a.createElement("form",{ref:S},r.a.createElement(l.i,{items:pe,name:"entitytype",caption:"Type of Applicant"}),r.a.createElement(l.V,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==g.entitytype}),r.a.createElement(l.O,null),r.a.createElement(l.I,null,r.a.createElement(l.S,null,"Administrator or contact name of applicant"),r.a.createElement(l.V,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(l.V,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(l.V,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(l.q,{name:"email"}),r.a.createElement(l.E,{name:"mobileno"})),r.a.createElement(l.O,null),r.a.createElement(l.S,null,"Applicant Address"),r.a.createElement(l.h,{caption:"Resident",name:"resident",onChange:function(){var e=T({},g,{resident:!g.resident,address:{}});O(e)}}),g.resident?r.a.createElement(u,{orgcode:n.id,name:"address",caption:"Address",isResident:g.resident}):r.a.createElement(m,{name:"address",caption:"Address"}),r.a.createElement(l.O,null),r.a.createElement(l.S,null,"Proof of Identity"),r.a.createElement(f,{name:"id"}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){S.current.reportValidity()&&(g.resident&&g.address&&!g.address.barangay||(y(null),d(!0),i.invoke("saveApplicant",g,(function(e,t){e?y(e):c(),d(!1)}))))},disableWhen:p,loading:p})))}},{step:3,name:"actualcost",caption:"Actual Costs",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=e.movePrevStep,c=Object(a.useState)(),s=c[0],u=c[1],m=Object(a.useState)({}),p=m[0],d=m[1],f=Object(a.useState)({items:[{caption:"Total Materials Cost",field:"totalmaterialcost",value:0},{caption:"Total Direct Cost",field:"totaldirectlaborcost",value:0},{caption:"Total Equipment Cost",field:"totalequipmentcost",value:0},{caption:"Total Other Cost",field:"totalothercost",value:0}]}),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],h=y[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){if(e)u(e);else{d(t);var n=T({},E);n.items.forEach((function(e){e.value=t[e.field]})),b(n)}}))}),[t]),r.a.createElement(l.I,{style:{maxWidth:600}},r.a.createElement(l.x,null,"Please indicate the actual cost of construction."),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.s,{context:E,handler:b,style:be.container},E.items.map((function(e,t){return r.a.createElement(l.I,{key:e.field,style:be.row},r.a.createElement(l.x,{caption:e.caption,style:be.label}),r.a.createElement(l.l,{name:"items["+t+"].value",variant:"outlined",style:be.item,fullWdith:!1}))}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){var e=T({},p);E.items.forEach((function(t){e[t.field]=t.value})),h(!0),n.invoke("update",e,(function(e,t){e?u(e):i(),h(!1)}))},disableWhen:v,loading:v})))}},{step:4,name:"firecodefee",caption:"Fire Code Fees",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=e.movePrevStep,c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)(),p=m[0],d=m[1],f=(Object(a.useState)({}),Object(a.useState)({items:[]})),E=f[0],b=f[1];return Object(a.useEffect)((function(){n.invoke("getAppInfos",{appid:t},(function(e,t){e?d(e):b(T({},E,{items:t}))}))}),[t]),r.a.createElement(l.I,{style:{maxWidth:600}},r.a.createElement(l.x,null,"Please indicate the other cost of construction."),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:p}),r.a.createElement(l.s,{context:E,handler:b,style:ye.container},E.items.map((function(e,t){return r.a.createElement(l.I,{key:e.objid,style:ye.row},r.a.createElement(l.x,{caption:e.caption,style:ye.label}),r.a.createElement(l.l,{name:"items["+t+"].value",variant:"outlined",style:ye.item,fullWdith:!1}))}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){u(!0),n.invoke("saveAppInfos",{appid:t,infos:E.items},(function(e,t){e?d(e):i(),u(!1)}))},disableWhen:s,loading:s})))}},{step:5,name:"plannedactual",caption:"Planned vs Actual",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=e.movePrevStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),u=s[0],m=s[1],p=Object(a.useState)({}),d=p[0],f=p[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):y(t)}))}),[t]),r.a.createElement(l.I,{style:{maxWidth:600}},r.a.createElement(l.x,null,"Please indicate the actual values of construction."),r.a.createElement(l.O,null),r.a.createElement(l.s,{context:b,handler:y,style:Ee.container},r.a.createElement("form",{ref:v},r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"",style:Ee.label}),r.a.createElement("div",{style:Ee.columnTitle},"Planned"),r.a.createElement("div",{style:Ee.columnTitle},"Actual")),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"Project Total Cost",style:Ee.label}),r.a.createElement(l.l,{name:"bldgpermit.projectcost",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.l,{name:"actualprojectcost",disabled:!0,style:Ee.item,fullWdith:!1,variant:"outlined"})),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"Total Floor Area (sqm)",style:Ee.label}),r.a.createElement(l.l,{name:"bldgpermit.totalfloorarea",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.l,{name:"actualtotalfloorarea",required:!0,style:Ee.item,fullWdith:!1,variant:"outlined",autoFocus:!0})),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"No. of Units",style:Ee.label}),r.a.createElement(l.l,{name:"bldgpermit.numunits",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.l,{name:"actualnumunits",style:Ee.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"No. of Floors",style:Ee.label}),r.a.createElement(l.l,{name:"bldgpermit.numfloors",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.l,{name:"actualnumfloors",style:Ee.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"Height (m)",style:Ee.label}),r.a.createElement(l.l,{name:"bldgpermit.height",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.l,{name:"actualheight",style:Ee.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"Start Date",style:Ee.label}),r.a.createElement(l.k,{name:"bldgpermit.dtproposedconstruction",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.k,{name:"dtactualstarted",style:Ee.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(l.I,{style:Ee.row},r.a.createElement(l.x,{caption:"Completion Date",style:Ee.label}),r.a.createElement(l.k,{name:"bldgpermit.dtexpectedcompletion",disabled:!0,variant:"outlined",style:Ee.item,fullWdith:!1}),r.a.createElement(l.k,{name:"dtactualcompleted",style:Ee.item,fullWdith:!1,variant:"outlined",required:!0,error:d.dtactualcompleted,helperText:d.dtactualcompleted})),r.a.createElement(l.O,null))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){v.current.reportValidity()&&function(){var e={};return b.dtactualstarted&&b.dtactualcompleted&&Object(l.gb)(b.dtactualcompleted,b.dtactualstarted)&&(e.dtactualcompleted="Actual date completed should be after actual date started."),Object(l.db)(e)?(f(e),!1):(f({}),!0)}()&&(m(!0),n.invoke("update",b,(function(e,t){e?c(e):i(),m(!1)})))},disableWhen:u,loading:u})))}},{step:6,name:"contractor",caption:"Contractor",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,o=e.movePrevStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),u=s[0],m=s[1],p=Object(a.useState)({})[0],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(!1),y=b[0],v=b[1],h=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):(t.contractor=t.contractor||{pcab:{},manager:{}},t.contractor.pcab||(t.contractor.pcab={}),v(!(!t.contractor||!t.contractor.name)),E(t))}))}),[t]),r.a.createElement(l.I,null,r.a.createElement(l.x,null,"Please specify contractor if available"),r.a.createElement(l.O,null),r.a.createElement(l.h,{value:y,onChange:v,caption:"Is undertaken by a Contractor?"}),r.a.createElement(l.s,{visibleWhen:y,context:f,handler:E},r.a.createElement("form",{ref:h},r.a.createElement(l.V,{name:"contractor.name",caption:"Contractor",required:!0,error:p.name}),r.a.createElement(l.V,{name:"contractor.address",caption:"Address",required:!0,error:p.address}),r.a.createElement(l.V,{name:"contractor.pcab.idno",caption:"PCAB License No.",required:!0,error:p.pcabidno}),r.a.createElement(l.k,{name:"contractor.pcab.dtvalid",caption:"Validity Date",required:!0,error:p.pcabdtvalid}),r.a.createElement(l.V,{name:"contractor.tin",caption:"TIN",required:!0,error:p.tin}),r.a.createElement(l.V,{name:"contractor.manager.name",caption:"Authorized Managing Officer",required:!0,error:p.manageroffice}),r.a.createElement(l.q,{name:"contractor.manager.email",required:!0,error:p.manageremail}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){if(m(!0),y){if(!h.current.reportValidity())return;n.invoke("update",{objid:f.objid,contractor:f.contractor},(function(e,t){e?c(e):i(),m(!1)}))}else n.invoke("update",{objid:f.objid,contractor:{name:null,address:null,pcab_idno:null,pcab_dtvalid:null,tin:null,manager:{name:null,email:null}}},(function(e,t){e?c(e):i(),m(!1)}))},disableWhen:u,loading:u})))}},{step:7,name:"professionals",caption:"Professionals",component:function(e){var t=e.appno,n=e.appService,i=e.movePrevStep,o=e.moveNextStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),u=s[0],m=s[1],p=Object(a.useState)("design"),d=p[0],f=p[1],E=Object(a.useState)([]),b=E[0],y=E[1];Object(a.useEffect)((function(){m(!0),n.invoke("getProfessionals",{appid:t},(function(e,t){e?c(e):y(t),m(!1)}))}),[t]);var v=function(e,t){var n=b[t];"design"===d?(n.designprofessionalid=e.objid,n.designprofessional=e):(n.supervisorid=e.objid,n.supervisor=e);var a=[].concat(b);a[t]=n,y(a)},h=function(){m(!0),n.invoke("updateProfessionals",b,(function(e,t){e?c(e):"design"===d?f("supervisor"):o(),m(!1)}))};return r.a.createElement(l.I,null,r.a.createElement(l.I,{visibleWhen:"design"===d},r.a.createElement("h3",null,"List of Design Professionals"),b.map((function(e,t){return e.section.designprofessionalrole?r.a.createElement("div",{key:e.objid},e.designprofessionalid?r.a.createElement(Q,{caption:e.sectionid+" Design Professional",professional:b[t].designprofessional,onSelectProfessional:function(e){return v(e,t)},role:e.section.designprofessionalrole}):r.a.createElement(K,{caption:e.sectionid+" Design Professional",searchFieldTitle:"Please input the 7-digit PRC ID Number and click search",onSelect:function(e){return v(e,t)},role:e.section.designprofessionalrole})):null})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:i}),r.a.createElement(l.d,{caption:"Next",action:h,disableWhen:u,loading:u}))),r.a.createElement(l.I,{visibleWhen:"supervisor"===d},r.a.createElement("h3",null,"List of Supervisors"),b.map((function(e,t){return e.section.supervisorrole?r.a.createElement("div",{key:e.objid},e.supervisorid?r.a.createElement(Q,{caption:e.sectionid+" Supervisor",professional:b[t].supervisor,onSelectProfessional:function(e){return v(e,t)},role:e.section.supervisorrole}):r.a.createElement(K,{caption:e.sectionid+" Supervisor",searchFieldTitle:"",onSelect:function(e){return v(e,t)},role:e.section.supervisorrole})):null})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return f("design")}}),r.a.createElement(l.d,{caption:"Next",action:h,disableWhen:u,loading:u}))))}},{step:8,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,i=e.movePrevStep,o=e.moveNextStep,c=Object(a.useState)(),s=c[0],u=c[1],m=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)({})),p=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?u(e):(console.log("app.supervisor",t.supervisor),b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{objid:p.objid,supervisorid:e.objid},(function(t,n){t?u(t):(u(null),b(e))}))};return r.a.createElement(l.I,null,r.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),r.a.createElement(l.r,{msg:s}),r.a.createElement(l.O,null),r.a.createElement(l.I,null,E&&E.lastname?r.a.createElement(Q,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y}):r.a.createElement(K,{caption:"Inspector/Supervisor",searchFieldTitle:"",onSelect:y})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:i}),r.a.createElement(l.d,{caption:"Next",action:function(){E?o():u("Please select a professional.")},disableWhen:!E||!E.objid})))}},{step:9,name:"confirmation",caption:"Confirmation",component:function(e){var t=e.appno,n=e.partner,i=e.appService,o=e.movePrevStep,c=e.onComplete,s=Object(a.useState)()[1],u=Object(a.useState)({}),m=u[0],p=u[1];return Object(a.useEffect)((function(){i.invoke("getApplication",{appid:t},(function(e,t){e?s(e):p(t)}))}),[t]),r.a.createElement(l.I,null,r.a.createElement("p",null,"Before sending please check first the generated application info. If everything is in order, you can click Submit button to complete the transaction."),r.a.createElement(l.O,null),r.a.createElement(l.I,{style:ve.container},r.a.createElement(l.I,{style:ve.row},r.a.createElement(l.x,{style:ve.label},"Application for Certificate of Occupancy"),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),r.a.createElement(l.I,{style:ve.row},r.a.createElement(l.x,{style:ve.label},"Certificate of Completion"),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Submit",action:function(){i.invoke("update",m,(function(e,t){e?s(e):c()}))}})))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.appno,n=e.partner,i=e.appService,o=e.history,c=Object(a.useState)(),s=c[0],u=c[1],m=Object(a.useState)(!1)[1],p=Object(a.useState)({})[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)([]),y=b[0],v=b[1];Object(a.useEffect)((function(){i.invoke("getApplication",{appid:t},(function(e,a){e?u(e):(p(a),l.N.lookup("OboContactInfoService","obo").invoke("getInfo",{orgcode:n.id},(function(e,t){e?u(e):E(t)})),m(!0),u(null),i.invoke("getRequirements",{appid:t},(function(e,t){e?u(e):(v(t),m(!1))})))}))}),[t]);var h=ie(f,"Application for Certificate of Occupancy and Certificate of Completion");return r.a.createElement(l.I,null,s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(l.r,{msg:s}),r.a.createElement(l.O,null)),r.a.createElement("label",null,h),r.a.createElement(l.O,null),r.a.createElement(l.I,{style:he.container},r.a.createElement(l.I,{style:he.document},r.a.createElement(l.x,{style:he.label},"Application for Certificate of Occupancy"),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),r.a.createElement(l.n,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),r.a.createElement(l.I,{style:he.document},r.a.createElement(l.x,{style:he.label},"Certificate of Completion"),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),r.a.createElement(l.n,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),r.a.createElement(l.O,null),r.a.createElement("h3",null,"List of Requirements:"),r.a.createElement(l.I,{style:he.requirementsContainer},y.map((function(e,t){var a=e.title.split("\n"),i=function(e){if(1===e.length)return null;var t=e.map((function(e,t){return 0!==t&&e?r.a.createElement("li",{style:he.requirement},e):null}));return r.a.createElement("ul",null,t)}(a),o=function(e,t){var n;return t.docs?(n=t.docs.map((function(t){return r.a.createElement(l.I,{key:t.reportid,style:he.document},r.a.createElement("label",{style:{marginLeft:20}},t.title),r.a.createElement(l.I,{row:!0},r.a.createElement(l.K,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),r.a.createElement(l.n,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))})),r.a.createElement(l.I,{style:{margin:"0px 20px"}},n)):null}(n,e);return r.a.createElement(l.I,null,r.a.createElement("p",{key:t,style:he.requirement},t+1+". "+a[0]),o,i)}))),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Return",action:function(){return o.push("/partner/"+n.group.name+"_"+n.name+"/services")}})))}}],Se=function(e){var t=Object(a.useState)(!1),n=t[0],i=t[1],o=Object(a.useState)(!1),c=o[0],s=o[1],u=Object(a.useState)("init"),m=u[0],p=u[1],d=(Object(a.useState)("full"),Object(a.useState)(Object(l.bb)(e.location,"appid"))),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1],h=Object(a.useState)({}),g=h[0],O=h[1],S=Object(a.useState)(1),j=S[0],x=S[1],I=e.partner,k=e.service;y!==e.location.hash&&v(e.location.hash),Object(a.useEffect)((function(){f?(i(!0),i(!0),ge.invoke("findCurrentInfo",{appid:f},(function(t,n){if(t)s(t);else{if(n||(s("Application no. does not exist"),"init"===m&&(p("apptype"),e.history.push(""+location.pathname))),I.id!=n.orgcode)return s("The application number provided is not for this local government"),void p("init");O(n),x(n.step),p("processing"),e.history.push(location.pathname+"?appid="+f+"#"+Oe[n.step].name)}i(!1)}))):p("apptype")}),[f]),Object(a.useEffect)((function(){if(y){var e=Oe.find((function(e){return e.name===y.substring(1)}));x(e.step)}}),[y]);var C=function(e){E(e.appno),x(1),p("processing")},w=function(e){if(g.step!=Oe.length-1){s(null);var t=j<g.step?g.step:j+1;ge.invoke("update",{objid:f,state:e,step:t},(function(e,n){e?s(e):(x(t),O(T({},g,{step:t})))}))}};if("init"===m||n)return r.a.createElement("div",null,r.a.createElement(l.y,null));if("apptype"===m)return r.a.createElement(W,{appService:ge,partner:I,service:e.service,error:c,onCancel:function(){return e.history.goBack()},onSubmit:function(e){var t=e.appType,n=e.appno;s(null),"new"===t?p("new"):ge.invoke("findCurrentInfo",{appid:n},(function(e,a){e?s(e):C({appType:t,appno:n,step:a.step})}))}});if("new"===m)return r.a.createElement(fe,T({},e,{appService:ge,onComplete:C,onCancel:function(){return e.history.goBack()}}));var P=Oe[j],N=P.component,A={partner:I,appno:f,pages:Oe,moveNextStep:w,movePrevStep:function(){x((function(e){return e-1}))},appService:ge,currentStep:j,stepCompleted:j<g.step,onComplete:function(){w("END")},history:e.history};return r.a.createElement(l.H,null,g.step<Oe.length-1&&r.a.createElement(l.I,{target:"left",style:je.stepperContainer},r.a.createElement(l.Q,{steps:Oe,completedStep:g.step,activeStep:j,handleStep:function(t){x(t),e.history.push(location.pathname+"?appid="+f+"#"+Oe[t].name)}})),r.a.createElement(l.e,null,r.a.createElement(l.W,null,k.title),r.a.createElement(l.S,null,"Tracking No. "+f),r.a.createElement(l.R,null,P.caption),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:c}),r.a.createElement(N,T({page:P},A))))},je={stepperContainer:{paddingLeft:40}},xe=function(e){var t=e.name,n=void 0===t?"profession":t,a=e.caption,i=void 0===a?"Profession":a,o=e.professions,c=A(e,["name","caption","professions"]);return r.a.createElement(l.i,T({name:n,caption:i,items:o},c))},Ie=l.N.lookup("OboProfessionalService","obo"),ke=function(e){var t=e.partner,n=e.onCancel,i=e.onVerified,o=Object(a.useState)("init"),c=o[0],s=o[1],u=Object(a.useState)({})[0],m=Object(a.useState)(),p=m[0],d=m[1],f=Object(a.useState)(!1),E=f[0],b=f[1],v=Object(a.useState)({}),h=v[0],g=v[1],O=Object(a.useState)(),S=O[0],j=O[1],x=Object(a.useState)([]),I=x[0],k=x[1],C=Object(a.useRef)();return Object(a.useEffect)((function(){Ie.invoke("getProfessionList",null,(function(e,t){k(t)}))}),[]),Object(a.useEffect)((function(){Object.keys(u).length>0&&validInfo()}),[h]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.s,{visibleWhen:"init"===c,context:h,handler:g},r.a.createElement("form",{ref:C},r.a.createElement(l.R,null,"Please specify initial information"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:p}),r.a.createElement(l.D,{name:"prc.idno",caption:"PRC No.",required:!0}),r.a.createElement(xe,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:I,required:!0}),r.a.createElement(l.q,{name:"email",required:!0}),r.a.createElement(l.E,{name:"mobileno",required:!0}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:n}),r.a.createElement(l.d,{caption:"Next",action:function(){C.current.reportValidity()&&(d(null),b(!0),Ie.invoke("verifyInfo",h,(function(e,n){e?d(e):(function(){try{var e=l.N.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:h.email,mobileno:h.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){d(null),j(e.key),s("verify")})).catch((function(e){d(e)})),b(!1))})))},loading:E,disableWhen:E})))),r.a.createElement(l.I,{visibleWhen:"verify"===c},r.a.createElement(l.R,null,"Email Verification"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:p}),r.a.createElement("p",null,"Please enter the key code sent to your email at ",h.email,"."),r.a.createElement(y,{partner:t,hiddenCode:S,email:h.email,onCancel:function(){return s("init")},onVerified:function(){return i(h)},onResendCode:function(e){j(e)},width:200,connection:"obo"})))},Ce=function(e){var t=e.info,n=void 0===t?{}:t,i=e.partner,o=e.onCancel,c=e.onSubmit,s=Object(a.useRef)(),u={entity:T({},n,{resident:!0}),prc:n.prc,id:{},resident:!0},m=Object(a.useState)()[0],p=Object(a.useState)(u),d=p[0],E=p[1],y=Object(a.useState)(!1),v=y[0],h=y[1],S=function(e,t){if(h(e),t)if("prc.dtissued"===t){var n=T({},d.id);n.dtvalid=null,E(T({},d,{id:n}))}else if("id.dtissued"===t){var a=T({},d.prc);a.dtvalid=null,E(T({},d,{prc:a}))}};return r.a.createElement(l.I,null,r.a.createElement(l.R,null,"Register New Professional"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:m}),r.a.createElement(l.I,null,r.a.createElement("form",{ref:s},r.a.createElement(l.s,{context:d,handler:E},r.a.createElement("p",null,"Please fill in the necessary data below. Text marked with * are required fields."," "),r.a.createElement(l.V,{caption:"Profession",name:"entity.profession",readOnly:!0}),r.a.createElement(b,{name:"entity",person:d,showAddress:!0,orgcode:i.id}),r.a.createElement(l.O,null),r.a.createElement(g,{name:"prc",disableIdNo:!0,onError:S,dtIssued:d.prc.dtissued}),r.a.createElement(O,{name:"ptr",onError:S}),r.a.createElement(f,{caption:"Primary Identification",name:"id",onError:S,dtIssued:d.id.dtissued}),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){!v&&s.current.reportValidity()&&c(d)}}))))))},we=function(e){var t=e.onClose,n=e.redirectUrl,a=e.msg,i=void 0===a?"You have successfully registered your professional information.":a;return r.a.createElement(l.I,null,r.a.createElement(l.j,{center:!0},r.a.createElement(l.O,null),r.a.createElement(l.u,{src:"/assets/success.png",width:120,alt:"success"}),r.a.createElement(l.O,null),r.a.createElement(l.W,null,"Success!"),r.a.createElement(l.O,null),r.a.createElement(l.x,{style:T({},Pe.text,{maxWidth:300})},i),r.a.createElement(l.x,{labelStyle:Pe.text},"Thank you for using this service."),r.a.createElement(l.O,null),r.a.createElement(l.f,null,n?r.a.createElement("a",{href:redi},"Return"):r.a.createElement(l.d,{variant:"text",caption:"Return",onClick:t}))))},Pe={text:{display:"block",textAlign:"center"}},Ne=l.N.lookup("OboProfessionalService","obo"),Te=[{step:1,name:"initial",caption:"Initial"},{step:2,name:"newprofessional",caption:"New Professional"},{step:3,name:"disclaimer",caption:"Disclaimer"},{step:4,name:"registered",caption:"Registered"}],Ae=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),i=n[0],o=n[1],c=(Object(a.useState)({}),Object(a.useState)("new"),Object(a.useState)(0)),s=c[0],u=c[1],m=(Object(a.useState)(),Object(a.useState)()),p=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1],y=e.partner,v=e.service,g=e.history,O=function(){u((function(e){return e+1}))},S=Te[s],j=null,x=e.location||{},I=x.search,k=x.hash;return I&&k&&E&&(j=I.match(/\/partner.*/)[0]+"/"+k),r.a.createElement(l.H,null,r.a.createElement(l.I,{target:"left",style:We.stepperContainer},r.a.createElement(l.Q,{steps:Te,activeStep:s})),r.a.createElement(l.e,null,r.a.createElement(l.W,null,v.title),r.a.createElement(l.r,{msg:i}),r.a.createElement(l.I,{visibleWhen:"initial"===S.name},r.a.createElement(ke,{partner:y,onCancel:g.goBack,onVerified:function(e){d(e),O()}})),r.a.createElement(l.I,{visibleWhen:"newprofessional"===S.name},r.a.createElement(Ce,{partner:y,info:p,onSubmit:function(e){b(e),O()}})),r.a.createElement(l.I,{visibleWhen:"disclaimer"===S.name},r.a.createElement(h,{partner:y,onCancel:function(){u((function(e){return e-1}))},onSubmit:function(){t(!0);var e=function(){var e=T({},E.entity.address);E.entity.resident&&(e.citymunicipality=y.title,e.province=y.group.title);var t=T({},E.entity,{address:e}),n=T({},t,E,{orgcode:y.id});return delete n.entity,n}();Ne.invoke("create",e,(function(e,n){e?function(e){t(!1),o(e.toString())}(e):(b(n),O())}))}})),r.a.createElement(l.I,{visibleWhen:"registered"===S.name},r.a.createElement(we,{onClose:function(){return g.goBack()},redirect:j}))))},We={stepperContainer:{paddingTop:30,paddingLeft:40}},Ve=l.N.lookup("OboProfessionalService","obo"),Re={professional:{},changeType:null},De=function(e,t){switch(t.type){case"SET_PROFESSIONAL":return void(e.professional=t.professional);case"SET_CHANGE_TYPE":return void(e.changeType=t.changeType)}},Le=l.N.lookup("OboProfessionalService","obo"),qe=[{step:0,component:null},{step:1,name:"initial",caption:"Initial",component:function(e){var t=e.partner,n=e.history,i=e.moveNextStep,o=Object(l.hb)(),c=o[1],s=o[0].professional,u=Object(a.useState)("init"),m=u[0],p=u[1],d=Object(a.useState)(),f=d[0],E=d[1],b=Object(a.useState)(!1),v=b[0],h=b[1],g=Object(a.useState)({}),O=g[0],S=g[1],j=Object(a.useState)([]),x=j[0],I=j[1],k=Object(a.useState)(),C=k[0],w=k[1],P=Object(a.useRef)();return Object(a.useEffect)((function(){Ve.invoke("getProfessionList",null,(function(e,t){I(t)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{ref:P},r.a.createElement(l.s,{visibleWhen:"init"===m,context:O,handler:S},r.a.createElement(l.R,null,"Please specify PRC Number"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:f}),r.a.createElement(l.D,{name:"prc.idno",caption:"PRC No.",required:!0,autoFocus:!0}),r.a.createElement(xe,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:x,required:!0}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Cancel",action:function(){return n.goBack()}}),r.a.createElement(l.d,{caption:"Next",action:function(){P.current.reportValidity()&&(E(null),h(!0),Ve.invoke("verifyProfessional",O,(function(e,n){e?E(e):function(e){var n=e.email,a=e.mobileno;try{var r=l.N.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(r.invoke("verifyEmail",{email:n,mobileno:a}))}catch(e){return Promise.reject(e)}}(n).then((function(e){E(null),c({type:"SET_PROFESSIONAL",professional:n}),w(e.key),p("verifyemail")})).catch((function(e){E(e)})),h(!1)})))},loading:v,disableWhen:v})))),r.a.createElement(l.I,{visibleWhen:"verifyemail"===m},r.a.createElement(l.R,null,"Email Verification"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:f}),r.a.createElement("p",null,"Please enter the key code sent to your email at ",s?s.email:"","."),r.a.createElement(y,{partner:t,hiddenCode:C,email:s.email,onCancel:function(){return p("init")},onVerified:i,onResendCode:function(e){w(e)},width:200,connection:"obo"})))}},{step:2,name:"changetype",caption:"Change Type",component:function(e){var t=e.moveNextStep,n=Object(l.hb)(),i=n[1],o=n[0].professional,c=Object(a.useState)({changeType:"CHANGE_PERSONINFO"}),s=c[0],u=c[1];return r.a.createElement(l.I,null,r.a.createElement(l.R,null,"Edit Professional Information "),r.a.createElement(l.O,null),r.a.createElement(l.V,{caption:"Profession",value:o.profession,readOnly:!0}),r.a.createElement(l.V,{caption:"Name",value:o.name,readOnly:!0}),r.a.createElement(l.s,{context:s,handler:u},r.a.createElement(l.O,null),r.a.createElement("h4",null,"Please select type of change to make"),r.a.createElement(l.L,{name:"changeType"},r.a.createElement(l.w,{caption:"Change Personal Info",value:"CHANGE_PERSONINFO"}),r.a.createElement(l.w,{caption:"Change Address",value:"CHANGE_ADDRESS"}),r.a.createElement(l.w,{caption:"Change Primary ID",value:"CHANGE_ID"}),r.a.createElement(l.w,{caption:"Change PTR",value:"CHANGE_PTR"}),r.a.createElement(l.w,{caption:"Change PRC",value:"CHANGE_PRC"}),r.a.createElement(l.w,{caption:"Change Email/Mobile No.",value:"CHANGE_CONTACT"})),r.a.createElement(l.a,null,r.a.createElement(l.d,{caption:"Next",action:function(){i({type:"SET_CHANGE_TYPE",changeType:s.changeType}),t()}}))))}},{step:3,name:"editinfo",caption:"Edit Information",component:function(e){var t=e.partner,n=e.appService,i=e.moveNextStep,o=e.movePrevStep,c=Object(l.hb)(),s=c[0],p=c[1],d=s.professional,E=s.changeType,b=Object(a.useRef)(),y=Object(a.useState)(),v=y[0],h=y[1],S=Object(a.useState)(!1),j=S[0],x=S[1],I=Object(a.useState)(d),k=I[0],C=I[1],w=Object(a.useState)(!1)[1],P=function(e,t){if(w(e),t)if("prc.dtissued"===t){var n=T({},k.id);n.dtvalid=null,C(T({},k,{id:n}))}else if("id.dtissued"===t){var a=T({},k.prc);a.dtvalid=null,C(T({},k,{prc:a}))}};return r.a.createElement(l.I,null,r.a.createElement(l.R,null,"Edit Professional Information "),r.a.createElement(l.r,{msg:v}),r.a.createElement(l.I,null,r.a.createElement("form",{ref:b},r.a.createElement(l.s,{context:k,handler:C},r.a.createElement(l.I,{visibleWhen:"CHANGE_PERSONINFO"===E},r.a.createElement("h4",null,"Change Personal Information"),r.a.createElement(l.V,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(l.V,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(l.V,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(l.k,{caption:"Birth Date",name:"birthdate",required:!0})),r.a.createElement(l.I,{visibleWhen:"CHANGE_ADDRESS"===E},r.a.createElement("h4",null,"Change Address Information"),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.h,{caption:"Resident?",name:"resident"}),k.resident?r.a.createElement(u,{orgcode:t.id,name:"address",caption:"Address"}):r.a.createElement(m,{name:"address",caption:"Address"}))),r.a.createElement(l.I,{visibleWhen:"CHANGE_ID"===E},r.a.createElement("h4",null,"Change Primary ID Information"),r.a.createElement(f,{caption:"",name:"id",onError:P,dtIssued:k.id.dtissued})),r.a.createElement(l.I,{visibleWhen:"CHANGE_PTR"===E},r.a.createElement("h4",null,"Change PTR Information"),r.a.createElement(O,{caption:"",name:"ptr",disableIdNo:!0,onError:P,dtIssued:k.ptr.dtissued})),r.a.createElement(l.I,{visibleWhen:"CHANGE_PRC"===E},r.a.createElement("h4",null,"Change PRC Information"),r.a.createElement(g,{caption:"",name:"prc",disableIdNo:!0,editValidity:!0,onError:P,dtIssued:k.prc.dtissued})),r.a.createElement(l.I,{visibleWhen:"CHANGE_CONTACT"===E},r.a.createElement("h4",null,"Change Email/Mobile No. Information"),r.a.createElement(l.q,{name:"email",required:!0}),r.a.createElement(l.E,{name:"mobileno",required:!0})),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:o}),r.a.createElement(l.d,{caption:"Update",action:function(){if(b.current.reportValidity()){x(!0);var e=T({},k,{changetype:E});n.invoke("updateProfessional",e,(function(e,t){e?h(e):(p({type:"SET_PROFESSIONAL",updatedProfessional:t}),i()),x(!1)}))}},loading:j,disableWhen:j}))))))}},{step:4,name:"success",caption:"Success",component:we}],Be=function(e){var t=e.partner,n=e.service,i=e.history,o=Object(a.useState)(1),c=o[0],s=o[1],u=qe[c],m=u.component,p={partner:t,service:n,appService:Le,moveNextStep:function(){s((function(e){return e+1}))},movePrevStep:function(){s((function(e){return e-1}))},history:i,page:u,onClose:function(){i.goBack()},msg:"success"===u.name?"You have successfully updated your professional information.":null};return r.a.createElement(l.P,{initialState:Re,reducer:De},r.a.createElement(l.H,null,r.a.createElement(l.I,{target:"left",style:_e.stepperContainer},r.a.createElement(l.Q,{steps:qe,activeStep:c-1})),r.a.createElement(l.e,null,r.a.createElement(l.W,null,n.title),r.a.createElement(m,T({page:u},p)))))},_e={stepperContainer:{paddingTop:30,paddingLeft:40}},Fe=function(e){var t,n,a=e.task,i={};return null!==(t=/completed/i)&&void 0!==t&&t.test(a.status)||(i.backgroundColor="#ABEBC6"),r.a.createElement("div",null,r.a.createElement("div",{style:T({},Ge.container,i)},r.a.createElement("label",null,a.title),r.a.createElement("div",{style:Ge.column},r.a.createElement("label",{style:Ge.caption},"Start Date/Time"),r.a.createElement("label",{style:Ge.info},a.startdate)),r.a.createElement("div",{style:Ge.column},r.a.createElement("label",{style:Ge.caption},"End Date/Time"),r.a.createElement("label",{style:Ge.info},a.enddate)),r.a.createElement("div",{style:Ge.column},r.a.createElement("label",{style:Ge.caption},"Accountable Hours"),r.a.createElement("label",{style:Ge.info},a.hours)),r.a.createElement("div",{style:Ge.column},r.a.createElement("label",{style:Ge.caption},"Status"),r.a.createElement("label",{style:Ge.info},null!==(n=/completed/i)&&void 0!==n&&n.test(a.status)?r.a.createElement(l.g,{fontSize:"inherit"}):a.status))))},Ge={container:{display:"flex",justifyContent:"space-between",padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #ddd",borderRadius:5},column:{display:"flex",flexDirection:"column",alignItems:"center"},caption:{fontSize:8},info:{fontSize:12}},He=function(e){var t,n,a=e.task,i={};return null!==(t=/completed/i)&&void 0!==t&&t.test(a.status)||(i.backgroundColor="#ABEBC6"),r.a.createElement("div",null,r.a.createElement("div",{style:T({},Ue.container,i)},r.a.createElement("label",{style:Ue.title},a.title),r.a.createElement("div",{style:Ue.column},r.a.createElement("label",{style:Ue.caption},"Start Date/Time"),r.a.createElement("label",{style:Ue.info},a.startdate)),r.a.createElement("div",{style:Ue.column},r.a.createElement("label",{style:Ue.caption},"End Date/Time"),r.a.createElement("label",{style:Ue.info},a.enddate)),r.a.createElement("div",{style:Ue.column},r.a.createElement("label",{style:Ue.caption},"Accountable Hours"),r.a.createElement("label",{style:Ue.info},a.hours)),r.a.createElement("div",{style:Ue.column},r.a.createElement("label",{style:Ue.caption},"Status"),r.a.createElement("label",{style:Ue.info},null!==(n=/completed/i)&&void 0!==n&&n.test(a.status)?r.a.createElement(l.g,{fontSize:"inherit"}):a.status))))},Ue={container:{display:"flex",justifyContent:"space-between",padding:"5px 10px",border:"1px solid #ddd"},title:{fontSize:14},column:{display:"flex",flexDirection:"column",alignItems:"center"},caption:{fontSize:8},info:{fontSize:10}},ze=function(e){var t=e.section;return r.a.createElement("div",{style:Me.container},r.a.createElement(He,{task:t}),r.a.createElement("table",{style:Me.table},r.a.createElement("tr",{style:Me.trth},r.a.createElement("th",{style:Me.tableText},"Activity"),r.a.createElement("th",{style:Me.tableText},"Start Date/Time"),r.a.createElement("th",{style:Me.tableText},"End Date/Time"),r.a.createElement("th",{style:Me.tableText},"Accountable Hours"),r.a.createElement("th",{style:Me.tableText},"Status")),r.a.createElement("tbody",null,t.subtasks.map((function(e){var t,n,a={};return null!==(t=/completed/i)&&void 0!==t&&t.test(e.status)||(a.backgroundColor="#ABEBC6"),r.a.createElement("tr",{key:e.objid,style:T({},Me.trth,a)},r.a.createElement("td",{style:T({},Me.tableText,{textAlign:"left"})},e.title),r.a.createElement("td",{style:Me.tableText},e.startdate),r.a.createElement("td",{style:Me.tableText},e.enddate),r.a.createElement("td",{style:Me.tableText},e.hours,"  "),r.a.createElement("td",{style:Me.tableText},null!==(n=/completed/i)&&void 0!==n&&n.test(e.status)?r.a.createElement(l.g,{fontSize:"inherit"}):e.status))})))))},Me={container:{marginTop:10,marginLeft:25},title:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #ddd",borderRadius:5},table:{width:"100%",borderSpacing:0},tableText:{fontSize:10,border:"1px solid #ddd",padding:5,textAlign:"center"},trth:{border:"1px solid #ddd",cellSpacing:0,padding:5}},Ye=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),i=n[0],o=n[1],c=Object(a.useState)("init"),s=c[0],u=c[1],m=Object(a.useState)({apptype:"BUILDING_PERMIT"}),p=m[0],d=m[1],f=Object(a.useState)({tasks:[]}),E=f[0],b=f[1],v=Object(a.useState)({}),h=v[0],g=v[1],O=Object(a.useState)()[1],S=e.partner,j=e.history;return r.a.createElement(l.H,null,r.a.createElement(l.e,null,r.a.createElement(l.W,null,e.service.title),r.a.createElement(l.s,{visibleWhen:"init"===s,context:p,handler:d},r.a.createElement(l.R,null,"Building Permit Tracking No."),r.a.createElement(l.O,null),r.a.createElement(l.V,{caption:"Enter Tracking No.",name:"trackingno",required:!0,error:i,helperText:i,fullWidth:!1,variant:"outlined",autoFocus:!0}),r.a.createElement("br",null),r.a.createElement("label",null,"Select application type:"),r.a.createElement(l.I,{style:{marginLeft:20}},r.a.createElement(l.L,{name:"apptype"},r.a.createElement(l.w,{caption:"Building Permit",value:"BUILDING_PERMIT"}),r.a.createElement(l.w,{caption:"Occupancy Permit",value:"OCCUPANCY_PERMIT"}))),r.a.createElement(l.a,null,r.a.createElement(l.b,{action:function(){return j.goBack()}}),r.a.createElement(l.d,{caption:"Next",action:function(){o(null),p.trackingno?l.N.lookup(S.id+":OboOnlineService","obo").invoke("verifyApplication",{trackingno:p.trackingno},(function(e,t){e?o(e):(t.apptype=p.apptype,t.refno=t.appno,g(t),u("verification"))})):o("Tracking No. is required.")}}))),r.a.createElement(l.I,{visibleWhen:"verification"===s},r.a.createElement(l.R,null,"Account Verification"),r.a.createElement(l.O,null),r.a.createElement(y,{partner:S,hiddenCode:h.key,email:h.email,onCancel:function(){return u("init")},onVerified:function(e){O(e),t(!0),l.N.lookup(S.id+":OboAppProgressService","obo").invoke("getInfo",h,(function(e,n){e?o(e):(b(n),u("info"),o(null),t(!1))}))},containerStyle:{width:200}})),r.a.createElement(l.s,{visibleWhen:"info"===s,context:E,handler:b},r.a.createElement(l.R,null,"Building Permit Application Status"),r.a.createElement(l.O,null),r.a.createElement(l.I,null,r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{caption:"Tracking No.",name:"trackingno",readOnly:!0}),r.a.createElement(l.V,{caption:"Application No.",name:"appno",readOnly:!0})),r.a.createElement(l.V,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(l.V,{caption:"Project Location",expr:function(){if(!E.location)return"";var e=[];return E.location.lotno&&e.push("Lot: "+E.location.lotno),E.location.blockno&&e.push("Block: "+E.location.blockno),E.location.street&&e.push("Street: "+E.location.street),E.location.barangay&&E.location.barangay.name&&e.push("Barangay: "+E.location.barangay.name),E.location.text&&e.push(E.location.text),e.join(" ")},readOnly:!0}),r.a.createElement(l.V,{caption:"Project Owner",name:"applicant.name",readOnly:!0}),r.a.createElement(l.O,null))),r.a.createElement(l.I,{visibleWhen:"info"===s,style:{minWidth:600}},r.a.createElement(l.S,null,"Application Progress"),E.tasks.map((function(e){return r.a.createElement("div",null,r.a.createElement(l.O,null),r.a.createElement(Fe,{task:e}),e.sections.map((function(e){return r.a.createElement(ze,{section:e})})))})),r.a.createElement(l.O,null),r.a.createElement("p",{style:{fontSize:12}},r.a.createElement("b",null,"Note:")," Accountable hours applies only from 8:00AM - 5:00PM every workday (excluding Saturday and Sunday)")),r.a.createElement(l.O,{height:50})))},Ke=function(e){var t=e.title,n=e.partner,i=e.onCancel,o=e.onSubmit,c=e.error,s=Object(l.hb)()[0],u=s.refno,m=s.apptype,p=s.txntype,d=Object(a.useState)(s.bill)[0],f=Object(a.useState)(c)[0],E=Object(a.useState)(!1)[0];return r.a.createElement(l.e,{style:{maxWidth:800}},r.a.createElement(l.W,null,t),r.a.createElement(l.R,null,"Billing Information"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:f}),r.a.createElement(l.I,null,r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{context:d,caption:"Tracking No.",expr:"trackingno",readOnly:!0}),r.a.createElement(l.V,{context:d,caption:"Application No.",expr:"appno",readOnly:!0})),r.a.createElement(l.I,{row:!0},r.a.createElement(l.V,{context:d,caption:"Permit Type",expr:"permittype",readOnly:!0}),r.a.createElement(l.V,{context:d,caption:"Application Type",expr:"apptype",readOnly:!0})),r.a.createElement(l.V,{context:d,caption:"Project Name",expr:"title",readOnly:!0}),r.a.createElement(l.V,{context:d,caption:"Applicant",expr:"applicant.name",readOnly:!0}),r.a.createElement(l.V,{context:d,caption:"Address",expr:"applicant.address.text",readOnly:!0}),r.a.createElement("h4",null,"Bill Details"),r.a.createElement(l.T,{items:d?d.items:[],size:"small",showPagination:!1},r.a.createElement(l.U,{caption:"Particulars",expr:"item.title",width:500}),r.a.createElement(l.U,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),r.a.createElement(l.I,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},r.a.createElement(l.x,{context:d,caption:"Bill Amount:",expr:function(e){return Object(l.Y)(e.amount)}}))),r.a.createElement(l.a,{disabled:E},r.a.createElement(l.b,{caption:"Back",action:function(){i(0)}}),r.a.createElement(l.d,{caption:"Confirm Payment",action:function(){o({refno:u,txntype:p,origin:"filipizen",orgcode:n.id,info:{apptype:m,data:d},paidby:d.paidby,paidbyaddress:d.paidbyaddress,amount:d.amount,particulars:"Obo Application No. "+d.appno})},disableWhen:0===d.amount})))},Qe={txntype:"obo",contact:{},refno:null,apptype:null,bill:{}},Je=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},Xe=[{step:1,name:"verification",caption:"Verification",Component:j},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,i=e.moveNextStep,o=e.movePrevStep,c=Object(l.hb)(),s=c[1],u=c[0].txntype,m=Object(a.useState)(),p=m[0],d=m[1],f=Object(a.useState)({}),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],h=y[1],g=Object(a.useState)({apptype:"building"}),O=g[0],S=g[1];return r.a.createElement(l.e,null,r.a.createElement(l.W,null,t),r.a.createElement(l.R,null,"Initial Information"),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:p}),r.a.createElement(l.s,{context:O,handler:S},r.a.createElement(l.V,{name:"refno",caption:"Application No.",autoFocus:!0,error:E.refno,helperText:E.refno}),r.a.createElement(l.O,null),r.a.createElement(l.I,null,r.a.createElement("label",null,"Application Type:"),r.a.createElement(l.I,{style:{marginLeft:20}},r.a.createElement(l.L,{name:"apptype"},r.a.createElement(l.w,{caption:"Building Permit",value:"building"}),r.a.createElement(l.w,{caption:"Occupancy Permit",value:"occupancy"}))))),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Back",variant:"text",action:o}),r.a.createElement(l.d,{caption:"Next",action:function(){b({}),O.refno?(h(!0),d(null),function(){try{return Promise.resolve(l.N.lookupAsync(n.id+":OboOnlineBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",T({txntype:u},O,{qtr:4,showdetails:!0})))}))}catch(e){return Promise.reject(e)}}().then((function(e){s(T({type:"SET_BILL"},O,{bill:e})),i()})).catch((function(e){d(e.toString()),h(!1)}))):b({refno:"Application No. is required."})},loading:v,disabled:v})))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(l.hb)();return r.a.createElement(N,T({module:{title:e.title,component:Ke}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],$e=function(e){var t=e.partner,n=e.service,i=e.location,o=e.history,c=e.initialStep,s=Object(a.useState)(void 0===c?0:c),u=s[0],m=s[1],p=Xe[u];return r.a.createElement(l.P,{initialState:Qe,reducer:Je},r.a.createElement(l.H,null,r.a.createElement(l.j,{center:!0},r.a.createElement(p.Component,T({page:p},{partner:t,service:n,location:i,history:o,moveNextStep:function(){m((function(e){return e+1}))},movePrevStep:function(){0===u?o.goBack():m((function(e){return e-1}))},cancelPayment:function(){m(1)},title:"Building Permit Online Billing"})))))},Ze=l.N.lookup("OboProfessionalService","obo"),et=function(e){var t=e.title,n=e.partner,i=e.onCancel,o=e.onSubmit,c=e.error,s=Object(l.hb)()[0],u=s.txntype,m=Object(a.useState)(s.bill)[0],p=Object(a.useState)(c)[0],d=Object(a.useState)(!1)[0];return r.a.createElement(l.e,null,r.a.createElement(l.W,null,t),r.a.createElement(l.R,null,"Please check if details are correct"),r.a.createElement("div",{style:{width:450}}),r.a.createElement(l.O,null),r.a.createElement(l.r,{msg:p}),r.a.createElement(l.I,null,r.a.createElement(l.V,{context:m,caption:"PRC No.",expr:"professional.prc.idno",readOnly:!0}),r.a.createElement(l.V,{context:m,caption:"Profession",expr:"professional.profession",readOnly:!0}),r.a.createElement(l.V,{context:m,caption:"Name",expr:function(e){return e.professional.firstname+" "+e.professional.middlename+" "+e.professional.lastname},readOnly:!0}),r.a.createElement(l.O,null),r.a.createElement("label",null,"Last PTR Issued"),r.a.createElement(l.V,{context:m,caption:"PTR No.",expr:"professional.ptr.refno",readOnly:!0}),r.a.createElement(l.V,{context:m,caption:"Place Issued",expr:"professional.ptr.placeissued",readOnly:!0}),r.a.createElement(l.V,{context:m,caption:"Date Issued",expr:"professional.ptr.dtissued",readOnly:!0}),r.a.createElement(l.O,null),r.a.createElement(l.I,{style:tt.amountContainer},r.a.createElement("label",{style:tt.amountTitle},"Amount to Pay: "),r.a.createElement("label",{style:tt.amount},"Php ",Object(l.Y)(m.amount)))),r.a.createElement(l.a,{disabled:d},r.a.createElement(l.b,{caption:"Back",action:function(){i(0)}}),r.a.createElement(l.d,{caption:"Confirm Payment",action:function(){o({refno:m.professional.prc.idno,txntype:u,origin:"filipizen",orgcode:n.id,info:{data:m},paidby:m.paidby,paidbyaddress:m.paidbyaddress,amount:m.amount,items:m.items,particulars:"Professional Tax Payment for PRC No. "+m.professional.prc.idno})},disableWhen:0===m.amount})))},tt={amountContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},amountTitle:{},amount:{fontWeight:"bold"}},nt={txntype:"ptrpayment",contact:{},refno:null,apptype:null,bill:{}},at=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},rt=[{step:1,name:"initial",caption:"Specify Details",Component:function(e){var t=e.title,n=e.page,i=e.partner,o=e.moveNextStep,c=e.movePrevStep,s=Object(l.hb)()[1],u=Object(a.useState)(),m=u[0],p=u[1],d=Object(a.useState)(!1),f=d[0],E=d[1],b=Object(a.useState)({}),v=b[0],h=b[1],g=Object(a.useState)([]),O=g[0],S=g[1],j=Object(a.useState)({}),x=j[0],I=j[1],k=Object(a.useState)(),C=k[0],w=k[1],P=Object(a.useState)("init"),N=P[0],A=P[1],W=Object(a.useRef)();return Object(a.useEffect)((function(){Ze.invoke("getProfessionList",null,(function(e,t){S(t)}))}),[]),r.a.createElement(l.e,null,r.a.createElement(l.W,null,t),r.a.createElement(l.r,{msg:m}),r.a.createElement("div",{style:{width:500}}),r.a.createElement(l.s,{context:v,handler:h,visibleWhen:"init"===N},r.a.createElement(l.R,null,n.caption),r.a.createElement("form",{ref:W},r.a.createElement(l.D,{name:"prc.idno",caption:"PRC No.",required:!0}),r.a.createElement(xe,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:O,required:!0}),r.a.createElement(l.q,{name:"email",caption:"Email",required:"true"}),r.a.createElement(l.a,null,r.a.createElement(l.b,{caption:"Back",variant:"text",action:c}),r.a.createElement(l.d,{caption:"Next",action:function(){W.current.reportValidity()&&(p(null),E(!0),Ze.invoke("verifyProfessional",v,(function(e,t){e?(p(e),E(!1)):(I(t),s({type:"SET_CONTACT",contact:v}),function(){try{var e=l.N.lookupAsync(i.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:v.email,mobileno:v.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){p(null),w(e.key),A("verify")})).catch((function(e){p(e)})),E(!1))})))},loading:f,disabled:f})))),r.a.createElement(l.I,{visibleWhen:"verify"===N},r.a.createElement(l.R,null,"Email Verification"),r.a.createElement(l.O,null),r.a.createElement("p",null,"Please enter the key code sent to your email at ",v.email,"."),r.a.createElement(y,{partner:i,hiddenCode:C,email:v.email,onCancel:function(){return A("init")},onVerified:function(){E(!0),p(null),function(){try{return Promise.resolve(l.N.lookupAsync(i.id+":OboPtrBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",T({},v,{professional:x,partner:{name:i.name,title:i.title}})))}))}catch(e){return Promise.reject(e)}}().then((function(e){s({type:"SET_BILL",bill:e}),o()})).catch((function(e){p(e.toString()),E(!1)}))},onResendCode:function(e){w(e)},width:200,connection:"obo"})))}},{step:2,name:"payment",caption:"Payment",Component:function(e){var t=Object(l.hb)();return r.a.createElement(N,T({module:{title:e.title,component:et}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],lt=function(e){var t=e.partner,n=e.service,i=e.location,o=e.history,c=e.initialStep,s=Object(a.useState)(void 0===c?0:c),u=s[0],m=s[1],p=rt[u];return r.a.createElement(l.P,{initialState:nt,reducer:at},r.a.createElement(l.H,null,r.a.createElement(l.j,{center:!0},r.a.createElement(p.Component,T({page:p},{partner:t,service:n,location:i,history:o,moveNextStep:function(){m((function(e){return e+1}))},movePrevStep:function(){0===u?o.goBack():m((function(e){return e-1}))},cancelPayment:function(){m(1)},title:"Pay Professional Tax Receipt"})))))}}}]);
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[3],{311:function(e,t,n){"use strict";var a=n(43),r=n(52);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n(0)),i=(0,a(n(44)).default)(l.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.default=i},612:function(e,t,n){},617:function(e,t,n){"use strict";n.r(t),n.d(t,"AppTrackingWebController",(function(){return va})),n.d(t,"BuildingPermitWebController",(function(){return Rn})),n.d(t,"OboBillingWebController",(function(){return Oa})),n.d(t,"OccupancyPermitWebController",(function(){return Gn})),n.d(t,"ProfessionalWebController",(function(){return na})),n.d(t,"PtrBillingWebController",(function(){return Na})),n.d(t,"UpdateProfessionalWebController",(function(){return sa}));var a=n(0),r=n.n(a),l=n(190),i=n(145),o=n(186),c=n(540),s=n(306),u=n(541),m=n(543),p=n(92),d=(n(308),n(547),n(22)),f=(n(305),n(560),n(91)),E=n(146),b=n(193),v=n(61),y=n.n(v),h=n(81),g=n(93),S=n(309),O=n(69),j=n(307),x=n(191),C=n(20),k=n(558),w=n(213),P=n(50),N=n.n(P),T=n(206),W=n.n(T),A=n(132),I=n(42),R=n(209),D=n.n(R),L=n(106),B=n.n(L),q=n(107),_=n.n(q),F=n(546),V=n(64),z=n.n(V),M=n(545),H=n(94),U=n.n(H),G=n(195),Y=n(187),K=n(188),J=n(147),Q=n(133),X=n.n(Q),Z=n(548),$=n(544),ee=(n(210),n(211),n(192)),te=n(549),ne=n(172),ae=n.n(ne),re=n(561),le=n(551),ie=n(194),oe=n(550),ce=(n(212),n(552),n(554)),se=n(556),ue=n(105),me=n(553),pe=n(555),de=n(189),fe=n(185),Ee=n(559),be=(n(207),n(134)),ve=n.n(be),ye=n(208),he=n(311),ge=n.n(he);function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Oe(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t.indexOf(n=l[a])>=0||(r[n]=e[n]);return r}var je=Object(d.a)((function(e){return{container:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-end",marginTop:50,borderTop:"solid 1px lightgrey"},center:{flexDirection:"column"}}})),xe=function(e){var t=e.children,n=e.disabled,a=void 0!==n&&n,i=e.center,o=void 0!==i&&i,c=e.visibleWhen,s=void 0===c||c,u=Oe(e,["children","disabled","center","visibleWhen"]);if(!s)return null;var m=je(),p=""+m.container;return void 0!==o&&1==o&&(p=p+" "+m.center),r.a.createElement(l.a,Se({pt:2},u,{className:p,disabled:!0}),a?r.a.Children.map(t,(function(e){return r.a.cloneElement(e,{disabled:!0})})):t)},Ce=(Object(d.a)((function(e){return{root:{backgroundColor:"#2c3e50"},container:{padding:"4px 50px"},menuButton:{marginRight:e.spacing(2)},toolBar:{paddingLeft:"50px"}}})),Object(d.a)((function(e){return{button:{textTransform:"none"}}}))),ke=function(e){var t=e.label,n=e.caption,a=e.action,l=e.loading,c=e.children,s=e.visibleWhen,u=void 0===s||s,m=e.disableWhen,p=void 0!==m&&m,d=Oe(e,["label","caption","action","loading","children","visibleWhen","disableWhen"]);if(!u)return null;var f=Ce();return r.a.createElement(i.a,Se({size:"small",variant:"contained",color:"primary",onClick:a,style:{margin:2},disabled:p,endIcon:l&&r.a.createElement(o.a,Se({size:18,color:"secondary"},d)),className:f.button},d),t||n||c)},we=function(e){var t=e.label,n=e.caption,a=e.children,l=Oe(e,["label","caption","children"]);return r.a.createElement(ke,Se({size:"medium"},l,{variant:"text"}),t||n||a||"Back")},Pe=Object(d.a)((function(e){return{button:{textTransform:"none"}}})),Ne=function(e){var t=e.caption,n=e.href,a=e.children,l=e.visibleWhen,o=void 0===l||l,c=e.disableWhen,s=void 0!==c&&c,u=e.target,m=void 0===u?"_blank":u,p=e.Icon,d=Oe(e,["caption","href","children","visibleWhen","disableWhen","target","Icon"]);if(!o)return null;var f=Pe();return r.a.createElement(i.a,Se({size:"small",variant:"outlined",color:"primary",href:n,style:{margin:2},disabled:s,className:f.button,endIcon:p&&r.a.createElement(p,null),target:m},d),t||a)},Te=Object(d.a)({root:{marginTop:10,paddingLeft:20,paddingRight:20},title:{padding:10}}),We=function(e){var t=e.caption,n=e.children,a=Te();return r.a.createElement(c.a,{className:a.root},t&&r.a.createElement(f.a,{variant:"h6",component:"h3",className:a.title},t),r.a.createElement(s.a,null,n))},Ae=function(e){return r.a.createElement(u.a,null,e.children)},Ie=r.a.createContext(),Re=function(e,t,n,a){return n&&"function"==typeof n?n(e):n&&"string"==typeof n?y.a.get(e,""+n)||a:y.a.get(e,t)||a},De=function(e,t){var n=t.id||t.name,a=t.expr;if(e){var r=t.onChange||e.handleChange;return{value:Re(e.context,n,a,""),onChange:r}}var l=t.context,i=t.onChange;return{value:l?Re(l,n,a):t.value||"",onChange:function(e,t){void 0===t&&(t=!1),i(t?e.target.checked:e.target.value)}}},Le=function(){return r.a.useContext(Ie)},Be=function(e){var t=e.editable,n=void 0===t||t,a=e.readOnly,l=void 0!==a&&a,i=e.text,o=e.caption,c=Oe(e,["visibleWhen","editable","readOnly","text","caption"]),s=Le(),u=De(s,c),m=!1;return!l&&n||(m=!0),r.a.createElement(E.a,{control:r.a.createElement(b.a,Se({checked:"string"!=typeof u.value&&u.value,disabled:m},c,u,{onChange:function(e){u.onChange(e,!0)}})),label:i||o})},qe=Object(d.a)((function(e){return{formControl:{marginTop:3}}})),_e=function(e){var t=e.editable,n=void 0===t||t,a=e.required,l=void 0!==a&&a,i=e.items,o=e.caption,c=e.expr,s=e.fullWidth,u=void 0===s||s,m=Oe(e,["editable","required","items","caption","expr","fullWidth"]),p=Le(),d=De(p,m),f=qe();return r.a.createElement(O.a,{className:f.formControl,fullWidth:u,disabled:!n},r.a.createElement(g.a,{required:l,id:"select-id"},o),r.a.createElement(x.a,Se({labelId:"select-id",id:"select-id",required:l},m,d),i.map((function(e){var t="function"==typeof c?c(e):e.toString();return r.a.createElement(S.a,{key:t,value:e},t)}))),r.a.createElement(j.a,{style:{color:"red"}},m.helperText))},Fe=function(e){var t=e.visibleWhen,n=void 0===t||t,a=Oe(e,["visibleWhen"]);return n?r.a.createElement(o.a,a):null},Ve={root:{padding:0},center:{display:"flex",flexDirection:"column",alignItems:"center"}},ze=function(e){var t,n,a=e.children,l=e.center,i=void 0!==l&&l,o=e.width,c=Oe(e,["children","center","width"]);return r.a.createElement(m.a,Se({},c,{style:(t={center:i,width:o},n={},t.width&&(n.width=t.width),Se({},Ve.root,t.center?Ve.center:{},n,t.style))}),a)};function Me(e,t){return void 0===t&&(t=0),e?("string"==typeof e?Number(e):e).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):t}var He=function(e,t){return new URLSearchParams(e.search).get(t)},Ue=function(e,t,n){return void 0===n&&(n="0"),W()(e,t,n)},Ge=function(e,t){return N()(e).isBefore(t)},Ye=function(e){void 0===e&&(e=10);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t},Ke=function(e){var t=e.visibleWhen,n=void 0===t||t,l=e.caption,i=e.label,o=e.editable,c=void 0===o||o,s=e.readOnly,u=void 0!==s&&s,m=e.disabled,p=void 0!==m&&m,d=e.autoOk,f=void 0===d||d,E=e.helperText,b=void 0===E?"mm/dd/yyy":E,v=e.variant,y=void 0===v?"standard":v,h=e.size,g=void 0===h?"small":h,S=Oe(e,["visibleWhen","caption","label","editable","readOnly","disabled","autoOk","helperText","variant","size"]);if(!n)return null;var O=Le(),j=De(O,S),x=j.value,P=j.onChange,N=Oe(j,["value","onChange"]),T=Object(a.useState)(null),W=T[0],A=T[1];return Object(a.useEffect)((function(){var e;!W&&null!==x&&x.toString().length>0&&(e=x.indexOf(" ")>0?new Date(x.split(" ")[0]+"T00:00:00+08:00"):new Date(x+"T00:00:00+08:00"),A(e))}),[x]),r.a.createElement(C.a,{utils:w.a},r.a.createElement(k.a,Se({disableToolbar:!0,format:"MM/dd/yyyy",variant:"inline",margin:"normal",inputVariant:y,size:g,label:l||i,helperText:b,fullWidth:!0,autoOk:f},S,N,{value:W,onChange:function(e){A(e);var t=null;if(e&&!/invalid/i.test(e.toString())){var n=e.toLocaleDateString().split("/");n[0]=Ue(n[0],2),n[1]=Ue(n[1],2),t=n[2]+"-"+n[0]+"-"+n[1]}P({target:{name:S.name,value:t}})},disabled:!c||u||p})))};function Je(e){var t=e.inputRef,n=e.onChange,a=Oe(e,["inputRef","onChange"]);return r.a.createElement(A.a,Se({},a,{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:!0,isNumericString:!0,decimalScale:2,fixedDecimalScale:!0,readOnly:!e.editable||e.readOnly},a))}var Qe=function(e){var t=e.label,n=e.caption,a=e.editable,l=void 0===a||a,i=e.readOnly,o=void 0!==i&&i,c=e.textAlign,s=void 0===c?"right":c,u=Oe(e,["label","caption","editable","readOnly","textAlign"]),m=Le(),d=De(m,u);return r.a.createElement(p.a,Se({label:t||n,autoComplete:"off",readOnly:!l||o},u,d,{InputProps:{inputComponent:Je},inputProps:{style:{textAlign:s}}}))},Xe=function(e){var t=e.action,n=e.visibleWhen,a=void 0===n||n,l=e.disableWhen,i=void 0!==l&&l,o=e.iconSize,c=void 0===o?"small":o,s=Oe(e,["action","visibleWhen","disableWhen","iconSize"]);return a?r.a.createElement(I.a,Se({onClick:t,color:"secondary","aria-label":"delete",disabled:i},s),r.a.createElement(D.a,{fontSize:c})):null},Ze=function(e){var t=e.caption,n=e.visibleWhen,a=e.Icon;return void 0===n||n?r.a.createElement(Ne,{caption:void 0===t?"Download":t,href:e.href,Icon:void 0===a?B.a:a}):null},$e=function(e){var t=e.action,n=e.visibleWhen,a=void 0===n||n,l=e.disableWhen,i=void 0!==l&&l,o=e.iconSize,c=void 0===o?"small":o,s=Oe(e,["action","visibleWhen","disableWhen","iconSize"]);return a?r.a.createElement(I.a,Se({onClick:t,color:"primary","aria-label":"edit",disabled:i},s),r.a.createElement(_.a,{fontSize:c})):null},et=function(e){var t=e.label,n=e.caption,a=Oe(e,["label","caption"]),l=Le(),i=De(l,a);return r.a.createElement(p.a,Se({label:t||n||"Email Address",fullWidth:!0,autoComplete:"off"},a,i,{type:"email",onChange:function(e){var t=e.target;i.onChange({target:{name:t.name,value:t.value.toLowerCase()}})}}))},tt=function(e){var t=e.caption,n=e.context,a=e.expr,l=e.exprValue,i=e.children,o=e.blur,c=void 0!==o&&o,s=Oe(e,["caption","context","expr","exprValue","children","blur"]),u=l||i,m=Le();return n&&a?u="function"==typeof a?a(n):y.a.get(n,a):m&&(u=De(m,Se({},s,{name:a})).value),r.a.createElement("div",{style:Se({},nt.wrapper,s.style,c?nt.blur:{})},t&&r.a.createElement("label",{style:Se({},nt.caption,s.captionStyle)},t),r.a.createElement("label",{style:Se({},nt.label,s.labelStyle)},u?u.toString():i))},nt={wrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap",paddingTop:5,paddingBottom:5},caption:{fontWeight:"800",fontSize:14,width:200},label:{fontSize:"14px"},blur:{filter:"blur(3px)","-webkit":"blur(3px)"}},at=function(e){var t=e.msg;return t?r.a.createElement(tt,{style:{color:"red"}},t):null},rt=function(e){var t=e.children,n=e.visibleWhen,a=void 0===n||n,l=e.row,i=void 0!==l&&l,o=Oe(e,["children","visibleWhen","row"]);if(!a)return null;var c=function(e){var t=e.width,n=e.center,a=void 0!==n&&n,r=e.row,l=void 0!==r&&r,i={};return t&&(i.width=t),l&&(i.display="flex",i.flexDirection="row",i.alignItems="center"),a&&(i=Se({},i,lt.center)),i}(Se({},o,{row:i}));return r.a.createElement("div",Se({style:Se({},lt.panel,c,o.style)},o),t)},lt={panel:{display:"flex",flexDirection:"column"},center:{display:"flex",flexDirection:"column",alignItems:"center"}},it=function(e){var t=e.children,n=e.visibleWhen,a=void 0===n||n,l=e.handler,i=Oe(e,["children","visibleWhen","handler"]);if(!a)return null;var o=function(e){var t=e.context,n=void 0===t?{}:t,a=e.handler,r=Oe(e,["context","handler"]);return Se({context:n,handleChange:function(e,t){void 0===t&&(t=!1);var r=e.target.name,l="boolean"==typeof t&&t?e.target.checked:e.target.value,i=Object(h.a)(n,(function(e){y.a.set(e,r,l)}));a(i)}},r)}(Se({},i,{handler:l}));return r.a.createElement(Ie.Provider,{value:o},r.a.createElement(rt,i,"function"==typeof t?t(o):t))};Object(d.a)((function(e){return{root:{flexWrap:"flex"}}})),Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:"#ecf0f1"},container:{padding:"4px 50px"},menuButton:{marginRight:e.spacing(2)}}}));var ot=function(e){return r.a.createElement("img",e)};function ct(e){var t=e.inputRef,n=e.onChange,a=e.thousandSeparator,l=void 0===a||a,i=Oe(e,["inputRef","onChange","thousandSeparator"]);return r.a.createElement(A.a,Se({},i,{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:l,isNumericString:!0,decimalScale:0}))}function st(e){var t=e.inputRef,n=e.onChange,a=e.thousandSeparator,l=void 0!==a&&a,i=Oe(e,["inputRef","onChange","thousandSeparator"]);return r.a.createElement(A.a,Se({},i,{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},thousandSeparator:l,isNumericString:!0,decimalScale:0}))}var ut=function(e){var t=e.label,n=e.caption,a=e.thousandSeparator,l=void 0===a||a,i=e.size,o=void 0===i?"small":i,c=Oe(e,["label","caption","thousandSeparator","size"]),s=Le(),u=De(s,c);return r.a.createElement(p.a,Se({label:t||n,size:o,autoComplete:"off"},c,u,{InputProps:{inputComponent:l?ct:st}}))},mt=function(e){var t=e.value;return r.a.createElement("div",null,r.a.createElement("label",null,e.caption),r.a.createElement("label",null,t))},pt=function(e){var t=e.visibleWhen,n=void 0===t||t,a=Oe(e,["visibleWhen"]);return n?r.a.createElement(F.a,a):null},dt=function(e){var t=e.visibleWhen,n=void 0===t||t,a=e.showMessage,l=void 0===a||a,i=Oe(e,["visibleWhen","showMessage"]);if(!n)return null;var o=i.msg||"Processing...";return r.a.createElement("div",{style:ft.container},r.a.createElement("div",{style:ft.progress},r.a.createElement(Fe,Se({size:16,color:"secondary"},i))),l&&r.a.createElement("div",{style:ft.msg},o))},ft={container:{display:"flex",flexDirection:"row",marginTop:5,marginBottom:5},progress:{paddingRight:10},msg:{color:"#f50057"}},Et=Object(d.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}})),bt=function(e){var t=e.caption,n=e.visibleWhen,l=void 0===n||n,i=e.editable,o=void 0===i||i,c=e.readOnly,s=void 0!==c&&c,u=e.children,m=e.onSelect,d=e.query,f=e.setQuery,E=e.searchFieldTitle,b=e.searchField,v=e.hideSearchText,h=void 0!==v&&v,g=e.enableSelect,S=void 0===g||g,O=Oe(e,["caption","visibleWhen","editable","readOnly","containerStyle","children","onSelect","query","setQuery","searchFieldTitle","searchField","hideSearchText","enableSelect"]);if(!l)return null;var j=Et(),x=Object(a.useState)(),C=x[0],k=x[1],w=Object(a.useState)(!1),P=w[0],N=w[1],T=function(){if(b){var e=y.a.set(d,b,C);f(e)}N(!0)};return r.a.createElement(r.a.Fragment,null,h?r.a.createElement(I.a,{onClick:T},r.a.createElement(U.a,null)):r.a.createElement(p.a,Se({className:j.margin,label:t,value:C,onChange:function(e){k(e.target.value)},variant:"outlined",size:"small",helperText:E,autoFocus:!0},O,{InputProps:{readOnly:s||!o,endAdornment:r.a.createElement(M.a,{position:"end"},r.a.createElement(I.a,{onClick:T},r.a.createElement(U.a,null)))}})),r.a.createElement(G.a,{open:P},r.a.createElement(K.a,null,t),r.a.createElement(Y.a,null,u,r.a.createElement(xe,null,r.a.createElement(ke,{variant:"text",caption:"Cancel",onClick:function(){N(!1)}}),r.a.createElement(ke,{caption:"Select",onClick:function(){m()&&N(!1)},disableWhen:!S})))))},vt=Object(d.a)((function(e){return{formControl:{marginTop:3}}}));function yt(e){var t=e.inputRef,n=Oe(e,["inputRef"]);return r.a.createElement(X.a,Se({ref:function(e){t(e?e.inputElement:null)},guide:!0},n))}var ht=function(e){var t=e.label,n=e.caption,a=e.mask,l=void 0===a?[/\d/,/\d/,/\d/,/\d/,/\d/,/\d/,/\d/]:a,i=e.len,o=void 0===i?7:i,c=e.placeholderChar,s=void 0===c?" ":c,u=e.showMask,m=void 0!==u&&u,p=e.required,d=void 0!==p&&p,f=e.autoFocus,E=Oe(e,["label","caption","mask","len","placeholderChar","showMask","required","autoFocus"]),b=Le(),v=De(b,E),y=vt();return r.a.createElement(O.a,{className:y.formControl,fullWidth:!0},r.a.createElement(g.a,{required:d,htmlFor:"formatted-text-mask"},t||n),r.a.createElement(J.a,Se({id:"formatted-text-mask",required:d,onBlur:function(e){var t=e.target,n=t.name,a=t.value.replace(new RegExp(s,"gi"),"");l.forEach((function(e){"string"==typeof e&&(a=a.replace(new RegExp(e,"gi"),""))}));var r=a;a.trim().length>0&&(r=function(e,t,n){for(var a="";t>0;)a+="0",t--;return a+e}(a,o-a.length)),v.onChange({target:{name:n,value:r}})},mask:l},E,v,{inputComponent:yt,inputProps:{mask:l,showMask:m,placeholderChar:s,autoFocus:f}})))},gt=Object(d.a)((function(e){return{formControl:{marginTop:3}}}));function St(e){var t=e.inputRef,n=Oe(e,["inputRef"]);return r.a.createElement(X.a,Se({ref:function(e){t(e?e.inputElement:null)},mask:["(",/\d/,/\d/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],placeholderChar:"\u2000"},n))}var Ot=function(e){var t=e.label,n=e.caption,a=e.required,l=void 0!==a&&a,i=Oe(e,["label","caption","required"]),o=Le(),c=De(o,i),s=gt();return r.a.createElement(O.a,{className:s.formControl,fullWidth:!0},r.a.createElement(g.a,{required:l,htmlFor:"formatted-text-mask-input"},t||n||"Mobile No."),r.a.createElement(J.a,Se({required:l},i,c,{id:"formatted-text-mask-input",inputComponent:St})))},jt=function(e){var t=e.title,n=e.type,a=void 0===n?"alert":n,l=e.msg,i=e.acceptCaption,o=void 0===i?"OK":i,c=e.onAccept,s=e.onCancel,u=e.children;return r.a.createElement(G.a,{open:e.open},t&&r.a.createElement(K.a,null,t||("alert"===a?"InformationXX":"Confirmation")),r.a.createElement(Y.a,null,u||r.a.createElement(Z.a,null,l)),r.a.createElement($.a,null,"alert"!==a&&r.a.createElement(ke,{variant:"text",caption:"Cancel",onClick:s}),r.a.createElement(ke,{caption:o,onClick:c})))},xt=function(e){var t,n=(t={header:null,left:null,center:null,right:null,footer:null},r.a.Children.forEach(e.children,(function(e){if(e){var n=e.props.target||"center";t[n]||(t[n]=[]),t[n].push(e)}})),t),a=n.center,l=n.right;return r.a.createElement("div",{className:"_12CqV"},r.a.createElement("div",{className:"_3rBoA"},r.a.createElement("div",{className:"_1Pt6o"},r.a.createElement("aside",{className:"_3GVFn _1JqCZ"},r.a.createElement("div",{style:{position:"fixed"}},n.left)),r.a.createElement("div",{className:"_3FaYg"},a),r.a.createElement("aside",{className:"_3GVFn _2yu7F"},l))))},Ct=function(e){var t=e.caption,n=void 0===t?"Preview":t,a=e.href,l=e.visibleWhen,i=e.Icon,o=e.target,c=void 0===o?"_blank":o;return void 0===l||l?n?r.a.createElement(Ne,{caption:n,href:a,Icon:void 0===i?z.a:i}):r.a.createElement(I.a,{size:"small",href:a,color:"primary","aria-label":"Preview Report",target:c},r.a.createElement(z.a,null)):null};var kt=function(e){var t=e.item,n=e.Control;return r.a.createElement("div",{style:Pt.customItemContainer},r.a.createElement(ee.a,{value:t.objid}),r.a.createElement(n,{item:t}))},wt=function(e){var t,n=e.children,a=e.readOnly,l=void 0!==a&&a,i=e.editable,o=void 0===i||i,c=e.list,s=e.Control,u=Oe(e,["children","caption","readOnly","editable","list","Control"]),m=Le(),p=De(m,u),d=l||!o;return t=c?c.map((function(e){return s?r.a.createElement(kt,{item:e,Control:s}):r.a.createElement(E.a,{value:e.objid,control:r.a.createElement(ee.a,null),label:e.caption||e.title,disabled:d})})):r.a.Children.map(n,(function(e){var t=e.props,n=t.readOnly,a=void 0!==n&&n,l=t.editable,i=void 0===l||l,o=Oe(t,["readOnly","editable"]);return r.a.createElement(E.a,Se({value:e.props.value,control:r.a.createElement(ee.a,null),label:e.props.caption,disabled:d||a||!i},o))})),r.a.createElement(O.a,{component:"fieldset"},r.a.createElement(te.a,Se({},u,{value:p.value,onChange:function(e,t){p.onChange({target:{name:u.name,value:t}})},style:{display:"flex"}}),t))},Pt={customItemContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",border:"1px solid #aaa"}};ae.a.setAppElement("#root");var Nt=function(e){return r.a.createElement("div",{style:{height:e.height||20}},e.children)},Tt=(Object(d.a)((function(e){return{formControl:{width:"100%"},selectEmpty:{marginTop:e.spacing(2)}}})),function(e){var t=e.caption,n=e.title,a=e.children;return r.a.createElement(tt,{labelStyle:Se({},Wt.title,e.style)},t||n||a)}),Wt={title:{paddingTop:"10px",color:"#27ae60",fontSize:20,fontWeight:"bold"}},At=function(e){return r.a.createElement(tt,{labelStyle:It.title},e.caption||e.title||e.children)},It={title:{fontSize:18,fontWeight:"bold",opacity:.85}},Rt=Object(d.a)((function(e){return{root:{width:"100%",backgroundColor:"transparent"},selectedStep:{color:"#27ae60 !important"}}})),Dt=function(e){var t=e.orientation,n=e.completedStep,a=e.handleStep,l=e.steps,i=e.activeStep,o=Rt(),c=n>0?n-1:i;return r.a.createElement(re.a,{className:o.root,activeStep:c,orientation:t||"vertical"},l.map((function(e,t){if(e.caption){var l={},s={};t===i&&(s.completed=o.selectedStep);var u=r.a.createElement(ie.a,l,e.caption);return a&&t<=n&&(u=r.a.createElement(oe.a,{onClick:function(){return a(t)},completed:t<=c},r.a.createElement(ie.a,Se({classes:s,StepIconProps:{classes:s}},l),e.caption))),r.a.createElement(le.a,Se({key:e.caption},{}),u)}})))},Lt={currency:Me,number:function(e){return void 0===e&&(e=0),e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},Bt=Object(d.a)((function(e){return{head:{fontWeight:"bold",opacity:.8},paper:{width:"100%",marginBottom:e.spacing(2)},pagination:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)}}})),qt=function(e){var t=e.items,n=void 0===t?[]:t,l=e.showPagination,i=void 0===l||l,o=e.rowsPerPage,c=void 0===o?5:o,s=e.fetchList,u=e.singleSelect,m=void 0!==u&&u,p=e.multiSelect,d=void 0!==p&&p,f=e.keyId,E=e.onSelectItems,v=Oe(e,["items","showPagination","rowsPerPage","fetchList","singleSelect","multiSelect","keyId","onSelectItems"]),g=Object(a.useState)(0),S=g[0],O=g[1],j=Object(a.useState)(c),x=j[0],C=j[1],k=Object(a.useState)([]),w=k[0],P=k[1];Object(a.useEffect)((function(){s&&s({start:S,limit:x})}),[S,x]),Object(a.useEffect)((function(){E&&E(w)}),[w]);var N=Bt(),T=n.length===x?-1:S*x+n.length,W=d||m?{numSelected:w.length,rowCount:-1===T?x:n.length,multiSelect:d,singleSelect:m,onSelectAllClick:function(){P(0===w.length?n:[])},onSelectItem:function(e,t){var n=w.findIndex((function(e){return e[f]===t[f]}));P(n>=0?Object(h.a)((function(e){return e.filter((function(e){return e[f]!==t[f]}))})):d?w.concat(t):[t])}}:{},A=function(e,t){var n=Bt(),a=r.a.Children.map(e.children,(function(e){var t=e.props,a=t.caption,l=Oe(t,["caption","expr"]);return r.a.createElement(ue.a,Se({key:Ye(),className:n.head},l),a)}));if(t.singleSelect)a.unshift(r.a.createElement(ue.a,{key:Ye(),padding:"checkbox"},r.a.createElement("span",null," ")));else if(t.multiSelect){var l=t.numSelected,i=t.rowCount,o=t.onSelectAllClick;a.unshift(r.a.createElement(ue.a,{key:Ye(),padding:"checkbox"},r.a.createElement(b.a,{indeterminate:l>0&&l<i,checked:i>0&&l===i,onChange:o})))}return a}(e,W),I=function(e,t,n){var a=e.items,l=e.children,i=[];return(void 0===a?[]:a).forEach((function(a){var o=r.a.Children.map(l,(function(e,t){var n=e.props,l=n.expr,i=n.format,o=n.children,c=Oe(n,["caption","expr","format","children"]),s=function(e){var t,n=e.item,a=e.expr,l=e.children;if(a)if("string"==typeof a){var i=Lt[e.format],o=y.a.get(n,a);t=i?i(o):o}else t=a(n).toString();else t="function"==typeof l?l(n):function e(t,n){return r.a.Children.map(n,(function(n){var a=n.props,l=a.action,i=a.children;if("function"==typeof l)return r.a.cloneElement(n,{action:function(e){e.stopPropagation(),l(t)}},i);if(i.length>0){var o=e(t,i);return r.a.cloneElement(n,{},o)}return n}))}(n,l);return t}({item:a,expr:l,format:i,children:o}),u=0===t?{component:"th",scope:"row"}:{};return r.a.createElement(ue.a,Se({key:Ye()},u,c),s)}));if(n.multiSelect||n.singleSelect){var c=e.keyId,s=t.findIndex((function(e){return e[c]===a[c]}))>=0;o.unshift(r.a.createElement(ue.a,{key:Ye(),padding:"checkbox"},r.a.createElement(b.a,{checked:s}))),i.push(r.a.createElement(de.a,{hover:!0,onClick:function(e){return n.onSelectItem(e,a)},role:"checkbox",tabIndex:-1,key:Ye(),selected:s},o))}else i.push(r.a.createElement(de.a,{key:Ye()},o))})),i}(e,w,W);return r.a.createElement(fe.a,{className:N.paper},r.a.createElement(me.a,null,r.a.createElement(ce.a,Se({},v,{size:"small"}),r.a.createElement(pe.a,null,r.a.createElement(de.a,null,A)),r.a.createElement(se.a,null,I))),i&&r.a.createElement(Ee.a,{rowsPerPageOptions:[5,10,25],component:"div",count:T,rowsPerPage:x,page:S,onChangePage:function(e,t){O(t),P([])},onChangeRowsPerPage:function(e){C(parseInt(e.target.value,10))},labelDisplayedRows:function(e){var t=e.to;return e.from+"-"+t+" of "+(-1!==e.count?t:"?")}}))},_t=function(e){return r.a.createElement("div",null,e.children)},Ft=function(e){var t=e.label,n=e.caption,a=e.visibleWhen,l=void 0===a||a,i=e.editable,o=void 0===i||i,c=e.readOnly,s=void 0!==c&&c,u=e.containerStyle,m=e.textCase,d=void 0===m?"UPPER":m,f=e.blur,E=void 0!==f&&f,b=Oe(e,["label","caption","visibleWhen","editable","readOnly","containerStyle","textCase","blur"]);if(!l)return null;var v=Le(),y=De(v,b),h={};!s&&o||(h.readOnly=!0);var g=!0===E?Vt.blur:{};return r.a.createElement("div",{style:Se({},Vt.root,u)},r.a.createElement(p.a,Se({label:n||t,fullWidth:!0,inputProps:h,autoComplete:"off",helperText:b.error,size:"small"},b,y,{style:Se({},g),onChange:function(e){var t=e.target,n=t.name,a=t.value;/upper/i.test(d)?y.onChange({target:{name:n,value:a.toUpperCase()}}):y.onChange(e)}})))},Vt={root:{width:"100%",marginBottom:3},blur:{filter:"blur(3px)","-webkit":"blur(3px)"}},zt=function(e){var t=e.caption,n=e.exprValue,a=e.children,i=Oe(e,["caption","exprValue","children"]);return r.a.createElement(l.a,Se({fontSize:"1.7em",fontWeight:"bold"},i),t||n||a)},Mt=function(e){return e.indexOf(":")>0},Ht={},Ut=function(e,t,n,a){var r,l;return void 0===t&&(t="default"),void 0===a&&(a={debug:!1}),null==Ht[e]&&(r=Mt(e)?function(e,t,n){var a=e.indexOf(":"),r=e.substring(0,a);return function(e,t,n,a){var r=ve()("/gdx");return r.connect(),{invoke:function(l,i,o){(function(l,i){try{var o=new Promise((function(o,c){r.emit("invoke",{service:e,method:l,channel:t,connection:n,module:a,args:i},(function(e){"OK"===e.status?o(e.data):c(e.msg)})),r.on("disconnect",(function(){console.log("AsyncFetch disconnted")}))}));return Promise.resolve(o)}catch(e){return Promise.reject(e)}})(l,i).then((function(e){return o(null,e)})).catch((function(e){/syntax/i.test(e)?o("Partner is currently not avaible. Please try again later.",null):o(e,null)}))}}}(e.substring(a+1),r,t,n)}(e,t,n):function(e,t,n){return{invoke:function(a,r,l){fetch("/filipizen/service/invoke",{method:"POST",cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:{module:n,connection:t,name:e,action:a},args:r?[r]:null})}).then((function(e){return e.json()})).then((function(e){e.error?l(e.error,null):(Array.isArray(e)||0!==Object.keys(e).length||l(null,null),Array.isArray(e)||"ERROR"!==e.status?l(null,e):l(e.msg,null))})).catch((function(e){return l(e.toString(),null)}))}}}((l=Se({serviceName:e,connection:t,module:n},a)).serviceName,l.connection,l.module),Ht[e]=r),Ht[e]},Gt=function(e,t,n,a){void 0===t&&(t="default"),void 0===a&&(a={debug:!1});var r,l="Async"+e;return null==Ht[l]&&(r=Mt(e)?function(e,t,n){var a=e.indexOf(":"),r=e.substring(0,a);return function(e,t,n,a){var r=ve()("/gdx");return r.connect(),{invoke:function(l,i,o){try{var c=new Promise((function(c,s){r.emit("invoke",{service:e,method:l,connection:n,module:a,channel:t,args:i},(function(e){"OK"===e.status?(o&&o(!1,e.data),c(e.data)):(o&&o(e.msg),s(e.msg))}))}));return Promise.resolve(c)}catch(e){return Promise.reject(e)}}}}(e.substring(a+1),r,t,n)}(e,t,n):function(e){return t=e.serviceName,n=e.connection,a=e.module,{invoke:function(e,r){try{return Promise.resolve(fetch("/filipizen/service/invoke",{method:"POST",cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:{module:a,connection:n,name:t,action:e},args:r?[r]:null})})).then((function(e){if(200!==e.status)throw e.statusText;return Promise.resolve(e.json())}))}catch(e){return Promise.reject(e)}}};var t,n,a}(Se({serviceName:e,connection:t,module:n},a)),Ht[l]=r),Ht[l]},Yt=Object(a.createContext)(),Kt=Object(a.createContext)(),Jt=function(e){var t=e.children,n=Object(ye.a)(e.reducer,e.initialState);return r.a.createElement(Yt.Provider,{value:n[0]},r.a.createElement(Kt.Provider,{value:n[1]},t))},Qt=function(){var e=Object(a.useContext)(Yt);if(void 0===e)throw new Error("useStateValue must be used within a StateProvider");return e},Xt=function(){var e=Object(a.useContext)(Kt);if(void 0===e)throw new Error("useStateDispatch must be used within a StateProvider");return e},Zt=function(){return[Qt(),Xt()]},$t=n(109);n(612);function en(){return(en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function tn(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t.indexOf(n=l[a])>=0||(r[n]=e[n]);return r}var nn=function(e){var t=e.onCancel,n=e.onSubmit,l=e.service,i=e.partner,o=e.appService,c=Object(a.useState)({}),s=c[0],u=c[1],m=Object(a.useState)("new"),p=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1],v=Object(a.useState)(!1),y=v[0],h=v[1],g=Object(a.useState)(),S=g[0],O=g[1];return r.a.createElement(xt,null,r.a.createElement(We,null,r.a.createElement(zt,null,l.title),r.a.createElement(Tt,null,"Select an action"),r.a.createElement(Nt,{height:30}),r.a.createElement(at,{msg:S}),r.a.createElement(wt,{value:p,onChange:d},r.a.createElement(mt,{caption:"Create New Application",value:"new"}),r.a.createElement(mt,{caption:"Resume Pending Application",value:"resume"})),r.a.createElement(rt,{style:{paddingLeft:30}},r.a.createElement(Ft,{caption:"Application Tracking No.",value:E,onChange:b,visibleWhen:"resume"===p,variant:"outlined",fullWidth:!1,required:!0,style:{marginLeft:40},error:s.appno||S,helperText:s.appno||S,size:"small"})),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Cancel",action:t}),r.a.createElement(ke,{caption:"Next",action:function(){"new"!==p?E?(h(!0),O(null),o.invoke("findCurrentInfo",{appid:E},(function(e,t){e?O(e):t?i.id!==t.orgcode?u({appno:"The application number provided is not for this local government"}):n({appType:p,appno:E,step:t.step}):u({appno:"Application no. does not exist"}),h(!1)}))):u({appno:"Tracking No. is required."}):n({appType:p,appno:E})},loading:y,disableWhen:y}))))},an=function(e){var t=e.partner,n=e.title,l=void 0===n?"New Permit Application":n,i=e.onCancel,o=e.onContinue,c=e.error,s=Object(a.useState)(!1),u=s[0],m=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,null,l),r.a.createElement(Nt,{height:30}),r.a.createElement(at,{msg:c}),r.a.createElement(At,null,"Please read thoroughly before proceeding"),r.a.createElement("p",{style:{opacity:.8}},"This online service will require personal information from the applicant, lot owner(s) and professionals involved in this transaction. In compliance with the Data Privacy Act, we are securing your consent that you have been authorized by the aforementioned parties to act on their behalf. The data collected will be stored, processed and used for effectively carrying out legitimate transactions with the local government of ",t.title,". If you do not agree to these terms, you can cancel out by click on the Cancel button. If you agree to these terms, tick on the checkbox and click Continue."),r.a.createElement(Be,{caption:"Yes, I have read and agree to the terms and conditions",value:u,name:"agreeDisclaimer",onChange:m}),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Cancel",action:i}),r.a.createElement(ke,{caption:"Continue",action:o,disableWhen:!u})))},rn=function(e){var t=e.title,n=e.appno,a=e.onContinue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Tt,null,void 0===t?"New Permit Application":t),r.a.createElement(Nt,{height:30}),r.a.createElement(At,null,"Application created"),r.a.createElement("p",null,"Please take note of the tracking number for this application. This will be your tracking reference for completing and follow up for this application."),r.a.createElement(At,null,n),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Continue",action:a})))},ln=Ut("OnlineBuildingPermitService","obo"),on=[{name:"info",caption:"New Building Permit Application"},{name:"email",caption:"Email Verification"},{name:"select-apptype",caption:"Select Application Type"},{name:"project-name",caption:"Project Name"},{name:"confirmation",caption:"Confirmation"},{name:"newapp",caption:"New Application "}],cn=function(e){var t=Object(a.useState)({}),n=t[0],l=t[1],i=(Object(a.useState)(!1),Object(a.useState)("new")[0]),o=(Object(a.useState)(),Object(a.useState)()),c=o[0],s=o[1],u=Object(a.useState)({apptype:"NEW"}),m=u[0],p=u[1],d=Object(a.useState)(0),f=d[0],E=d[1],b=Object(a.useState)(),v=b[0],y=b[1],h=e.partner,g=e.service,S=e.handler,O=e.onCancel,j=on[f],x=Object(a.useRef)(),C=function(){E((function(e){return e+1}))};return r.a.createElement(xt,null,"email"===j.name?r.a.createElement($t.g,{title:g.title,visibleWhen:"email"===j.name,showName:!0,onCancel:function(){return E(0)},onVerify:function(e){l(e),C()},partner:h,connection:"obo"}):r.a.createElement(We,null,r.a.createElement(zt,null,g.title),r.a.createElement(rt,{visibleWhen:"info"===j.name},r.a.createElement(Tt,null,"New Building Permit Application"),r.a.createElement(Nt,null),r.a.createElement(rt,{style:{marginLeft:20}},r.a.createElement("h3",null,"Before you begin, please take note of the following:"),r.a.createElement("p",null),r.a.createElement("ol",null,r.a.createElement("li",null,"Register first all professionals involved in the project. If you have not done this yet, select Register Professional in the main menu or click ",r.a.createElement("a",{href:"/partner/"+h.group.name+"_"+h.name+"/obo/registerprofessionals"},"here."),r.a.createElement("p",null)),r.a.createElement("li",null,"Make sure your Tax Declaration No. if valid and is cleared. You can check if from the Realty Tax Online Billing or you can click ",r.a.createElement("a",{href:"/partner/"+h.group.name+"_"+h.name+"/rptis/rptbilling"},"here.")))),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Cancel",action:O}),r.a.createElement(ke,{caption:"Next",action:C}))),r.a.createElement(it,{visibleWhen:"select-apptype"===j.name,context:m,handler:p},r.a.createElement(Tt,null,"Select Application Type"),r.a.createElement(Nt,null),r.a.createElement(rt,{style:{marginLeft:20}},r.a.createElement(wt,{name:"apptype"},r.a.createElement(mt,{caption:"New Construction",value:"NEW"}),r.a.createElement(mt,{caption:"Renovation",value:"RENOVATION",editable:!1}),r.a.createElement(mt,{caption:"Demolition",value:"DEMOLITION",editable:!1}))),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Back",action:O}),r.a.createElement(ke,{caption:"Next",action:C}))),r.a.createElement(it,{visibleWhen:"project-name"===j.name,context:m,handler:p},r.a.createElement(Tt,null,"New Building Permit Application"),r.a.createElement(Nt,{height:30}),r.a.createElement(At,null,"Project Information"),r.a.createElement("form",{ref:x},r.a.createElement(Ft,{caption:"Project Name",name:"title",required:!0,autoFocus:!0}),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){E((function(e){return e-1}))}}),r.a.createElement(ke,{caption:"Next",action:function(){x.current.reportValidity()&&C()}})))),r.a.createElement(rt,{visibleWhen:"confirmation"===j.name},r.a.createElement(an,{partner:h,error:v,onCancel:e.goBack,onContinue:function(){var e=en({},m,{orgcode:h.orgcode||h.id,apptype:i,contact:n,worktypes:[]});ln.invoke("create",e,(function(e,t){e?y(e):(s(t.objid),C())}))}})),r.a.createElement(rt,{visibleWhen:"newapp"===j.name,width:400},r.a.createElement(rn,{appno:c,onContinue:function(){S(c)}}))))},sn=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],un=function(e){var t=e.name,n=e.caption,a=void 0===n?"Lot Ownership":n,l=e.showCaption,i=void 0===l||l,o=tn(e,["name","caption","showCaption"]);return r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(At,null,a),r.a.createElement(wt,en({name:t},o),r.a.createElement(mt,{caption:"Lot Owned",value:"1"}),r.a.createElement(mt,{caption:"Leased",value:"0"})))},mn=["INDIVIDUAL","MULTIPLE","CORPORATION","GOVERNMENT","OTHER"],pn=function(e){var t=e.owner,n=e.editable,a=e.editableAddress,l=void 0!==a&&a,i=e.editableIdEntry,o=void 0!==i&&i,c=e.orgcode,s=e.onError,u=void 0===s?function(){}:s,m=tn(e,["owner","editable","editableAddress","editableIdEntry","orgcode","onError"]),p=m.showIdEntry||!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(At,null,m.title||"Lot Owner Information"),r.a.createElement(rt,null,r.a.createElement(Ft,{caption:"Profile No.",name:"owner.profileno",editable:n}),r.a.createElement(_e,{items:mn,name:"owner.entitytype",caption:"Ownership Type",editable:n}),"INDIVIDUAL"!==t.entitytype&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft,{caption:"Lot Owner Name",name:"owner.name",editable:n}),r.a.createElement(tt,null,"Name of administrator/contact of property owner")),r.a.createElement(Ft,{caption:"Last Name",name:"owner.lastname",editable:n}),r.a.createElement(Ft,{caption:"First Name",name:"owner.firstname",editable:n}),r.a.createElement(Ft,{caption:"Middle Name",name:"owner.middlename",editable:n}),r.a.createElement($t.n,{person:t,orgcode:c,name:"owner",editable:n||l}),p&&r.a.createElement($t.h,{name:"owner.id",onError:u,editable:n||o,dtIssued:t.id?t.id.dtissued:null})))},dn=function(e){var t=e.editable,n=tn(e,["editable"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(At,null,n.title||"Lot Information"),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"PIN",name:"pin",editable:t}),r.a.createElement(Ft,{caption:"Lot No.",name:"lotno",editable:t}),r.a.createElement(Ft,{caption:"Block No.",name:"blockno",editable:t})),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"Street",name:"street",editable:t}),r.a.createElement(Ft,{caption:"Barangay",name:"barangay",editable:t})),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"TD No.",name:"tdno",editable:t}),r.a.createElement(Ft,{caption:"Title No.",name:"titleno",editable:t})),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"Classification",name:"classcode",editable:t}),r.a.createElement(Ft,{caption:"Area",name:"areasqm",editable:t})))},fn={balanceText:{color:"red",fontWeight:"bold",fontSize:"14px",paddingBottom:10},locationContainer:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",marginBottom:10},tdno:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},rpuInfoContainer:{padding:"10px"}},En=Ut("OboMiscListService","obo"),bn={column:{display:"flex",flexDirection:"column",marginLeft:20}},vn=Ut("OboProfessionalService","obo"),yn=function(e){var t=e.caption,n=void 0===t?"Search Professional":t,l=e.searchFieldTitle,i=void 0===l?"PRC No.":l,o=e.onSelect,c=e.hideSearchText,s=void 0!==c&&c,u=e.fullWidth,m=void 0===u||u,p=e.role,d=Object(a.useState)({prc:{}}),f=d[0],E=d[1],b=Object(a.useState)(),v=b[0],y=b[1],h=Object(a.useState)(),g=h[0],S=h[1],O=Object(a.useState)(!1),j=O[0],x=O[1],C=Object(a.useState)(!1),k=C[0],w=C[1],P=Object(a.useState)(),N=P[0],T=P[1],W=function(){var e=window.location.pathname;if(!e)return"";var t=e.match(/\/(.*?)\/(.*?)\/(.*)/);return t.length>3?"/"+t[1]+"/"+t[2]+"/obo/registerprofessionals?ref="+window.location.href.match(/\/partner.*/):"/partners"}(),A=function(e){if(vn&&f.prc.idno){var t=en({},f,e);vn.invoke("getList",t,(function(e,t){e?console.log("ERROR",e):(S(t),0===t.length&&w(!0))}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(jt,{title:"Invalid Profession",open:j,msg:N,onAccept:function(){return x(!1)}}),r.a.createElement(jt,{title:"Invalid PRC No. "+f.prc.idno,open:k,msg:N,onAccept:function(){return w(!1)}},r.a.createElement("p",null,"The PRC No you are looking for is not found in our database. Please register professional first. You can do so by selecting Register Professional in the transaction page under Building Permits. You can also click ",r.a.createElement("a",{href:W},"here")," to register.")),r.a.createElement(bt,{caption:n,query:f,setQuery:E,searchFieldTitle:i,searchField:"prc.idno",onSelect:function(){var e=v[0];return function(e){if(!p)return!0;var t=p.toLowerCase(),n="";if(!(t.indexOf(e.profession.toLowerCase())>=0)){var a=t.split(",");if(1==a.length)n="Only "+a[0].toLowerCase()+" is allowed.";else{var r=(n="Only "+a.join(", ")+" are allowed.").lastIndexOf(",");n=n.substring(0,r)+" and "+n.substring(r+2)}return T("The profession of the selected professional is invalid. "+n),!1}return!0}(e)?(o(e),!0):(x(!0),!1)},fetchList:A,hideSearchText:s,enableSelect:v&&v.length>0,fullWidth:m,rootStyle:{minWidth:400}},r.a.createElement(it,{context:f,handler:E},r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"PRC No.",name:"prc.idno",width:200,variant:"outlined"}),r.a.createElement(ke,{caption:"Search",action:function(){A({limit:5,start:0})}}))),r.a.createElement(qt,{items:g,fetchList:A,rowsPerPage:5,showPagination:!1,singleSelect:!0,keyId:"objid",onSelectItems:function(e){y(e)}},r.a.createElement(_t,{caption:"PRC",expr:"prc.idno"}),r.a.createElement(_t,{caption:"Name",expr:function(e){return e.lastname+", "+e.firstname+" "+e.middlename}}),r.a.createElement(_t,{caption:"Profession",expr:"profession"}))))},hn=function(e){var t=e.professional,n=void 0===t?{prc:{},ptr:{}}:t,a=e.caption,l=e.onSelectProfessional,i=e.photoUrl,o=e.role,c="";n.lastname&&(c=n.lastname+", "+n.firstname+" "+n.middlename);var s=gn.container,u=gn.lookupContainer,m=gn.caption;return"string"==typeof n.lastname&&(s=en({},s,{backgroundColor:"#d1d7f8"}),u=en({},u,{backgroundColor:"#454f88"}),m=en({},m,{color:"white"})),r.a.createElement("div",{style:s},r.a.createElement(rt,{style:u},r.a.createElement(tt,{captionStyle:m,caption:a}),r.a.createElement(yn,{hideSearchText:!0,onSelect:l,fullWidth:!1,role:o})),r.a.createElement("div",{style:{marginTop:10,marginBottom:10,padding:10}},r.a.createElement("div",{style:gn.nameContainer},r.a.createElement(rt,{center:!0},r.a.createElement(tt,{labelStyle:gn.name},c),r.a.createElement(tt,{labelStyle:gn.profession},n.profession)),r.a.createElement(ot,{src:i})),r.a.createElement(rt,{style:gn.row},r.a.createElement(rt,null,r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"PRC ID No."},n.prc.idno),r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"Date Issued"},n.prc.dtissued),r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"Valid Until"},n.prc.dtvalid),r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"Place Issued"},n.prc.placeissued)),r.a.createElement(rt,null,r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"PTR ID No."},n.ptr.refno),r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"Date Issued"},n.ptr.dtissued),r.a.createElement(tt,{style:gn.label,captionStyle:{width:120},caption:"Place Issued"},n.ptr.placeissued)))))},gn={container:{borderWidth:1,borderColor:"#aaa",boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",backgroundColor:"#d1d1d1",borderRadius:5},caption:{fontSize:18,width:"100%"},lookupContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#8b8b8b",paddingTop:5,paddingLeft:10,paddingRight:10,borderRadius:5,minWidth:400},nameContainer:{dipslay:"flex",justifyContent:"space-between",marginBottom:5},name:{fontSize:18,fontWeight:800},profession:{fontSize:14,fontWeight:600,backgroundColor:"#ddddd",width:"100%"},row:{display:"flex",flexDirection:"row",justifyContent:"space-between"},label:{paddingBottom:2}},Sn=Ut("OboMiscListService","obo"),On={row:{display:"flex",alignItems:"flex-start"},group:{fontSize:20,fontWeight:700,marginRight:15,paddingTop:8}},jn=function(e){var t=e.item;return r.a.createElement(rt,{style:{paddingBottom:5}},r.a.createElement(rt,{style:On.row},r.a.createElement("div",{style:On.group},t.objid),r.a.createElement(rt,null,r.a.createElement(At,null,t.title),r.a.createElement("label",null,t.description))))},xn={decimal:Qe,integer:ut,boolean:function(e){return r.a.createElement("div",{style:kn.checkInfo},r.a.createElement(Be,e))}},Cn=function(e){var t=e.category,n=e.dataType,a=void 0===n?"integer":n,l=e.unit,i=e.name,o=xn[a],c=e.caption.toLowerCase();return"boolean"!==a&&(c+=" ("+l.toLowerCase()+")"),r.a.createElement(rt,null,t&&r.a.createElement(tt,{style:kn.category},t),r.a.createElement("div",{style:kn.infoContainer},r.a.createElement("label",null,c),r.a.createElement(o,{name:i,fullWidth:!1,variant:"outlined",size:"small",width:120,style:{flexBasis:100}})))},kn={infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20},category:{fontSize:16,fontWeight:600,border:"1px solid #aaa",backgroundColor:"#eee",padding:"2px 10px",margin:"10px 0px"},checkInfo:{width:100,display:"flex",justifyContent:"flex-start",alignItems:"center",borderWidth:1,borderColor:"#aaa",borderRadius:3}},wn={infoTitle:{fontWeight:"bold"},infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20}},Pn={professionalLookup:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"lightgray"},itemsContainer:{marginLeft:20,display:"flex",flexDirection:"column"},workTypeContainer:{display:"flex",flexDirection:"column",marginLeft:20}},Nn={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},ancillaryContainer:{marginRight:15,marginBottom:20},ancillaryItem:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginRight:10,border:"1px solid #aaa"}},Tn=function(e,t){void 0===t&&(t="");var n=e||{officename:"<OFFICE>",address1:"<ADDRESS1>",address2:"<ADDRESS2>"},a="";a+="Please download and print the "+t+" forms, prepare the ",a+="requirements listed below, and submit at the receiving window of our ",a+=n.officename,a+=" at the ",a+=n.address1,a+=n.address2?", "+n.address2+". ":". ";var r=[];return n.phoneno&&r.push(n.phoneno),n.mobileno&&r.push(n.mobileno),n.email?(r.length>0?(a+="You can email at "+n.email,a+=" or contact us on "+r.join(" or ")):a+="You can email us at "+n.email,a+=" for any inquiries on application."):r.length>0&&(a+="You can contact us on "+r.join(" or ")+" for any inquiries on application."),a},Wn={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},infoContainer:{display:"flex",flexDirection:"column",marginRight:10,width:"100%"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},An=Ut("OnlineBuildingPermitService","obo"),In=[{step:0,component:null},{step:1,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,l=e.appService,i=e.moveNextStep,o=Object(a.useState)(!1)[1],c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)("read")[1],p=Object(a.useState)(!1),d=p[0],f=p[1],E=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1,id:{}}),b=E[0],v=E[1],y=Object(a.useRef)();return Object(a.useEffect)((function(){o(!0),u(null),l.invoke("getApplicant",{appid:t},(function(e,n){e?u(e):n?(n.id||(n.id={}),n.appid=t,v(n),m("read")):m("create"),o(!1)}))}),[]),r.a.createElement("form",{ref:y},r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Building Applicant Details"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:s}),r.a.createElement(it,{context:b,handler:v},r.a.createElement(_e,{items:sn,name:"entitytype",caption:"Type of Applicant"}),r.a.createElement(Ft,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==b.entitytype}),r.a.createElement(Nt,null),r.a.createElement(rt,null,r.a.createElement(At,null,"Administrator or contact name of applicant"),r.a.createElement(Ft,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(Ft,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(Ft,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(et,{name:"email"}),r.a.createElement(Ot,{name:"mobileno"})),r.a.createElement(Nt,null),r.a.createElement(At,null,"Applicant Address"),r.a.createElement(Be,{caption:"Resident",name:"resident",onChange:function(){var e=en({},b,{appid:t,resident:!b.resident,address:{}});v(e)}}),b.resident?r.a.createElement($t.i,{orgcode:n.id,name:"address",caption:"Address"}):r.a.createElement($t.j,{name:"address",caption:"Address"}),r.a.createElement(Nt,null),r.a.createElement(At,null,"Proof of Identity"),r.a.createElement($t.h,{name:"id",onError:function(e){f(e)},dtIssued:b.id.dtissued})),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){!d&&y.current.reportValidity()&&(u(null),l.invoke("saveApplicant",b,(function(e,t){e?u(e):i(),o(!1)})))}}))))}},{step:2,name:"rpu",caption:"Real Property Info",component:function(e){var t=e.partner,n=e.appno,l=e.appService,i=e.moveNextStep,o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)(!1),m=u[0],p=u[1],d=Object(a.useState)("view-rpus"),f=d[0],E=d[1],b=Object(a.useState)(),v=b[0],y=b[1],h=Object(a.useState)([]),g=h[0],S=h[1],O=Object(a.useState)({}),j=O[0],x=O[1],C=Object(a.useState)(!1),k=C[0],w=C[1],P=Object(a.useRef)();Object(a.useEffect)((function(){"view-rpus"===f&&T()}),[f]);var N=function(){y(),s(null),E("initial")},T=function(){l.invoke("getRpus",{appid:n},(function(e,t){e?s(e):S(t)}))};return r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+n),r.a.createElement(Tt,null,"Real Property Information"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:c}),r.a.createElement(rt,{visibleWhen:"view-rpus"===f},r.a.createElement(At,null,"Lot Information"),g.map((function(e){return r.a.createElement(rt,{style:fn.locationContainer,key:e.tdno},r.a.createElement("div",{style:fn.tdno},r.a.createElement(At,null,"TD No. "+e.tdno)),r.a.createElement("div",{style:fn.rpuInfoContainer},r.a.createElement(tt,{caption:"Title No."},e.titleno),r.a.createElement(tt,{caption:"PIN"},e.pin),r.a.createElement(tt,{caption:"Address"},(n=[],(t=e).lotno&&n.push("Lot: "+t.lotno),t.blockno&&n.push("Block: "+t.blockno),t.street&&n.push("Street: "+t.street),t.barangay&&n.push("Barangay: "+t.barangay),n.join(" "))),r.a.createElement(tt,{caption:"Class"},e.classcode),r.a.createElement(tt,{caption:"Area"},e.areasqm),r.a.createElement(tt,{caption:"Owner"},e.owner.name)));var t,n})),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Add Lot Info",action:N}),r.a.createElement(ke,{caption:"Next",action:function(){s(null),0===g.length?s("Add at least one Lot Information."):i()}}))),r.a.createElement(rt,{visibleWhen:"initial"===f},r.a.createElement(At,null,"Specify the Site Location/Property"),r.a.createElement(at,{msg:c}),r.a.createElement(Nt,null),r.a.createElement(Ft,{caption:"Tax Declaration No.",value:v,onChange:y,autoFocus:!0}),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Back to List",action:function(){E("view-rpus")},variant:"text"}),r.a.createElement(ke,{caption:"Search",action:function(){p(!0),Ut((t.orgcode||t.id)+":OboOnlineService","obo").invoke("findLocation",{refno:v||newRefno},(function(e,t){e?s(e):(t.owner.resident="local"==t.owner.address.type?1:0,t.owner.address.city&&(t.owner.address.citymunicipality=t.owner.address.city),t.owner.address.municipality&&(t.owner.address.citymunicipality=t.owner.address.municipality),t.owner.ctc={},t.lotowned="1",t.appid=n,"boolean"!=typeof t.bill.ispaid&&(t.bill.ispaid=!0),x(t),E("view-lot")),p(!1)}))},disableWhen:m,loading:m}))),r.a.createElement(rt,{visibleWhen:"view-lot"===f},r.a.createElement("p",null,"Please check carefully if the information is correct. For any discrepancies, please contact the Assessor's Office before proceeding."),j&&j.bill&&0==j.bill.ispaid&&r.a.createElement("label",{style:fn.balanceText},"Note: There is still an unpaid balance of ",r.a.createElement("u",null,"Php ",Me(j.bill.amtdue)),". You can settle this by paying online ",r.a.createElement("a",{href:"/partner/"+t.group.name+"_"+t.name+"/rptis/rptbilling",target:"0"},r.a.createElement("u",null,"here"))),r.a.createElement(it,{context:j,handler:x},r.a.createElement(dn,{editable:!1}),r.a.createElement(Nt,null),r.a.createElement(pn,{name:"owner",orgcode:t.id,owner:j.owner,editable:!0})),r.a.createElement(xe,null,r.a.createElement(we,{action:N,caption:"Back"}),r.a.createElement(ke,{action:function(e){null!==j.bill&&!1===j.bill.ispaid?s("Please settle all unpaid balances first before proceeding"):(s(null),E("edit-owner-info"))},caption:"Next"}))),r.a.createElement(rt,{visibleWhen:"edit-owner-info"===f},r.a.createElement("form",{ref:P},r.a.createElement("label",null,"Please update the information if necessary"),r.a.createElement(it,{context:j,handler:x},r.a.createElement(un,{caption:"Is lot owned or leased?",property:j,name:"lotowned",row:!0,autoFocus:!0}),r.a.createElement(pn,{name:"owner",owner:j.owner,orgcode:t.id,editable:!0,showIdEntry:!0,editableAddress:!0,editableIdEntry:!0,onError:function(e){w(e)}})),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return E("view-lot")},caption:"Back"}),r.a.createElement(ke,{action:function(){!k&&P.current.reportValidity()&&(s(null),l.invoke("saveRpu",j,(function(e,t){e?s(e):(T(),E("view-rpus"))})))},caption:"Next"})))))}},{step:3,name:"location",caption:"Project Location",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=Object($t.p)(e.partner.id),o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)(!1),m=u[0],p=u[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(),v=b[0],y=b[1];return Object(a.useEffect)((function(){p(!0),n.invoke("getLocation",{appid:e.appno},(function(e,t){e?(s(e),p(!1)):t&&t.barangay&&t.barangay.name?(E(t),y(t.barangay.name)):E({})}))}),[]),Object(a.useEffect)((function(){i.length>0&&n.invoke("getRpus",{appid:e.appno},(function(e,t){if(e)s(e);else{var n=t[0],a=f&&f.barangay?f.barangay.name:n.barangay,r=en({},f);f&&f.barangay&&f.barangay.objid||(r.lotno=n.lotno,r.lotarea=n.areasqm,r.blockno=n.blockno,r.street=n.street),r.barangay=i.find((function(e){return e.name===a})),E(r),p(!1)}}))}),[v,i]),m?r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Project Location")):r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Project Location"),r.a.createElement(Nt,null),r.a.createElement(rt,null,r.a.createElement(At,null,"Specify Project Location"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:c}),r.a.createElement(it,{context:f,handler:E},r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{name:"lotno",caption:"Lot No."}),r.a.createElement(Ft,{name:"blockno",caption:"Block No."})),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{name:"unitno",caption:"Unit No."}),r.a.createElement(Ft,{name:"bldgno",caption:"Building No."})),r.a.createElement(Ft,{name:"bldgname",caption:"Building Name"}),r.a.createElement(Ft,{name:"street",caption:"Street"}),r.a.createElement(Ft,{name:"subdivision",caption:"Subdivision"}),r.a.createElement($t.a,{barangays:i,name:"barangay",caption:"Barangay"}),r.a.createElement(Qe,{name:"lotarea",caption:"Lot Area (sq.m.)",textAlign:"left"})),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){s(null),n.invoke("saveLocation",en({appid:t},f),(function(e,t){e?s(e):l()}))}}))))}},{step:4,name:"project",caption:"Project Details",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i={appid:t,apptype:"NEW",worktypes:[],numfloors:1,numunits:1,occupancytype:{objid:null,group:{},division:{}}},o=Object(a.useState)(),c=o[0],s=o[1],u=(Object(a.useState)({}),Object(a.useState)(!1)),m=u[0],p=u[1],d=Object(a.useState)("project-detail"),f=d[0],E=d[1],b=Object(a.useState)("group")[0],v=Object(a.useState)(i),y=v[0],h=v[1],g=Object(a.useState)([])[1],S=Object(a.useState)([])[1],O=Object(a.useState)([])[1],j=Object(a.useState)()[1],x=Object(a.useState)([]),C=x[0],k=x[1],w=Object(a.useState)(!1),P=w[0],N=w[1],T=Object(a.useState)({dtproposedconstruction:!1,dtexpectedcompletion:!1}),W=T[0],A=T[1],I=Object(a.useRef)();return Object(a.useEffect)((function(){p(!0),s(null),En.invoke("getWorkTypes",null,(function(e,t){e?s(e):k(t),p(!1)}))}),[]),Object(a.useEffect)((function(){0!==C.length&&(p(!0),s(null),n.invoke("getProjectInfo",{appid:t},(function(e,t){if(e)s(e);else{if(0===t.worktypes.length)t.worktypes=C;else{var n=C.map((function(e){return t.worktypes.find((function(t){return e.objid===t}))?en({},e,{checked:!0}):e}));t.worktypes=n}t.numunits=t.numunits||1,t.numfloors=t.numfloors||1,j(t.contractor),h(t),E("project-detail")}p(!1)})))}),[C]),Object(a.useEffect)((function(){"group"===b?En.invoke("getOccupancyTypeGroups",null,(function(e,t){e?s(e):g(t)})):"division"===b?En.invoke("getOccupancyTypeDivisions",{groupid:y.occupancytype.group.objid},(function(e,t){e?s(e):S(t)})):"type"===b&&En.invoke("getOccupancyTypes",{divisionid:y.occupancytype.division.objid},(function(e,t){e?s(e):O(t)}))}),[b]),m?r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Project Details")):r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Project Details"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:c}),r.a.createElement(it,{visibleWhen:"project-detail"===f,context:y,handler:h},r.a.createElement("form",{ref:I},r.a.createElement(Ft,{caption:"Project Title",name:"title",required:!0,autoFocus:!0}),r.a.createElement(Ft,{caption:"Project Description",name:"description",required:!0}),y.occupancytypeid&&r.a.createElement(Ft,{caption:"Occupancy Type",name:"occupancytype.title",required:!0}),r.a.createElement(Nt,null),r.a.createElement(ut,{caption:"No of Units",name:"numunits",required:!0,fullWidth:!0}),r.a.createElement(rt,{row:!0},r.a.createElement(Qe,{caption:"Total Floor Area [sq.meter]",name:"totalfloorarea",required:!0,fullWidth:!0,textAlign:"left"}),r.a.createElement(Qe,{caption:"Building Height [meter]",name:"height",required:!0,fullWidth:!0,textAlign:"left"})),r.a.createElement(ut,{caption:"No. of Storeys",name:"numfloors",required:!0,fullWidth:!0}),r.a.createElement(Nt,null),r.a.createElement(Qe,{caption:"Estimated Cost [Php]",name:"projectcost",required:!0,decimalScale:2,textAlign:"left",fullWidth:!0}),r.a.createElement(rt,{row:!0},r.a.createElement(Ke,{caption:"Proposed Construction Date",name:"dtproposedconstruction",required:!0,helperText:W.dtproposedconstruction?"Date is invalid":"mm/dd/yyyy"}),r.a.createElement(Ke,{caption:"Expected Completion Date",name:"dtexpectedcompletion",required:!0,minDate:y.dtproposedconstruction,helperText:P?"Date should not be before proposed date":"mm/dd/yyyy",onError:function(){N(!0)}})),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){I.current.reportValidity()&&(y.dtproposedconstruction?y.dtexpectedcompletion?Ge(y.dtexpectedcompletion,y.dtproposedconstruction)||(A({dtproposedconstruction:!1,dtexpectedcompletion:!1}),N(!1),s(null),n.invoke("update",{appid:t,title:y.title,description:y.description,numunits:y.numunits,totalfloorarea:y.totalfloorarea,height:y.height,numfloors:y.numfloors,projectcost:y.projectcost,dtproposedconstruction:y.dtproposedconstruction,dtexpectedcompletion:y.dtexpectedcompletion},(function(e,t){e?s(e):(s(null),p(!1),E("select-worktype"))}))):A(en({},W,{dtexpectedcompletion:!0})):A(en({},W,{dtproposedconstruction:!0})))}})))),r.a.createElement(it,{visibleWhen:"select-worktype"===f,context:y,handler:h},r.a.createElement(At,null,"Select Work Types"),r.a.createElement(rt,{style:bn.column},y.worktypes.map((function(e,t){return r.a.createElement(Be,{caption:e.name,name:"worktypes["+t+"].checked",value:e.objid})}))),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return E("project-detail")}}),r.a.createElement(ke,{caption:"Next",action:function(){if(s(null),y.worktypes.findIndex((function(e){return!0===e.checked}))>=0){s(null);var e={appid:t,worktypes:y.worktypes.filter((function(e){return e.checked})).map((function(e){return e.objid}))};n.invoke("update",e,(function(e,t){e?s(c):(p(!1),l())}))}else s("Please check at least one work type.")}}))))}},{step:5,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i={appid:t,apptype:"NEW"},o=Object(a.useState)(),c=o[0],s=o[1],u=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)(i)),m=u[0],p=u[1],d=Object(a.useState)(),f=d[0],E=d[1];Object(a.useEffect)((function(){n.invoke("getProjectInfo",{appid:t},(function(e,t){e?s(e):(E(t.supervisor),p(t))}))}),[]);var b=function(e){n.invoke("update",{appid:t,supervisorid:e.objid},(function(t,n){t?s(t):(s(null),E(e))}))};return r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Project Details"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:c}),r.a.createElement(rt,null,r.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),r.a.createElement(Nt,{height:10}),f&&f.lastname&&r.a.createElement(rt,null,r.a.createElement(hn,{caption:"Inspector/Supervisor",professional:f,onSelectProfessional:b,role:m.type?m.type.supervisorrole:null})),(!f||!f.lastname)&&r.a.createElement(yn,{caption:"Search Professional",onSelect:b,fullWidth:!1}),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){f?l():s("Please select a professional.")},disableWhen:!f||!f.objid}))))}},{step:6,name:"occupancy",caption:"Occupancy Type",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=Object(a.useState)(),o=i[0],c=i[1],s=Object(a.useState)(!1),u=s[0],m=s[1],p=Object(a.useState)("select-occupancytype")[0],d=Object(a.useState)("group"),f=d[0],E=d[1],b=Object(a.useState)({}),v=b[0],y=b[1],h=Object(a.useState)([]),g=h[0],S=h[1],O=Object(a.useState)([]),j=O[0],x=O[1],C=Object(a.useState)([]),k=C[0],w=C[1],P=Object(a.useState)(!1)[1],N=Object(a.useState)(!1)[1];return Object(a.useEffect)((function(){m(!0),n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):(y({occupancytype:t.occupancytype}),P(t.occupancytype.objid)),m(!1)}))}),[]),Object(a.useEffect)((function(){"group"===f?(m(!0),Sn.invoke("getOccupancyTypeGroups",null,(function(e,t){e?c(e):S(t),m(!1)}))):"division"===f?(m(!0),Sn.invoke("getOccupancyTypeDivisions",{groupid:v.occupancytype.group.objid},(function(e,t){e?c(e):x(t),m(!1)}))):"type"===f&&(m(!0),Sn.invoke("getOccupancyTypes",{divisionid:v.occupancytype.division.objid},(function(e,t){e?c(e):w(t),m(!1)})))}),[f]),r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Occupancy Type"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:o}),r.a.createElement(rt,{visibleWhen:"select-occupancytype"===p},r.a.createElement(it,{visibleWhen:"group"===f,context:v,handler:y},r.a.createElement(At,null,"Select Occupancy Group"),r.a.createElement(wt,{name:"occupancytype.group.objid",list:g,Control:jn}),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){v.occupancytype.group.objid?E("division"):c("Kindly select an occupancy group.")},disableWhen:u,loading:u}))),r.a.createElement(it,{visibleWhen:"division"===f,context:v,handler:y},r.a.createElement(At,null,"Select Occupancy Group Division"),r.a.createElement(wt,{name:"occupancytype.division.objid",list:j,Control:jn}),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Back",action:function(){return E("group")}}),r.a.createElement(ke,{caption:"Next",action:function(){v.occupancytype.division.objid?E("type"):c("Kindly select an occupancy division group.")},disableWhen:u,loading:u}))),r.a.createElement(it,{visibleWhen:"type"===f,context:v,handler:y},r.a.createElement(At,null,"Select Occupancy Type"),r.a.createElement(wt,{name:"occupancytype.objid",list:k,Control:jn}),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Back",action:function(){return E("division")}}),r.a.createElement(ke,{caption:"Next",action:function(){v.occupancytype.objid?(m(!0),n.invoke("updateOccupancyType",{appid:t,occupancytype:v.occupancytype},(function(e,t){e?c(e):(c(null),m(!1),N(!1),l()),m(!1)}))):c("Kindly select an occupancy type.")},disableWhen:u,loading:u})))))}},{step:7,name:"accessories",caption:"Accessories",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=Object(a.useState)(),o=i[0],c=i[1],s=Object(a.useState)(!1),u=s[0],m=s[1],p=Object(a.useState)("initial"),d=p[0],f=p[1],E=Object(a.useState)("TRUE"),b=E[0],v=E[1],y=Object(a.useState)([]),h=y[0],g=y[1],S=Object(a.useState)([]),O=S[0],j=S[1],x=Object(a.useState)([]),C=x[0],k=x[1],w=function(){m(!0),n.invoke("getAccessories",{appid:t},(function(e,t){t||(t=[]),g(t),function(e){return!!(e.length>0&&/j.*/i.test(e[0].occupancytypeid))}(t)&&f("infos"),m(!1)}))};return Object(a.useEffect)((function(){m(!0),Ut("OboMiscListService","obo").invoke("getAccessoryOccupancyTypes",null,(function(e,t){if(e)c(e);else{var n={};t.forEach((function(e){n[""+e.objid.toLowerCase()]=!1})),k(t),j(n)}m(!1)})),w()}),[]),r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(Tt,null,"Accessories"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:o}),r.a.createElement(rt,{visibleWhen:"initial"===d},r.a.createElement("p",null,"Does the plan include accessories?"),r.a.createElement(wt,{name:"hasAccessories",value:b,onChange:v},r.a.createElement(mt,{caption:"Yes",value:"TRUE"}),r.a.createElement(mt,{caption:"No",value:"FALSE"})),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){"TRUE"===b?f("select-accessories"):(c(null),m(!0),n.invoke("saveAccessories",{appid:t,items:[]},(function(e,t){e?c(e):l(),m(!1)})))},disableWhen:u,loading:u}))),r.a.createElement(rt,{visibleWhen:"select-accessories"===d},r.a.createElement(At,null,"Select accessory to add if applicable"),r.a.createElement(it,{context:O,handler:j},C.map((function(e){return r.a.createElement(Be,{key:e.objid,caption:e.title,name:""+e.objid.toLowerCase()})}))),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return f("initial")}}),r.a.createElement(ke,{caption:"Next",action:function(){if(Object.keys(O).length>0){m(!0);var e=function(){var e=[];for(var n in O)O[n]&&e.push(n);return{appid:t,items:e}}();n.invoke("saveAccessories",e,(function(e,t){e?c(e):(w(),f("infos")),m(!1)}))}else c("Select at least one accessory type before proceeding.")},disableWhen:u,loading:u}))),r.a.createElement(it,{visibleWhen:"infos"===d,context:h,handler:g},h.map((function(e,t){return r.a.createElement("div",{key:e.objid},r.a.createElement(tt,{style:wn.infoTitle},e.type.title),e.infos.map((function(e,n){return r.a.createElement(Cn,{key:e.name+":"+t+":"+n,name:"["+t+"].infos["+n+"].value",dataType:e.datatype,caption:e.caption,unit:e.unit})})))})),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return f("select-accessories")}}),r.a.createElement(ke,{caption:"Next",action:function(){m(!0);var e={appid:t,infos:[]};h.forEach((function(t){var n;(n=e.infos).push.apply(n,t.infos)})),n.invoke("saveAccessoryInfos",e,(function(e,t){e?c(e):l(),m(!1)}))},disableWhen:u,loading:u}))))}},{step:8,name:"ancillarylist",caption:"Other Permits",component:function(e){var t,n,l,i=e.partner,o=e.appno,c=e.appService,s=e.moveNextStep,u=Object(a.useState)(!1),m=u[0],p=u[1],d=Object(a.useState)(),f=d[0],E=d[1],b=Object(a.useState)(!1),v=b[0],y=b[1],h=Object(a.useState)("permit-list"),g=h[0],S=h[1],O=Object(a.useState)([]),j=O[0],x=O[1],C=Object(a.useState)([]),k=C[0],w=C[1],P=Object(a.useState)({worktypes:[],type:{}}),N=P[0],T=P[1],W=function(){y(!0),c.invoke("getAncillaryPermits",{appid:o},(function(e,t){e?E(e):(w(t),m||0!==t.length||(p(!0),S("available-list"))),y(!1)}))};Object(a.useEffect)((function(){y(!0),c.invoke("getAvailableAncillaryPermitTypes",{appid:o},(function(e,t){e?E(e):x(t),y(!1)}))}),[k]),Object(a.useEffect)((function(){W()}),[g,m]);var A=!1;k.length>0&&(A=k.findIndex((function(e){return!e.designprofessionalid}))>=0);var I=null;return r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+o),r.a.createElement(Tt,null,"Other Permits"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:f}),r.a.createElement(rt,{visibleWhen:"permit-list"===g},r.a.createElement("label",null,"Click on edit ",r.a.createElement(_.a,{fontSize:"small",color:"primary"})," for each document and complete the details."),r.a.createElement(Nt,{height:40}),k.map((function(e){return r.a.createElement(rt,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement(rt,{row:!0},e.designprofessionalid?r.a.createElement("div",{style:{width:40}},r.a.createElement(ge.a,{style:{color:"green",paddingRight:10}})):r.a.createElement("div",{style:{width:40}}),r.a.createElement("label",null,e.type.title)),r.a.createElement(rt,{row:!0},e.designprofessionalid&&r.a.createElement(Ct,{caption:null,href:"/jreports/partner/"+i.group.name+"_"+i.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),r.a.createElement($e,{action:function(){return t=e,y(!0),void c.invoke("getAncillaryPermit",{objid:t.objid},(function(e,t){e?E(e):(E(null),function(e){y(!0),Ut("OboMiscListService","obo").invoke("getWorkTypes",{typeid:e.type.objid},(function(t,n){t?E(t):n&&n.length>0?(n.forEach((function(t){e.worktypes.findIndex((function(e){return e.toLowerCase()===t.name.toLowerCase()}))>=0&&(t.checked=!0)})),T(en({},e,{worktypes:n})),S("select-worktypes")):(S(e.infos.length>0?"infos":1===e.type.includecost?"cost":"professional"),T(e)),y(!1)}))}(t)),y(!1)}));var t},size:"small"}),r.a.createElement(Xe,{action:function(){return t=e,y(!0),void c.invoke("removeAncillaryPermit",{objid:t.objid},(function(e,t){e?E(e):(E(null),W()),y(!1)}));var t},size:"small"})))})),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Add New Permits",action:function(){return S("available-list")}}),r.a.createElement(ke,{caption:"Next",action:function(){var e=[];k.forEach((function(t){t.designprofessionalid||e.push(t.type.title)})),1===e.length?E("Permit "+e[0]+" is not processed"):e.length>1?E("The following permist are not processed: "+e.join(",")):s()},disableWhen:A}))),r.a.createElement(it,{visibleWhen:"select-worktypes"===g,context:N,handler:T},r.a.createElement("h4",null,N.type.title),r.a.createElement(At,null,"Select Work Types"),r.a.createElement(rt,{style:Pn.workTypeContainer},N.worktypes.map((function(e,t){return r.a.createElement(Be,{caption:e.name.toUpperCase(),name:"worktypes["+t+"].checked",value:e.name})}))),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return S("permit-list")}}),r.a.createElement(ke,{caption:"Next",action:function(){E(null),E(null),y(!0);var e={objid:N.objid,worktypes:N.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))};c.invoke("updateAncillaryPermit",e,(function(e,t){e?E(f):(S("infos"),y(!1)),y(!1)}))},disableWhen:v,loading:v}))),r.a.createElement(it,{visibleWhen:"infos"===g,context:N,handler:T},r.a.createElement(At,null,null===(t=N.type)||void 0===t?void 0:t.title),r.a.createElement(Nt,null),r.a.createElement("p",null,"Please fill the applicable values and click Save and Complete when done."),N.infos&&N.infos.map((function(e,t){var n=null;return null!==I&&I.category===e.category||(n=e.category,I=e),r.a.createElement(Cn,{key:e.name+":"+t,name:"infos["+t+"].value",category:n,dataType:e.datatype,caption:e.caption,unit:e.unit})})),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){S(N.worktypes&&N.worktypes.length>0?"select-worktypes":"permit-list")}}),r.a.createElement(ke,{caption:"Next",action:function(){y(!0),c.invoke("updateAncillaryPermit",{objid:N.objid,projectcost:N.projectcost,equipmentcost:N.equipmentcost},(function(e,t){e?E(e):S(1===N.type.includecost?"cost":"professional"),y(!1)}))},disableWhen:v,loading:v}))),r.a.createElement(rt,{visibleWhen:"available-list"===g},r.a.createElement(At,null,"Select ancillary and other permits to include in the project"),r.a.createElement(it,{context:j,handler:x,style:Pn.itemsContainer},j.map((function(e,t){return r.a.createElement(Be,{key:e.objid,caption:e.title,name:"["+t+"].selected"})}))),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){var e=j.filter((function(e){return!0===e.selected}));e.length>0?(y(!0),w(e),c.invoke("saveAncillaryPermits",{appid:o,permits:e},(function(e,t){e?E(e):(E(null),S("permit-list")),y(!1)}))):S("permit-list")},disableWhen:v,loading:v}))),r.a.createElement(it,{visibleWhen:"cost"===g,context:N,handler:T},r.a.createElement(At,null,null===(n=N.type)||void 0===n?void 0:n.title),r.a.createElement(Qe,{name:"projectcost",caption:"Project Cost",textAlign:"left",fullWidth:!1}),r.a.createElement(Qe,{name:"equipmentcost",caption:"Equipment Cost",textAlign:"left"}),r.a.createElement(Nt,null),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return S("infos")}}),r.a.createElement(ke,{caption:"Next",action:function(){y(!0),E(null),c.invoke("saveAncillaryPermit",{appid:o,objid:N.objid,infos:N.infos},(function(e,t){e?E(e):S("professional"),y(!1)}))},disableWhen:v,loading:v}))),r.a.createElement(it,{visibleWhen:"professional"===g,context:N,handler:T},r.a.createElement(At,null,null===(l=N.type)||void 0===l?void 0:l.title),r.a.createElement(Nt,null),r.a.createElement(hn,{caption:"Design Professional",professional:N.designprofessional,onSelectProfessional:function(e){T(en({},N,{designprofessional:e,designprofessionalid:e.objid}))},role:N.type.designprofessionalrole}),r.a.createElement(Nt,null),r.a.createElement(hn,{caption:"Supervisor in Charge Professional",professional:N.supervisor,onSelectProfessional:function(e){T(en({},N,{supervisor:e,supervisorid:e.objid}))},role:N.type.supervisorrole}),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return S("permit-list")}}),r.a.createElement(ke,{caption:"Save and Complete",action:function(){if(E(null),N.designprofessionalid)if(N.supervisorid){y(!0);var e=en({},N,{worktypes:N.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))});c.invoke("saveAncillaryPermit",e,(function(e,t){e?E(e):S("permit-list"),y(!1)}))}else E("Supervisor is required.");else E("Design Professional is required.")},disableWhen:v,loading:v}))))}},{step:9,name:"confirm",caption:"Confirm",component:function(e){var t=e.partner,n=e.appno,l=e.appService,i=e.moveNextStep,o=Object(a.useState)(!1),c=o[0],s=o[1],u=Object(a.useState)()[1],m=Object(a.useState)(!1),p=m[0],d=m[1],f=Object(a.useState)({}),E=f[0],b=f[1],v=Object(a.useState)([]),y=v[0],h=v[1],g=(Object(a.useState)(!1),function(){u(null),d(!1)});return Object(a.useEffect)((function(){d(!0),l.invoke("getApplication",{appid:n},(function(e,t){e?u(e):(b(t),g())})),d(!0),l.invoke("getAncillaryPermits",{appid:n},(function(e,t){e?u(e):(h(t),g())}))}),[]),r.a.createElement(rt,null,r.a.createElement("label",null,"Tracking No. "+n),r.a.createElement(Tt,null,"Confirm Application"),r.a.createElement(Nt,null),r.a.createElement(jt,{open:c,type:"confirm",msg:"Permit processing will now be completed. Make sure that all information are correct.",onAccept:function(){s(!1),i("END")},onCancel:function(){return s(!1)}}),r.a.createElement(dt,{visibleWhen:p}),r.a.createElement("p",null,"Please confirm the info and preview each permit application before submitting"),r.a.createElement(it,{visibleWhen:!p,context:E,handler:b},r.a.createElement(rt,{style:Nn.container},r.a.createElement(rt,{style:Nn.linkContainer},r.a.createElement(Ct,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n}),r.a.createElement(Ze,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n})),r.a.createElement(rt,null,r.a.createElement(Ft,{caption:"Tracking No.",name:"objid",readOnly:!0}),r.a.createElement(Ft,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(Ft,{caption:"Project Location",expr:function(){if(!E.location)return"";var e=[];return E.location.lotno&&e.push("Lot: "+E.location.lotno),E.location.blockno&&e.push("Block: "+E.location.blockno),E.location.street&&e.push("Street: "+E.location.street),E.location.barangay.name&&e.push("Barangay: "+E.location.barangay.name),e.join(" ")},readOnly:!0}),r.a.createElement(Nt,null),r.a.createElement(Ft,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(Ft,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),r.a.createElement(Ft,{caption:"Type of Work",expr:function(){var e,t="";return E.worktypes&&E.worktypes.length>0&&(t=null===(e=E.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0}),r.a.createElement(Ft,{caption:"Supervisor in Charge of Construction",expr:function(){var e="";return E.contractor&&(e=E.contractor.lastname+", "+E.contractor.firstname+" "+E.contractor.middlename),e},readOnly:!0})),r.a.createElement(rt,null,r.a.createElement(rt,{row:!0},r.a.createElement(ut,{caption:"No. of Units",name:"numunits",readOnly:!0}),r.a.createElement(ut,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),r.a.createElement(Qe,{caption:"Bldg. Height",name:"height",readOnly:!0,textAlign:"left"})),r.a.createElement(Nt,null),r.a.createElement(rt,{row:!0},r.a.createElement(Qe,{caption:"Total Area (sqm)",name:"totalfloorarea",readOnly:!0,textAlign:"left",fullWidth:!0}),r.a.createElement(Qe,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left",fullWidth:!0})),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(Ft,{caption:"Est. Completion Date",name:"dtexpectedcompletion",readOnly:!0})))),r.a.createElement(Nt,null),r.a.createElement(rt,{style:Nn.ancillaryContainer},r.a.createElement(At,{style:Nn.label},"Other Permits"),r.a.createElement(rt,{visibleWhen:y.length>0},y.map((function(e){return r.a.createElement(rt,{style:Nn.ancillaryItem},r.a.createElement("label",{style:{marginLeft:20}},e.type.title),r.a.createElement(rt,{row:!0},r.a.createElement(Ct,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),r.a.createElement(Ze,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid})))})))),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Submit",action:function(){s(!0)}}))))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.partner,n=e.appno,l=e.appService,i=e.history,o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)(!1)[1],m=Object(a.useState)({}),p=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1],v=Object(a.useState)([]),y=v[0],h=v[1],g=function(){s(null),u(!1)};Object(a.useEffect)((function(){u(!0),l.invoke("getProjectInfo",{appid:n},(function(e,t){e?s(e):(d(t),g())})),u(!0),l.invoke("getRequirements",{appid:n},(function(e,t){e?s(e):(b(t.text),g())})),u(!0),l.invoke("getDocsForDownload",{appid:n},(function(e,t){e?s(e):(h(t),g())}))}),[]);var S=[];p.location&&(p.location.lotno&&S.push("Lot: "+p.location.lotno),p.location.blockno&&S.push("Block: "+p.location.blockno),p.location.street&&S.push("Street: "+p.location.street),p.location.barangay.name&&S.push("Barangay: "+p.location.barangay.name));var O=Tn(p.obocontactinfo,"Building and Ancillary Permit");return r.a.createElement(rt,null,r.a.createElement(Nt,null),r.a.createElement(at,{msg:c}),r.a.createElement(it,{context:p,handler:d},r.a.createElement("label",null,O),r.a.createElement(Nt,{height:10}),r.a.createElement(rt,{style:Wn.container},r.a.createElement(rt,{style:Wn.infoContainer},r.a.createElement(Ft,{caption:"Tracking No.",name:"objid",readOnly:!0}),r.a.createElement(Ft,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(Ft,{caption:"Location",expr:function(){return S.join(" ,")},readOnly:!0}),r.a.createElement(Ft,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(Qe,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left"}),r.a.createElement(rt,{row:!0},r.a.createElement(Ke,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(Ke,{caption:"Est. End Date",name:"dtexpectedcompletion",readOnly:!0}))))),r.a.createElement(Nt,null),y.length>0&&function(e,t){var n=t.map((function(t){return r.a.createElement(rt,{key:t.reportid,style:Wn.document},r.a.createElement("label",{style:{marginLeft:20}},t.title),r.a.createElement(rt,{row:!0},r.a.createElement(Ct,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),r.a.createElement(Ze,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Documents for Download:"),r.a.createElement(Nt,{height:10}),r.a.createElement(rt,{style:{margin:"0px 20px"}},n))}(t,y),r.a.createElement(Nt,null),r.a.createElement("h3",null,"List of Requirements:"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:E}}),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Return",action:function(){return i.push("/partner/"+t.group.name+"_"+t.name+"/services")}})))}}],Rn=function(e){var t=Object(a.useState)(!1),n=t[0],l=t[1],i=Object(a.useState)(!1),o=i[0],c=i[1],s=Object(a.useState)("init"),u=s[0],m=s[1],p=Object(a.useState)(He(e.location,"appid")),d=p[0],f=p[1],E=Object(a.useState)(),b=E[0],v=E[1],y=Object(a.useState)({step:1}),h=y[0],g=y[1],S=Object(a.useState)(1),O=S[0],j=S[1],x=e.partner,C=e.service,k=e.history;b!==e.location.hash&&v(e.location.hash);var w=function(){"init"===u&&(m("apptype"),e.history.push(""+location.pathname))};Object(a.useEffect)((function(){d?(l(!0),An.invoke("findCurrentInfo",{appid:d},(function(t,n){var a=x.orgcode||x.id;t?c(t):n?a!=n.orgcode?(c("The application number provided is not for this local government"),w()):(g(n),j(n.step),m("processing"),e.history.push(location.pathname+"?appid="+d+"#"+In[n.step].name)):(c("Application no. does not exist"),w()),l(!1)}))):m("apptype")}),[d]),Object(a.useEffect)((function(){if(b){var e=In.find((function(e){return e.name===b.substring(1)}));j(e.step)}}),[b]);var P=function(t){j(t),e.history.push(location.pathname+"?appid="+d+"#"+In[t].name)};if("init"===u||n)return r.a.createElement("div",null,r.a.createElement(pt,null));if("apptype"===u)return r.a.createElement(nn,{partner:x,appService:An,service:C,error:o,onCancel:k.goBack,onSubmit:function(e){var t=e.appType,n=e.appno;"new"===t?m(t):n&&f(n)}});if("new"===u)return r.a.createElement(cn,en({},e,{handler:function(e){f(e),m("processing")},onCancel:function(){return e.history.goBack()}}));var N=In[O],T=N.component,W={partner:x,appno:d,pages:In,moveNextStep:function(e){O<h.step&&1!==h.step?(j(h.step),P(h.step)):An.invoke("update",{appid:d,state:e,step:O+1},(function(e,t){e?c(e):(j(t.step),g(en({},h,{step:t.step})),P(t.step))}))},appService:An,stepCompleted:O<h.step,history:e.history};return r.a.createElement(xt,null,h.step<In.length&&r.a.createElement(rt,{target:"left",style:Dn.stepperContainer},r.a.createElement(Dt,{steps:In,completedStep:h.step,activeStep:O,handleStep:P})),r.a.createElement(We,null,r.a.createElement(zt,null,C.title),r.a.createElement(T,en({page:N},W))))},Dn={stepperContainer:{paddingLeft:40,marginBottom:50,overflowY:"auto",overflowX:"hidden",height:"80vh"}},Ln=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],Bn=[{name:"email",title:"Email Verification"},{name:"specifybldgpermit",title:"Specify Building Permit"},{name:"verifybldgpermit",title:"Verify Building Permit Information"},{name:"confirmation",title:"Confirmation"},{name:"newapp",title:"New Application "}],qn=function(e){var t=e.partner,n=e.service,l=e.onComplete,i=e.appService,o=e.onCancel,c=Object(a.useState)(),s=c[0],u=c[1],m=Object(a.useState)({}),p=m[0],d=m[1],f=Object(a.useState)({}),E=f[0],b=f[1],v=Object(a.useState)("new")[0],y=Object(a.useState)(),h=y[0],g=y[1],S=Object(a.useState)(),O=S[0],j=S[1],x=Object(a.useState)({}),C=x[0],k=x[1],w=Object(a.useState)(0),P=w[1],N=Bn[w[0]],T=function(){P((function(e){return e+1}))},W=function(){P((function(e){return e-1}))};return r.a.createElement(xt,null,"email"===N.name?r.a.createElement($t.g,{title:n.title,showName:!0,onCancel:o,onVerify:function(e){b(e),T()},partner:t,connection:"obo"}):r.a.createElement(We,null,r.a.createElement(zt,null,n.title),r.a.createElement(rt,{visibleWhen:"specifybldgpermit"===N.name},r.a.createElement(Tt,null,N.title),r.a.createElement(Nt,{height:30}),r.a.createElement(Ft,{caption:"Building Permit No.",value:O,onChange:j,variant:"outlined",fullWidth:!1,required:!0,error:p.bldgPermitNo||s,helperText:p.bldgPermitNo||s,size:"small",autoFocus:!0}),r.a.createElement(xe,null,r.a.createElement(we,{action:W}),r.a.createElement(ke,{caption:"Next",action:function(){O?(u(null),Ut(t.id+":OboOnlineService","obo").invoke("findBldgPermitNo",{permitno:O},(function(e,t){e?u(e):(k(t),T())}))):d({bldgPermitNo:"Please specify the Building Permit No."})}}))),r.a.createElement(it,{visibleWhen:"verifybldgpermit"===N.name,context:C,handler:k},r.a.createElement(Tt,null,"ation"),r.a.createElement(Nt,{height:30}),r.a.createElement(Ft,{caption:"Building Permit No.",name:"permitno",readOnly:!0}),r.a.createElement(Ft,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(Nt,null),r.a.createElement(Ft,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(Ft,{caption:"Location",name:"location.text",readOnly:!0}),r.a.createElement(Qe,{caption:"Project Cost",name:"projectcost",readOnly:!0}),r.a.createElement(ut,{caption:"No. of Units",name:"numunits",readOnly:!0}),r.a.createElement(ut,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),r.a.createElement(Qe,{caption:"Total Floor Area",name:"totalfloorarea",readOnly:!0}),r.a.createElement(Qe,{caption:"Height",name:"height",readOnly:!0}),r.a.createElement(Ke,{caption:"Proposed Construction Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(Ke,{caption:"Expected Completion Date",name:"dtexpectedcompletion",readOnly:!0}),r.a.createElement(xe,null,r.a.createElement(we,{action:W}),r.a.createElement(ke,{caption:"Next",action:function(){T()}}))),r.a.createElement(rt,{visibleWhen:"confirmation"===N.name},r.a.createElement(an,{partner:t,error:s,onCancel:W,onContinue:function(){i.invoke("create",{orgcode:t.id,apptype:v,permittype:C.apptype,applicant:C.applicant,bldgpermit:C,contact:E},(function(e,t){e?u(e):(g(t.objid),T())}))}})),r.a.createElement(rt,{visibleWhen:"newapp"===N.name,width:400},r.a.createElement(rn,{appno:h,onContinue:function(){l({appType:"new",appno:h})}}))))},_n={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},columnTitle:{fontWeight:"bold",textAlign:"center",width:300,padding:10},row:{display:"flex",flexDirection:"row",alignItems:"flex-start"},label:{width:"100%"},item:{width:400,marginRight:10}},Fn={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},Vn={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},zn={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"}},Mn={container:{padding:"0px 30px"},label:{fontWeight:"bold"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},Hn=Ut("OnlineOccupancyPermitService","obo"),Un=[{step:0,component:null},{step:1,name:"apptype",caption:"Application Type",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=Object(a.useState)(),o=i[0],c=i[1],s=(Object(a.useState)(!1),Object(a.useState)({})),u=s[0],m=s[1];return Object(a.useEffect)((function(){c(null),n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):m(t)}))}),[]),r.a.createElement(rt,null,r.a.createElement(at,{msg:o}),r.a.createElement(it,{context:u,handler:m},r.a.createElement(wt,{name:"apptype"},r.a.createElement(mt,{caption:"Full (Completed)",value:"full"}),r.a.createElement(mt,{caption:"Partial",value:"partial"}))),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){n.invoke("update",{objid:u.objid,apptype:u.apptype},(function(e,t){e?c(e):l()}))}})))}},{step:2,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,l=e.appService,i=e.movePrevStep,o=e.moveNextStep,c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)(!1),p=m[0],d=m[1],f=Object(a.useState)("read")[1],E=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1}),b=E[0],v=E[1],y=Object(a.useRef)();return Object(a.useEffect)((function(){u(!0),d(null),l.invoke("getApplicant",{appid:t},(function(e,t){e?d(e):v(t||{}),u(!1),f("read")}))}),[]),r.a.createElement(rt,null,r.a.createElement(at,{msg:p}),r.a.createElement(it,{context:b,handler:v},r.a.createElement("form",{ref:y},r.a.createElement(_e,{items:Ln,name:"entitytype",caption:"Type of Applicant"}),r.a.createElement(Ft,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==b.entitytype}),r.a.createElement(Nt,null),r.a.createElement(rt,null,r.a.createElement(At,null,"Administrator or contact name of applicant"),r.a.createElement(Ft,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(Ft,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(Ft,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(et,{name:"email"}),r.a.createElement(Ot,{name:"mobileno"})),r.a.createElement(Nt,null),r.a.createElement(At,null,"Applicant Address"),r.a.createElement(Be,{caption:"Resident",name:"resident",onChange:function(){var e=en({},b,{resident:!b.resident,address:{}});v(e)}}),b.resident?r.a.createElement($t.i,{orgcode:n.id,name:"address",caption:"Address",isResident:b.resident}):r.a.createElement($t.j,{name:"address",caption:"Address"}),r.a.createElement(Nt,null),r.a.createElement(At,null,"Proof of Identity"),r.a.createElement($t.h,{name:"id"}))),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Next",action:function(){y.current.reportValidity()&&(b.resident&&b.address&&!b.address.barangay||(d(null),u(!0),l.invoke("saveApplicant",b,(function(e,t){e?d(e):o(),u(!1)}))))},disableWhen:s,loading:s})))}},{step:3,name:"actualcost",caption:"Actual Costs",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=e.movePrevStep,o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)({}),m=u[0],p=u[1],d=Object(a.useState)({items:[{caption:"Total Materials Cost",field:"totalmaterialcost",value:0},{caption:"Total Direct Cost",field:"totaldirectlaborcost",value:0},{caption:"Total Equipment Cost",field:"totalequipmentcost",value:0},{caption:"Total Other Cost",field:"totalothercost",value:0}]}),f=d[0],E=d[1],b=Object(a.useState)(!1),v=b[0],y=b[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){if(e)s(e);else{p(t);var n=en({},f);n.items.forEach((function(e){e.value=t[e.field]})),E(n)}}))}),[t]),r.a.createElement(rt,{style:{maxWidth:600}},r.a.createElement(tt,null,"Please indicate the actual cost of construction."),r.a.createElement(Nt,null),r.a.createElement(at,{msg:c}),r.a.createElement(it,{context:f,handler:E,style:Fn.container},f.items.map((function(e,t){return r.a.createElement(rt,{key:e.field,style:Fn.row},r.a.createElement(tt,{caption:e.caption,style:Fn.label}),r.a.createElement(Qe,{name:"items["+t+"].value",variant:"outlined",style:Fn.item,fullWdith:!1}))}))),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Next",action:function(){var e=en({},m);f.items.forEach((function(t){e[t.field]=t.value})),y(!0),n.invoke("update",e,(function(e,t){e?s(e):l(),y(!1)}))},disableWhen:v,loading:v})))}},{step:4,name:"firecodefee",caption:"Fire Code Fees",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=e.movePrevStep,o=Object(a.useState)(!1),c=o[0],s=o[1],u=Object(a.useState)(),m=u[0],p=u[1],d=(Object(a.useState)({}),Object(a.useState)({items:[]})),f=d[0],E=d[1];return Object(a.useEffect)((function(){n.invoke("getAppInfos",{appid:t},(function(e,t){e?p(e):E(en({},f,{items:t}))}))}),[t]),r.a.createElement(rt,{style:{maxWidth:600}},r.a.createElement(tt,null,"Please indicate the other cost of construction."),r.a.createElement(Nt,null),r.a.createElement(at,{msg:m}),r.a.createElement(it,{context:f,handler:E,style:Vn.container},f.items.map((function(e,t){return r.a.createElement(rt,{key:e.objid,style:Vn.row},r.a.createElement(tt,{caption:e.caption,style:Vn.label}),r.a.createElement(Qe,{name:"items["+t+"].value",variant:"outlined",style:Vn.item,fullWdith:!1}))}))),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Next",action:function(){s(!0),n.invoke("saveAppInfos",{appid:t,infos:f.items},(function(e,t){e?p(e):l(),s(!1)}))},disableWhen:c,loading:c})))}},{step:5,name:"plannedactual",caption:"Planned vs Actual",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=e.movePrevStep,o=Object(a.useState)()[1],c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)({}),p=m[0],d=m[1],f=Object(a.useState)({}),E=f[0],b=f[1],v=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?o(e):b(t)}))}),[t]),r.a.createElement(rt,{style:{maxWidth:600}},r.a.createElement(tt,null,"Please indicate the actual values of construction."),r.a.createElement(Nt,null),r.a.createElement(it,{context:E,handler:b,style:_n.container},r.a.createElement("form",{ref:v},r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"",style:_n.label}),r.a.createElement("div",{style:_n.columnTitle},"Planned"),r.a.createElement("div",{style:_n.columnTitle},"Actual")),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"Project Total Cost",style:_n.label}),r.a.createElement(Qe,{name:"bldgpermit.projectcost",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Qe,{name:"actualprojectcost",disabled:!0,style:_n.item,fullWdith:!1,variant:"outlined"})),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"Total Floor Area (sqm)",style:_n.label}),r.a.createElement(Qe,{name:"bldgpermit.totalfloorarea",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Qe,{name:"actualtotalfloorarea",required:!0,style:_n.item,fullWdith:!1,variant:"outlined",autoFocus:!0})),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"No. of Units",style:_n.label}),r.a.createElement(Qe,{name:"bldgpermit.numunits",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Qe,{name:"actualnumunits",style:_n.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"No. of Floors",style:_n.label}),r.a.createElement(Qe,{name:"bldgpermit.numfloors",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Qe,{name:"actualnumfloors",style:_n.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"Height (m)",style:_n.label}),r.a.createElement(Qe,{name:"bldgpermit.height",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Qe,{name:"actualheight",style:_n.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"Start Date",style:_n.label}),r.a.createElement(Ke,{name:"bldgpermit.dtproposedconstruction",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Ke,{name:"dtactualstarted",style:_n.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(rt,{style:_n.row},r.a.createElement(tt,{caption:"Completion Date",style:_n.label}),r.a.createElement(Ke,{name:"bldgpermit.dtexpectedcompletion",disabled:!0,variant:"outlined",style:_n.item,fullWdith:!1}),r.a.createElement(Ke,{name:"dtactualcompleted",style:_n.item,fullWdith:!1,variant:"outlined",required:!0,error:p.dtactualcompleted,helperText:p.dtactualcompleted})),r.a.createElement(Nt,null))),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Next",action:function(){v.current.reportValidity()&&function(){var e={};return E.dtactualstarted&&E.dtactualcompleted&&Ge(E.dtactualcompleted,E.dtactualstarted)&&(e.dtactualcompleted="Actual date completed should be after actual date started."),function(e){return Object.keys(e).length>0}(e)?(d(e),!1):(d({}),!0)}()&&(u(!0),n.invoke("update",E,(function(e,t){e?o(e):l(),u(!1)})))},disableWhen:s,loading:s})))}},{step:6,name:"contractor",caption:"Contractor",component:function(e){var t=e.appno,n=e.appService,l=e.moveNextStep,i=e.movePrevStep,o=Object(a.useState)()[1],c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)({})[0],p=Object(a.useState)({}),d=p[0],f=p[1],E=Object(a.useState)(!1),b=E[0],v=E[1],y=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?o(e):(t.contractor=t.contractor||{pcab:{},manager:{}},t.contractor.pcab||(t.contractor.pcab={}),v(!(!t.contractor||!t.contractor.name)),f(t))}))}),[t]),r.a.createElement(rt,null,r.a.createElement(tt,null,"Please specify contractor if available"),r.a.createElement(Nt,null),r.a.createElement(Be,{value:b,onChange:v,caption:"Is undertaken by a Contractor?"}),r.a.createElement(it,{visibleWhen:b,context:d,handler:f},r.a.createElement("form",{ref:y},r.a.createElement(Ft,{name:"contractor.name",caption:"Contractor",required:!0,error:m.name}),r.a.createElement(Ft,{name:"contractor.address",caption:"Address",required:!0,error:m.address}),r.a.createElement(Ft,{name:"contractor.pcab.idno",caption:"PCAB License No.",required:!0,error:m.pcabidno}),r.a.createElement(Ke,{name:"contractor.pcab.dtvalid",caption:"Validity Date",required:!0,error:m.pcabdtvalid}),r.a.createElement(Ft,{name:"contractor.tin",caption:"TIN",required:!0,error:m.tin}),r.a.createElement(Ft,{name:"contractor.manager.name",caption:"Authorized Managing Officer",required:!0,error:m.manageroffice}),r.a.createElement(et,{name:"contractor.manager.email",required:!0,error:m.manageremail}))),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Next",action:function(){if(u(!0),b){if(!y.current.reportValidity())return;n.invoke("update",{objid:d.objid,contractor:d.contractor},(function(e,t){e?o(e):l(),u(!1)}))}else n.invoke("update",{objid:d.objid,contractor:{name:null,address:null,pcab_idno:null,pcab_dtvalid:null,tin:null,manager:{name:null,email:null}}},(function(e,t){e?o(e):l(),u(!1)}))},disableWhen:s,loading:s})))}},{step:7,name:"professionals",caption:"Professionals",component:function(e){var t=e.appno,n=e.appService,l=e.movePrevStep,i=e.moveNextStep,o=Object(a.useState)()[1],c=Object(a.useState)(!1),s=c[0],u=c[1],m=Object(a.useState)("design"),p=m[0],d=m[1],f=Object(a.useState)([]),E=f[0],b=f[1];Object(a.useEffect)((function(){u(!0),n.invoke("getProfessionals",{appid:t},(function(e,t){e?o(e):b(t),u(!1)}))}),[t]);var v=function(e,t){var n=E[t];"design"===p?(n.designprofessionalid=e.objid,n.designprofessional=e):(n.supervisorid=e.objid,n.supervisor=e);var a=[].concat(E);a[t]=n,b(a)},y=function(){u(!0),n.invoke("updateProfessionals",E,(function(e,t){e?o(e):"design"===p?d("supervisor"):i(),u(!1)}))};return r.a.createElement(rt,null,r.a.createElement(rt,{visibleWhen:"design"===p},r.a.createElement("h3",null,"List of Design Professionals"),E.map((function(e,t){return e.section.designprofessionalrole?r.a.createElement("div",{key:e.objid},e.designprofessionalid?r.a.createElement(hn,{caption:e.sectionid+" Design Professional",professional:E[t].designprofessional,onSelectProfessional:function(e){return v(e,t)},role:e.section.designprofessionalrole}):r.a.createElement(yn,{caption:e.sectionid+" Design Professional",searchFieldTitle:"Please input the 7-digit PRC ID Number and click search",onSelect:function(e){return v(e,t)},role:e.section.designprofessionalrole})):null})),r.a.createElement(xe,null,r.a.createElement(we,{action:l}),r.a.createElement(ke,{caption:"Next",action:y,disableWhen:s,loading:s}))),r.a.createElement(rt,{visibleWhen:"supervisor"===p},r.a.createElement("h3",null,"List of Supervisors"),E.map((function(e,t){return e.section.supervisorrole?r.a.createElement("div",{key:e.objid},e.supervisorid?r.a.createElement(hn,{caption:e.sectionid+" Supervisor",professional:E[t].supervisor,onSelectProfessional:function(e){return v(e,t)},role:e.section.supervisorrole}):r.a.createElement(yn,{caption:e.sectionid+" Supervisor",searchFieldTitle:"",onSelect:function(e){return v(e,t)},role:e.section.supervisorrole})):null})),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return d("design")}}),r.a.createElement(ke,{caption:"Next",action:y,disableWhen:s,loading:s}))))}},{step:8,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,l=e.movePrevStep,i=e.moveNextStep,o=Object(a.useState)(),c=o[0],s=o[1],u=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)({})),m=u[0],p=u[1],d=Object(a.useState)(),f=d[0],E=d[1];Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):(console.log("app.supervisor",t.supervisor),E(t.supervisor),p(t))}))}),[]);var b=function(e){n.invoke("update",{objid:m.objid,supervisorid:e.objid},(function(t,n){t?s(t):(s(null),E(e))}))};return r.a.createElement(rt,null,r.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),r.a.createElement(at,{msg:c}),r.a.createElement(Nt,null),r.a.createElement(rt,null,f&&f.lastname?r.a.createElement(hn,{caption:"Inspector/Supervisor",professional:f,onSelectProfessional:b}):r.a.createElement(yn,{caption:"Inspector/Supervisor",searchFieldTitle:"",onSelect:b})),r.a.createElement(xe,null,r.a.createElement(we,{action:l}),r.a.createElement(ke,{caption:"Next",action:function(){f?i():s("Please select a professional.")},disableWhen:!f||!f.objid})))}},{step:9,name:"confirmation",caption:"Confirmation",component:function(e){var t=e.appno,n=e.partner,l=e.appService,i=e.movePrevStep,o=e.onComplete,c=Object(a.useState)()[1],s=Object(a.useState)({}),u=s[0],m=s[1];return Object(a.useEffect)((function(){l.invoke("getApplication",{appid:t},(function(e,t){e?c(e):m(t)}))}),[t]),r.a.createElement(rt,null,r.a.createElement("p",null,"Before sending please check first the generated application info. If everything is in order, you can click Submit button to complete the transaction."),r.a.createElement(Nt,null),r.a.createElement(rt,{style:zn.container},r.a.createElement(rt,{style:zn.row},r.a.createElement(tt,{style:zn.label},"Application for Certificate of Occupancy"),r.a.createElement(rt,{row:!0},r.a.createElement(Ct,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),r.a.createElement(rt,{style:zn.row},r.a.createElement(tt,{style:zn.label},"Certificate of Completion"),r.a.createElement(rt,{row:!0},r.a.createElement(Ct,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Submit",action:function(){l.invoke("update",u,(function(e,t){e?c(e):o()}))}})))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.appno,n=e.partner,l=e.appService,i=e.history,o=Object(a.useState)(),c=o[0],s=o[1],u=Object(a.useState)(!1)[1],m=Object(a.useState)({})[1],p=Object(a.useState)({}),d=p[0],f=p[1],E=Object(a.useState)(),b=E[0],v=E[1];Object(a.useEffect)((function(){l.invoke("getApplication",{appid:t},(function(e,a){e?s(e):(m(a),Ut("OboContactInfoService","obo").invoke("getInfo",{orgcode:n.id},(function(e,t){e?s(e):f(t)})),u(!0),l.invoke("getRequirements",{appid:t},(function(e,t){e?s(e):(v(t.text),resetStatus())})))}))}),[t]);var y=Tn(d,"Application for Certificate of Occupancy and Certificate of Completion");return r.a.createElement(rt,null,c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(at,{msg:c}),r.a.createElement(Nt,null)),r.a.createElement("label",null,y),r.a.createElement(Nt,null),r.a.createElement(rt,{style:Mn.container},r.a.createElement(rt,{style:Mn.document},r.a.createElement(tt,{style:Mn.label},"Application for Certificate of Occupancy"),r.a.createElement(rt,{row:!0},r.a.createElement(Ct,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),r.a.createElement(Ze,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),r.a.createElement(rt,{style:Mn.document},r.a.createElement(tt,{style:Mn.label},"Certificate of Completion"),r.a.createElement(rt,{row:!0},r.a.createElement(Ct,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),r.a.createElement(Ze,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),r.a.createElement(Nt,null),r.a.createElement("h3",null,"List of Requirements:"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:b}}),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Return",action:function(){return i.push("/partner/"+n.group.name+"_"+n.name+"/services")}})))}}],Gn=function(e){var t=Object(a.useState)(!1),n=t[0],l=t[1],i=Object(a.useState)(!1),o=i[0],c=i[1],s=Object(a.useState)("init"),u=s[0],m=s[1],p=(Object(a.useState)("full"),Object(a.useState)(He(e.location,"appid"))),d=p[0],f=p[1],E=Object(a.useState)(),b=E[0],v=E[1],y=Object(a.useState)({}),h=y[0],g=y[1],S=Object(a.useState)(1),O=S[0],j=S[1],x=e.partner,C=e.service;b!==e.location.hash&&v(e.location.hash),Object(a.useEffect)((function(){d?(l(!0),l(!0),Hn.invoke("findCurrentInfo",{appid:d},(function(t,n){if(t)c(t);else{if(n||(c("Application no. does not exist"),"init"===u&&(m("apptype"),e.history.push(""+location.pathname))),x.id!=n.orgcode)return c("The application number provided is not for this local government"),void m("init");g(n),j(n.step),m("processing"),e.history.push(location.pathname+"?appid="+d+"#"+Un[n.step].name)}l(!1)}))):m("apptype")}),[d]),Object(a.useEffect)((function(){if(b){var e=Un.find((function(e){return e.name===b.substring(1)}));j(e.step)}}),[b]);var k=function(e){f(e.appno),j(1),m("processing")},w=function(e){if(h.step!=Un.length-1){c(null);var t=O<h.step?h.step:O+1;Hn.invoke("update",{objid:d,state:e,step:t},(function(e,n){e?c(e):(j(t),g(en({},h,{step:t})))}))}};if("init"===u||n)return r.a.createElement("div",null,r.a.createElement(pt,null));if("apptype"===u)return r.a.createElement(nn,{appService:Hn,partner:x,service:e.service,error:o,onCancel:function(){return e.history.goBack()},onSubmit:function(e){var t=e.appType,n=e.appno;c(null),"new"===t?m("new"):Hn.invoke("findCurrentInfo",{appid:n},(function(e,a){e?c(e):k({appType:t,appno:n,step:a.step})}))}});if("new"===u)return r.a.createElement(qn,en({},e,{appService:Hn,onComplete:k,onCancel:function(){return e.history.goBack()}}));var P=Un[O],N=P.component,T={partner:x,appno:d,pages:Un,moveNextStep:w,movePrevStep:function(){j((function(e){return e-1}))},appService:Hn,currentStep:O,stepCompleted:O<h.step,onComplete:function(){w("END")},history:e.history};return r.a.createElement(xt,null,h.step<Un.length-1&&r.a.createElement(rt,{target:"left",style:Yn.stepperContainer},r.a.createElement(Dt,{steps:Un,completedStep:h.step,activeStep:O,handleStep:function(t){j(t),e.history.push(location.pathname+"?appid="+d+"#"+Un[t].name)}})),r.a.createElement(We,null,r.a.createElement(zt,null,C.title),r.a.createElement(At,null,"Tracking No. "+d),r.a.createElement(Tt,null,P.caption),r.a.createElement(Nt,null),r.a.createElement(at,{msg:o}),r.a.createElement(N,en({page:P},T))))},Yn={stepperContainer:{paddingLeft:40}},Kn=function(e){var t=e.name,n=void 0===t?"profession":t,a=e.caption,l=void 0===a?"Profession":a,i=e.professions,o=tn(e,["name","caption","professions"]);return r.a.createElement(_e,en({name:n,caption:l,items:i},o))},Jn=Ut("OboProfessionalService","obo"),Qn=function(e){var t=e.partner,n=e.onCancel,l=e.onVerified,i=Object(a.useState)("init"),o=i[0],c=i[1],s=Object(a.useState)({})[0],u=Object(a.useState)(),m=u[0],p=u[1],d=Object(a.useState)(!1),f=d[0],E=d[1],b=Object(a.useState)({}),v=b[0],y=b[1],h=Object(a.useState)(),g=h[0],S=h[1],O=Object(a.useState)([]),j=O[0],x=O[1],C=Object(a.useRef)();return Object(a.useEffect)((function(){Jn.invoke("getProfessionList",null,(function(e,t){x(t)}))}),[]),Object(a.useEffect)((function(){Object.keys(s).length>0&&validInfo()}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(it,{visibleWhen:"init"===o,context:v,handler:y},r.a.createElement("form",{ref:C},r.a.createElement(Tt,null,"Please specify initial information"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:m}),r.a.createElement(ht,{name:"prc.idno",caption:"PRC No.",required:!0}),r.a.createElement(Kn,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:j,required:!0}),r.a.createElement(et,{name:"email",required:!0}),r.a.createElement(Ot,{name:"mobileno",required:!0}),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Cancel",action:n}),r.a.createElement(ke,{caption:"Next",action:function(){C.current.reportValidity()&&(p(null),E(!0),Jn.invoke("verifyInfo",v,(function(e,n){e?p(e):(function(){try{var e=Gt(t.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:v.email,mobileno:v.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){p(null),S(e.key),c("verify")})).catch((function(e){p(e)})),E(!1))})))},loading:f,disableWhen:f})))),r.a.createElement(rt,{visibleWhen:"verify"===o},r.a.createElement(Tt,null,"Email Verification"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:m}),r.a.createElement("p",null,"Please enter the key code sent to your email at ",v.email,"."),r.a.createElement($t.o,{partner:t,hiddenCode:g,email:v.email,onCancel:function(){return c("init")},onVerified:function(){return l(v)},onResendCode:function(e){S(e)},width:200,connection:"obo"})))},Xn=function(e){var t=e.info,n=void 0===t?{}:t,l=e.partner,i=e.onCancel,o=e.onSubmit,c=Object(a.useRef)(),s={entity:en({},n,{resident:!0}),prc:n.prc,id:{},resident:!0},u=Object(a.useState)()[0],m=Object(a.useState)(s),p=m[0],d=m[1],f=Object(a.useState)(!1),E=f[0],b=f[1],v=function(e,t){if(b(e),t)if("prc.dtissued"===t){var n=en({},p.id);n.dtvalid=null,d(en({},p,{id:n}))}else if("id.dtissued"===t){var a=en({},p.prc);a.dtvalid=null,d(en({},p,{prc:a}))}};return r.a.createElement(rt,null,r.a.createElement(Tt,null,"Register New Professional"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:u}),r.a.createElement(rt,null,r.a.createElement("form",{ref:c},r.a.createElement(it,{context:p,handler:d},r.a.createElement("p",null,"Please fill in the necessary data below. Text marked with * are required fields."," "),r.a.createElement(Ft,{caption:"Profession",name:"entity.profession",readOnly:!0}),r.a.createElement($t.k,{name:"entity",person:p,showAddress:!0,orgcode:l.id}),r.a.createElement(Nt,null),r.a.createElement($t.l,{name:"prc",disableIdNo:!0,onError:v,dtIssued:p.prc.dtissued}),r.a.createElement($t.m,{name:"ptr",onError:v}),r.a.createElement($t.h,{caption:"Primary Identification",name:"id",onError:v,dtIssued:p.id.dtissued}),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Next",action:function(){!E&&c.current.reportValidity()&&o(p)}}))))))},Zn=function(e){var t=e.onClose,n=e.redirectUrl,a=e.msg,l=void 0===a?"You have successfully registered your professional information.":a;return r.a.createElement(rt,null,r.a.createElement(ze,{center:!0},r.a.createElement(Nt,null),r.a.createElement(ot,{src:"/assets/success.png",width:120,alt:"success"}),r.a.createElement(Nt,null),r.a.createElement(zt,null,"Success!"),r.a.createElement(Nt,null),r.a.createElement(tt,{style:en({},$n.text,{maxWidth:300})},l),r.a.createElement(tt,{labelStyle:$n.text},"Thank you for using this service."),r.a.createElement(Nt,null),r.a.createElement(Ae,null,n?r.a.createElement("a",{href:redi},"Return"):r.a.createElement(ke,{variant:"text",caption:"Return",onClick:t}))))},$n={text:{display:"block",textAlign:"center"}},ea=Ut("OboProfessionalService","obo"),ta=[{step:1,name:"initial",caption:"Initial"},{step:2,name:"newprofessional",caption:"New Professional"},{step:3,name:"disclaimer",caption:"Disclaimer"},{step:4,name:"registered",caption:"Registered"}],na=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),l=n[0],i=n[1],o=(Object(a.useState)({}),Object(a.useState)("new"),Object(a.useState)(0)),c=o[0],s=o[1],u=(Object(a.useState)(),Object(a.useState)()),m=u[0],p=u[1],d=Object(a.useState)(),f=d[0],E=d[1],b=e.partner,v=e.service,y=e.history,h=function(){s((function(e){return e+1}))},g=ta[c],S=null,O=e.location||{},j=O.search,x=O.hash;return j&&x&&f&&(S=j.match(/\/partner.*/)[0]+"/"+x),r.a.createElement(xt,null,r.a.createElement(rt,{target:"left",style:aa.stepperContainer},r.a.createElement(Dt,{steps:ta,activeStep:c})),r.a.createElement(We,null,r.a.createElement(zt,null,v.title),r.a.createElement(at,{msg:l}),r.a.createElement(rt,{visibleWhen:"initial"===g.name},r.a.createElement(Qn,{partner:b,onCancel:y.goBack,onVerified:function(e){p(e),h()}})),r.a.createElement(rt,{visibleWhen:"newprofessional"===g.name},r.a.createElement(Xn,{partner:b,info:m,onSubmit:function(e){E(e),h()}})),r.a.createElement(rt,{visibleWhen:"disclaimer"===g.name},r.a.createElement($t.c,{partner:b,onCancel:function(){s((function(e){return e-1}))},onSubmit:function(){t(!0);var e=function(){var e=en({},f.entity.address);f.entity.resident&&(e.citymunicipality=b.title,e.province=b.group.title);var t=en({},f.entity,{address:e}),n=en({},t,f,{orgcode:b.id});return delete n.entity,n}();ea.invoke("create",e,(function(e,n){e?function(e){t(!1),i(e.toString())}(e):(E(n),h())}))}})),r.a.createElement(rt,{visibleWhen:"registered"===g.name},r.a.createElement(Zn,{onClose:function(){return y.goBack()},redirect:S}))))},aa={stepperContainer:{paddingTop:30,paddingLeft:40}},ra=Ut("OboProfessionalService","obo"),la={professional:{},changeType:null},ia=function(e,t){switch(t.type){case"SET_PROFESSIONAL":return void(e.professional=t.professional);case"SET_CHANGE_TYPE":return void(e.changeType=t.changeType)}},oa=Ut("OboProfessionalService","obo"),ca=[{step:0,component:null},{step:1,name:"initial",caption:"Initial",component:function(e){var t=e.partner,n=e.history,l=e.moveNextStep,i=Zt(),o=i[1],c=i[0].professional,s=Object(a.useState)("init"),u=s[0],m=s[1],p=Object(a.useState)(),d=p[0],f=p[1],E=Object(a.useState)(!1),b=E[0],v=E[1],y=Object(a.useState)({}),h=y[0],g=y[1],S=Object(a.useState)([]),O=S[0],j=S[1],x=Object(a.useState)(),C=x[0],k=x[1],w=Object(a.useRef)();return Object(a.useEffect)((function(){ra.invoke("getProfessionList",null,(function(e,t){j(t)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{ref:w},r.a.createElement(it,{visibleWhen:"init"===u,context:h,handler:g},r.a.createElement(Tt,null,"Please specify PRC Number"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:d}),r.a.createElement(ht,{name:"prc.idno",caption:"PRC No.",required:!0,autoFocus:!0}),r.a.createElement(Kn,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:O,required:!0}),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Cancel",action:function(){return n.goBack()}}),r.a.createElement(ke,{caption:"Next",action:function(){w.current.reportValidity()&&(f(null),v(!0),ra.invoke("verifyProfessional",h,(function(e,n){e?f(e):function(e){var n=e.email,a=e.mobileno;try{var r=Gt(t.id+":VerifyEmailService","obo");return Promise.resolve(r.invoke("verifyEmail",{email:n,mobileno:a}))}catch(e){return Promise.reject(e)}}(n).then((function(e){f(null),o({type:"SET_PROFESSIONAL",professional:n}),k(e.key),m("verifyemail")})).catch((function(e){f(e)})),v(!1)})))},loading:b,disableWhen:b})))),r.a.createElement(rt,{visibleWhen:"verifyemail"===u},r.a.createElement(Tt,null,"Email Verification"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:d}),r.a.createElement("p",null,"Please enter the key code sent to your email at ",c?c.email:"","."),r.a.createElement($t.o,{partner:t,hiddenCode:C,email:c.email,onCancel:function(){return m("init")},onVerified:l,onResendCode:function(e){k(e)},width:200,connection:"obo"})))}},{step:2,name:"changetype",caption:"Change Type",component:function(e){var t=e.moveNextStep,n=Zt(),l=n[1],i=n[0].professional,o=Object(a.useState)({changeType:"CHANGE_PERSONINFO"}),c=o[0],s=o[1];return r.a.createElement(rt,null,r.a.createElement(Tt,null,"Edit Professional Information "),r.a.createElement(Nt,null),r.a.createElement(Ft,{caption:"Profession",value:i.profession,readOnly:!0}),r.a.createElement(Ft,{caption:"Name",value:i.name,readOnly:!0}),r.a.createElement(it,{context:c,handler:s},r.a.createElement(Nt,null),r.a.createElement("h4",null,"Please select type of change to make"),r.a.createElement(wt,{name:"changeType"},r.a.createElement(mt,{caption:"Change Personal Info",value:"CHANGE_PERSONINFO"}),r.a.createElement(mt,{caption:"Change Address",value:"CHANGE_ADDRESS"}),r.a.createElement(mt,{caption:"Change Primary ID",value:"CHANGE_ID"}),r.a.createElement(mt,{caption:"Change PTR",value:"CHANGE_PTR"}),r.a.createElement(mt,{caption:"Change PRC",value:"CHANGE_PRC"}),r.a.createElement(mt,{caption:"Change Email/Mobile No.",value:"CHANGE_CONTACT"})),r.a.createElement(xe,null,r.a.createElement(ke,{caption:"Next",action:function(){l({type:"SET_CHANGE_TYPE",changeType:c.changeType}),t()}}))))}},{step:3,name:"editinfo",caption:"Edit Information",component:function(e){var t=e.partner,n=e.appService,l=e.moveNextStep,i=e.movePrevStep,o=Zt(),c=o[0],s=o[1],u=c.professional,m=c.changeType,p=Object(a.useRef)(),d=Object(a.useState)(),f=d[0],E=d[1],b=Object(a.useState)(!1),v=b[0],y=b[1],h=Object(a.useState)(u),g=h[0],S=h[1],O=Object(a.useState)(!1)[1],j=function(e,t){if(O(e),t)if("prc.dtissued"===t){var n=en({},g.id);n.dtvalid=null,S(en({},g,{id:n}))}else if("id.dtissued"===t){var a=en({},g.prc);a.dtvalid=null,S(en({},g,{prc:a}))}};return r.a.createElement(rt,null,r.a.createElement(Tt,null,"Edit Professional Information "),r.a.createElement(at,{msg:f}),r.a.createElement(rt,null,r.a.createElement("form",{ref:p},r.a.createElement(it,{context:g,handler:S},r.a.createElement(rt,{visibleWhen:"CHANGE_PERSONINFO"===m},r.a.createElement("h4",null,"Change Personal Information"),r.a.createElement(Ft,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(Ft,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(Ft,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(Ke,{caption:"Birth Date",name:"birthdate",required:!0})),r.a.createElement(rt,{visibleWhen:"CHANGE_ADDRESS"===m},r.a.createElement("h4",null,"Change Address Information"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,{caption:"Resident?",name:"resident"}),g.resident?r.a.createElement($t.i,{orgcode:t.id,name:"address",caption:"Address"}):r.a.createElement($t.j,{name:"address",caption:"Address"}))),r.a.createElement(rt,{visibleWhen:"CHANGE_ID"===m},r.a.createElement("h4",null,"Change Primary ID Information"),r.a.createElement($t.h,{caption:"",name:"id",onError:j,dtIssued:g.id.dtissued})),r.a.createElement(rt,{visibleWhen:"CHANGE_PTR"===m},r.a.createElement("h4",null,"Change PTR Information"),r.a.createElement($t.m,{caption:"",name:"ptr",disableIdNo:!0,onError:j,dtIssued:g.ptr.dtissued})),r.a.createElement(rt,{visibleWhen:"CHANGE_PRC"===m},r.a.createElement("h4",null,"Change PRC Information"),r.a.createElement($t.l,{caption:"",name:"prc",disableIdNo:!0,editValidity:!0,onError:j,dtIssued:g.prc.dtissued})),r.a.createElement(rt,{visibleWhen:"CHANGE_CONTACT"===m},r.a.createElement("h4",null,"Change Email/Mobile No. Information"),r.a.createElement(et,{name:"email",required:!0}),r.a.createElement(Ot,{name:"mobileno",required:!0})),r.a.createElement(xe,null,r.a.createElement(we,{action:i}),r.a.createElement(ke,{caption:"Update",action:function(){if(p.current.reportValidity()){y(!0);var e=en({},g,{changetype:m});n.invoke("updateProfessional",e,(function(e,t){e?E(e):(s({type:"SET_PROFESSIONAL",updatedProfessional:t}),l()),y(!1)}))}},loading:v,disableWhen:v}))))))}},{step:4,name:"success",caption:"Success",component:Zn}],sa=function(e){var t=e.partner,n=e.service,l=e.history,i=Object(a.useState)(1),o=i[0],c=i[1],s=ca[o],u=s.component,m={partner:t,service:n,appService:oa,moveNextStep:function(){c((function(e){return e+1}))},movePrevStep:function(){c((function(e){return e-1}))},history:l,page:s,onClose:function(){l.goBack()},msg:"success"===s.name?"You have successfully updated your professional information.":null};return r.a.createElement(Jt,{initialState:la,reducer:ia},r.a.createElement(xt,null,r.a.createElement(rt,{target:"left",style:ua.stepperContainer},r.a.createElement(Dt,{steps:ca,activeStep:o-1})),r.a.createElement(We,null,r.a.createElement(zt,null,n.title),r.a.createElement(u,en({page:s},m)))))},ua={stepperContainer:{paddingTop:30,paddingLeft:40}},ma=function(e){var t=e.task;return r.a.createElement("div",null,r.a.createElement("div",{style:en({},pa.container)},r.a.createElement("label",{style:pa.title},t.title),r.a.createElement("div",{style:pa.column},r.a.createElement("label",{style:pa.caption},"Start Date/Time"),r.a.createElement("label",{style:pa.info},t.startdate)),r.a.createElement("div",{style:pa.column},r.a.createElement("label",{style:pa.caption},"End Date/Time"),r.a.createElement("label",{style:pa.info},t.enddate)),r.a.createElement("div",{style:pa.column},r.a.createElement("label",{style:pa.caption},"Accountable Hours"),r.a.createElement("label",{style:pa.info},t.hours)),r.a.createElement("div",{style:pa.column},r.a.createElement("label",{style:pa.caption},"Status"),r.a.createElement("label",{style:pa.info},t.status))))},pa={container:{display:"flex",justifyContent:"space-between",padding:"5px 10px",border:"1px solid #ddd",backgroundColor:"#eee"},title:{fontSize:14},column:{display:"flex",flexDirection:"column",alignItems:"center"},caption:{fontSize:8},info:{fontSize:10}},da=function(e){var t=e.section;return r.a.createElement("div",{style:fa.container},r.a.createElement(ma,{task:t}),r.a.createElement("table",{style:fa.table},r.a.createElement("tr",{style:fa.trth},r.a.createElement("th",{style:fa.tableText},"Activity"),r.a.createElement("th",{style:fa.tableText},"Start Date/Time"),r.a.createElement("th",{style:fa.tableText},"End Date/Time"),r.a.createElement("th",{style:fa.tableText},"Accountable Hours")),r.a.createElement("tbody",null,t.subtasks.map((function(e){return r.a.createElement("tr",{key:e.objid,style:en({},fa.trth)},r.a.createElement("td",{style:en({},fa.tableText,{textAlign:"left"})},e.title),r.a.createElement("td",{style:fa.tableText},e.startdate),r.a.createElement("td",{style:fa.tableText},e.enddate),r.a.createElement("td",{style:fa.tableText},e.hours))})))))},fa={container:{marginTop:10,marginLeft:25},title:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #ddd",borderRadius:5},table:{width:"100%",borderSpacing:0},tableText:{fontSize:10,border:"1px solid #ddd",padding:5,textAlign:"center"},trth:{border:"1px solid #ddd",cellSpacing:0,padding:5}},Ea=function(e){var t=e.task,n=e.toggleOpenTask;return 1===t.tracktime?r.a.createElement("div",null,r.a.createElement("div",{style:ba.container},r.a.createElement("div",{style:ba.titleContainer},t.sections.length>0&&r.a.createElement("div",{style:ba.toggleButton,onClick:function(){return n(t)}},t.isOpenSubtasks?"-":"+"),r.a.createElement("label",null,t.title)),r.a.createElement("div",{style:ba.column},r.a.createElement("label",{style:ba.caption},"Start Date/Time"),r.a.createElement("label",{style:ba.info},t.startdate)),r.a.createElement("div",{style:ba.column},r.a.createElement("label",{style:ba.caption},"End Date/Time"),r.a.createElement("label",{style:ba.info},t.enddate)),r.a.createElement("div",{style:ba.column},r.a.createElement("label",{style:ba.caption},"Accountable Hours"),r.a.createElement("label",{style:ba.info},t.hours)),r.a.createElement("div",{style:ba.column},r.a.createElement("label",{style:ba.caption},"Status"),r.a.createElement("label",{style:ba.info},t.status))),t.isOpenSubtasks&&t.sections.map((function(e){return r.a.createElement(da,{section:e})}))):r.a.createElement("div",{style:en({},ba.container,{backgroundColor:"#C5F5D9"})},r.a.createElement("label",null,t.title))},ba={container:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #ddd",borderRadius:5},titleContainer:{display:"flex",justifyContent:"center"},toggleButton:{cursor:"pointer",fontSize:"16px",paddingRight:8},column:{display:"flex",flexDirection:"column",alignItems:"center"},caption:{fontSize:8},info:{fontSize:12}},va=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),l=n[0],i=n[1],o=Object(a.useState)("init"),c=o[0],s=o[1],u=Object(a.useState)({apptype:"BUILDING_PERMIT"}),m=u[0],p=u[1],d=Object(a.useState)({tasks:[]}),f=d[0],E=d[1],b=Object(a.useState)({}),v=b[0],y=b[1],h=Object(a.useState)()[1],g=e.partner,S=e.history,O=function(e){var t=en({},f);t.tasks=f.tasks.map((function(t){return e.title===t.title?en({},t,{isOpenSubtasks:!t.isOpenSubtasks}):t})),E(t)};return r.a.createElement(xt,null,r.a.createElement(We,null,r.a.createElement(zt,null,e.service.title),r.a.createElement(it,{visibleWhen:"init"===c,context:m,handler:p},r.a.createElement(Tt,null,"Tracking or Application No."),r.a.createElement(Nt,null),r.a.createElement(Ft,{caption:"Enter Tracking or Application No.",name:"trackingno",required:!0,error:l,helperText:l,variant:"outlined",autoFocus:!0}),r.a.createElement(xe,null,r.a.createElement(we,{action:function(){return S.goBack()}}),r.a.createElement(ke,{caption:"Next",action:function(){i(null),m.trackingno?Ut(g.id+":OboOnlineService","obo").invoke("verifyApplication",{trackingno:m.trackingno},(function(e,t){e?i(e):(t.apptype=m.apptype,t.refno=t.appno,y(t),s("verification"))})):i("Tracking No. is required.")}}))),r.a.createElement(rt,{visibleWhen:"verification"===c},r.a.createElement(Tt,null,"Account Verification"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:l}),r.a.createElement($t.o,{partner:g,hiddenCode:v.key,email:v.email,onCancel:function(){i(!1),s("init")},onVerified:function(e){h(e),t(!0),i(!1),Ut(g.id+":OboAppProgressService","obo").invoke("getInfo",v,(function(e,n){e?i(e):(n.tasks.forEach((function(e){return e.isOpenSubtasks=!1})),E(n),s("info"),i(null),t(!1))}))},containerStyle:{width:200}})),r.a.createElement(it,{visibleWhen:"info"===c,context:f,handler:E},r.a.createElement(Tt,null,f.doctitle+" Application Status"),r.a.createElement(Nt,null),r.a.createElement(rt,null,r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{caption:"Tracking No.",name:"trackingno",readOnly:!0}),r.a.createElement(Ft,{caption:"Application No.",name:"appno",readOnly:!0})),r.a.createElement(Ft,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(Ft,{caption:"Project Location",expr:function(){if(!f.location)return"";var e=[];return f.location.lotno&&e.push("Lot: "+f.location.lotno),f.location.blockno&&e.push("Block: "+f.location.blockno),f.location.street&&e.push("Street: "+f.location.street),f.location.barangay&&f.location.barangay.name&&e.push("Barangay: "+f.location.barangay.name),f.location.text&&e.push(f.location.text),e.join(" ")},readOnly:!0}),r.a.createElement(Ft,{caption:"Project Owner",name:"applicant.name",readOnly:!0}),r.a.createElement(Ft,{caption:"Txn Type",name:"txntype",readOnly:!0}),r.a.createElement(Nt,null))),r.a.createElement(rt,{visibleWhen:"info"===c,style:{minWidth:600}},r.a.createElement(At,null,"Application Progress"),f.tasks.length>0?f.tasks.map((function(e){return r.a.createElement("div",null,r.a.createElement(Nt,null),r.a.createElement(Ea,{task:e,toggleOpenTask:O}))})):r.a.createElement("label",null,"Not yet started."),f.remarks&&r.a.createElement("div",null,r.a.createElement(Nt,null),r.a.createElement("label",{style:{color:"#E74C3C",fontSize:"10pt"}},"Remarks: "+f.remarks)),r.a.createElement(Nt,null),r.a.createElement("p",{style:{fontSize:12}},r.a.createElement("b",null,"Note:")," Accountable hours applies only from 8:00AM - 5:00PM every workday (excluding Saturday and Sunday)")),r.a.createElement(Nt,{height:50})))},ya=function(e){var t=e.title,n=e.partner,l=e.onCancel,i=e.onSubmit,o=e.error,c=Zt()[0],s=c.refno,u=c.apptype,m=c.txntype,p=Object(a.useState)(c.bill)[0],d=Object(a.useState)(o)[0],f=Object(a.useState)(!1)[0];return r.a.createElement(We,{style:{maxWidth:800}},r.a.createElement(zt,null,t),r.a.createElement(Tt,null,"Billing Information"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:d}),r.a.createElement(rt,null,r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{context:p,caption:"Tracking No.",expr:"trackingno",readOnly:!0}),r.a.createElement(Ft,{context:p,caption:"Application No.",expr:"appno",readOnly:!0})),r.a.createElement(rt,{row:!0},r.a.createElement(Ft,{context:p,caption:"Permit Type",expr:"permittype",readOnly:!0}),r.a.createElement(Ft,{context:p,caption:"Application Type",expr:"apptype",readOnly:!0})),r.a.createElement(Ft,{context:p,caption:"Project Name",expr:"title",readOnly:!0}),r.a.createElement(Ft,{context:p,caption:"Applicant",expr:"applicant.name",readOnly:!0}),r.a.createElement(Ft,{context:p,caption:"Address",expr:"applicant.address.text",readOnly:!0}),r.a.createElement("h4",null,"Bill Details"),r.a.createElement(qt,{items:p?p.items:[],size:"small",showPagination:!1},r.a.createElement(_t,{caption:"Particulars",expr:"item.title",width:500}),r.a.createElement(_t,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),r.a.createElement(rt,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},r.a.createElement(tt,{context:p,caption:"Bill Amount:",expr:function(e){return Me(e.amount)}}))),r.a.createElement(xe,{disabled:f},r.a.createElement(we,{caption:"Back",action:function(){l(0)}}),r.a.createElement(ke,{caption:"Confirm Payment",action:function(){i({refno:s,txntype:m,origin:"filipizen",orgcode:n.id,info:{apptype:u,data:p},paidby:p.paidby,paidbyaddress:p.paidbyaddress,amount:p.amount,particulars:"Obo Application No. "+p.appno})},disableWhen:0===p.amount})))},ha={txntype:"obo",contact:{},refno:null,apptype:null,bill:{}},ga=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},Sa=[{step:1,name:"verification",caption:"Verification",Component:$t.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,l=e.moveNextStep,i=e.movePrevStep,o=Zt(),c=o[1],s=o[0].txntype,u=Object(a.useState)(),m=u[0],p=u[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(!1),v=b[0],y=b[1],h=Object(a.useState)({apptype:"building"}),g=h[0],S=h[1];return r.a.createElement(We,null,r.a.createElement(zt,null,t),r.a.createElement(Tt,null,"Initial Information"),r.a.createElement(Nt,null),r.a.createElement(at,{msg:m}),r.a.createElement(it,{context:g,handler:S},r.a.createElement(Ft,{name:"refno",caption:"Application No.",autoFocus:!0,error:f.refno,helperText:f.refno}),r.a.createElement(Nt,null),r.a.createElement(rt,null,r.a.createElement("label",null,"Application Type:"),r.a.createElement(rt,{style:{marginLeft:20}},r.a.createElement(wt,{name:"apptype"},r.a.createElement(mt,{caption:"Building Permit",value:"building"}),r.a.createElement(mt,{caption:"Occupancy Permit",value:"occupancy"}))))),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Back",variant:"text",action:i}),r.a.createElement(ke,{caption:"Next",action:function(){E({}),g.refno?(y(!0),p(null),function(){try{return Promise.resolve(Gt(n.id+":OboOnlineBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",en({txntype:s},g,{qtr:4,showdetails:!0})))}))}catch(e){return Promise.reject(e)}}().then((function(e){c(en({type:"SET_BILL"},g,{bill:e})),l()})).catch((function(e){p(e.toString()),y(!1)}))):E({refno:"Application No. is required."})},loading:v,disabled:v})))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Zt();return r.a.createElement($t.d,en({module:{title:e.title,component:ya}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],Oa=function(e){var t=e.partner,n=e.service,l=e.location,i=e.history,o=e.initialStep,c=Object(a.useState)(void 0===o?0:o),s=c[0],u=c[1],m=Sa[s];return r.a.createElement(Jt,{initialState:ha,reducer:ga},r.a.createElement(xt,null,r.a.createElement(ze,{center:!0},r.a.createElement(m.Component,en({page:m},{partner:t,service:n,location:l,history:i,moveNextStep:function(){u((function(e){return e+1}))},movePrevStep:function(){0===s?i.goBack():u((function(e){return e-1}))},cancelPayment:function(){u(1)},title:"OSCP Online Billing and Payment"})))))},ja=Ut("OboProfessionalService","obo"),xa=function(e){var t=e.title,n=e.partner,l=e.onCancel,i=e.onSubmit,o=e.error,c=Zt()[0],s=c.txntype,u=Object(a.useState)(c.bill)[0],m=Object(a.useState)(o)[0],p=Object(a.useState)(!1)[0];return r.a.createElement(We,null,r.a.createElement(zt,null,t),r.a.createElement(Tt,null,"Please check if details are correct"),r.a.createElement("div",{style:{width:450}}),r.a.createElement(Nt,null),r.a.createElement(at,{msg:m}),r.a.createElement(rt,null,r.a.createElement(Ft,{context:u,caption:"PRC No.",expr:"professional.prc.idno",readOnly:!0}),r.a.createElement(Ft,{context:u,caption:"Profession",expr:"professional.profession",readOnly:!0}),r.a.createElement(Ft,{context:u,caption:"Name",expr:function(e){return e.professional.firstname+" "+e.professional.middlename+" "+e.professional.lastname},readOnly:!0}),r.a.createElement(Nt,null),r.a.createElement("label",null,"Last PTR Issued"),r.a.createElement(Ft,{context:u,caption:"PTR No.",expr:"professional.ptr.refno",readOnly:!0}),r.a.createElement(Ft,{context:u,caption:"Place Issued",expr:"professional.ptr.placeissued",readOnly:!0}),r.a.createElement(Ft,{context:u,caption:"Date Issued",expr:"professional.ptr.dtissued",readOnly:!0}),r.a.createElement(Nt,null),r.a.createElement(rt,{style:Ca.amountContainer},r.a.createElement("label",{style:Ca.amountTitle},"Amount to Pay: "),r.a.createElement("label",{style:Ca.amount},"Php ",Me(u.amount)))),r.a.createElement(xe,{disabled:p},r.a.createElement(we,{caption:"Back",action:function(){l(0)}}),r.a.createElement(ke,{caption:"Confirm Payment",action:function(){i({refno:u.professional.prc.idno,txntype:s,origin:"filipizen",orgcode:n.id,info:{data:u},paidby:u.paidby,paidbyaddress:u.paidbyaddress,amount:u.amount,items:u.items,particulars:"Professional Tax Payment for PRC No. "+u.professional.prc.idno})},disableWhen:0===u.amount})))},Ca={amountContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},amountTitle:{},amount:{fontWeight:"bold"}},ka={txntype:"ptrpayment",contact:{},refno:null,apptype:null,bill:{}},wa=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},Pa=[{step:1,name:"initial",caption:"Specify Details",Component:function(e){var t=e.title,n=e.page,l=e.partner,i=e.moveNextStep,o=e.movePrevStep,c=Zt()[1],s=Object(a.useState)(),u=s[0],m=s[1],p=Object(a.useState)(!1),d=p[0],f=p[1],E=Object(a.useState)({}),b=E[0],v=E[1],y=Object(a.useState)([]),h=y[0],g=y[1],S=Object(a.useState)({}),O=S[0],j=S[1],x=Object(a.useState)(),C=x[0],k=x[1],w=Object(a.useState)("init"),P=w[0],N=w[1],T=Object(a.useRef)();return Object(a.useEffect)((function(){ja.invoke("getProfessionList",null,(function(e,t){g(t)}))}),[]),r.a.createElement(We,null,r.a.createElement(zt,null,t),r.a.createElement(at,{msg:u}),r.a.createElement("div",{style:{width:500}}),r.a.createElement(it,{context:b,handler:v,visibleWhen:"init"===P},r.a.createElement(Tt,null,n.caption),r.a.createElement("form",{ref:T},r.a.createElement(ht,{name:"prc.idno",caption:"PRC No.",required:!0}),r.a.createElement(Kn,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:h,required:!0}),r.a.createElement(et,{name:"email",caption:"Email",required:"true"}),r.a.createElement(xe,null,r.a.createElement(we,{caption:"Back",variant:"text",action:o}),r.a.createElement(ke,{caption:"Next",action:function(){T.current.reportValidity()&&(m(null),f(!0),ja.invoke("verifyProfessional",b,(function(e,t){e?(m(e),f(!1)):(j(t),c({type:"SET_CONTACT",contact:b}),function(){try{var e=Gt(l.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:b.email,mobileno:b.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){m(null),k(e.key),N("verify")})).catch((function(e){m(e)})),f(!1))})))},loading:d,disabled:d})))),r.a.createElement(rt,{visibleWhen:"verify"===P},r.a.createElement(Tt,null,"Email Verification"),r.a.createElement(Nt,null),r.a.createElement("p",null,"Please enter the key code sent to your email at ",b.email,"."),r.a.createElement($t.o,{partner:l,hiddenCode:C,email:b.email,onCancel:function(){return N("init")},onVerified:function(){f(!0),m(null),function(){try{return Promise.resolve(Gt(l.id+":OboPtrBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",en({},b,{professional:O,partner:{name:l.name,title:l.title}})))}))}catch(e){return Promise.reject(e)}}().then((function(e){c({type:"SET_BILL",bill:e}),i()})).catch((function(e){m(e.toString()),f(!1)}))},onResendCode:function(e){k(e)},width:200,connection:"obo"})))}},{step:2,name:"payment",caption:"Payment",Component:function(e){var t=Zt();return r.a.createElement($t.d,en({module:{title:e.title,component:xa}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],Na=function(e){var t=e.partner,n=e.service,l=e.location,i=e.history,o=e.initialStep,c=Object(a.useState)(void 0===o?0:o),s=c[0],u=c[1],m=Pa[s];return r.a.createElement(Jt,{initialState:ka,reducer:wa},r.a.createElement(xt,null,r.a.createElement(ze,{center:!0},r.a.createElement(m.Component,en({page:m},{partner:t,service:n,location:l,history:i,moveNextStep:function(){u((function(e){return e+1}))},movePrevStep:function(){0===s?i.goBack():u((function(e){return e-1}))},cancelPayment:function(){u(1)},title:"Pay Professional Tax Receipt"})))))}}}]);
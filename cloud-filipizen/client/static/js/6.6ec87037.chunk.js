(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{616:function(e,t,n){"use strict";n.r(t),n.d(t,"RealtyTaxClearanceWebController",(function(){return x})),n.d(t,"RptBillingWebController",(function(){return y}));var a=n(23),c=n.n(a),r=n(9),i=n(58),l=n(7),o=n(0),u=n.n(o),m=n(2),p=(n(149),n(106)),s=function(e){var t=e.initialValue,n=void 0===t?{}:t,a=e.open,c=e.onAccept,r=e.onCancel,i=Object(o.useState)(n),p=Object(l.a)(i,2),s=p[0],b=p[1],d=Object(m.gb)(e.initialValue.fromyear,Object(m.ab)()+3);return u.a.createElement(m.G,{open:a,caption:"Pay Options",onAccept:function(){c(s)},onCancel:r,maxWidth:100},u.a.createElement(m.t,{context:s,handler:b},u.a.createElement(m.j,{caption:"Year to Bill",name:"billtoyear",items:d}),u.a.createElement(m.N,{caption:"Quarter to Bill",name:"billtoqtr",items:[1,2,3,4]})))},b=function(e){var t=e.title,n=e.partner,a=e.onCancel,p=e.onSubmit,b=e.error,d=Object(m.jb)(),O=Object(l.a)(d,2),f=O[0],y=(O[1],f.refno),j=f.txntype,E=f.contact,v=f.bill,S=Object(o.useState)(v),x=Object(l.a)(S,2),g=x[0],h=x[1],P=Object(o.useState)(b),C=Object(l.a)(P,2),T=C[0],W=C[1],B=Object(o.useState)(!1),k=Object(l.a)(B,2),N=k[0],w=k[1],I=Object(o.useState)(!1),A=Object(l.a)(I,2),D=A[0],L=A[1],R=Object(o.useState)(),q=Object(l.a)(R,2),J=(q[0],q[1],Object(o.useState)()),F=Object(l.a)(J,2),_=(F[0],F[1],Object(o.useState)()),V=Object(l.a)(_,2),X=V[0],Q=V[1],Y=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,i,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,m.O.lookupAsync("".concat(n.id,":OnlineLandTaxBillingService"),"rpt");case 3:return a=e.sent,i=Object(r.a)({txntype:j,refno:y},t),e.next=7,a.invoke("getBilling",i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=!!E.email&&E.email===g.email;return u.a.createElement(m.f,{style:{maxWidth:500}},u.a.createElement(m.X,null,t),u.a.createElement(m.S,null,"Billing Information"),u.a.createElement(m.P,null),u.a.createElement(m.s,{msg:T}),u.a.createElement(m.t,{context:g,handler:h},u.a.createElement(m.J,{row:!0},u.a.createElement(m.W,{name:"billno",caption:"Bill No.",readOnly:!0}),u.a.createElement(m.W,{name:"billdate",caption:"Bill Date",readOnly:!0})),u.a.createElement(m.W,{name:"tdno",caption:"TD No.",readOnly:!0}),u.a.createElement(m.W,{name:"fullpin",caption:"PIN",readOnly:!0}),u.a.createElement(m.W,{name:"taxpayer.name",caption:"Property Owner",readOnly:!0,visibleWhen:z}),u.a.createElement(m.W,{name:"taxpayer.address",caption:"Owner Address",readOnly:!0,visibleWhen:z}),u.a.createElement(m.W,{name:"billperiod",caption:"Bill Period",readOnly:!0}),u.a.createElement(m.m,{name:"amount",caption:"Amount Due",editable:!1,readOnly:!0,textAlign:"left"})),u.a.createElement(m.a,{disabled:N},u.a.createElement(m.c,{caption:"Back",action:function(){a(0)}}),u.a.createElement(m.J,{row:!0},u.a.createElement(m.e,{caption:"Pay Option",action:function(){return L(!0)},variant:"outlined"}),u.a.createElement(m.e,{caption:"Confirm Payment",action:function(){var e=Object(r.a)(Object(r.a)({},g),{},{barcode:X}),t=e.items;delete e.items,p({refno:y,txntype:j,origin:"filipizen",orgcode:n.id,billtoyear:g.billtoyear,billtoqtr:g.billtoqtr,paidby:g.paidby,paidbyaddress:g.paidbyaddress,amount:g.amount,particulars:"Real Property TD No. ".concat(g.tdno," ").concat(g.billperiod),items:t,info:{data:e}})},disableWhen:0===g.amount}))),u.a.createElement(s,{initialValue:g&&{billtoyear:g.billtoyear,billtoqtr:g.billtoqtr,fromyear:g.fromyear},open:D,onAccept:function(e){L(!1),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(!0),W(null),Y(e).then((function(e){h(e.info),Q(e.info.billno),w(!1)})).catch((function(e){W(e.toString()),w(!1)}))}(e)},onCancel:function(){return L(!1)}}))},d={txntype:"rptcol",refno:null,bill:{},contact:{}},O=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},f=[{step:1,name:"verification",caption:"Verification",Component:p.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,a=e.moveNextStep,p=e.movePrevStep,s=Object(m.jb)(),b=Object(l.a)(s,2),d=b[0],O=b[1],f=d.txntype,y=(new Date).getFullYear(),j=Object(o.useState)(),E=Object(l.a)(j,2),v=E[0],S=E[1],x=Object(o.useState)(!1),g=Object(l.a)(x,2),h=g[0],P=g[1],C=Object(o.useState)(),T=Object(l.a)(C,2),W=T[0],B=T[1],k=Object(o.useState)(y+1),N=Object(l.a)(k,2),w=N[0],I=N[1],A=Object(o.useState)("initial"),D=Object(l.a)(A,2),L=D[0],R=D[1],q=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,i,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,m.O.lookupAsync("".concat(n.id,":OnlineLandTaxBillingService"),"rpt");case 3:return a=e.sent,i=Object(r.a)({txntype:f,refno:W},t),"initial-advance"===L&&(i.billtoyear=w),e.next=8,a.invoke("getBilling",i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.f,null,u.a.createElement(m.X,null,t),u.a.createElement(m.S,null,"Initial Information"),u.a.createElement(m.P,null),u.a.createElement(m.s,{msg:v}),u.a.createElement(m.J,{visibleWhen:"initial"===L},u.a.createElement(m.W,{caption:"Tax Declaration No.",name:"refno",value:W,onChange:B,readOnly:h,autoFocus:!0})),u.a.createElement(m.J,{visibleWhen:"initial-advance"===L},u.a.createElement("p",null,"The associated ledger is fully paid for the current year.",u.a.createElement("br",null),"To pay in advance, specify the year and click Next button."),u.a.createElement(m.P,null),u.a.createElement(m.J,null,u.a.createElement(m.W,{caption:"Tax Declaration No.",name:"refno",value:W,onChange:B,readOnly:!0}),u.a.createElement(m.w,{caption:"Advance Year to Pay",name:"billtoyear",value:w,onChange:I,thousandSeparator:!1,autoFocus:!0}))),u.a.createElement(m.a,null,u.a.createElement(m.c,{caption:"Back",variant:"text",action:p}),u.a.createElement(m.e,{caption:"Next",action:function(){"initial-advance"===L&&w<=y?S("Advance year to pay should be greater than "+y):(P(!0),S(null),q().then((function(e){O({type:"SET_BILL",refno:W,bill:e.info}),a()})).catch((function(e){/unpaid|full/gi.test(e)?R("initial-advance"):S(e.toString()),P(!1)})))},loading:h,disabled:h}))))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(m.jb)(),n=Object(l.a)(t,2),a=n[0],c=(n[1],{title:"Realty Tax Online Billing",component:b});return u.a.createElement(p.d,Object.assign({module:c},e,{contact:a.contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],y=function(e){var t=e.partner,n=e.service,a=e.location,c=e.history,r=e.initialStep,i=void 0===r?0:r,p=Object(o.useState)(i),s=Object(l.a)(p,2),b=s[0],y=s[1],j=f[b],E=j.Component,v={partner:t,service:n,location:a,history:c,moveNextStep:function(){y((function(e){return e+1}))},movePrevStep:function(){0===b?c.goBack():y((function(e){return e-1}))},cancelPayment:function(){y(1)},title:"Realty Tax Online Billing"};return u.a.createElement(m.Q,{initialState:d,reducer:O},u.a.createElement(m.I,null,u.a.createElement(m.k,{center:!0},u.a.createElement(E,Object.assign({page:j},v)))))},j=function(e){var t=e.title,n=e.partner,a=e.onCancel,c=e.onSubmit,r=e.error,i=Object(m.jb)(),p=Object(l.a)(i,2),s=p[0],b=(p[1],s.refno),d=s.txntype,O=(s.contact,s.bill),f=Object(o.useState)(O),y=Object(l.a)(f,2),j=y[0],E=y[1],v=Object(o.useState)(r),S=Object(l.a)(v,2),x=S[0],g=(S[1],Object(o.useState)(!1)),h=Object(l.a)(g,2),P=h[0],C=(h[1],Object(o.useState)(!1)),T=Object(l.a)(C,2),W=(T[0],T[1],Object(o.useState)()),B=Object(l.a)(W,2),k=(B[0],B[1],Object(o.useState)()),N=Object(l.a)(k,2),w=(N[0],N[1],Object(o.useState)()),I=Object(l.a)(w,2);I[0],I[1];return u.a.createElement(m.f,{style:{maxWidth:500}},u.a.createElement(m.X,null,t),u.a.createElement(m.S,null,"Billing Information"),u.a.createElement(m.P,null),u.a.createElement(m.s,{msg:x}),u.a.createElement(m.t,{context:j,handler:E},u.a.createElement(m.W,{name:"tdno",caption:"TD No.",readOnly:!0}),u.a.createElement(m.W,{name:"pin",caption:"PIN",readOnly:!0}),u.a.createElement(m.W,{name:"owner.name",caption:"Property Owner",readOnly:!0}),u.a.createElement(m.W,{name:"owner.address",caption:"Owner Address",readOnly:!0}),u.a.createElement(m.W,{name:"purpose",caption:"Purpose",readOnly:!0}),u.a.createElement(m.P,null),u.a.createElement(m.m,{name:"amount",caption:"Amount Due",readOnly:!0,textAlign:"left"})),u.a.createElement(m.a,{disabled:P},u.a.createElement(m.c,{caption:"Back",action:function(){a(0)}}),u.a.createElement(m.e,{caption:"Confirm Payment",action:function(){c({refno:b,txntype:d,origin:"filipizen",orgcode:n.id,paidby:j.paidby,paidbyaddress:j.paidbyaddress,amount:j.amount,particulars:"Realty Tax Clearance for TD No. ".concat(j.tdno),items:j.billitems,info:{data:j}})},disableWhen:0===j.amount})))},E={txntype:"rpttaxclearance",refno:null,bill:{},contact:{}},v=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},S=[{step:1,name:"verification",caption:"Verification",Component:p.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,a=e.moveNextStep,p=e.movePrevStep,s=Object(m.jb)(),b=Object(l.a)(s,2),d=b[0],O=b[1],f=d.txntype,y=Object(o.useState)(),j=Object(l.a)(y,2),E=j[0],v=j[1],S=Object(o.useState)({}),x=Object(l.a)(S,2),g=x[0],h=x[1],P=Object(o.useState)(!1),C=Object(l.a)(P,2),T=C[0],W=C[1],B=Object(o.useState)(),k=Object(l.a)(B,2),N=k[0],w=k[1],I=Object(o.useState)(),A=Object(l.a)(I,2),D=A[0],L=A[1],R=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.O.lookupAsync("".concat(n.id,":OnlineRealtyTaxClearanceService"),"rpt");case 2:return t=e.sent,a={txntype:f,refno:N,purpose:D},e.next=6,t.invoke("getBilling",a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.f,null,u.a.createElement(m.X,null,t),u.a.createElement(m.S,null,"Initial Information"),u.a.createElement(m.P,null),u.a.createElement(m.s,{msg:E}),u.a.createElement(m.W,{caption:"Tax Declaration No.",name:"refno",value:N,onChange:w,readOnly:T,autoFocus:!0,error:g.refno,helperText:g.refno}),u.a.createElement(m.W,{caption:"Purpose",name:"purpose",value:D,onChange:L,readOnly:T,error:g.purpose,helperText:g.purpose}),u.a.createElement(m.a,null,u.a.createElement(m.c,{caption:"Back",variant:"text",action:p}),u.a.createElement(m.e,{caption:"Next",action:function(){N||h(Object(r.a)(Object(r.a)({},g),{},{refno:"Tax Declaration No. is required."})),D||h(Object(r.a)(Object(r.a)({},g),{},{purpose:"Purpose is required."})),0===Object.keys(g).length&&(W(!0),v(null),R().then((function(e){O({type:"SET_BILL",refno:N,bill:e}),a()})).catch((function(e){v(e.toString()),W(!1)})))},loading:T,disabled:T}))))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(m.jb)(),n=Object(l.a)(t,2),a=n[0],c=(n[1],{title:"Online Realty Tax Clearance",component:j});return u.a.createElement(p.d,Object.assign({module:c},e,{contact:a.contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],x=function(e){var t=e.partner,n=e.service,a=e.location,c=e.history,r=e.initialStep,i=void 0===r?0:r,p=Object(o.useState)(i),s=Object(l.a)(p,2),b=s[0],d=s[1],O=S[b],f=O.Component,y={partner:t,service:n,location:a,history:c,moveNextStep:function(){d((function(e){return e+1}))},movePrevStep:function(){0===b?c.goBack():d((function(e){return e-1}))},cancelPayment:function(){d(1)},emailRequired:!0,title:"Online Realty Tax Clearance"};return u.a.createElement(m.Q,{initialState:E,reducer:v},u.a.createElement(m.I,null,u.a.createElement(m.k,{center:!0},u.a.createElement(f,Object.assign({page:O},y)))))}}}]);
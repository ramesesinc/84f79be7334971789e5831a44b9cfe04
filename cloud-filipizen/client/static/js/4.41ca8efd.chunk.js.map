{"version":3,"sources":["../../src/components/ApplicationTypeSelect.js","../../src/components/Confirmation.js","../../src/components/TrackingInfo.js","../../src/buildingpermit/BuildingPermitInitial.js","../../src/buildingpermit/BuildingPermitApplicant.js","../../src/components/LotOwnershipType.js","../../src/components/OwnershipInfo.js","../../src/components/LotInformation.js","../../src/buildingpermit/BuildingPermitLocation.js","../../src/buildingpermit/BuildingPermitProject.js","../../src/components/ProfessionalLookup.js","../../src/components/ProfessionalCard.js","../../src/buildingpermit/BuildingPermitOccupancy.js","../../src/components/InfoComponent.js","../../src/buildingpermit/BuildingPermitAccessories.js","../../src/buildingpermit/BuildingPermitOtherPermits.js","../../src/buildingpermit/BuildingPermitConfirm.js","../../src/buildingpermit/BuildingPermitCompleted.js","../../src/buildingpermit/BuildingPermitWebController.js","../../src/buildingpermit/BuildingPermitContractor.js","../../src/occupancypermit/Applicant.js","../../src/occupancypermit/OccupancyPermitInitial.js","../../src/occupancypermit/PlannedVsActual.js","../../src/occupancypermit/ActualCost.js","../../src/occupancypermit/OtherCost.js","../../src/occupancypermit/Confirmation.js","../../src/occupancypermit/Completed.js","../../src/occupancypermit/OccupancyPermitWebController.js","../../src/occupancypermit/OccupancyType.js","../../src/occupancypermit/Contractor.js","../../src/occupancypermit/Professionals.js","../../src/components/ProfessionList.js","../../src/professional/Initial.js","../../src/professional/NewProfessional.js","../../src/professional/Success.js","../../src/professional/ProfessionalWebController.js","../../src/apptracking/AppTrackingWebController.js","../../src/obobilling/OnlineBilling.js","../../src/obobilling/OboBillingWebController.js","../../src/obobilling/InitialInfo.js","../../src/obobilling/Payment.js"],"names":["ApplicationTypeSelect","onCancel","onSubmit","error","service","useState","errorText","setErrorText","appType","setAppType","appno","setAppno","React","Page","Card","Title","title","Subtitle","Spacer","height","Radio","value","onChange","Item","caption","Panel","style","paddingLeft","Text","visibleWhen","variant","fullWidth","required","marginLeft","helperText","size","ActionBar","BackLink","action","Button","Confirmation","partner","onContinue","agreeDisclaimer","setAgreeDisclaimer","Fragment","Error","msg","Subtitle2","opacity","Checkbox","name","disableWhen","TrackingInfo","svc","Service","lookup","steps","BuildingPermitInitial","props","contact","setContact","apptype","app","setApp","activeStep","setActiveStep","setError","handler","step","moveNextStep","cs","EmailVerification","showName","onVerify","connection","FormPanel","context","editable","autoFocus","goBack","newApp","orgcode","id","worktypes","invoke","err","objid","width","entityTypes","LotOwnershipType","rest","OwnershipInfo","owner","showIdEntry","Combobox","items","entitytype","Label","ResidenceAddress","person","IdEntry","LotInformation","row","styles","balanceText","color","fontWeight","locationContainer","border","borderRadius","boxShadow","marginBottom","tdno","padding","backgroundColor","borderBottom","rpuInfoContainer","column","display","flexDirection","ProfessionalLookup","searchFieldTitle","onSelect","hideSearchText","prc","query","setQuery","selectedItems","setSelectedItems","professionals","setProfessionals","fetchList","params","idno","p","list","console","log","Lookup","searchField","enableSelect","length","limit","start","Table","rowsPerPage","showPagination","singleSelect","keyId","onSelectItems","TableColumn","expr","item","lastname","firstname","middlename","ProfessionalCard","professional","onSelectProfessional","photoUrl","containerStyle","container","lookupContainerStyle","lookupContainer","captionStyle","marginTop","nameContainer","labelStyle","profession","Image","src","label","dtissued","dtvalid","placeissued","ptr","refno","borderWidth","borderColor","fontSize","justifyContent","alignItems","paddingTop","paddingRight","dipslay","paddingBottom","group","marginRight","RadioItem","description","components","decimal","Decimal","integer","Integer","boolean","checkInfo","InfoComponent","category","dataType","unit","HandlerComponent","toLowerCase","infoContainer","flexBasis","margin","infoTitle","professionalLookup","itemsContainer","workTypeContainer","justifyConent","linkContainer","ancillaryContainer","ancillaryItem","requirementsContainer","requirement","document","pages","component","appService","setLoading","setEditmode","appid","resident","applicant","setApplicant","useEffect","Email","Mobileno","updatedApplicant","address","LocalAddress","NonLocalAddress","barangays","useBarangayList","loading","mode","setMode","editmode","setRefno","rpus","setRpus","property","setProperty","location","setLocation","reloadList","viewInitial","viewList","map","key","rpu","titleno","pin","addr","lotno","push","blockno","street","barangay","join","classcode","areasqm","prop","find","brgy","newRefno","type","city","citymunicipality","municipality","ctc","lotowned","bill","amtdue","href","target","alert","BarangayList","stepCompleted","initialProject","numfloors","numunits","occupancytype","division","occupancyMode","project","setProject","setOccupancyGroups","setOccupancyDivisions","setOccupancyTypes","setProfessional","masterWorkTypes","setMasterWorkTypes","workTypes","updatedWorkTypes","wt","pwt","checked","contractor","groups","groupid","divisions","divisionid","types","readOnly","occupancytypeid","textAlign","decimalScale","Date","totalfloorarea","projectcost","dtproposedconstruction","dtexpectedcompletion","proj","worktype","idx","findIndex","filter","contractorid","setOccupancyMode","occupancyGroups","occupancyDivisions","occupancyTypes","setPrevOccupancyId","setShowConfirm","Control","res","hasAccessories","setHasAccessories","accessories","setAccessories","accessoryTypes","setAccessoryTypes","loadAccessories","test","forEach","ot","Object","keys","o","ix","infos","info","iy","datatype","accessory","loaded","setLoaded","availableAncillaryPermits","setAvailableAncillaryPermits","ancillaryPermits","setAncillaryPermits","ancillaryPermit","setAncillaryPermit","loadAncillaryPermits","hasIncompletePermit","permit","designprofessionalid","prevInfo","CheckIcon","EditButton","typeid","includecost","DeleteButton","incompletePermits","toUpperCase","equipmentcost","_","selectedPermits","selected","permits","designprofessional","supervisor","supervisorid","updatedPermit","confirm","setConfirm","showPreview","setShowPreview","resetStatus","permittypeid","Icon","PageviewIcon","ReportViewer","open","onClose","MsgBox","onAccept","Loading","ButtonLink","CloudDownloadIcon","f","requirements","setRequirements","headerInfo","officename","address1","address2","phones","phoneno","mobileno","email","obocontactinfo","multiline","rows","req","titles","split","x","docs","doc","reportid","PreviewReport","refid","DownloadReport","BuildingPermitWebController","getUrlParameter","setStep","history","page","PageComponent","compProps","ps","updatedApp","saveHandler","stepperContainer","Stepper","completedStep","handleStep","OccupancyPermitInitial","onComplete","bldgPermitNo","setBldgPermitNo","bldgPermit","setBldgPermit","movePrevStep","permitno","permittype","bldgpermit","columnTitle","field","cost","setCost","updatedCost","maxWidth","fullWdith","errors","setErrors","disabled","actualtotalfloorarea","actualnumunits","actualnumfloors","actualheight","dtactualstarted","dtactualcompleted","isDateBefore","hasErrors","isContracted","setIsContracted","pcab","manager","pcabidno","pcabdtvalid","tin","manageroffice","manageremail","showError","setShowError","errorMsg","setErrorMsg","permitTypes","setPermitTypes","profList","permitType","validRole","designprofessionalrole","supervisorrole","requiredRoles","indexOf","roles","lastCommaIdx","lastIndexOf","substring","updatedProfessional","updatedProfessionals","updateProfessionals","prof","pt","sectionid","contactInfo","setContactInfo","OccupancyPermitWebController","onCompleteInitial","nextStep","currentStep","ProfessionList","professions","Initial","onVerified","setInfo","setKey","professionList","setProfessionList","validInfo","emailSvc","lookupAsync","then","data","VerifyEmailCode","hiddenCode","onResendCode","NewProfessional","initialProfessional","entity","Person","showAddress","PrcCard","disableIdNo","PtrCard","Success","Content","center","alt","text","CardActions","onClick","ProfessionalWebController","Disclaimer","reconciledProf","province","toString","AppTrackingWebController","trackingno","setTrackingno","subtasks","verifiedInfo","setVerifiedInfo","duration","task","getDuration","dtcreated","currentTask","taskInfo","assignee","table","trth","tableText","st","borderSpacing","cellSpacing","OnlineBilling","paymentError","ctx","useData","txntype","align","format","currencyFormat","amount","origin","paidby","paidbyaddress","particulars","initialState","reducer","draft","Component","ContactVerification","dispatch","setParams","getBilling","qtr","showdetails","e","EPayment","module","initialContact","initialStep","cancelPayment","OboBillingWebController","StateProvider"],"mappings":"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","file":"static/js/4.41ca8efd.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Button,\n  Radio,\n  ActionBar,\n  BackLink,\n  Item,\n  Spacer,\n  Error,\n  Text,\n  Subtitle,\n  Page,\n  Card,\n  Title,\n  Panel\n} from 'rsi-react-web-components';\n\nconst ApplicationTypeSelect = ({\n  onCancel,\n  onSubmit,\n  error,\n  service\n}) => {\n  const [errorText, setErrorText] = useState({});\n  const [appType, setAppType]= useState(\"new\");\n  const [appno, setAppno] = useState();\n\n  const submitAppType = () => {\n    if (appType !== \"new\") {\n      if (!appno) {\n        setErrorText({appno: \"Tracking No. is required.\"});\n        return\n      }\n    }\n    onSubmit({appType, appno});\n  }\n\n  return (\n    <Page>\n      <Card>\n        <Title>{service.title}</Title>\n        <Subtitle>Select an action</Subtitle>\n        <Spacer height={30} />\n        <Radio value={appType} onChange={setAppType} >\n          <Item caption=\"Create New Application\" value=\"new\" />\n          <Item caption=\"Resume Pending Application\" value=\"resume\" />\n        </Radio>\n        <Panel style={{paddingLeft: 30}}>\n          <Text\n            caption=\"Application Tracking No.\"\n            value={appno} onChange={setAppno}\n            visibleWhen={appType === \"resume\"}\n            variant=\"outlined\"\n            fullWidth={false}\n            required\n            style={{marginLeft: 40}}\n            error={errorText.appno || error}\n            helperText={errorText.appno || error}\n            size=\"small\"\n            />\n        </Panel>\n        <ActionBar>\n          <BackLink caption=\"Cancel\" action={onCancel} />\n          <Button caption=\"Next\" action={submitAppType} />\n        </ActionBar>\n      </Card>\n    </Page>\n  )\n}\n\nexport default ApplicationTypeSelect;\n","import React, { useState } from \"react\";\nimport {\n  Subtitle2,\n  Button,\n  Checkbox,\n  ActionBar,\n  BackLink,\n  Spacer,\n  Subtitle,\n  Error\n} from 'rsi-react-web-components';\n\n\nconst Confirmation = ({\n  partner,\n  title=\"New Permit Application\",\n  onCancel,\n  onContinue,\n  error\n}) => {\n  const [agreeDisclaimer, setAgreeDisclaimer] = useState(false);\n\n  return (\n    <React.Fragment>\n      <Subtitle>{title}</Subtitle>\n      <Spacer height={30} />\n      <Error msg={error} />\n      <Subtitle2>Please read thoroughly before proceeding</Subtitle2>\n      <p style={{opacity: 0.8}}>\n      This online service will require personal information from the applicant,\n      lot owner(s) and professionals involved in this transaction. In compliance\n      with the Data Privacy Act, we are securing your consent that you have been\n      authorized by the aforementioned parties to act on their behalf. The data\n      collected will be stored, processed and used for effectively carrying out\n      legitimate transactions with the local government of {partner.title}. If you\n      do not agree to these terms, you can cancel out by click on the Cancel button.\n      If you agree to these terms, tick on the checkbox and click Continue.\n      </p>\n      <Checkbox caption='Yes, I have read and agree to the terms and conditions'\n        value={agreeDisclaimer}\n        name='agreeDisclaimer'\n        onChange={setAgreeDisclaimer}\n      />\n      <ActionBar>\n        <BackLink caption=\"Cancel\" action={onCancel} />\n        <Button caption='Continue' action={onContinue} disableWhen={!agreeDisclaimer} />\n      </ActionBar>\n  </React.Fragment>\n  )\n}\n\nexport default Confirmation;\n","import React from \"react\";\nimport {\n  Subtitle2,\n  Button,\n  ActionBar,\n  Spacer,\n  Subtitle\n} from 'rsi-react-web-components';\n\nconst TrackingInfo = ({\n  title=\"New Permit Application\",\n  appno,\n  onContinue\n}) => {\n  return (\n    <React.Fragment>\n      <Subtitle>{title}</Subtitle>\n      <Spacer height={30} />\n      <Subtitle2>Application created</Subtitle2>\n      <p>\n      Please take note of the tracking number for this application.\n      This will be your tracking reference for completing\n      and follow up for this application.\n      </p>\n      <Subtitle2>{appno}</Subtitle2>\n      <ActionBar>\n        <Button caption='Continue' action={onContinue} />\n      </ActionBar>\n    </React.Fragment>\n  )\n}\n\nexport default TrackingInfo;\n","import React, { useState, useEffect } from 'react';\nimport {\n  FormPanel,\n  Panel,\n  Card,\n  Subtitle2,\n  Button,\n  ActionBar,\n  BackLink,\n  Title,\n  Spacer,\n  Service,\n  Text,\n  Subtitle,\n  Page,\n  Radio,\n  Item\n} from 'rsi-react-web-components';\n\nconst svc = Service.lookup(\"OnlineBuildingPermitService\", \"obo\");\n\nimport { EmailVerification } from 'rsi-react-filipizen-components'\nimport Confirmation from \"../components/Confirmation\";\nimport TrackingInfo from \"../components/TrackingInfo\";\n\nconst steps = [\n  {name: \"email\", caption: \"Email Verification\"},\n  {name: \"select-apptype\", caption: \"Select Application Type\"},\n  {name: \"project-name\", caption: \"Project Name\"},\n  {name: \"confirmation\", caption: \"Confirmation\"},\n  {name: \"newapp\", caption: \"New Application \"},\n]\n\nconst BuildingPermitInitial = (props) => {\n  const [contact, setContact] = useState({});\n  const [agreeDisclaimer, setAgreeDisclaimer] = useState(false)\n  const [appType, setAppType] = useState(\"new\")\n  const [projectName, setProjectName] = useState()\n  const [appno, setAppno] = useState()\n  const [app, setApp] = useState({apptype: \"NEW\"})\n  const [activeStep, setActiveStep] = useState(0);\n  const [error, setError] = useState();\n\n  const { partner, service, handler, history, onCancel } = props\n  const step = steps[activeStep];\n\n  const moveNextStep = () => {\n    setActiveStep(cs => cs + 1);\n  }\n\n  const movePrevStep = () => {\n    setActiveStep(cs => cs-1);\n  }\n\n  const saveApp = () => {\n    const newApp = {\n      ...app,\n      orgcode: partner.orgcode || partner.id,\n      apptype: appType,\n      contact,\n      worktypes: [],\n    }\n\n    svc.invoke(\"create\", newApp, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        setAppno(app.objid)\n        moveNextStep();\n      }\n    });\n  }\n\n  const exitInitial = () => {\n    handler(appno);\n  }\n\n  const onVerifyEmail = (contact) => {\n    setContact(contact);\n    moveNextStep();\n  }\n\n  if (step.name === \"email\") {\n    return (\n      <Page>\n        <EmailVerification\n          title={service.title}\n          visibleWhen={step.name === \"email\"}\n          showName={true}\n          onCancel={onCancel}\n          onVerify={onVerifyEmail}\n          partner={partner}\n          connection=\"obo\"\n        />\n      </Page>\n    )\n  }\n\n  return (\n    <Page>\n      <Card>\n        <Title>{service.title}</Title>\n        <FormPanel visibleWhen={step.name === \"select-apptype\"} context={app} handler={setApp} >\n          <Subtitle>Select Application Type</Subtitle>\n          <Panel style={{marginLeft: 20}}>\n            <Radio name=\"apptype\">\n              <Item caption=\"New Construction\" value=\"NEW\" />\n              <Item caption=\"Renovation\" value=\"RENOVATION\" editable={false} />\n              <Item caption=\"Demolition\" value=\"DEMOLITION\" editable={false}  />\n            </Radio>\n          </Panel>\n          <ActionBar>\n            <BackLink caption=\"Back\" action={onCancel} />\n            <Button caption=\"Next\" action={moveNextStep} />\n          </ActionBar>\n        </FormPanel>\n\n        <FormPanel visibleWhen={step.name === \"project-name\"} context={app} handler={setApp}>\n          <Subtitle>New Building Permit Application</Subtitle>\n          <Spacer height={30} />\n          <Subtitle2>Project Information</Subtitle2>\n          <Text caption=\"Project Name\" name=\"title\"  autoFocus={true} />\n          <ActionBar>\n            <BackLink action={movePrevStep} />\n            <Button caption='Next' action={moveNextStep} />\n          </ActionBar>\n        </FormPanel>\n\n        <Panel visibleWhen={step.name === \"confirmation\"}>\n          <Confirmation partner={partner} error={error} onCancel={props.goBack} onContinue={saveApp} />\n        </Panel>\n\n        <Panel visibleWhen={step.name === \"newapp\"} width={400}>\n          <TrackingInfo appno={appno} onContinue={exitInitial} />\n        </Panel>\n\n      </Card>\n    </Page>\n  )\n}\n\nexport default BuildingPermitInitial;\n","import React, { useState, useEffect } from 'react'\nimport {\n  Error,\n  FormPanel,\n  Text,\n  Email,\n  Mobileno,\n  Spacer,\n  Checkbox,\n  Combobox,\n  Button,\n  ActionBar,\n  Panel,\n  Subtitle,\n  Subtitle2\n} from 'rsi-react-web-components'\n\nimport { LocalAddress, NonLocalAddress, IdEntry } from 'rsi-react-filipizen-components';\n\nconst entityTypes = ['INDIVIDUAL', 'CORPORATION', 'GOVERNMENT', 'OTHER']\n\nconst BuildingPermitApplicant = (props) => {\n  const { appno, partner, appService, moveNextStep, stepCompleted } = props\n\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [editmode, setEditmode] = useState(\"read\");\n  const [applicant, setApplicant] = useState({\n    appno,\n    appid: appno,\n    entitytype: 'INDIVIDUAL',\n    resident: false,\n  })\n\n  const handleError = (err) => {\n    setLoading(false)\n    setError(err.toString())\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    appService.invoke(\"getApplicant\", {appid: appno}, (err, applicant) => {\n      if (err) {\n        setError(err)\n      } else if(!applicant) {\n        setEditmode(\"create\");\n      }\n      else {\n        setApplicant(applicant);\n        setEditmode(\"read\");\n      };\n      setLoading(false);\n    })\n  }, []);\n\n  const saveApplicant = () => {\n    setError(null);\n    appService.invoke(\"saveApplicant\", applicant, (err, app) => {\n      if (err) {\n        setError(err)\n      } else {\n        moveNextStep();\n      }\n      setLoading(false)\n    })\n  }\n\n  const residentHandler = () => {\n    const updatedApplicant = {...applicant, resident: !applicant.resident, address: {}};\n    setApplicant(updatedApplicant);\n  }\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Building Applicant Details</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n      <FormPanel context={applicant} handler={setApplicant} >\n        <Combobox items={entityTypes} name='entitytype' caption='Type of Applicant'/>\n        <Text caption='Name' name='name' visibleWhen={applicant.entitytype !== 'INDIVIDUAL'}/>\n\n        <Spacer />\n        <Panel>\n          <Subtitle2>Administrator or contact name of applicant</Subtitle2>\n          <Text caption='Last Name' name='lastname' required={true}/>\n          <Text caption='First Name' name='firstname' required={true}/>\n          <Text caption='Middle Name' name='middlename' required={true}/>\n          <Email name='email'/>\n          <Mobileno name='mobileno'/>\n        </Panel>\n\n        <Spacer />\n        <Subtitle2>Applicant Address</Subtitle2>\n        <Checkbox caption='Resident' name='resident' onChange={residentHandler}/>\n        {applicant.resident ?\n          <LocalAddress orgcode={partner.id} name='address' caption='Address' />\n          :\n          <NonLocalAddress name='address' caption='Address'  />\n        }\n        <Spacer />\n        <Subtitle2>Proof of Identity</Subtitle2>\n        <IdEntry name=\"id\" />\n      </FormPanel>\n\n      <ActionBar>\n        <Button caption='Next' action={saveApplicant}  />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nexport default BuildingPermitApplicant\n","import React from \"react\";\nimport { Subtitle2, Radio, Item  } from \"rsi-react-web-components\";\n\nconst LotOwnershipType = ({ name, caption, ...rest }) => {\n  const title = rest.title || \"Lot Ownership\";\n  const showTitle = rest.showTitle || true;\n\n  return (\n    <React.Fragment>\n      {showTitle && <Subtitle2>{title}</Subtitle2>}\n      <Radio name={name} {...rest}>\n        <Item caption=\"Lot Owned\" value=\"1\" />\n        <Item caption=\"Leased\" value=\"0\" />\n      </Radio>\n    </React.Fragment>\n  );\n};\n\nexport default LotOwnershipType;\n","import React from \"react\";\nimport { Subtitle2, Panel, Text, Label, Combobox } from \"rsi-react-web-components\";\nimport { ResidenceAddress, IdEntry } from \"rsi-react-filipizen-components\";\n\nconst entityTypes = ['INDIVIDUAL', 'CORPORATION', 'GOVERNMENT', 'OTHER']\n\nconst OwnershipInfo = ({ owner, editable, orgcode, ...rest }) => {\n  const title = rest.title || \"Lot Owner Information\";\n  const showTitle = rest.showTitle || true;\n  const showIdEntry =  rest.showIdEntry || false;\n\n  return (\n    <React.Fragment>\n      {showTitle && <Subtitle2>{title}</Subtitle2> }\n      <Panel>\n        <Text caption=\"Profile No.\" name=\"owner.profileno\" editable={editable} />\n        <Combobox items={entityTypes} name=\"owner.entitytype\" caption='Ownership Type' editable={editable}/>\n        {owner.entitytype !== \"INDIVIDUAL\" && (\n          <React.Fragment>\n            <Text caption=\"Lot Owner Name\" name=\"owner.name\" editable={editable} />\n            <Label>Name of administrator/contact of property owner</Label>\n          </React.Fragment>\n        )}\n\n        <Text caption=\"Last Name\" name=\"owner.lastname\" editable={editable} />\n        <Text caption=\"First Name\" name=\"owner.firstname\" editable={editable} />\n        <Text caption=\"Middle Name\" name=\"owner.middlename\" editable={editable} />\n        <ResidenceAddress person={owner} orgcode={orgcode} name=\"owner\" editable={editable} />\n        {showIdEntry && <IdEntry name=\"owner.id\" editable={editable} /> }\n      </Panel>\n    </React.Fragment>\n  );\n};\n\nexport default OwnershipInfo;\n","import React from \"react\";\nimport { Subtitle2, Text, Panel } from \"rsi-react-web-components\";\n\nconst LotInformation = ({editable, ...rest} ) => {\n  const title = rest.title || \"Lot Information\";\n  const showTitle = rest.showTitle || true;\n  return (\n    <React.Fragment>\n      {showTitle && <Subtitle2>{title}</Subtitle2>}\n      <Panel row>\n        <Text caption=\"PIN\" name=\"pin\" editable={editable} />\n        <Text caption=\"Lot No.\" name=\"lotno\" editable={editable} />\n        <Text caption=\"Block No.\" name=\"blockno\" editable={editable} />\n      </Panel>\n      <Panel row>\n        <Text caption=\"Street\" name=\"street\" editable={editable} />\n        <Text caption=\"Barangay\" name=\"barangay\" editable={editable} />\n      </Panel>\n      <Panel row>\n        <Text caption=\"TD No.\" name=\"tdno\" editable={editable} />\n        <Text caption=\"Title No.\" name=\"titleno\" editable={editable} />\n      </Panel>\n      <Panel row>\n        <Text caption=\"Classification\" name=\"classcode\" editable={editable} />\n        <Text caption=\"Area\" name=\"areasqm\" editable={editable} />\n      </Panel>\n    </React.Fragment>\n  )\n}\n\nexport default LotInformation\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Subtitle,\n  Subtitle2,\n  BackLink,\n  ActionBar,\n  Button,\n  Spacer,\n  Error,\n  Text,\n  Service,\n  Label,\n  FormPanel,\n} from 'rsi-react-web-components';\n\nimport { BarangayList, useBarangayList } from \"rsi-react-filipizen-components\";\nimport LotOwnershipType from \"../components/LotOwnershipType\";\nimport OwnershipInfo from \"../components/OwnershipInfo\";\nimport LotInformation from \"../components/LotInformation\";\n\nconst BuildingPermitLocation = (props) => {\n  const { partner, appno, appService, moveNextStep } = props;\n  const barangays = useBarangayList(partner.id);\n\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [mode, setMode] = useState(\"view-rpus\");\n  const [editmode, setEditmode] = useState(\"view\")\n\n\tconst [refno, setRefno] = useState();\n  const [rpus, setRpus] = useState([]);\n  const [property, setProperty] = useState({});\n  const [location, setLocation] = useState({});\n\n\n  /* load rpus */\n  useEffect(() => {\n    if (mode === \"view-rpus\") {\n      reloadList();\n    }\n  }, [mode])\n\n  const viewInitial = () => {\n    setRefno();\n    setEditmode(\"edit\");\n    setMode(\"initial\");\n  }\n\n  const findProperty = () => {\n    setLoading(true);\n    const orgcode = partner.orgcode || partner.id;\n    const svc = Service.lookup( orgcode + \":OboOnlineService\", \"obo\");\n    svc.invoke(\"findLocation\", { refno: refno || newRefno }, (err, property) => {\n      if (err) {\n        setError(err);\n      } else {\n        if(property.owner.address.type == 'local' ) {\n          property.owner.resident = 1;\n        }\n        else {\n          property.owner.resident = 0;\n        }\n        if( property.owner.address.city ) property.owner.address.citymunicipality = property.owner.address.city;\n        if( property.owner.address.municipality ) property.owner.address.citymunicipality = property.owner.address.municipality;\n        property.owner.ctc = {};\n        property.lotowned = 1;\n        property.appid = props.appno;\n        setProperty(property);\n        setMode(\"view-lot\");\n      }\n      setLoading(false);\n    });\n  }\n\n  const reloadList = () => {\n    appService.invoke(\"getRpus\", {appid: props.appno}, (err, rpus) => {\n      if (err) {\n        setError(err);\n      } else {\n        setRpus(rpus);\n      }\n    } );\n  }\n\n  const viewList = () => {\n    setMode(\"view-rpus\");\n  }\n\n  const editOwnerInfo = props => {\n    setMode(\"edit-owner-info\");\n    //TODO: activate validation below\n    // if(property.bill !== null && property.bill.amtdue != null &&  property.bill.amtdue > 0 ) {\n    //   setError(\"Please settle all unpaid balances first before proceeding\");\n    // } else {\n    //   setError(null);\n    //   setMode(\"edit-owner-info\");\n    // }\n  }\n\n  const saveRpu = () => {\n    if( !property.owner.id ) {\n      alert(\"Please provide proof of identity for owner/administrator of property\");\n      return;\n    }\n    setError(null);\n    appService.invoke(\"saveRpu\", property, (err, rpu) => {\n      if (err) {\n        setError(err)\n      } else {\n        reloadList();\n        setMode(\"view-rpus\");\n      }\n    });\n  }\n\n  const viewLocations = () => {\n    setError(null);\n    if (rpus.length === 0) {\n      setError(\"Add at least one Lot Information.\");\n    } else {\n      const prop = rpus[0];\n      setLocation({\n        lotno: prop.lotno,\n        blockno: prop.blockno,\n        barangay: barangays.find(brgy => brgy.name === prop.barangay),\n      });\n      setMode(\"specify-location\");\n    }\n  }\n\n  const updateLocation = () => {\n    setError(null);\n    appService.invoke(\"saveLocation\", {appid: appno, ...location}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        moveNextStep();\n      }\n    })\n  }\n\n  const deleteRpu = (rpu) => {\n    setError(null);\n    appService.invoke(\"removeRpu\", rpu, (err, res) => {\n      if (err) {\n        setError(err);\n      } else {\n        setRpus(rpus.map(r => r.objid !== rpu.objid));\n      }\n    })\n  }\n\n  const getAddressText = (item) =>  {\n    const addr = [];\n    if (item.lotno) addr.push(`Lot: ${item.lotno}`);\n    if (item.blockno) addr.push(`Block: ${item.blockno}`);\n    if (item.street) addr.push(`Street: ${item.street}`);\n    if (item.barangay) addr.push(`Barangay: ${item.barangay}`);\n    return addr.join(\" \");\n  }\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Project Location</Subtitle>\n      <Spacer />\n      <Panel visibleWhen={mode === \"view-rpus\"}>\n        <Subtitle2>Lot Information</Subtitle2>\n        <Error msg={error} />\n        {rpus.map(rpu => (\n          <Panel style={styles.locationContainer} key={rpu.tdno}>\n            <div style={styles.tdno}>\n              <Subtitle2>{`TD No. ${rpu.tdno}`}</Subtitle2>\n            </div>\n            <div style={styles.rpuInfoContainer}>\n              <Label caption=\"Title No.\">{rpu.titleno}</Label>\n              <Label caption=\"PIN\">{rpu.pin}</Label>\n              <Label caption=\"Address\">{getAddressText(rpu)}</Label>\n              <Label caption=\"Class\">{rpu.classcode}</Label>\n              <Label caption=\"Area\">{rpu.areasqm}</Label>\n              <Label caption=\"Owner\">{rpu.owner.name}</Label>\n            </div>\n          </Panel>\n        ))}\n        <ActionBar>\n          <Button caption=\"Add Lot Info\" action={viewInitial} />\n          <Button caption=\"Next\" action={viewLocations} />\n        </ActionBar>\n      </Panel>\n\n      <Panel visibleWhen={mode === \"initial\"}>\n        <Subtitle2>Specify the Site Location/Property</Subtitle2>\n        <Error msg={error} />\n        <Spacer />\n        <Text caption=\"Tax Declaration No.\" value={refno} onChange={setRefno} autoFocus={true} />\n        <ActionBar>\n          <Button caption=\"Back to List\" action={viewList} variant=\"text\" />\n          <Button caption=\"Search\" action={findProperty} disableWhen={loading} loading={loading} />\n        </ActionBar>\n      </Panel>\n\n      <Panel visibleWhen={mode === \"view-lot\"}>\n        <p>\n        Please check carefully if the information is correct.\n        For any discrepancies, please contact the Assessor's Office before proceeding.\n        </p>\n\n          {(property && property.bill && property.appno )  &&\n            <label style={styles.balanceText}>\n              Note: There is still an unpaid balance of <u>Php #{property.bill ? property.bill.amtdue : 0.0}</u>.\n              You can settle this by paying online <a  href={`/partner/${partner.group.name}_${partner.name}/rptis/rptbilling`} target=\"0\"><u>here</u></a>\n            </label>\n          }\n        <FormPanel context={property} handler={setProperty}>\n          <LotInformation editable={false} />\n          <LotOwnershipType property={property} name=\"lotowned\" row editable={false} />\n          <OwnershipInfo name=\"owner\" orgcode={partner.id} owner={property.owner} editable={false} />\n        </FormPanel>\n        <ActionBar>\n          <BackLink action={viewInitial} caption='Back' visibleWhen={editmode === \"edit\" } />\n          <Button action={editOwnerInfo} caption='Next'  visibleWhen={editmode == \"edit\"} />\n          <Button action={viewList} caption='Back' visibleWhen={editmode === \"view\" } />\n        </ActionBar>\n      </Panel>\n\n      <Panel visibleWhen={mode === \"edit-owner-info\"}>\n        <p>Please update the information if necessary</p>\n        <FormPanel context={property} handler={setProperty}>\n          <LotOwnershipType name=\"lotowned\" row autoFocus={true} />\n          <OwnershipInfo name=\"owner\" owner={property.owner} orgcode={partner.id} showIdEntry={true} />\n        </FormPanel>\n        <ActionBar>\n          <BackLink action={() => setMode(\"view-lot\")} caption=\"Back\" />\n          <Button action={saveRpu} caption=\"Next\" />\n        </ActionBar>\n      </Panel>\n\n      <Panel visibleWhen={mode === \"specify-location\"}>\n        <Subtitle2>Specify Project Location</Subtitle2>\n        <Spacer />\n        <Error msg={error} />\n        <FormPanel context={location} handler={setLocation}>\n          <Panel row>\n            <Text name='lotno' caption='Lot No.' />\n            <Text name='blockno' caption='Block No.' />\n          </Panel>\n          <Panel row>\n            <Text name='unitno' caption='Unit No.' />\n            <Text name='bldgno' caption='Building No.' />\n          </Panel>\n          <Text name='bldgname' caption='Building Name' />\n          <Text name='street' caption='Street' />\n          <Text name='subdivision' caption='Subdivision' />\n          <BarangayList barangays={barangays} name=\"barangay\" caption='Barangay' />\n        </FormPanel>\n        <ActionBar>\n          <BackLink caption=\"Back\" action={() => setMode(\"view-rpus\")} variant=\"text\" />\n          <Button caption='Next' action={updateLocation} />\n        </ActionBar>\n      </Panel>\n    </Panel>\n  );\n}\n\nconst styles = {\n  balanceText: {\n    color: \"red\",\n    fontWeight: \"bold\",\n  },\n  locationContainer: {\n    border: \"1px solid #aaa\",\n    borderRadius: 5,\n    boxShadow: \"0px 5px 7px -7px rgba(0,0,0,0.75)\",\n    marginBottom: 10\n  },\n  tdno: {\n    padding: \"5px 10px\",\n    backgroundColor: \"#ddd\",\n    borderBottom: \"1px solid #aaa\",\n    borderRadius: 5,\n  },\n  rpuInfoContainer: {\n    padding: \"10px\",\n  }\n}\n\nexport default BuildingPermitLocation;\n\n","import React, { useState, useEffect } from \"react\";\nimport {\n  ActionBar,\n  Button,\n  Checkbox,\n  Panel,\n  Error,\n  Subtitle,\n  Subtitle2,\n  FormPanel,\n  Text,\n  Spacer,\n  BackLink,\n  Service,\n  Integer,\n  Decimal,\n  Date,\n} from \"rsi-react-web-components\";\n\nconst svc = Service.lookup(\"OboMiscListService\", \"obo\");\n\nconst BuildingPermitProject = ({\n  partner,\n  appno,\n  appService,\n  moveNextStep,\n  stepCompleted\n}) => {\n  const initialProject = {\n    appid: appno,\n    apptype: \"NEW\",\n    worktypes: [],\n    numfloors: 1,\n    numunits: 1,\n    occupancytype: {\n      objid: null,\n      group: {},\n      division: {},\n    }\n  }\n\n  const [error, setError] = useState();\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  //TODO: remove mode only\n  const [mode, setMode] = useState(\"project-detail\");\n  const [occupancyMode, setOccupancyMode] = useState(\"group\");\n  const [project, setProject] = useState(initialProject);\n  const [occupancyGroups, setOccupancyGroups] = useState([]);\n  const [occupancyDivisions, setOccupancyDivisions] = useState([]);\n  const [occupancyTypes, setOccupancyTypes] = useState([]);\n  const [professional, setProfessional] = useState();\n  const [masterWorkTypes, setMasterWorkTypes] = useState([]);\n\n  const loadOccupancyGroups = () => {\n    svc.invoke(\"getOccupancyTypeGroups\", null, (err, groups) => {\n      if (err) {\n        setError(err)\n      } else {\n        setOccupancyGroups(groups);\n      }\n    });\n  }\n\n  const loadOccupancyDivisions = () => {\n    const groupid = project.occupancytype.group.objid;\n    svc.invoke(\"getOccupancyTypeDivisions\", {groupid} ,(err, divisions) => {\n      if (err) {\n        setError(err)\n      } else {\n        setOccupancyDivisions(divisions);\n      }\n    });\n  }\n\n  const loadOccupancyTypes = () => {\n    const divisionid = project.occupancytype.division.objid;\n    svc.invoke(\"getOccupancyTypes\", {divisionid} ,(err, types) => {\n      if (err) {\n        setError(err)\n      } else {\n        setOccupancyTypes(types);\n      }\n    });\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    svc.invoke(\"getWorkTypes\", null, (err, workTypes) => {\n      if (err) {\n        setError(err);\n      } else {\n        setMasterWorkTypes(workTypes);\n      }\n      setLoading(false);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (masterWorkTypes.length === 0) return;\n\n    setLoading(true);\n    setError(null);\n\n    appService.invoke(\"getProjectInfo\", {appid: appno}, (err, project) => {\n      if (err) {\n        setError(err);\n      } else {\n        if (project.worktypes.length === 0) {\n          project.worktypes = masterWorkTypes;\n        } else {\n          const updatedWorkTypes = masterWorkTypes.map(wt => {\n            let workType = project.worktypes.find(pwt => wt.objid === pwt)\n            if (workType) {\n              return {...wt, checked: true};\n            }\n            return wt;\n          })\n          project.worktypes = updatedWorkTypes;\n        }\n        project.numunits = project.numunits || 1;\n        project.numfloors = project.numfloors || 1;\n        setProfessional(project.contractor);\n        setProject(project);\n        setMode(\"project-detail\");\n      }\n      setLoading(true);\n    });\n  }, [masterWorkTypes])\n\n  useEffect(() => {\n    if (occupancyMode === \"group\")\n      loadOccupancyGroups();\n    else if (occupancyMode === \"division\")\n      loadOccupancyDivisions();\n    else if (occupancyMode === \"type\")\n      loadOccupancyTypes();\n  }, [occupancyMode])\n\n  const submitProjectDetail = () => {\n    setError(null);\n    const detail = {\n      appid: appno,\n      title: project.title,\n      description: project.description,\n      numunits: project.numunits,\n      totalfloorarea: project.totalfloorarea,\n      height: project.height,\n      numfloors: project.numfloors,\n      projectcost: project.projectcost,\n      dtproposedconstruction: project.dtproposedconstruction,\n      dtexpectedcompletion: project.dtexpectedcompletion,\n    };\n    appService.invoke(\"update\", detail, (err, proj) => {\n      if (err) {\n        setError(err);\n      } else {\n        clearStatus();\n        setMode(\"select-worktype\");\n      }\n    });\n  }\n\n  const validWorkTypes = () => {\n    const idx = project.worktypes.findIndex(wt => wt.checked === true);\n    return idx >= 0;\n  }\n\n  const submitWorkType = () => {\n    setError(null);\n    if (validWorkTypes()) {\n      setError(null);\n      const updatedWorkTypes = {\n        appid: appno,\n        worktypes: project.worktypes.filter(wt => wt.checked).map(wt => wt.objid),\n      };\n      appService.invoke(\"update\", updatedWorkTypes, (err, proj) => {\n        if (err) {\n          setError(error);\n        } else {\n          setLoading(false);\n          moveNextStep();\n        }\n      });\n    } else {\n      setError(\"Please check at least one work type.\")\n    }\n  }\n\n  const submitOccupancyGroup = () => {\n    if (!project.occupancytype.group.objid) {\n      setError(\"Kindly select an occupancy group.\")\n    } else {\n      setOccupancyMode(\"division\");\n    }\n  }\n\n  const submitOccupancyDivision = () => {\n    if (!project.occupancytype.division.objid) {\n      setError(\"Kindly select an occupancy division group.\")\n    } else {\n      setOccupancyMode(\"type\");\n    }\n  }\n\n  const submitOccupancyType = () => {\n    if (!project.occupancytype.objid) {\n      setError(\"Kindly select an occupancy type.\")\n    } else {\n      let occupancytype = {appid: appno, occupancytype: project.occupancytype};\n      appService.invoke(\"updateOccupancyType\", occupancytype, (err, res) => {\n        if (err) {\n          setError(err);\n        } else {\n          clearStatus();\n          moveNextStep();\n        }\n      })\n    }\n  }\n  const clearStatus = () => {\n    setError(null);\n    setLoading(false);\n  }\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Project Details</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n\n      <FormPanel visibleWhen={mode === \"project-detail\"} context={project} handler={setProject}>\n        <Text caption=\"Project Title\" name=\"title\" required={true} readOnly={stepCompleted} autoFocus={true}/>\n        <Text caption=\"Project Description\" name=\"description\" required={true} readOnly={stepCompleted} />\n        {project.occupancytypeid &&\n          <Text caption=\"Occupancy Type\" name=\"occupancytype.title\" required={true} readOnly={stepCompleted} />\n        }\n        <Spacer/>\n        <Integer caption=\"No of Units\" name=\"numunits\" required={true} readOnly={stepCompleted} />\n        <Panel row>\n          <Decimal caption=\"Total Floor Area [sq.meter]\" name=\"totalfloorarea\" required={true} readOnly={stepCompleted} fullWidth textAlign=\"left\" />\n          <Decimal caption=\"Building Height [meter]\" name=\"height\" required={true} readOnly={stepCompleted} fullWidth textAlign=\"left\" />\n        </Panel>\n        <Integer caption=\"No. of Storeys\" name=\"numfloors\" required={true} readOnly={stepCompleted} />\n        <Spacer/>\n        <Decimal caption=\"Estimated Cost [Php]\" name=\"projectcost\" required={true} readOnly={stepCompleted} decimalScale={2} textAlign=\"left\" />\n        <Panel row>\n          <Date caption=\"Proposed Construction Date\" name=\"dtproposedconstruction\" readOnly={stepCompleted} />\n          <Date caption=\"Expected Completion Date\" name=\"dtexpectedcompletion\" readOnly={stepCompleted} />\n        </Panel>\n        <ActionBar>\n          <Button caption=\"Next\" action={submitProjectDetail} />\n        </ActionBar>\n      </FormPanel>\n\n      <FormPanel visibleWhen={mode === \"select-worktype\"} context={project} handler={setProject} >\n        <Subtitle2>Select Work Types</Subtitle2>\n        <Panel style={styles.column}>\n          {project.worktypes.map((worktype, idx) => (\n            <Checkbox\n              caption={worktype.name}\n              name={`worktypes[${idx}].checked`}\n              value={worktype.objid} />\n          ))}\n        </Panel>\n        <ActionBar>\n          <BackLink action={() => setMode(\"project-detail\")} />\n          <Button caption=\"Next\" action={submitWorkType} />\n        </ActionBar>\n      </FormPanel>\n    </Panel>\n  )\n}\n\nconst styles = {\n  column: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginLeft: 20,\n  },\n}\n\nexport default BuildingPermitProject\n","import React, { useState } from 'react'\nimport {\n  Lookup,\n  Panel,\n  FormPanel,\n  Text,\n  Button,\n  Table,\n  TableColumn,\n  Service\n} from 'rsi-react-web-components'\n\nconst svc = Service.lookup(\"OboProfessionalService\", \"obo\");\n\nconst ROWS_PER_PAGE = 5;\n\nconst ProfessionalLookup = ({\n  caption=\"Search Professional\",\n  searchFieldTitle=\"PRC No.\",\n  onSelect,\n  hideSearchText=false,\n  fullWidth=true\n}) => {\n  const [showLookup, setShowLookup] = useState(false)\n  const [query, setQuery] = useState({prc:{}});\n  const [selectedItems, setSelectedItems] = useState();\n  const [professionals, setProfessionals] = useState()\n\n  const onSelectItems = (items) => {\n    setSelectedItems(items);\n  }\n\n  const onAcceptLookup = () => {\n    onSelect(selectedItems);\n  }\n\n  const fetchList = (params) => {\n      if (svc && query.prc.idno ) {\n        const p = {...query, ...params};\n        svc.invoke(\"getList\", p, (err, list) => {\n          if (err) {\n            console.log(\"ERROR\", err)\n          } else {\n            setProfessionals(list);\n          }\n        });\n      }\n  }\n\n  const search = () => {\n    fetchList({limit: ROWS_PER_PAGE, start: 0});\n  }\n\n  return (\n      <Lookup caption={caption}\n        query={query}\n        setQuery={setQuery}\n        searchFieldTitle={searchFieldTitle}\n        searchField=\"prc.idno\"\n        onSelect={onAcceptLookup}\n        fetchList={fetchList}\n        hideSearchText={hideSearchText}\n        enableSelect={selectedItems && selectedItems.length > 0}\n        fullWidth={fullWidth}\n      >\n        <FormPanel context={query} handler={setQuery}>\n          <Panel row>\n            <Text caption='PRC No.' name='prc.idno' width={200} variant='outlined' />\n            <Button caption='Search' action={search} />\n          </Panel>\n        </FormPanel>\n        <Table\n          items={professionals}\n          fetchList={fetchList}\n          rowsPerPage={ROWS_PER_PAGE}\n          showPagination={false}\n          singleSelect={true}\n          keyId=\"objid\"\n          onSelectItems={onSelectItems}\n        >\n          <TableColumn caption='PRC' expr='prc.idno' />\n          <TableColumn caption='Name' expr={item => `${item.lastname}, ${item.firstname} ${item.middlename}`} />\n          <TableColumn caption='Profession' expr='profession' />\n        </Table>\n      </Lookup>\n  )\n}\n\nexport default ProfessionalLookup\n","import React from \"react\";\nimport {\n  Panel,\n  Label,\n  Image,\n} from \"rsi-react-web-components\";\n\nimport \"./ProfessionalCard.css\";\nimport ProfessionalLookup from \"./ProfessionalLookup\";\n\nconst ProfessionalCard = ({ professional  ={}, caption, onSelectProfessional, photoUrl }) => {\n  let name = \"\";\n  if (professional.lastname) {\n    name = `${professional.lastname}, ${professional.firstname} ${professional.middlename}`\n  };\n  let address = \"\";\n  if (professional.address) {\n    address = professional.address.text;\n  }\n\n  let containerStyle = styles.container;\n  let lookupContainerStyle = styles.lookupContainer;\n  let captionStyle = styles.caption;\n\n  if (typeof(professional.lastname) === \"string\") {\n    containerStyle = {...containerStyle, backgroundColor:\"#d1d7f8\"};\n    lookupContainerStyle = {...lookupContainerStyle, backgroundColor: \"#454f88\"};\n    captionStyle = {...captionStyle, color: \"white\"};\n  }\n\n  return (\n    <div style={containerStyle}>\n      <Panel style={lookupContainerStyle}>\n        <Label captionStyle={captionStyle} caption={caption} />\n        <ProfessionalLookup hideSearchText={true}\n          onSelect={onSelectProfessional}\n          fullWidth={false}\n        />\n      </Panel>\n      <div style={{marginTop: 10, marginBottom: 10, padding: 10}}>\n        <div style={styles.nameContainer}>\n          <Panel>\n            <Label labelStyle={styles.name}>{name}</Label>\n            <Label labelStyle={styles.profession}>{professional.profession}</Label>\n          </Panel>\n          <Image src={photoUrl}/>\n        </div>\n        <Panel style={styles.row}>\n          <Panel>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"PRC ID No.\">{professional.prc.idno}</Label>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"Date Issued\">{professional.prc.dtissued}</Label>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"Valid Until\">{professional.prc.dtvalid}</Label>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"Place Issued\">{professional.prc.placeissued}</Label>\n          </Panel>\n          <Panel>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"PTR ID No.\">{professional.ptr.refno}</Label>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"Date Issued\">{professional.ptr.dtissued}</Label>\n            <Label style={styles.label} captionStyle={{width: 120}} caption=\"Place Issued\">{professional.ptr.placeissued}</Label>\n          </Panel>\n        </Panel>\n      </div>\n    </div>\n  );\n};\n\nconst styles = {\n  container: {\n    borderWidth: 1,\n    borderColor: \"#aaa\",\n    boxShadow: \"0px 5px 7px -7px rgba(0,0,0,0.75)\",\n    backgroundColor: \"#d1d1d1\",\n    borderRadius: 5,\n  },\n  caption: {\n    fontSize: 18,\n    width: \"100%\"\n  },\n  lookupContainer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    backgroundColor: \"#8b8b8b\",\n    paddingTop: 5,\n    paddingLeft: 10,\n    paddingRight: 10,\n    borderRadius: 5,\n  },\n  nameContainer: {\n    dipslay: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: 5,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: 600,\n  },\n  profession: {\n    fontSize: 14,\n    fontWeight: 600,\n    backgroundColor: \"#ddddd\",\n    width: \"100%\",\n    padding: 10,\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n  label: {\n    paddingBottom: 2,\n  }\n}\n\nexport default ProfessionalCard;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  ActionBar,\n  Button,\n  Panel,\n  Radio,\n  Error,\n  Subtitle,\n  Subtitle2,\n  FormPanel,\n  Spacer,\n  BackLink,\n  Service,\n} from \"rsi-react-web-components\";\n\nconst svc = Service.lookup(\"OboMiscListService\", \"obo\");\n\nconst styles = {\n  row: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n  },\n  group: {\n    fontSize: 20,\n    fontWeight: 700,\n    marginRight: 15,\n    paddingTop: 8,\n  }\n}\n\nconst RadioItem = ({item}) => {\n  return (\n    <Panel style={{paddingBottom: 5}}>\n      <Panel style={styles.row}>\n        <div style={styles.group}>{item.objid}</div>\n        <Panel>\n          <Subtitle2>{item.title}</Subtitle2>\n          <label>{item.description}</label>\n        </Panel>\n      </Panel>\n    </Panel>\n  )\n}\n\nconst BuildingPermitOccupancy = ({\n  partner,\n  appno,\n  appService,\n  moveNextStep,\n  stepCompleted\n}) => {\n\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [mode, setMode] = useState(\"select-occupancytype\");\n  const [occupancyMode, setOccupancyMode] = useState(\"group\");\n  const [project, setProject] = useState({});\n  const [occupancyGroups, setOccupancyGroups] = useState([]);\n  const [occupancyDivisions, setOccupancyDivisions] = useState([]);\n  const [occupancyTypes, setOccupancyTypes] = useState([]);\n  const [prevOccupancyId, setPrevOccupancyId] = useState(false);\n  const [showConfirm, setShowConfirm] = useState(false);\n\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        setProject({occupancytype: app.occupancytype});\n        setPrevOccupancyId(app.occupancytype.objid);\n      }\n    })\n  }, [])\n\n  const loadOccupancyGroups = () => {\n    svc.invoke(\"getOccupancyTypeGroups\", null, (err, groups) => {\n      if (err) {\n        setError(err)\n      } else {\n        setOccupancyGroups(groups);\n      }\n    });\n  }\n\n  const loadOccupancyDivisions = () => {\n    const groupid = project.occupancytype.group.objid;\n    svc.invoke(\"getOccupancyTypeDivisions\", {groupid} ,(err, divisions) => {\n      if (err) {\n        setError(err)\n      } else {\n        setOccupancyDivisions(divisions);\n      }\n    });\n  }\n\n  const loadOccupancyTypes = () => {\n    const divisionid = project.occupancytype.division.objid;\n    svc.invoke(\"getOccupancyTypes\", {divisionid} ,(err, types) => {\n      if (err) {\n        setError(err)\n      } else {\n        setOccupancyTypes(types);\n      }\n    });\n  }\n\n  useEffect(() => {\n    if (occupancyMode === \"group\")\n      loadOccupancyGroups();\n    else if (occupancyMode === \"division\")\n      loadOccupancyDivisions();\n    else if (occupancyMode === \"type\")\n      loadOccupancyTypes();\n  }, [occupancyMode])\n\n  const submitOccupancyGroup = () => {\n    if (!project.occupancytype.group.objid) {\n      setError(\"Kindly select an occupancy group.\")\n    } else {\n      setOccupancyMode(\"division\");\n    }\n  }\n\n  const submitOccupancyDivision = () => {\n    if (!project.occupancytype.division.objid) {\n      setError(\"Kindly select an occupancy division group.\")\n    } else {\n      setOccupancyMode(\"type\");\n    }\n  }\n\n  const updateOccupancyType = () => {\n    let occupancytype = {appid: appno, occupancytype: project.occupancytype};\n    appService.invoke(\"updateOccupancyType\", occupancytype, (err, res) => {\n      if (err) {\n        setError(err);\n      } else {\n        clearStatus();\n        setShowConfirm(false);\n        moveNextStep();\n      }\n    });\n  }\n\n  const submitOccupancyType = () => {\n    if (!project.occupancytype.objid) {\n      setError(\"Kindly select an occupancy type.\")\n    } else {\n      updateOccupancyType();\n    }\n  }\n  const clearStatus = () => {\n    setError(null);\n    setLoading(false);\n  }\n\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Occupancy Type</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n\n      <Panel visibleWhen={mode === \"select-occupancytype\"}>\n        <FormPanel visibleWhen={occupancyMode === \"group\"} context={project} handler={setProject}>\n          <Subtitle2>Select Occupancy Group</Subtitle2>\n          <Radio name=\"occupancytype.group.objid\" list={occupancyGroups} Control={RadioItem}/>\n          <ActionBar>\n            <Button caption=\"Next\" action={submitOccupancyGroup} />\n          </ActionBar>\n        </FormPanel>\n\n        <FormPanel visibleWhen={occupancyMode === \"division\"} context={project} handler={setProject}>\n          <Subtitle2>Select Occupancy Group Division</Subtitle2>\n          <Radio name=\"occupancytype.division.objid\" list={occupancyDivisions} Control={RadioItem}/>\n          <ActionBar>\n            <BackLink caption=\"Back\" action={() => setOccupancyMode(\"group\")} />\n            <Button caption=\"Next\" action={submitOccupancyDivision} />\n          </ActionBar>\n        </FormPanel>\n\n        <FormPanel visibleWhen={occupancyMode === \"type\"} context={project} handler={setProject}>\n          <Subtitle2>Select Occupancy Type</Subtitle2>\n          <Radio name=\"occupancytype.objid\" list={occupancyTypes} Control={RadioItem}/>\n          <ActionBar>\n            <BackLink caption=\"Back\" action={() => setOccupancyMode(\"division\")} />\n            <Button caption=\"Next\" action={submitOccupancyType} />\n          </ActionBar>\n        </FormPanel>\n      </Panel>\n\n    </Panel>\n  )\n}\n\nexport default BuildingPermitOccupancy\n","import React from 'react'\nimport {\n  Checkbox,\n  Panel,\n  Label,\n  Decimal,\n  Integer,\n}\nfrom \"rsi-react-web-components\";\n\nconst CheckboxInfo = (props) => {\n  return (\n    <div style={styles.checkInfo}>\n      <Checkbox {...props} />\n    </div>\n  )\n}\n\nconst components = {\n  \"decimal\": Decimal,\n  \"integer\": Integer,\n  \"boolean\": CheckboxInfo\n}\n\nconst InfoComponent = ({\n  category,\n  dataType=\"integer\",\n  caption,\n  unit,\n  name,\n}) => {\n  const HandlerComponent = components[dataType];\n  let label = caption.toLowerCase();\n  if (dataType !== \"boolean\") {\n    label += \" (\" + unit.toLowerCase() + \")\";\n  }\n\n  return (\n    <Panel>\n      {category &&\n        <Label style={styles.category}>{category}</Label>\n      }\n      <div style={styles.infoContainer}>\n        <label>{label}</label>\n        <HandlerComponent\n          name={name}\n          fullWidth={false}\n          variant='outlined'\n          size='small'\n          width={120}\n          style={{ flexBasis: 100 }}\n        />\n      </div>\n    </Panel>\n  )\n}\n\nconst styles = {\n  infoContainer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginLeft: 20,\n  },\n  category: {\n    fontSize: 16,\n    fontWeight: 600,\n    border: \"1px solid #aaa\",\n    backgroundColor: \"#eee\",\n    padding: \"2px 10px\",\n    margin: \"10px 0px\"\n  },\n  checkInfo: {\n    width: 100,\n    display: \"flex\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n    borderWidth: 1,\n    borderColor: \"#aaa\",\n    borderRadius: 3,\n  },\n}\n\nexport default InfoComponent\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Subtitle,\n  Subtitle2,\n  Spacer,\n  Service,\n  Error,\n  FormPanel,\n  Checkbox,\n  ActionBar,\n  Button,\n  Label,\n  Radio,\n  Item,\n  BackLink\n} from \"rsi-react-web-components\";\n\nimport InfoComponent from \"../components/InfoComponent\";\n\nconst BuildingPermitAccessories = ({\n  partner,\n  appno,\n  appService,\n  moveNextStep,\n  stepCompleted\n}) => {\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [mode, setMode] = useState(\"initial\");\n  const [hasAccessories, setHasAccessories] = useState(\"TRUE\");\n  const [accessories, setAccessories] = useState([]);\n  const [accessoryTypes, setAccessoryTypes] = useState([]);\n  const [occupancyTypes, setOccupancyTypes] = useState([]);\n\n  const isJAccessoryType = (accessories) => {\n    if (accessories.length > 0 && /j.*/i.test(accessories[0].occupancytypeid)) {\n      return true;\n    }\n    return false;\n  }\n\n  const loadAccessories = () => {\n    appService.invoke(\"getAccessories\", {appid: appno}, (err, accessories) => {\n      setAccessories(accessories);\n      if (isJAccessoryType(accessories)) {\n        setMode(\"infos\")\n      }\n    });\n  }\n\n  const loadAccessoryOccupancyTypes = () => {\n    const svc = Service.lookup(\"OboMiscListService\", \"obo\");\n    svc.invoke(\"getAccessoryOccupancyTypes\", null, (err, occupancyTypes) => {\n      if (err) {\n        setError(err);\n      } else {\n        const accessoryTypes = {};\n        occupancyTypes.forEach(ot => {\n          accessoryTypes[`${ot.objid.toLowerCase()}`] = false;\n        });\n        setOccupancyTypes(occupancyTypes);\n        setAccessoryTypes(accessoryTypes);\n      }\n    });\n  }\n\n  useEffect(() => {\n    loadAccessoryOccupancyTypes();\n    loadAccessories();\n  }, []);\n\n\n  const submitInitial = () => {\n\t\tif (hasAccessories === \"TRUE\") {\n\t\t\tsetMode(\"select-accessories\");\n\t\t} else {\n      setError(null);\n      appService.invoke(\"saveAccessories\", {appid: appno, items: []}, (err, res) => {\n        if (err) {\n          setError(err);\n        } else {\n          moveNextStep();\n        }\n      });\n\t\t}\n  }\n\n  const submitAccessoryTypes = () => {\n    if (Object.keys(accessoryTypes).length > 0) {\n      const accessories = getSelectedAccessoryTypes();\n      appService.invoke(\"saveAccessories\", accessories, (err, accessories) => {\n        if (err) {\n          setError(err);\n        } else {\n          loadAccessories();\n          setMode(\"infos\");\n        }\n      });\n    } else {\n      setError(\"Select at least one accessory type before proceeding.\")\n    }\n  }\n\n  const getSelectedAccessoryTypes = () => {\n\t\tconst items = [];\n    for (const prop in accessoryTypes) {\n      if (accessoryTypes[prop]) {\n\t\t\t\titems.push(prop);\n\t\t\t}\n    }\n    return { appid: appno, items }\n  }\n\n  const saveAccesoryInfos = () => {\n\t\tvar p = {appid: appno, infos: []};\n    p.infos = [];\n    accessories.forEach(accessory => {\n      p.infos.push(...accessory.infos);\n    });\n\n\t\tappService.invoke(\"saveAccessoryInfos\", p, (err, res) => {\n      if (err) {\n        setError(err)\n      } else {\n        moveNextStep();\n      }\n    });\n\t}\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Accessories</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n\n\t\t\t<Panel visibleWhen={mode===\"initial\"}>\n        <p>Does the plan include accessories?</p>\n        <Radio name=\"hasAccessories\" value={hasAccessories} onChange={setHasAccessories}>\n          <Item caption=\"Yes\" value=\"TRUE\" />\n          <Item caption=\"No\" value=\"FALSE\" />\n        </Radio>\n        <ActionBar>\n          <Button caption=\"Next\" action={submitInitial} />\n        </ActionBar>\n      </Panel>\n\n      <Panel visibleWhen={mode === \"select-accessories\"}>\n        <Subtitle2>Select accessory to add if applicable</Subtitle2>\n        <FormPanel context={accessoryTypes} handler={setAccessoryTypes}>\n          {occupancyTypes.map(ot =>\n            <Checkbox key={ot.objid} caption={ot.title} name={`${ot.objid.toLowerCase()}`} />\n          )}\n        </FormPanel>\n        <ActionBar>\n          <BackLink action={() => setMode(\"initial\")} />\n          <Button caption=\"Next\" action={submitAccessoryTypes} />\n        </ActionBar>\n      </Panel>\n\n      <FormPanel visibleWhen={mode === \"infos\"} context={accessories} handler={setAccessories}>\n        {accessories.map((o, ix) => {\n          return (\n            <div key={o.objid}>\n              <Label style={styles.infoTitle}>{o.type.title}</Label>\n              {o.infos.map((info, iy) => {\n                return (\n                  <InfoComponent\n                    key={`${info.name}:${ix}:${iy}`}\n                    name={`[${ix}].infos[${iy}].value`}\n                    dataType={info.datatype}\n                    caption={info.caption}\n                    unit={info.unit}\n                  />\n                )\n              })}\n            </div>\n          )\n        })}\n        <ActionBar>\n          <BackLink action={() => setMode(\"select-accessories\")}  />\n          <Button caption=\"Next\" action={saveAccesoryInfos} />\n        </ActionBar>\n      </FormPanel>\n    </Panel>\n\n  )\n}\n\nconst styles = {\n  infoTitle: {\n    fontWeight: \"bold\",\n  },\n  infoContainer: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    marginLeft: 20,\n  },\n}\n\nexport default BuildingPermitAccessories\n","import React, { useState, useEffect } from \"react\";\nimport {\n  ActionBar,\n  Button,\n  Checkbox,\n  Panel,\n  Error,\n  Subtitle,\n  Subtitle2,\n  FormPanel,\n  Spacer,\n  BackLink,\n  ViewButton,\n  EditButton,\n  DeleteButton,\n  Label,\n  Decimal,\n  Integer,\n  CheckIcon,\n  Service\n} from \"rsi-react-web-components\";\n\nimport ProfessionalCard from \"../components/ProfessionalCard\";\nimport InfoComponent from \"../components/InfoComponent\";\n\nconst BuildingPermitOtherPermits = ({\n  partner,\n  appno,\n  appService,\n  moveNextStep,\n  stepCompleted\n}) => {\n\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [mode, setMode] = useState(\"permit-list\");\n  const [availableAncillaryPermits, setAvailableAncillaryPermits] = useState([]);\n  const [ancillaryPermits, setAncillaryPermits] = useState([]);\n  const [ancillaryPermit, setAncillaryPermit] = useState({worktypes:[], type:{}});\n\n  const loadAvailableAccillaryPermits = () => {\n    appService.invoke(\"getAvailableAncillaryPermitTypes\", {appid: appno}, (err, list) => {\n      if (err) {\n        setError(err);\n      } else {\n        setAvailableAncillaryPermits(list);\n      }\n    })\n  }\n\n  const loadAncillaryPermits = () => {\n    appService.invoke(\"getAncillaryPermits\", {appid: appno}, (err, list) => {\n      if (err) {\n        setError(err)\n      } else {\n        setAncillaryPermits(list);\n        if (!loaded && list.length === 0) {\n          setLoaded(true);\n          setMode(\"available-list\");\n        }\n      }\n    })\n  }\n\n  useEffect(() => {\n    loadAvailableAccillaryPermits();\n  }, [ancillaryPermits])\n\n  useEffect(() => {\n    loadAncillaryPermits();\n  }, [mode, loaded]);\n\n  const submitSelectedAncillaryPermits = () => {\n    const selectedPermits = availableAncillaryPermits.filter((permit => permit.selected === true));\n    if (selectedPermits.length > 0 ) {\n      setAncillaryPermits(selectedPermits);\n      appService.invoke(\"saveAncillaryPermits\", {appid: appno, permits: selectedPermits}, (err, _) => {\n        if (err) {\n          setError(err);\n        } else {\n          setError(null);\n          setMode(\"permit-list\");\n        }\n      })\n    } else {\n      setMode(\"permit-list\");\n    }\n  }\n\n  const loadPermitWorkTypes = (permit) => {\n    const svc = Service.lookup(\"OboMiscListService\", \"obo\");\n    svc.invoke(\"getWorkTypes\", {typeid: permit.type.objid}, (err, workTypes) => {\n      if (err) {\n        setError(err);\n      } else {\n        if (workTypes && workTypes.length > 0) {\n          workTypes.forEach(wt => {\n            if (permit.worktypes.findIndex(pwt => pwt.toLowerCase() === wt.name.toLowerCase()) >= 0) {\n              wt.checked = true;\n            }\n          })\n          setAncillaryPermit({...permit, worktypes: workTypes});\n          setMode(\"select-worktypes\");\n        } else {\n          if (permit.infos.length > 0) setMode(\"infos\");\n          else if (permit.type.includecost === 1) setMode(\"cost\");\n          else setMode(\"professional\");\n          setAncillaryPermit(permit);\n        }\n      }\n    })\n  }\n\n  const editPermit = (o) => {\n    appService.invoke(\"getAncillaryPermit\", {objid: o.objid}, (err, permit) => {\n      if (err) {\n        setError(err);\n      } else {\n        setError(null);\n        loadPermitWorkTypes(permit);\n      }\n    })\n  }\n\n  const removePermit = (permit) => {\n    appService.invoke(\"removeAncillaryPermit\", {objid: permit.objid}, (err, res) => {\n      if (err) {\n        setError(err);\n      } else {\n        setError(null);\n        loadAncillaryPermits();\n      }\n    });\n  }\n\n  const validWorkTypes = () => {\n    const idx = ancillaryPermit.worktypes.findIndex(wt => wt.checked === true);\n    return idx >= 0;\n  }\n\n  const submitWorkType = () => {\n    setError(null);\n    setError(null);\n    const updatedWorkTypes = {\n      objid: ancillaryPermit.objid,\n      worktypes: ancillaryPermit.worktypes.filter(wt => wt.checked).map(wt => wt.name)\n    };\n    appService.invoke(\"updateAncillaryPermit\", updatedWorkTypes, (err, proj) => {\n      if (err) {\n        setError(error);\n      } else {\n        setMode(\"infos\");\n        setLoading(false);\n      }\n    });\n\n  }\n\n  const onSelectDesignProfessional = (professionals) => {\n    const professional = professionals[0]\n    setAncillaryPermit({\n      ...ancillaryPermit,\n      designprofessional: professional,\n      designprofessionalid: professional.objid\n    });\n  }\n\n  const onSelectSupervisor = (professionals) => {\n    const professional = professionals[0]\n    setAncillaryPermit({\n      ...ancillaryPermit,\n      supervisor: professional,\n      supervisorid: professional.objid,\n    });\n  }\n\n  const submitInfos = () => {\n    const updatedInfos = {\n      objid: ancillaryPermit.objid,\n      projectcost: ancillaryPermit.projectcost,\n      equipmentcost: ancillaryPermit.equipmentcost,\n    }\n    appService.invoke(\"updateAncillaryPermit\", updatedInfos, (err, _) => {\n      if (err) {\n        setError(err);\n      } else {\n        if (ancillaryPermit.type.includecost === 1)\n          setMode(\"cost\");\n        else\n          setMode(\"professional\");\n      }\n    })\n  }\n\n  const saveCost = () => {\n    setError(null);\n    const updatedCost = {objid: ancillaryPermit.objid, infos: ancillaryPermit.infos }\n    appService.invoke(\"saveAncillaryPermit\", updatedCost, (err, _) => {\n      if (err) {\n        setError(err);\n      } else {\n        setMode(\"professional\");\n      }\n    })\n  }\n\n  const savePermit = () => {\n    setError(null);\n    if (!ancillaryPermit.designprofessionalid) {\n      setError(\"Design Professional is required.\");\n      return;\n    }\n    if (!ancillaryPermit.supervisorid) {\n      setError(\"Supervisor is required.\");\n      return;\n    }\n\n    const updatedPermit = {\n      ...ancillaryPermit,\n      worktypes: ancillaryPermit.worktypes.filter(wt => wt.checked).map(wt => wt.name)\n    }\n\n    appService.invoke(\"saveAncillaryPermit\", updatedPermit, (err, _) => {\n      if (err) {\n        setError(err);\n      } else {\n        setMode(\"permit-list\");\n      }\n    })\n  }\n\n  const submitAncillaryPermits = () => {\n    const incompletePermits = [];\n    ancillaryPermits.forEach(permit => {\n      if (!permit.designprofessionalid) {\n        incompletePermits.push(permit.type.title);\n      }\n    })\n    if (incompletePermits.length === 1) {\n      setError(`Permit ${incompletePermits[0]} is not processed`);\n    } else if (incompletePermits.length > 1) {\n      setError(`The following permist are not processed: ${incompletePermits.join(\",\")}`);\n    } else {\n      moveNextStep();\n    }\n  }\n\n  let hasIncompletePermit = false;\n  if (ancillaryPermits.length > 0) {\n    const idx = ancillaryPermits.findIndex(permit => !permit.designprofessionalid);\n    hasIncompletePermit =  idx >= 0;\n  }\n\n  let prevInfo = null;\n\n  const backFromInfos = () => {\n    if (ancillaryPermit.worktypes && ancillaryPermit.worktypes.length > 0)\n      setMode(\"select-worktypes\");\n    else\n      setMode(\"permit-list\");\n  }\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Other Permits</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n\n      <Panel visibleWhen={mode === \"permit-list\"}>\n        <Spacer />\n        {ancillaryPermits.map(permit => (\n          <Panel style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"space-between\"}}>\n            <Panel row>\n              {permit.designprofessionalid ? (\n                <div style={{width: 40}}>\n                  <CheckIcon style={{ color: \"green\", paddingRight: 10}} />\n                </div>\n              )\n              : (\n                <div style={{width: 40}}/>\n              )}\n              <label>{permit.type.title}</label>\n            </Panel>\n            <Panel row>\n              <EditButton action={() => editPermit(permit)} size=\"small\" />\n              <DeleteButton action={() => removePermit(permit)} size=\"small\" />\n            </Panel>\n          </Panel>\n        ))}\n        <ActionBar>\n          <BackLink caption=\"Add New Permits\" action={() => setMode(\"available-list\")} />\n          <Button caption=\"Next\" action={submitAncillaryPermits} disableWhen={hasIncompletePermit} />\n        </ActionBar>\n      </Panel>\n\n      <FormPanel visibleWhen={mode === \"select-worktypes\"} context={ancillaryPermit} handler={setAncillaryPermit} >\n        <h4>{ancillaryPermit.type.title}</h4>\n        <Subtitle2>Select Work Types</Subtitle2>\n        <Panel style={styles.workTypeContainer}>\n          {ancillaryPermit.worktypes.map((worktype, idx) => (\n            <Checkbox\n              caption={worktype.name.toUpperCase()}\n              name={`worktypes[${idx}].checked`}\n              value={worktype.name} />\n          ))}\n        </Panel>\n        <ActionBar>\n          <BackLink action={() => setMode(\"permit-list\")} />\n          <Button caption=\"Next\" action={submitWorkType} />\n        </ActionBar>\n      </FormPanel>\n\n      <FormPanel visibleWhen={mode === \"infos\"} context={ancillaryPermit} handler={setAncillaryPermit}>\n        <Subtitle2>{ancillaryPermit.type?.title}</Subtitle2>\n        <Spacer />\n        <p>Please fill the applicable values and click Save and Complete when done.</p>\n        {ancillaryPermit.infos && ancillaryPermit.infos.map((info, ix) => {\n          let category = null;\n          if (prevInfo === null || prevInfo.category !== info.category) {\n            category = info.category;\n            prevInfo = info;\n          }\n          return (\n            <InfoComponent\n              key={`${info.name}:${ix}`}\n              name={`infos[${ix}].value`}\n              category={category}\n              dataType={info.datatype}\n              caption={info.caption}\n              unit={info.unit}\n            />\n          )\n        })}\n        <ActionBar>\n          <BackLink action={backFromInfos}  />\n          <Button caption=\"Next\" action={submitInfos} />\n        </ActionBar>\n      </FormPanel>\n\n      <Panel visibleWhen={mode === \"available-list\"}>\n        <Subtitle2>Select ancillary and other permits to include in the project</Subtitle2>\n        <FormPanel\n          context={availableAncillaryPermits}\n          handler={setAvailableAncillaryPermits}\n          style={styles.itemsContainer}\n        >\n          {availableAncillaryPermits.map((permit,idx) =>\n            <Checkbox key={permit.objid} caption={permit.title} name={`[${idx}].selected`} />\n          )}\n        </FormPanel>\n        <ActionBar>\n          <Button caption=\"Next\" action={submitSelectedAncillaryPermits} />\n        </ActionBar>\n      </Panel>\n\n      <FormPanel visibleWhen={mode === \"cost\"} context={ancillaryPermit} handler={setAncillaryPermit}>\n        <Subtitle2>{ancillaryPermit.type?.title}</Subtitle2>\n        <Decimal name=\"projectcost\" caption=\"Project Cost\" textAlign=\"left\" fullWidth={false} />\n        <Decimal name=\"equipmentcost\" caption=\"Equipment Cost\" textAlign=\"left\" />\n        <Spacer />\n        <ActionBar>\n          <BackLink action={() => setMode(\"infos\")} />\n          <Button caption=\"Next\" action={saveCost} />\n        </ActionBar>\n      </FormPanel>\n\n\n      <FormPanel visibleWhen={mode === \"professional\"} context={ancillaryPermit} handler={setAncillaryPermit}>\n        <Subtitle2>{ancillaryPermit.type?.title}</Subtitle2>\n        <Spacer />\n        <ProfessionalCard\n          caption=\"Design Professional\"\n          professional={ancillaryPermit.designprofessional}\n          onSelectProfessional={onSelectDesignProfessional}\n        />\n        <Spacer />\n        <ProfessionalCard\n          caption=\"Supervisor in Charge Professional\"\n          professional={ancillaryPermit.supervisor}\n          onSelectProfessional={onSelectSupervisor}\n        />\n        <ActionBar>\n          <BackLink action={() => setMode(\"permit-list\")} />\n          <Button caption=\"Save and Complete\" action={savePermit} />\n        </ActionBar>\n      </FormPanel>\n    </Panel>\n  )\n}\n\nconst styles = {\n  professionalLookup: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    backgroundColor: \"lightgray\",\n  },\n  itemsContainer: {\n    marginLeft: 20,\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  workTypeContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginLeft: 20,\n  },\n}\n\n\nexport default BuildingPermitOtherPermits;\n","import React, { useState, useEffect } from 'react'\nimport {\n  MsgBox,\n  ActionBar,\n  Button,\n  FormPanel,\n  Panel,\n  Subtitle,\n  Spacer,\n  Loading,\n  Error,\n  Text,\n  Decimal,\n  Integer,\n  ButtonLink,\n  Subtitle2,\n  PageviewIcon,\n  CloudDownloadIcon,\n  ReportViewer\n} from 'rsi-react-web-components'\n\nconst BuildingPermitConfirm = ({\n  partner,\n  appno,\n  appService,\n  moveNextStep,\n  stepCompleted\n}) => {\n\n  const [confirm, setConfirm] = useState(false);\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [app, setApp] = useState({});\n  const [ancillaryPermits, setAncillaryPermits] = useState([]);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const resetStatus = () => {\n    setError(null);\n    setLoading(false);\n  }\n\n  const loadApplication = () => {\n    setLoading(true);\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        setApp(app);\n        resetStatus();\n      }\n    })\n  };\n\n  const loadAncillaryPermits = () => {\n    setLoading(true);\n    appService.invoke(\"getAncillaryPermits\", {appid: appno}, (err, ancillaryPermits) => {\n      if (err) {\n        setError(err);\n      } else {\n        setAncillaryPermits(ancillaryPermits);\n        resetStatus();\n      }\n    })\n  };\n\n  useEffect(() => {\n    loadApplication();\n    loadAncillaryPermits();\n  }, []);\n\n\n  const getLocation = () => {\n    if (!app.location) return \"\";\n\n    const location = [];\n    if (app.location.lotno) location.push(`Lot: ${app.location.lotno}`);\n    if (app.location.blockno) location.push(`Block: ${app.location.blockno}`);\n    if (app.location.street) location.push(`Street: ${app.location.street}`);\n    if (app.location.barangay.name) location.push(`Barangay: ${app.location.barangay.name}`);\n    return location.join(\" \");\n  }\n\n  const getContractor = () => {\n    let contractor = \"\";\n    if (app.contractor) {\n      contractor = `${app.contractor.lastname}, ${app.contractor.firstname} ${app.contractor.middlename}`;\n    }\n    return contractor;\n  }\n\n  const getWorkTypes = () => {\n    let worktypes = \"\";\n    if (app.worktypes && app.worktypes.length > 0) {\n      worktypes = app.worktypes?.join(\",\");\n    }\n    return worktypes;\n  }\n\n  const submitConfirmation = () => {\n    setConfirm(true);\n  }\n\n  const submit = () => {\n    setConfirm(false);\n    moveNextStep();\n  }\n\n  const onCloseViewer = () => {\n    setShowPreview(false);\n  }\n\n  let items = [];\n  ancillaryPermits.forEach(permit => {\n    items.push({\n      title: permit.permittypeid.toUpperCase(),\n      Icon: PageviewIcon,\n      href: `/jreports/obo/${permit.permittypeid}permit?refid=${permit.objid}`,\n      // href: `/jreports/obo/electricalpermit?refid=OBOBPANC25cf462e:174704f4c30:-7fcf`,\n    })\n  })\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Confirm Application</Subtitle>\n      <Spacer />\n\n      <ReportViewer\n        title=\"Building Permit Application\"\n        items={items}\n        open={showPreview}\n        style={{}}\n        onClose={onCloseViewer}\n      />\n\n      <MsgBox\n        open={confirm}\n        type=\"confirm\"\n        msg=\"Permit processing will now be completed. Make sure that all information are correct.\"\n        onAccept={submit}\n        onCancel={() => setConfirm(false)}\n      />\n      { /* <Error msg={error} /> */}\n      <Loading visibleWhen={loading} />\n      <p>Please confirm the info and preview each permit application before submitting</p>\n      <FormPanel visibleWhen={!loading} context={app} handler={setApp}>\n        <Panel style={styles.container}>\n          <Panel style={styles.linkContainer}>\n            <ButtonLink\n              caption=\"Preview\"\n              href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/buildingpermit?refid=${appno}`}\n              Icon={PageviewIcon}\n            />\n            <ButtonLink\n              caption=\"Download\"\n              href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/buildingpermit?refid=${appno}`}\n              Icon={CloudDownloadIcon}\n            />\n          </Panel>\n          <Panel>\n            <Text caption=\"Tracking No.\" name=\"objid\" readOnly={true} />\n            <Text caption=\"Project Title\" name=\"title\" readOnly={true} />\n            <Text caption=\"Project Location\" expr={getLocation} readOnly={true} />\n            <Spacer />\n            <Text caption=\"Applicant\" name=\"applicant.name\" readOnly={true} />\n            <Text caption=\"Occupancy Type\" name=\"occupancytype.title\" readOnly={true} />\n            <Text caption=\"Type of Work\" expr={getWorkTypes} readOnly={true} />\n            <Text caption=\"Supervisor in Charge of Construction\" expr={getContractor} readOnly={true} />\n          </Panel>\n          <Panel>\n            <Panel row>\n              <Integer caption=\"No. of Units\" name=\"numunits\" readOnly={true} />\n              <Integer caption=\"No. of Floors\" name=\"numfloors\" readOnly={true} />\n              <Decimal caption=\"Bldg. Height\" name=\"height\" readOnly={true} textAlign=\"left\"/>\n            </Panel>\n            <Spacer />\n            <Panel row>\n              <Decimal caption=\"Total Area (sqm)\" name=\"totalfloorarea\" readOnly={true} textAlign=\"left\" fullWidth={true} />\n              <Decimal caption=\"Project Cost\" name=\"projectcost\" readOnly={true} textAlign=\"left\" fullWidth={true} />\n            </Panel>\n            <Panel row>\n              <Text caption=\"Est. Start Date\" name=\"dtproposedconstruction\" readOnly={true} />\n              <Text caption=\"Est. Completion Date\" name=\"dtexpectedcompletion\" readOnly={true} />\n            </Panel>\n          </Panel>\n        </Panel>\n        <Spacer />\n        <Panel style={styles.ancillaryContainer}>\n          <Subtitle2 style={styles.label}>Other Permits</Subtitle2>\n          <Panel visibleWhen={ancillaryPermits.length > 0}>\n            {ancillaryPermits.map((permit) =>\n              <Panel style={styles.ancillaryItem}>\n                <label style={{marginLeft: 20}}>{permit.type.title}</label>\n                <Panel row>\n                  <ButtonLink\n                    caption=\"Preview\"\n                    href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/${permit.permittypeid}permit?refid=${permit.objid}`}\n                    Icon={PageviewIcon}\n                  />\n                  <ButtonLink\n                    caption=\"Download\"\n                    href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/${permit.permittypeid}permit?refid=${permit.objid}`}\n                    Icon={CloudDownloadIcon}\n                  />\n                </Panel>\n              </Panel>\n            )}\n          </Panel>\n        </Panel>\n        <ActionBar>\n          <Button caption=\"Submit\" action={submitConfirmation} />\n        </ActionBar>\n      </FormPanel>\n    </Panel>\n  )\n}\n\nconst styles = {\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyConent: \"flex-start\",\n    border: \"1px solid #aaa\",\n    padding: 20,\n    borderRadius: 3,\n  },\n  linkContainer: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n  ancillaryContainer: {\n    marginRight: 15,\n    marginBottom: 20,\n  },\n  ancillaryItem: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 5,\n    marginRight: 10,\n    border: \"1px solid #aaa\",\n  },\n}\n\nexport default BuildingPermitConfirm;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Error,\n  FormPanel,\n  Text,\n  Spacer,\n  Decimal,\n  Date,\n  PreviewReport,\n  DownloadReport,\n} from \"rsi-react-web-components\";\n\n\nconst getHeaderInfo = (contact={}) => {\n  let headerInfo = \"\";\n  headerInfo += \"Please download and print the Building and Ancillary Permit forms, prepare the \";\n  headerInfo += \"requirements listed below, and submit at the receiving window of our \";\n  headerInfo += contact.officename;\n  headerInfo += \" at the \";\n  headerInfo += contact.address1;\n  if (contact.address2) {\n    headerInfo += \", \" + contact.address2 + \". \";\n  } else {\n    headerInfo += \". \";\n  }\n  const phones = [];\n  if (contact.phoneno) phones.push(contact.phoneno)\n  if (contact.mobileno) phones.push(contact.mobileno)\n\n  if (contact.email) {\n    if (phones.length > 0) {\n      headerInfo += \"You can email at \" + contact.email;\n      headerInfo += \" or contact us on \" + phones.join(\" or \");\n    } else {\n      headerInfo += \"You can email us at \" + contact.email;\n    }\n    headerInfo += \" for any inquiries on application.\"\n  } else if (phones.length > 0)  {\n    headerInfo += \"You can contact us on \" + phones.join(\" or \") + \" for any inquiries on application.\"\n  }\n  return headerInfo;\n}\n\nconst BuildingPermitCompleted = ({\n  partner,\n  appno,\n  appService\n}) => {\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [app, setApp] = useState({});\n  const [requirements, setRequirements] = useState([]);\n\n  const resetStatus = () => {\n    setError(null)\n    setLoading(false)\n  }\n\n  const loadApplication = () => {\n    setLoading(true)\n    appService.invoke(\"getProjectInfo\", { appid: appno }, (err, app) => {\n      if (err) {\n        setError(err)\n      } else {\n        setApp(app)\n        resetStatus()\n      }\n    })\n  }\n\n  const loadRequirements = () => {\n    setLoading(true)\n    appService.invoke(\"getRequirements\",\n      { appid: appno },\n      (err, requirements) => {\n        if (err) {\n          setError(err)\n        } else {\n          setRequirements(requirements);\n          resetStatus()\n        }\n      }\n    )\n  }\n\n  useEffect(() => {\n    loadApplication();\n    loadRequirements();\n  }, [])\n\n\n\n  const location = [];\n  if (app.location) {\n    if (app.location.lotno) location.push(`Lot: ${app.location.lotno}`);\n    if (app.location.blockno) location.push(`Block: ${app.location.blockno}`);\n    if (app.location.street) location.push(`Street: ${app.location.street}`);\n    if (app.location.barangay.name) location.push(`Barangay: ${app.location.barangay.name}`);\n  }\n\n  let contractor = \"\";\n  if (app.contractor) {\n    contractor = `${app.contractor.lastname}, ${app.contractor.firstname} ${app.contractor.middlename}`;\n    contractor += `\\n${app.contractor.profession}`;\n    contractor += ` PRC NO.: ${app.contractor.prc.idno} Issued: ${app.contractor.prc.dtissued}`;\n  }\n\n  const headerInfo = getHeaderInfo(app.obocontactinfo);\n\n  return (\n    <Panel>\n      <Spacer />\n      <Error msg={error} />\n      <FormPanel context={app} handler={setApp}>\n        <label>{headerInfo}</label>\n        <Spacer height={10} />\n        <Panel style={styles.container}>\n          <Panel style={styles.infoContainer}>\n            <Text caption=\"Tracking No.\" name=\"objid\" readOnly={true} />\n            <Text caption=\"Project Title\" name=\"title\" readOnly={true} />\n            <Text caption=\"Location\" expr={() => location.join(\" ,\")} readOnly={true} />\n            <Text caption=\"Applicant\" name=\"applicant.name\" readOnly={true} />\n            <Decimal caption=\"Project Cost\" name=\"projectcost\" readOnly={true} textAlign=\"left\" />\n            <Panel row>\n              <Date caption=\"Est. Start Date\" name=\"dtproposedconstruction\" readOnly={true} />\n              <Date caption=\"Est. End Date\" name=\"dtexpectedcompletion\" readOnly={true} />\n            </Panel>\n            <Text\n              caption=\"Supervisor/In Charge of Project\"\n              expr={() => contractor}\n              readOnly={true}\n              multiline={true}\n              rows={2}\n            />\n          </Panel>\n        </Panel>\n      </FormPanel>\n      <Spacer />\n      <Panel style={styles.requirementsContainer}>\n        {requirements.map((req, idx) => {\n          const titles = req.title.split(\"\\n\");\n          const items = getItemsComponent(titles);\n          const docs = getDocumentsComponent(partner, req);\n          return (\n            <Panel>\n              <p key={idx} style={styles.requirement}>{`${idx+1}.  ${titles[0]}`}</p>\n              {docs}\n              {items}\n            </Panel>\n          )\n        })}\n      </Panel>\n    </Panel>\n  )\n}\n\nconst getItemsComponent = (titles) => {\n  if (titles.length === 1) return null;\n  const items = titles.map((title, x) => {\n    if (x === 0 || !title) return null;\n    return <li style={styles.requirement}>{title}</li>\n  });\n  return <ul>{items}</ul>\n}\n\nconst getDocumentsComponent = (partner, req) => {\n  let docs;\n  if (!req.docs) return null;\n  docs = req.docs.map(doc =>\n    <Panel key={doc.reportid} style={styles.document}>\n      <label style={{marginLeft: 20}}>{doc.title}</label>\n      <Panel row>\n        <PreviewReport href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/${doc.reportid}?refid=${doc.refid}`} />\n        <DownloadReport href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/${doc.reportid}?refid=${doc.refid}`}/>\n      </Panel>\n    </Panel>\n  )\n  return <Panel style={{margin: \"0px 20px\"}}>{docs}</Panel>;\n}\n\n\nconst styles = {\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyConent: \"flex-start\",\n    border: \"1px solid #aaa\",\n    padding: 20,\n    borderRadius: 3,\n  },\n  infoContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginRight: 10,\n    width: \"100%\",\n  },\n  linkContainer: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n    width: \"100%\",\n  },\n  requirementsContainer: {\n    marginRight: 15,\n    marginBottom: 20,\n  },\n  requirement: {\n    fontSize: \"0.9rem\",\n  },\n  document: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 5,\n    marginBottom: \"5px\",\n    border: \"1px solid #aaa\",\n  }\n}\n\n\nexport default BuildingPermitCompleted\n","import React, { useState, useEffect } from 'react';\nimport {\n  Panel,\n  Card,\n  Title,\n  Service,\n  Stepper,\n  getUrlParameter,\n  Page\n} from 'rsi-react-web-components';\n\nconst svc = Service.lookup(\"OnlineBuildingPermitService\", \"obo\");\n\nimport ApplicationTypeSelect from \"../components/ApplicationTypeSelect\";\nimport BuildingPermitInitial from \"./BuildingPermitInitial\";\nimport BuildingPermitApplicant from \"./BuildingPermitApplicant\";\nimport BuildingPermitLocation from \"./BuildingPermitLocation\";\nimport BuildingPermitProject from \"./BuildingPermitProject\";\nimport BuildingPermitContractor from \"./BuildingPermitContractor\";\nimport BuildingPermitOccupancy from \"./BuildingPermitOccupancy\";\nimport BuildingPermitAccessories from \"./BuildingPermitAccessories\";\nimport BuildingPermitOtherPermits from \"./BuildingPermitOtherPermits\";\nimport BuildingPermitConfirm from \"./BuildingPermitConfirm\";\n// import BuildingPermitFinish from \"./BuildingPermitFinish\";\nimport BuildingPermitCompleted from \"./BuildingPermitCompleted\";\n\nconst pages = [\n  { step: 0, component: null },\n  { step: 1, name: 'applicant', caption: 'Applicant', component: BuildingPermitApplicant },\n  { step: 2, name: 'location', caption: 'Project Location', component: BuildingPermitLocation },\n  { step: 3, name: 'project', caption: 'Project Details', component: BuildingPermitProject },\n  { step: 4, name: 'contractor', caption: 'Contractor', component: BuildingPermitContractor },\n  { step: 5, name: 'project', caption: 'Occupancy Type', component: BuildingPermitOccupancy },\n  { step: 6, name: 'accessories', caption: 'Accessories', component: BuildingPermitAccessories },\n  { step: 7, name: 'ancillarylist', caption: 'Other Permits', component: BuildingPermitOtherPermits },\n  { step: 8, name: 'confirm', caption: 'Confirm', component: BuildingPermitConfirm },\n  { step: 9, name: 'completed', caption: 'Completed', component: BuildingPermitCompleted },\n  // { step: 9, name: 'finish', caption: 'Finish', component: BuildingPermitFinish },\n]\n\nconst BuildingPermitWebController = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [mode, setMode] = useState(\"apptype\");\n  const [appType, setAppType] = useState(\"new\");\n  const [appno, setAppno] = useState(getUrlParameter(props.location, \"appid\"));\n  const [app, setApp] = useState({step: 1});\n  const [step, setStep] = useState(1)\n  const [errorText, setErrorText] = useState({});\n\n  const { partner, service, history } = props\n\n  const handleError = (err) => {\n    setLoading(false);\n    setError(err.toString());\n  }\n\n  const findCurrentApp = () => {\n    svc.invoke(\"findCurrentInfo\", {appid: appno}, (err, app) => {\n      const orgcode = partner.orgcode || partner.id;\n      if (err) {\n        setError(err);\n      } else {\n        if(!app) {\n          setError(\"Application no. does not exist\");\n        } else if( orgcode != app.orgcode ) {\n          setError(\"The application number provided is not for this local government\");\n        } else {\n          setApp(app);\n          setStep(app.step);\n          setMode(\"processing\");\n        }\n      }\n      setLoading(false);\n    });\n  }\n\n  useEffect(() => {\n    if (appno) {\n      setLoading(true);\n      findCurrentApp();\n    }\n  }, [appno]);\n\n  const onCreateNewApp = (appno) => {\n    setAppno(appno);\n    setMode(\"processing\");\n  }\n\n  const processAppType = ({appType, appno}) => {\n    if (appType === \"new\") {\n      setMode(appType);\n    } else {\n      if (appno) {\n        setAppno(appno);\n      } else {\n        setErrorText({...errorText, appno: \"Tracking No. is required\"})\n      }\n    }\n  }\n\n  const saveHandler = () => {\n    (\"SAVE HANDLER\");\n  }\n\n  const moveNextStep = () => {\n    const stepCompleted = step < app.step && step !== 1;\n    if (stepCompleted) {\n      setStep(ps => ps + 1);\n    } else {\n      svc.invoke(\"update\", {appid: appno, step: step+1}, (err, updatedApp) => {\n        if (err) {\n          setError(err);\n        } else {\n          setStep(updatedApp.step);\n          setApp({...app, step: updatedApp.step});\n        }\n      });\n    }\n  }\n\n  const handleStep = (step) => {\n    setStep(step);\n  }\n\n  if (mode === \"apptype\") {\n    return (\n      <ApplicationTypeSelect service={service} error={error} onCancel={history.goBack} onSubmit={processAppType}  />\n    )\n  }\n\n  if (mode === \"new\") {\n    return (\n      <BuildingPermitInitial {...props} handler={onCreateNewApp} onCancel={()=> props.history.goBack()} />\n    )\n  }\n\n  const page = pages[step];\n  const PageComponent = page.component;\n  const compProps = {\n    partner,\n    appno,\n    pages,\n    moveNextStep,\n    appService: svc,\n    saveHandler,\n    stepCompleted: step < app.step\n  };\n\n  return (\n    <Page>\n      {app.step < 9 &&\n        <Panel target=\"left\" style={styles.stepperContainer} >\n          <Stepper steps={pages} completedStep={app.step} activeStep={step} handleStep={handleStep} />\n        </Panel>\n      }\n      <Card>\n        <Title>{service.title}</Title>\n        <PageComponent page={page} {...compProps} />\n      </Card>\n    </Page>\n  )\n}\n\nconst styles = {\n  stepperContainer: {\n    paddingTop: 30,\n    paddingLeft: 40,\n  }\n}\n\nexport default BuildingPermitWebController\n","import React, { useState, useEffect } from \"react\";\nimport {\n  ActionBar,\n  Button,\n  Panel,\n  Error,\n  Subtitle,\n  Spacer,\n} from \"rsi-react-web-components\";\n\nimport ProfessionalLookup from \"../components/ProfessionalLookup\";\nimport ProfessionalCard from \"../components/ProfessionalCard\";\n\nconst BuildingPermitContractor = ({\n  partner,\n  appno,\n  appService,\n  moveNextStep,\n  stepCompleted\n}) => {\n  const initialProject = {\n    appid: appno,\n    apptype: \"NEW\",\n  }\n\n  const [error, setError] = useState();\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [project, setProject] = useState(initialProject);\n  const [professional, setProfessional] = useState();\n\n  useEffect(() => {\n    appService.invoke(\"getProjectInfo\", {appid: appno}, (err, project) => {\n      if (err) {\n        setError(err);\n      } else {\n        setProfessional(project.contractor);\n        setProject(project);\n      }\n    });\n  }, [])\n\n  const submitProjectDetail = () => {\n    setError(null);\n    const detail = {\n      appid: appno,\n      title: project.title,\n      description: project.description,\n      numunits: project.numunits,\n      totalfloorarea: project.totalfloorarea,\n      height: project.height,\n      numfloors: project.numfloors,\n      projectcost: project.projectcost,\n      dtproposedconstruction: project.dtproposedconstruction,\n      dtexpectedcompletion: project.dtexpectedcompletion,\n    };\n    appService.invoke(\"update\", detail, (err, proj) => {\n      if (err) {\n        setError(err);\n      } else {\n        clearStatus();\n        setMode(\"select-worktype\");\n      }\n    });\n  }\n\n  const clearStatus = () => {\n    setError(null);\n    setLoading(false);\n  }\n\n  const onSelectProfessional = (professionals) => {\n    if (professionals.length === 0) {\n      setProfessional({});\n      return;\n    }\n\n    const professional = professionals[0];\n    appService.invoke(\"update\", {appid: appno, contractorid: professional.objid}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        setError(null);\n        setProfessional(professional);\n      }\n    });\n  }\n\n  const submitProfessional = () => {\n    if (!professional) {\n      setError(\"Please select a professional.\")\n    } else {\n      moveNextStep();\n    }\n  }\n\n  return (\n    <Panel>\n      <label>{`Tracking No. ${appno}`}</label>\n      <Subtitle>Project Details</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n\n      <Panel>\n        <label>Specify full time inspector and supervisor of construction work</label>\n        <Spacer height={10} />\n        {professional && professional.lastname &&\n          <Panel>\n            <ProfessionalCard\n              caption=\"Inspector/Supervisor\"\n              professional={professional}\n              onSelectProfessional={onSelectProfessional}\n            />\n          </Panel>\n        }\n        {(!professional || !professional.lastname) &&\n          <ProfessionalLookup caption=\"Search Professional\" onSelect={onSelectProfessional} fullWidth={false} />\n        }\n        <ActionBar>\n          <Button caption=\"Next\" action={submitProfessional} disableWhen={!professional || !professional.objid}/>\n        </ActionBar>\n      </Panel>\n\n    </Panel>\n  )\n}\n\n\nexport default BuildingPermitContractor\n","import React, { useState, useEffect } from 'react'\nimport {\n  Error,\n  FormPanel,\n  Text,\n  Email,\n  Mobileno,\n  Spacer,\n  Checkbox,\n  Combobox,\n  Button,\n  ActionBar,\n  Panel,\n  BackLink,\n  Subtitle2\n} from 'rsi-react-web-components'\n\nimport { LocalAddress, NonLocalAddress, IdEntry } from 'rsi-react-filipizen-components';\n\nconst entityTypes = ['INDIVIDUAL', 'CORPORATION', 'GOVERNMENT', 'OTHER']\n\nconst Applicant = ({\n  appno,\n  partner,\n  appService,\n  movePrevStep,\n  moveNextStep,\n}) => {\n\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [editmode, setEditmode] = useState(\"read\");\n  const [applicant, setApplicant] = useState({\n    appno,\n    appid: appno,\n    entitytype: 'INDIVIDUAL',\n    resident: false,\n  })\n\n  useEffect(() => {\n    setLoading(true);\n    setError(null);\n    appService.invoke(\"getApplicant\", {appid: appno}, (err, applicant) => {\n      if (err) {\n        setError(err)\n      } else {\n        setApplicant(applicant || {});\n      };\n      setLoading(false);\n      setEditmode(\"read\");\n    })\n  }, []);\n\n  const saveApplicant = () => {\n    setError(null);\n    appService.invoke(\"saveApplicant\", applicant, (err, app) => {\n      if (err) {\n        setError(err)\n      } else {\n        moveNextStep();\n      }\n      setLoading(false)\n    })\n  }\n\n  const residentHandler = () => {\n    const updatedApplicant = {...applicant, resident: !applicant.resident, address: {}};\n    setApplicant(updatedApplicant);\n  }\n\n  return (\n    <Panel>\n      <Error msg={error} />\n      <FormPanel context={applicant} handler={setApplicant} >\n        <Combobox items={entityTypes} name='entitytype' caption='Type of Applicant'/>\n        <Text caption='Name' name='name' visibleWhen={applicant.entitytype !== 'INDIVIDUAL'}/>\n\n        <Spacer />\n        <Panel>\n          <Subtitle2>Administrator or contact name of applicant</Subtitle2>\n          <Text caption='Last Name' name='lastname' required={true}/>\n          <Text caption='First Name' name='firstname' required={true}/>\n          <Text caption='Middle Name' name='middlename' required={true}/>\n          <Email name='email'/>\n          <Mobileno name='mobileno'/>\n        </Panel>\n\n        <Spacer />\n        <Subtitle2>Applicant Address</Subtitle2>\n        <Checkbox caption='Resident' name='resident' onChange={residentHandler}/>\n        {applicant.resident ?\n          <LocalAddress orgcode={partner.id} name='address' caption='Address' />\n          :\n          <NonLocalAddress name='address' caption='Address'  />\n        }\n        <Spacer />\n        <Subtitle2>Proof of Identity</Subtitle2>\n        <IdEntry name=\"id\" />\n      </FormPanel>\n\n      <ActionBar>\n        <BackLink action={movePrevStep} />\n        <Button caption='Next' action={saveApplicant} disableWhen={loading}  />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nexport default Applicant\n","import React, { useState } from \"react\";\nimport {\n  Panel,\n  Card,\n  Title,\n  Page,\n  Text,\n  Subtitle,\n  Spacer,\n  ActionBar,\n  BackLink,\n  Button,\n  FormPanel,\n  Decimal,\n  Service,\n} from 'rsi-react-web-components';\n\nimport { EmailVerification } from 'rsi-react-filipizen-components'\nimport Confirmation from \"../components/Confirmation\";\nimport TrackingInfo from \"../components/TrackingInfo\";\n\n\nconst steps = [\n  {name: \"email\", title: \"Email Verification\"},\n  {name: \"specifybldgpermit\", title: \"Specify Building Permit\"},\n  {name: \"verifybldgpermit\", title: \"Verify Building Permit Information\"},\n  {name: \"confirmation\", title: \"Confirmation\"},\n  {name: \"newapp\", title: \"New Application \"},\n]\n\nconst OccupancyPermitInitial = ({\n  partner,\n  service,\n  onComplete,\n  appService,\n  onCancel\n}) => {\n\n  const [error, setError] = useState();\n  const [errorText, setErrorText] = useState({});\n  const [contact, setContact] = useState({});\n  const [appType, setAppType] = useState(\"new\");\n  const [appno, setAppno] = useState();\n  const [bldgPermitNo, setBldgPermitNo] = useState();\n  const [bldgPermit, setBldgPermit] = useState({});\n  const [activeStep, setActiveStep] = useState(0);\n\n\n  const step = steps[activeStep];\n\n  const moveNextStep = () => {\n    setActiveStep(cs => cs + 1);\n  }\n\n  const movePrevStep = () => {\n    setActiveStep(cs => cs-1);\n  }\n\n  const exitInitial = () => {\n    onComplete({appType: \"new\", appno});\n  }\n\n  const onVerifyEmail = (contact) => {\n    setContact(contact);\n    moveNextStep();\n  }\n\n  const loadBuildingPermit = () => {\n    if (bldgPermitNo) {\n      setError(null);\n      const svc = Service.lookup(`${partner.id}:OboOnlineService`, \"obo\");\n      svc.invoke(\"findBldgPermitNo\", {permitno: bldgPermitNo}, (err, permit) => {\n        if (err) {\n          setError(err);\n        } else {\n          setBldgPermit(permit);\n          moveNextStep();\n        }\n      })\n    } else {\n      setErrorText({bldgPermitNo: \"Please specify the Building Permit No.\"});\n    }\n  }\n\n  const submitBuildingPermit = () => {\n    moveNextStep();\n  }\n\n  const saveApp = () => {\n    const newApp = {\n      orgcode: partner.id,\n      apptype: appType,\n      permittype: bldgPermit.apptype,\n      applicant: bldgPermit.applicant,\n      bldgpermit: bldgPermit,\n      contact\n    }\n\n    appService.invoke(\"create\", newApp, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        setAppno(app.objid)\n        moveNextStep();\n      }\n    });\n  }\n\n  if (step.name === \"email\") {\n    return (\n      <Page>\n          <EmailVerification\n            title={service.title}\n            showName={true}\n            onCancel={onCancel}\n            onVerify={onVerifyEmail}\n            partner={partner}\n            connection=\"obo\"\n          />\n      </Page>\n    )\n  }\n\n  return (\n    <Page>\n      <Card>\n        <Title>{service.title}</Title>\n\n        <Panel visibleWhen={step.name === \"specifybldgpermit\"}>\n          <Subtitle>{step.title}</Subtitle>\n          <Spacer height={30} />\n          <Text\n            caption=\"Building Permit No.\"\n            value={bldgPermitNo} onChange={setBldgPermitNo}\n            variant=\"outlined\"\n            fullWidth={false}\n            required\n            error={errorText.bldgPermitNo || error}\n            helperText={errorText.bldgPermitNo || error}\n            size=\"small\"\n            autoFocus={true}\n            />\n          <ActionBar>\n            <BackLink action={movePrevStep} />\n            <Button caption=\"Next\" action={loadBuildingPermit} />\n          </ActionBar>\n        </Panel>\n\n        <FormPanel visibleWhen={step.name === \"verifybldgpermit\"} context={bldgPermit} handler={setBldgPermit}>\n          <Subtitle>Verify Building Permit Information</Subtitle>\n          <Spacer height={30} />\n          <Text caption=\"Building Permit No.\" name=\"permitno\" readOnly={true} />\n          <Text caption=\"Applicant\" name=\"applicant.name\" readOnly={true} />\n          <Spacer />\n          <Text caption=\"Project Title\" name=\"title\" readOnly={true} />\n          <Text caption=\"Location\" name=\"location.text\" readOnly={true} />\n          <Decimal caption=\"Project Cost\" name=\"projectcost\" readOnly={true} />\n          <ActionBar>\n            <BackLink action={movePrevStep} />\n            <Button caption=\"Next\" action={submitBuildingPermit} />\n          </ActionBar>\n        </FormPanel>\n\n        <Panel visibleWhen={step.name === \"confirmation\"}>\n          <Confirmation partner={partner} error={error} onCancel={movePrevStep} onContinue={saveApp} />\n        </Panel>\n\n        <Panel visibleWhen={step.name === \"newapp\"} width={400}>\n          <TrackingInfo appno={appno} onContinue={exitInitial} />\n        </Panel>\n      </Card>\n    </Page>\n  )\n}\n\n\nexport default OccupancyPermitInitial;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Spacer,\n  ActionBar,\n  Button,\n  FormPanel,\n  Label,\n  Decimal,\n  Date,\n  BackLink,\n  isDateBefore,\n  hasErrors\n} from 'rsi-react-web-components';\n\n\nconst PlannedVsActual = ({\n  appno,\n  appService,\n  moveNextStep,\n  movePrevStep\n}) => {\n\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [app, setApp] = useState({});\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        setApp(app);\n      }}\n    });\n  }, [appno]);\n\n  const isValid = () => {\n    const errors = {};\n    if (!app.actualtotalfloorarea) errors.actualtotalfloorarea = \"Required\";\n    if (!app.actualnumunits) errors.actualnumunits = \"Required\";\n    if (!app.actualnumfloors) errors.actualnumfloors = \"Required\";\n    if (!app.actualheight) errors.actualheight = \"Required\";\n    if (!app.dtactualstarted) errors.dtactualstarted = \"Required\";\n    if (!app.dtactualcompleted) errors.dtactualcompleted = \"Required\";\n    if (app.dtactualstarted && app.dtactualcompleted && isDateBefore(app.dtactualcompleted, app.dtactualstarted)) {\n      errors.dtactualcompleted = \"Actual date completed should be after actual date started.\"\n    }\n\n    if (hasErrors(errors)) {\n      setErrors(errors);\n      return false;\n    } else {\n      setErrors({});\n      return true;\n    }\n  }\n\n  const updatePermit = () => {\n    if (isValid()) {\n      setLoading(true);\n      appService.invoke(\"update\", app, (err, updatedApp) => {\n        if (err) {\n          setError(err);\n        } else {\n          moveNextStep();\n        }\n        setLoading(false);\n      });\n    }\n  }\n\n  return (\n    <Panel style={{maxWidth: 600}}>\n      <Label>Please indicate the actual values of construction.</Label>\n      <Spacer />\n      <FormPanel context={app} handler={setApp} style={styles.container}>\n        <Panel style={styles.row}>\n          <Label caption=\"\" style={styles.label}  />\n          <div style={styles.columnTitle}>Planned</div>\n          <div style={styles.columnTitle}>Actual</div>\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"Project Total Cost\" style={styles.label} />\n          <Decimal name=\"bldgpermit.projectcost\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Decimal name=\"actualprojectcost\" disabled={true} style={styles.item} fullWdith={false} variant=\"outlined\" />\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"Total Floor Area (sqm)\" style={styles.label}  />\n          <Decimal name=\"bldgpermit.totalfloorarea\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Decimal name=\"actualtotalfloorarea\" style={styles.item} fullWdith={false} variant=\"outlined\" error={errors.actualtotalfloorarea} autoFocus={true} />\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"No. of Units\" style={styles.label} />\n          <Decimal name=\"bldgpermit.numunits\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Decimal name=\"actualnumunits\" style={styles.item} fullWdith={false} variant=\"outlined\" error={errors.actualnumunits}/>\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"No. of Floors\" style={styles.label} />\n          <Decimal name=\"bldgpermit.numfloors\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Decimal name=\"actualnumfloors\" style={styles.item} fullWdith={false} variant=\"outlined\" error={errors.actualnumfloors}/>\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"Height (m)\" style={styles.label} />\n          <Decimal name=\"bldgpermit.height\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Decimal name=\"actualheight\" style={styles.item} fullWdith={false} variant=\"outlined\" error={errors.actualheight}/>\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"Start Date\" style={styles.label} />\n          <Date name=\"bldgpermit.dtproposedconstruction\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Date name=\"dtactualstarted\" style={styles.item} fullWdith={false} variant=\"outlined\" error={errors.dtactualstarted} />\n        </Panel>\n        <Panel style={styles.row}>\n          <Label caption=\"Completion Date\" style={styles.label} />\n          <Date name=\"bldgpermit.dtexpectedcompletion\" disabled={true} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          <Date name=\"dtactualcompleted\" style={styles.item} fullWdith={false} variant=\"outlined\" error={errors.dtactualcompleted} helperText={errors.dtactualcompleted} />\n        </Panel>\n        <Spacer />\n      </FormPanel>\n      <ActionBar>\n        <BackLink action={movePrevStep} />\n        <Button caption=\"Next\" action={updatePermit} loading={loading}/>\n      </ActionBar>\n    </Panel>\n  )\n}\n\nconst styles = {\n  container: {\n    display: \"flext\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n  },\n  columnTitle: {\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    width: 300,\n    padding: 10,\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n  },\n  label: {\n    width: \"100%\",\n  },\n  item: {\n    width: 400,\n    marginRight: 10,\n  }\n}\n\nexport default PlannedVsActual;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Subtitle,\n  Spacer,\n  ActionBar,\n  Button,\n  FormPanel,\n  Label,\n  Decimal,\n  Error,\n  BackLink\n} from 'rsi-react-web-components';\n\nconst ActualCost = ({\n  appno,\n  appService,\n  moveNextStep,\n  movePrevStep,\n}) => {\n\n  const costs = [\n    { caption: \"Total Materials Cost\", field: \"totalmaterialcost\", value: 0.0, },\n    { caption: \"Total Direct Cost\", field: \"totaldirectlaborcost\", value: 0.0, },\n    { caption: \"Total Equipment Cost\", field: \"totalequipmentcost\", value: 0.0, },\n    { caption: \"Total Other Cost\", field: \"totalothercost\", value: 0.0, },\n  ]\n\n  const [error, setError] = useState();\n  const [app, setApp] = useState({});\n  const [cost, setCost] = useState({items: costs})\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        setApp(app);\n        const updatedCost = {...cost};\n        updatedCost.items.forEach(item => {\n          item.value = app[item.field];\n        });\n        setCost(updatedCost);\n      }}\n    });\n  }, [appno])\n\n  const updatePermit = () => {\n    const updatedApp = { ...app };\n    cost.items.forEach(item => {\n      updatedApp[item.field] = item.value;\n    });\n    appService.invoke(\"update\", updatedApp, (err, app) => {\n      if (err) {\n        setError(err)\n      } else {\n        moveNextStep();\n      }\n    })\n  }\n\n  return (\n    <Panel style={{maxWidth: 600}}>\n      <Label>Please indicate the actual cost of construction.</Label>\n      <Spacer />\n      <Error msg={error} />\n      <FormPanel context={cost} handler={setCost} style={styles.container}>\n        {cost.items.map((cost, idx) => (\n          <Panel key={cost.field} style={styles.row}>\n            <Label caption={cost.caption} style={styles.label}  />\n            <Decimal name={`items[${idx}].value`} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          </Panel>\n        ))}\n      </FormPanel>\n      <ActionBar>\n        <BackLink action={movePrevStep} />\n        <Button caption=\"Next\" action={updatePermit} />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nconst styles = {\n  container: {\n    display: \"flext\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  label: {\n    width: \"100%\",\n  },\n  item: {\n    width: 300,\n    marginRight: 10,\n  }\n}\n\nexport default ActualCost;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Subtitle,\n  Spacer,\n  ActionBar,\n  Button,\n  FormPanel,\n  Label,\n  Decimal,\n  Error,\n  BackLink\n} from 'rsi-react-web-components';\n\nconst OtherCost = ({\n  appno,\n  appService,\n  moveNextStep,\n  movePrevStep,\n}) => {\n\n  const costs = [\n    { caption: \"Fire Alarm Cost\", field: \"firealarmcost\", value: 0.0, },\n    { caption: \"Sprinkler Cost\", field: \"sprinklercost\", value: 0.0, },\n    { caption: \"LPG Piping Cost\", field: \"lpgpipingcost\", value: 0.0, },\n    { caption: \"Fire Suppression System Cost\", field: \"firesuppcost\", value: 0.0, },\n  ]\n\n  const [error, setError] = useState();\n  const [app, setApp] = useState({});\n  const [cost, setCost] = useState({items: costs})\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        setApp(app);\n        const updatedCost = {...cost};\n        updatedCost.items.forEach(item => {\n          item.value = app[item.field];\n        });\n        setCost(updatedCost);\n      }}\n    });\n  }, [appno])\n\n  const updatePermit = () => {\n    const updatedApp = { ...app };\n    cost.items.forEach(item => {\n      updatedApp[item.field] = item.value;\n    });\n    appService.invoke(\"update\", updatedApp, (err, app) => {\n      if (err) {\n        setError(err)\n      } else {\n        moveNextStep();\n      }\n    })\n  }\n\n  return (\n    <Panel style={{maxWidth: 600}}>\n      <Label>Please indicate the other cost of construction.</Label>\n      <Spacer />\n      <Error msg={error} />\n      <FormPanel context={cost} handler={setCost} style={styles.container}>\n        {cost.items.map((cost, idx) => (\n          <Panel key={cost.field} style={styles.row}>\n            <Label caption={cost.caption} style={styles.label}  />\n            <Decimal name={`items[${idx}].value`} variant=\"outlined\" style={styles.item} fullWdith={false} />\n          </Panel>\n        ))}\n      </FormPanel>\n      <ActionBar>\n        <BackLink action={movePrevStep} />\n        <Button caption=\"Next\" action={updatePermit} />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nconst styles = {\n  container: {\n    display: \"flext\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n  },\n  row: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  label: {\n    width: \"100%\",\n  },\n  item: {\n    width: 300,\n    marginRight: 10,\n  }\n}\n\nexport default OtherCost;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Spacer,\n  ActionBar,\n  Button,\n  Label,\n  BackLink,\n  ButtonLink,\n  PageviewIcon,\n  PreviewReport,\n  DownloadReport,\n} from 'rsi-react-web-components';\n\nconst Confirmation = ({\n  appno,\n  partner,\n  appService,\n  movePrevStep,\n  onComplete\n}) => {\n\n  const [error, setError] = useState();\n  const [app, setApp] = useState({});\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        setApp(app);\n      }}\n    });\n  }, [appno])\n\n  const confirmPermit = () => {\n    appService.invoke(\"update\", app, (err, updatedApp) => {\n      if (err) {\n        setError(err)\n      } else {\n        onComplete();\n      }\n    })\n  }\n\n  return (\n    <Panel>\n      <p>\n        Before sending please check first the generated\n        application info. If everything is in order, you can\n        click Submit button to complete the transaction.\n      </p>\n      <Spacer />\n      <Panel style={styles.container}>\n        <Panel  style={styles.row}>\n          <Label style={styles.label}>Application for Occupancy Permit</Label>\n          <Panel row>\n            <PreviewReport href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/certificate_of_occupancy?refid=${appno}`} />\n            <DownloadReport href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/certificate_of_occupancy?refid=${appno}`}/>\n          </Panel>\n        </Panel>\n        <Panel style={styles.row}>\n          <Label style={styles.label}>Certificate of Completion</Label>\n          <Panel row>\n            <PreviewReport href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/certificate_of_completion?refid=${appno}`} />\n            <DownloadReport href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/certificate_of_completion?refid=${appno}`}/>\n          </Panel>\n        </Panel>\n      </Panel>\n      <ActionBar>\n        <BackLink action={movePrevStep} />\n        <Button caption=\"Submit\" action={confirmPermit} />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nconst styles = {\n  container: {\n    padding: \"0px 30px\",\n  },\n  row: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  label: {\n    fontWeight: \"bold\",\n  }\n}\n\nexport default Confirmation;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  ActionBar,\n  Button,\n  Label,\n  Spacer,\n  PreviewReport,\n  DownloadReport,\n  Service\n} from 'rsi-react-web-components';\n\n\nconst getHeaderInfo = (contact={}) => {\n  let headerInfo = \"\";\n  headerInfo += \"Please download and print the Application for Occupancy Permit and Certificate of Completion forms, \";\n  headerInfo += \"and submit at the receiving window of our \";\n  headerInfo += contact.officename;\n  headerInfo += \" at the \";\n  headerInfo += contact.address1;\n  if (contact.address2) {\n    headerInfo += \", \" + contact.address2 + \". \";\n  } else {\n    headerInfo += \". \";\n  }\n  const phones = [];\n  if (contact.phoneno) phones.push(contact.phoneno)\n  if (contact.mobileno) phones.push(contact.mobileno)\n\n  if (contact.email) {\n    if (phones.length > 0) {\n      headerInfo += \"You can email at \" + contact.email;\n      headerInfo += \" or contact us on \" + phones.join(\" or \");\n    } else {\n      headerInfo += \"You can email us at \" + contact.email;\n    }\n    headerInfo += \" for any inquiries on application.\"\n  } else if (phones.length > 0)  {\n    headerInfo += \"You can contact us on \" + phones.join(\" or \") + \" for any inquiries on application.\"\n  }\n  return headerInfo;\n}\n\nconst Completed = ({\n  appno,\n  partner,\n  appService,\n  onComplete,\n  history\n}) => {\n\n  const [error, setError] = useState();\n  const [app, setApp] = useState({});\n  const [contactInfo, setContactInfo] = useState({});\n\n  const loadContactInfo = () => {\n    const svc = Service.lookup(\"OboContactInfoService\", \"obo\");\n    svc.invoke(\"getInfo\", {orgcode: partner.id}, (err, info) => {\n      if (err) {\n        setError(err);\n      } else {\n        setContactInfo(info);\n      }\n    })\n  }\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        setApp(app);\n        loadContactInfo();\n      }}\n    });\n  }, [appno])\n\n  const headerInfo = getHeaderInfo(contactInfo);\n\n  return (\n    <Panel>\n      <label>{headerInfo}</label>\n      <Spacer />\n      <Panel style={styles.container}>\n        <Panel  style={styles.row}>\n          <Label style={styles.label}>Application for Occupancy Permit</Label>\n          <Panel row>\n            <PreviewReport href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/certificate_of_occupancy?refid=${appno}`} />\n            <DownloadReport href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/certificate_of_occupancy?refid=${appno}`}/>\n          </Panel>\n        </Panel>\n        <Panel style={styles.row}>\n          <Label style={styles.label}>Certificate of Completion</Label>\n          <Panel row>\n            <PreviewReport href={`/jreports/partner/${partner.group.name}_${partner.name}/obo/certificate_of_completion?refid=${appno}`} />\n            <DownloadReport href={`/jreports/download/partner/${partner.group.name}_${partner.name}/obo/certificate_of_completion?refid=${appno}`}/>\n          </Panel>\n        </Panel>\n      </Panel>\n      <ActionBar>\n        <Button caption=\"Return\" action={() => history.goBack()} />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nconst styles = {\n  container: {\n    padding: \"0px 30px\",\n  },\n  row: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n  },\n  label: {\n    fontWeight: \"bold\",\n  }\n}\n\nexport default Completed;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Service,\n  getUrlParameter,\n  Stepper,\n  Page,\n  Panel,\n  Title,\n  Subtitle,\n  Subtitle2,\n  Card,\n  Spacer,\n  Error,\n} from 'rsi-react-web-components';\n\nimport ApplicationTypeSelect from \"../components/ApplicationTypeSelect\";\nimport Applicant from \"./Applicant\";\nimport OccupancyPermitInitial from \"./OccupancyPermitInitial\";\nimport OccupancyType from \"./OccupancyType\";\nimport PlannedVsActual from \"./PlannedVsActual\";\nimport ActualCost from \"./ActualCost\";\nimport OtherCost from \"./OtherCost\";\nimport Contractor from \"./Contractor\";\nimport Professionals from \"./Professionals\";\nimport Confirmation from \"./Confirmation\";\nimport Completed from \"./Completed\";\n\n\nconst svc = Service.lookup(\"OnlineOccupancyPermitService\", \"obo\");\n\nconst pages = [\n  { step: 0, component: null },\n  { step: 1, name: 'apptype', caption: 'Application Type', component: OccupancyType },\n  { step: 2, name: 'applicant', caption: 'Applicant', component: Applicant },\n  { step: 3, name: 'actualcost', caption: 'Actual Costs', component: ActualCost },\n  { step: 4, name: 'othercost', caption: 'Fire Safety Costs', component: OtherCost },\n  { step: 5, name: 'plannedactual', caption: 'Planned vs Actual', component: PlannedVsActual },\n  { step: 6, name: 'contractor', caption: 'Contractor', component: Contractor },\n  { step: 7, name: 'professionals', caption: 'Professionals', component: Professionals },\n  { step: 8, name: 'confirmation', caption: 'Confirmation', component: Confirmation },\n  { step: 9, name: 'completed', caption: 'Completed', component: Completed },\n]\n\nconst OccupancyPermitWebController = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [mode, setMode] = useState(\"apptype\");\n  const [appType, setAppType] = useState(\"full\");\n  const [appno, setAppno] = useState(getUrlParameter(props.location, \"appid\"));\n  const [app, setApp] = useState({});\n  const [step, setStep] = useState(0)\n\n  const { partner, service } = props\n\n  const handleError = (err) => {\n    setLoading(false);\n    setError(err.toString());\n  }\n\n  const findCurrentApp = () => {\n    if (!appno) return;\n    setLoading(true);\n    svc.invoke(\"findCurrentInfo\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        if(!app) {\n          setError(\"Application no. does not exist\");\n        }\n        if( partner.id != app.orgcode ) {\n          setError(\"The application number provided is not for this local government\");\n        }\n        setApp(app);\n        setStep(app.step);\n        setMode(\"processing\");\n      }\n      setLoading(false);\n    });\n  }\n\n  useEffect(() => {\n    findCurrentApp();\n  }, [appno]);\n\n  const onCompleteInitial = ({appType, appno}) => {\n    setAppno(appno);\n    setStep(step + 1);\n    setMode(\"processing\");\n  }\n\n  const moveNextStep = () => {\n    if (app.step == pages.length - 1) return;\n\n    setError(null);\n    const nextStep = step < app.step ? app.step : step + 1;\n    svc.invoke(\"update\", {objid: appno, step: nextStep }, (err, updatedApp) => {\n      if (!err) {\n        setStep(nextStep);\n        setApp({...app, step: nextStep});\n      } else {\n        setError(err);\n      }\n    })\n  }\n\n  const movePrevStep = () => {\n    setStep(ps => ps - 1);\n  }\n\n  const onSubmitOccupancyType = (appType) => {\n    setAppType(appType);\n    moveNextStep();\n  }\n\n  const handleStep = (step) => {\n    setStep(step);\n  }\n\n  const submitAppType = ({appType, appno}) => {\n    setError(null);\n    if (appType === \"new\") {\n      setMode(\"init\");\n    } else {\n      svc.invoke(\"findCurrentInfo\", {appid: appno}, (err, app) => {\n        if (err) {\n          setError(err);\n        } else if (!app) {\n          setError(\"Application no. does not exist.\");\n        } else {\n          onCompleteInitial({appType, appno});\n        }\n      })\n    }\n  }\n\n  const onComplete = () => {\n    moveNextStep();\n  }\n\n  if (mode === \"apptype\") {\n    return (\n      <ApplicationTypeSelect service={props.service} error={error} onCancel={() => props.history.goBack()} onSubmit={submitAppType}  />\n    )\n  }\n\n  if (mode === \"init\") {\n    return (\n      <OccupancyPermitInitial {...props} appService={svc} onComplete={onCompleteInitial} onCancel={()=> props.history.goBack()} />\n    )\n  }\n\n  const page = pages[step];\n  const PageComponent = page.component;\n  const compProps = {\n    partner,\n    appno,\n    pages,\n    moveNextStep,\n    movePrevStep,\n    appService: svc,\n    currentStep: step,\n    stepCompleted: step < app.step,\n    onComplete,\n    history: props.history,\n  };\n\n  return (\n    <Page>\n      {app.step < 9 &&\n        <Panel target=\"left\" style={styles.stepperContainer} >\n          <Stepper steps={pages} completedStep={app.step} activeStep={step} handleStep={handleStep} />\n        </Panel>\n      }\n      <Card>\n        <Title>{service.title}</Title>\n        <Subtitle2>{`Tracking No. ${appno}`}</Subtitle2>\n        <Subtitle>{page.caption}</Subtitle>\n        <Spacer />\n        <Error msg={error} />\n        <PageComponent page={page} {...compProps} />\n      </Card>\n    </Page>\n  )\n}\n\nconst styles = {\n  stepperContainer: {\n    paddingTop: 30,\n    paddingLeft: 40,\n  }\n}\n\nexport default OccupancyPermitWebController\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Subtitle,\n  Spacer,\n  ActionBar,\n  Button,\n  Radio,\n  Item,\n  FormPanel,\n  Error\n} from 'rsi-react-web-components';\n\nconst OccupancyType = ({\n  appno,\n  appService,\n  currentStep,\n  stepCompleted,\n  moveNextStep,\n  onSubmitOccupancyType\n}) => {\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [app, setApp] = useState({});\n\n  useEffect(() => {\n    setError(null);\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        setApp(app);\n      }}\n    });\n  }, []);\n\n  const submitApplicationType = () => {\n    const updatedApp = { objid: app.objid, apptype: app.apptype }\n    appService.invoke(\"update\", updatedApp, (err, app) => {\n      if (!err) {\n        moveNextStep();\n      } else {\n        setError(err)\n      }\n    });\n  }\n\n  return (\n    <Panel>\n      <Error msg={error} />\n      <FormPanel context={app} handler={setApp}>\n        <Radio name=\"apptype\">\n          <Item caption=\"Full (Completed)\" value=\"full\" />\n          <Item caption=\"Partial\" value=\"partial\" />\n        </Radio>\n      </FormPanel>\n      <ActionBar>\n        <Button caption=\"Next\" action={submitApplicationType} />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nexport default OccupancyType;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  Spacer,\n  ActionBar,\n  Button,\n  FormPanel,\n  Label,\n  Text,\n  Date,\n  Email,\n  Checkbox,\n  BackLink,\n  hasErrors\n} from 'rsi-react-web-components';\n\nconst Contractor = ({\n  appno,\n  appService,\n  moveNextStep,\n  movePrevStep,\n}) => {\n\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  const [app, setApp] = useState({});\n  const [isContracted, setIsContracted] = useState(false);\n\n  useEffect(() => {\n    appService.invoke(\"getApplication\", {appid: appno}, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {{\n        app.contractor = app.contractor || {pcab:{}, manager: {}}\n        if (app.contractor && app.contractor.name) {\n          setIsContracted(true);\n        } else {\n          setIsContracted(false);\n        }\n        setApp(app);\n      }}\n    });\n  }, [appno])\n\n  const isValid = () => {\n    const { contractor } = app;\n    const errors = {};\n    if (!contractor || !contractor.name) errors.name = \"Required\";\n    if (!contractor || !contractor.address) errors.address = \"Required\";\n    if (!contractor || !contractor.pcab || !contractor.pcab.idno) errors.pcab.idno = \"Required\";\n    if (!contractor || !contractor.pcab || !contractor.pcab.dtvalid) errors.pcab.dtvalid = \"Required\";\n    if (!contractor || !contractor.tin) errors.tin = \"Required\";\n    if (!contractor || !contractor.manager || !contractor.manager.name) errors.manageroffice = \"Required\";\n    if (!contractor || !contractor.manager || !contractor.manager.email) errors.manageremail = \"Required\";\n\n    if (hasErrors(errors)) {\n      setErrors(errors);\n      return false;\n    } else {\n      setErrors({});\n      return true;\n    }\n  }\n\n  const updatePermit = () => {\n    if (!isContracted || isValid()) {\n      setLoading(true);\n      const updatedApp = {\n        objid: app.objid,\n        contractor: app.contractor\n      }\n      appService.invoke(\"update\", updatedApp, (err, app) => {\n        if (err) {\n          setError(err)\n        } else {\n          moveNextStep();\n        }\n        setLoading(false);\n      })\n    }\n  }\n\n  return (\n    <Panel>\n      <Label>Please specify contractor if available</Label>\n      <Spacer />\n      <Checkbox value={isContracted} onChange={setIsContracted} caption=\"Is undertaken by a Contractor?\" />\n      <FormPanel visibleWhen={isContracted} context={app} handler={setApp}>\n        <Text name=\"contractor.name\" caption=\"Contractor\" required={true} error={errors.name} />\n        <Text name=\"contractor.address\" caption=\"Address\" required={true} error={errors.address} />\n        <Text name=\"contractor.pcab.idno\" caption=\"PCAB License No.\" required={true} error={errors.pcabidno} />\n        <Date name=\"contractor.pcab.dtvalid\" caption=\"Validity Date\" required={true} error={errors.pcabdtvalid} />\n        <Text name=\"contractor.tin\" caption=\"TIN\" required={true} error={errors.tin} />\n        <Text name=\"contractor.manager.name\" caption=\"Authorized Managing Officer\" required={true} error={errors.manageroffice} />\n        <Email name=\"contractor.manager.email\" required={true} error={errors.manageremail} />\n      </FormPanel>\n      <ActionBar>\n        <BackLink action={movePrevStep} />\n        <Button caption=\"Next\" action={updatePermit} />\n      </ActionBar>\n    </Panel>\n  )\n}\n\nexport default Contractor;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Panel,\n  ActionBar,\n  Button,\n  BackLink,\n  Service,\n  MsgBox\n} from 'rsi-react-web-components';\n\nimport ProfessionalLookup from \"../components/ProfessionalLookup\";\nimport ProfessionalCard from \"../components/ProfessionalCard\";\n\nconst Professionals = ({\n  appno,\n  appService,\n  movePrevStep,\n  moveNextStep,\n}) => {\n\n  const [error, setError] = useState();\n  const [showError, setShowError] = useState(false);\n  const [errorMsg, setErrorMsg] = useState();\n  const [loading, setLoading] = useState(false);\n  const [mode, setMode] = useState(\"design\");\n  const [permitTypes, setPermitTypes] = useState([]);\n  const [professionals, setProfessionals] = useState([]);\n\n  const loadProfessionals = () => {\n    appService.invoke(\"getProfessionals\", {appid: appno}, (err, professionals) => {\n      if (err) {\n        setError(err);\n      } else {\n        setProfessionals(professionals);\n      }\n      setLoading(false);\n    });\n  }\n\n  useEffect(() => {\n    setLoading(true);\n    const svc = Service.lookup(\"OboMiscListService\", \"obo\");\n    svc.invoke(\"getPermitTypes\", null, (err, permitTypes) => {\n      if (err) {\n        setError(err);\n      } else {\n        console.log(\"permitTypes\",permitTypes)\n        setPermitTypes(permitTypes);\n        loadProfessionals();\n      }\n    });\n  }, [appno])\n\n\n  const validProfession = (professional, permitType) => {\n    const validRole = (mode === \"design\" ? permitType.designprofessionalrole : permitType.supervisorrole).toLowerCase();\n    let valid = validRole.indexOf(professional.profession.toLowerCase()) >= 0;\n\n    let requiredRoles = \"\"\n    if (!valid) {\n      const roles = validRole.split(\",\");\n      if(roles.length == 1) {\n        requiredRoles = \"Only \" + roles[0].toLowerCase() + \" profession is allowed.\"\n      } else {\n        requiredRoles = \"Only \" + roles.join(\", \") + \" professions are allowed.\"\n        const lastCommaIdx = requiredRoles.lastIndexOf(\",\");\n        requiredRoles = requiredRoles.substring(0, lastCommaIdx) + \" and \" + requiredRoles.substring(lastCommaIdx+2);\n      }\n\n      let msg = \"The profession of the selected professional is invalid. \" + requiredRoles;\n      setErrorMsg(msg);\n      return false;\n    }\n    return true;\n  }\n\n  const onSelectProfessional = (profList, permitType, idx) => {\n    if (profList.length === 0) {\n      setProfessional({});\n      return;\n    }\n\n    const professional = profList[0];\n    if (!validProfession(professional, permitType)) {\n      setShowError(true);\n      return;\n    }\n\n    const updatedProfessional = professionals[idx];\n    if (mode === \"design\") {\n      updatedProfessional.designprofessionalid = professional.objid;\n      updatedProfessional.designprofessional = professional;\n    } else {\n      updatedProfessional.supervisorid = professional.objid;\n      updatedProfessional.supervisor = professional;\n    }\n    const updatedProfessionals = [...professionals];\n    updatedProfessionals[idx] = updatedProfessional;\n    setProfessionals(updatedProfessionals);\n  }\n\n  const updateProfessionals = () => {\n    setLoading(true);\n    appService.invoke(\"updateProfessionals\", professionals, (err, professionals) => {\n      if (err) {\n        setError(err);\n      } else {\n        if (mode === \"design\") {\n          setMode(\"supervisor\");\n        } else {\n          moveNextStep();\n        }\n      }\n      setLoading(false);\n    });\n  }\n\n  return (\n    <Panel>\n      <MsgBox title=\"Invalid Profession\" open={showError} msg={errorMsg} onAccept={() => setShowError(false)} />\n      <Panel visibleWhen={mode === \"design\"}>\n        <h3>List of Design Professionals</h3>\n        {professionals.map((prof, idx) => {\n          const permitType = permitTypes.find(pt => pt.objid.toLowerCase() === prof.sectionid.toLowerCase())\n          if (!permitType) return null;\n          if (!permitType.designprofessionalrole) return null;\n\n          return (\n            <div key={prof.objid}>\n              {prof.designprofessionalid ? (\n                <ProfessionalCard\n                caption={`${prof.sectionid} Design Professional`}\n                professional={professionals[idx].designprofessional}\n                onSelectProfessional={(professionals) => onSelectProfessional(professionals, permitType, idx)}\n              />\n              ) : (\n                <ProfessionalLookup\n                  caption={`${prof.sectionid} Design Professional`}\n                  searchFieldTitle=\"\"\n                  onSelect={(professionals) => onSelectProfessional(professionals, permitType, idx)}\n                />\n              )}\n            </div>\n          )\n        })}\n        <ActionBar>\n          <BackLink action={movePrevStep} />\n          <Button caption=\"Next\" action={updateProfessionals} disableWhen={loading} />\n        </ActionBar>\n      </Panel>\n\n      <Panel visibleWhen={mode === \"supervisor\"}>\n        <h3>List of Supervisors</h3>\n        {professionals.map((prof, idx) => {\n          const permitType = permitTypes.find(pt => pt.objid.toLowerCase() === prof.sectionid.toLowerCase())\n          if (!permitType) return null;\n          if (!permitType.supervisorrole) return null;\n\n          return (\n            <div key={prof.objid}>\n              {prof.supervisorid ? (\n                <ProfessionalCard\n                caption={`${prof.sectionid} Supervisor`}\n                professional={professionals[idx].supervisor}\n                onSelectProfessional={(professionals) => onSelectProfessional(professionals, permitType, idx)}\n              />\n              ) : (\n                <ProfessionalLookup\n                  caption={`${prof.sectionid} Supervisor`}\n                  searchFieldTitle=\"\"\n                  onSelect={(professionals) => onSelectProfessional(professionals, permitType, idx)}\n                />\n              )}\n            </div>\n          )\n        })}\n        <ActionBar>\n          <BackLink action={() => setMode(\"design\")} />\n          <Button caption=\"Next\" action={updateProfessionals} disableWhen={loading} />\n        </ActionBar>\n      </Panel>\n    </Panel>\n  )\n}\n\n\nexport default Professionals;\n","import React from \"react\";\nimport { Combobox } from \"rsi-react-web-components\";\n\nconst ProfessionList = ({\n  name=\"profession\",\n  caption=\"Profession\",\n  professions,\n  ...rest\n}) => {\n    return (\n    <Combobox\n      name={name}\n      caption={caption}\n      items={professions}\n      {...rest}\n    />\n  );\n};\n\nexport default ProfessionList;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Subtitle,\n  Error,\n  FormPanel,\n  Spacer,\n  Text,\n  Email,\n  Mobileno,\n  ActionBar,\n  Button,\n  BackLink,\n  Panel,\n  Service\n} from 'rsi-react-web-components';\n\nimport { VerifyEmailCode } from \"rsi-react-filipizen-components\";\nimport ProfessionList from \"../components/ProfessionList\";\n\nconst svc = Service.lookup(\"OboProfessionalService\", \"obo\");\n\n\nconst Initial = ({\n  partner,\n  onCancel,\n  onVerified\n}) => {\n\n  const [mode, setMode] = useState(\"init\");\n  const [errors, setErrors] = useState({});\n  const [error, setError] = useState();\n  const [loading, setLoading] = useState(false);\n  const [info, setInfo] = useState({});\n  const [key, setKey] = useState();\n  const [professionList, setProfessionList] = useState([]);\n\n  useEffect(() => {\n    svc.invoke(\"getProfessionList\", null, (err, list) => {\n      setProfessionList(list);\n    })\n  }, []);\n\n  useEffect(() => {\n    if (Object.keys(errors).length > 0)\n    validInfo();\n  }, [info]);\n\n  const verifyEmail = async () => {\n    const emailSvc = Service.lookupAsync(`${partner.id}:VerifyEmailService`, \"obo\");\n    return emailSvc.invoke(\"verifyEmail\", { email: info.email, mobileno: info.mobileno });\n  };\n\n  const validInfo = () => {\n    const errors = {}\n    if (!info.prc || !info.prc.idno) errors.idno = \"PRC No. is required\";\n    if (!info.profession) errors.profession = \"Profession is required\";\n    if (!info.email) errors.email = \"Email is required\";\n\n    if (Object.keys(errors).length == 0) {\n      setErrors({});\n      return true;\n    } else {\n      setErrors(errors);\n      return false;\n    }\n  }\n\n  const onResendCode = (key) => {\n    setKey(key);\n  }\n\n  const verifyInfo = () => {\n    if (!validInfo()) return;\n\n    setError(null);\n    setLoading(true);\n    svc.invoke(\"verifyInfo\", info, (err, res) => {\n      if (err) {\n        setError(err);\n      } else {\n        verifyEmail()\n          .then((data) => {\n            setError(null);\n            setKey(data.key);\n            setMode(\"verify\");\n          })\n          .catch((err) => {\n            setError(err);\n          });\n        setLoading(false);\n      }\n    });\n  }\n\n  return (\n    <React.Fragment>\n      <FormPanel visibleWhen={mode === \"init\"} context={info} handler={setInfo}>\n        <Subtitle>Please specify initial information</Subtitle>\n        <Spacer />\n        <Error msg={error} />\n        <Text name=\"prc.idno\" caption=\"PRC No.\" required error={errors.idno} helperText={errors.idno} />\n        <ProfessionList caption=\"Profession (Copy profession in the PRC card\" name=\"profession\" expr={item => item} professions={professionList} required={true} error={errors.profession} helperText={errors.profession} />\n        <Email name=\"email\" required error={errors.email} helperText={errors.email} />\n        <Mobileno name=\"mobileno\" />\n        <ActionBar>\n          <BackLink action={onCancel} />\n          <Button caption=\"Next\" action={verifyInfo} />\n        </ActionBar>\n      </FormPanel>\n\n      <Panel visibleWhen={mode === \"verify\"}>\n        <Subtitle>Email Verification</Subtitle>\n        <Spacer />\n        <Error msg={error} />\n        <p>Please enter the key code sent to your email at {info.email}.</p>\n        <VerifyEmailCode\n          partner={partner}\n          hiddenCode={key}\n          email={info.email}\n          onCancel={() => setMode(\"init\")}\n          onVerified={() => onVerified(info)}\n          onResendCode={onResendCode}\n          width={200}\n          connection=\"obo\"\n        />\n      </Panel>\n    </React.Fragment>\n  );\n}\n\nexport default Initial;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  ActionBar,\n  Button,\n  Panel,\n  Error,\n  Subtitle,\n  FormPanel,\n  Spacer,\n  Text,\n} from \"rsi-react-web-components\";\n\nimport { Person, IdEntry, PrcCard, PtrCard } from \"rsi-react-filipizen-components\";\n\nconst NewProfessional = ({\n  info = {},\n  partner,\n  onSubmit\n}) => {\n\n  const initialProfessional = {\n    entity: {...info, resident: true},\n    prc: info.prc,\n    resident: true\n  }\n\n  const [error, setError] = useState();\n  const [professional, setProfessional] = useState(initialProfessional);\n\n  const submitHandler = () => {\n    //TODO:\n    //validate here\n    onSubmit(professional);\n  }\n\n  return (\n    <Panel>\n      <Subtitle>Register New Professional</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n\n      <Panel>\n        <FormPanel context={professional} handler={setProfessional}>\n          <p>Please fill in the necessary data below. Text marked with * are required fields. </p>\n          <Text caption=\"Profession\" name=\"entity.profession\" readOnly={true} />\n          <Person name=\"entity\" person={professional} showAddress={true} orgcode={partner.id} />\n          <Spacer />\n          <PrcCard name=\"prc\" disableIdNo={true} />\n          <PtrCard name=\"ptr\" />\n          <IdEntry caption=\"Primary Identification\" name=\"id\" />\n          <ActionBar>\n            <Button caption=\"Next\" action={submitHandler} />\n          </ActionBar>\n        </FormPanel>\n      </Panel>\n    </Panel>\n  )\n}\n\nexport default NewProfessional;\n","import React from 'react'\nimport {\n  Panel,\n  Spacer,\n  Button,\n  Content,\n  Label,\n  Title,\n  CardActions,\n  Image\n} from 'rsi-react-web-components'\n\nconst Success = ({ onClose }) => {\n  return (\n    <Panel>\n      <Content center>\n        <Spacer />\n        <Image src=\"/assets/success.png\" width={120} alt='success' />\n        <Spacer />\n        <Title>Success!</Title>\n        <Spacer />\n        <Label style={{ ...styles.text, ...{ maxWidth: 300 } }}>\n          You have successfully registered your professional information.\n        </Label>\n        <Label labelStyle={styles.text}>\n          Thank you for using this service.\n        </Label>\n        <Spacer />\n        <CardActions>\n          <Button\n            variant='text'\n            caption='Return'\n            onClick={onClose}\n          />\n        </CardActions>\n      </Content>\n    </Panel>\n  )\n}\n\nconst styles = {\n  text: {\n    display: \"block\",\n    textAlign: \"center\"\n  }\n};\n\nexport default Success\n","import React, { useState } from 'react';\nimport {\n  Service,\n  Stepper,\n  Page,\n  Panel,\n  Title,\n  Card,\n  Error\n} from 'rsi-react-web-components';\n\n\nimport { Disclaimer } from \"rsi-react-filipizen-components\";\n\nimport Initial from \"./Initial\";\nimport NewProfessional from \"./NewProfessional\";\nimport Success from \"./Success\";\n\nconst svc = Service.lookup(\"OboProfessionalService\", \"obo\");\n\nconst steps = [\n  { step: 1, name: \"initial\", caption: \"Initial\" },\n  { step: 2, name: \"newprofessional\", caption: \"New Professional\" },\n  { step: 3, name: \"disclaimer\", caption: \"Disclaimer\" },\n  { step: 4, name: \"registered\", caption: \"Registered\" },\n]\n\nconst ProfessionalWebController = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState({});\n  const [mode, setMode] = useState(\"new\");\n  const [step, setStep] = useState(0);\n  const [key, setKey] = useState();\n  const [info, setInfo] = useState();\n  const [professional, setProfessional] = useState();\n\n  const { partner, service, history } = props;\n\n  const handleError = (err) => {\n    setLoading(false);\n    setError(err.toString());\n  }\n\n  const moveNextStep = () => {\n    setStep(cs => cs+1);\n  }\n\n  const movePrevStep = () => {\n    setStep(cs => cs-1);\n  }\n\n  const activeStep = steps[step];\n\n  const verifiedInfoHandler = (info) => {\n    setInfo(info);\n    moveNextStep();\n  }\n\n\n  const getReconciledProfessional = () => {\n    const address = {...professional.entity.address};\n    if (professional.entity.resident) {\n      address.citymunicipality = partner.title;\n      address.province = partner.group.title;\n    }\n    const entity = {...professional.entity, address};\n    const prof = {...entity, ...professional};\n    delete prof.entity;\n    return prof;\n  }\n\n  const submitProfessional = (professional) => {\n    setProfessional(professional);\n    moveNextStep();\n  }\n\n  const saveProfessional = () => {\n    setLoading(true);\n    const reconciledProf = getReconciledProfessional();\n    svc.invoke(\"create\", reconciledProf, (err, prof) => {\n      if (err) {\n        handleError(err);\n      } else {\n        moveNextStep();\n      }\n    })\n  }\n\n  return (\n    <Page>\n      <Panel target=\"left\" style={styles.stepperContainer} >\n        <Stepper steps={steps} activeStep={step} />\n      </Panel>\n      <Card>\n        <Title>{service.title}</Title>\n        <Error msg={error} />\n        <Panel visibleWhen={activeStep.name === \"initial\"}>\n          <Initial partner={partner} onCancel={history.goBack} onVerified={verifiedInfoHandler} />\n        </Panel>\n        <Panel visibleWhen={activeStep.name === \"newprofessional\"}>\n          <NewProfessional partner={partner} info={info} onSubmit={submitProfessional} />\n        </Panel>\n        <Panel visibleWhen={activeStep.name === \"disclaimer\"}>\n          <Disclaimer partner={partner} onCancel={movePrevStep} onSubmit={saveProfessional} />\n        </Panel>\n        <Panel visibleWhen={activeStep.name === \"registered\"}>\n          <Success onClose={() => history.goBack()} />\n        </Panel>\n      </Card>\n    </Page>\n  )\n}\n\nconst styles = {\n  stepperContainer: {\n    paddingTop: 30,\n    paddingLeft: 40,\n  }\n}\n\nexport default ProfessionalWebController\n","import React, { useState, useEffect } from 'react'\nimport {\n  Service,\n  Page,\n  Panel,\n  Title,\n  Card,\n  Error,\n  FormPanel,\n  Subtitle,\n  Subtitle2,\n  Spacer,\n  Text,\n  ActionBar,\n  Button,\n  BackLink,\n  Date,\n  Label,\n  getDuration\n} from 'rsi-react-web-components'\nimport { VerifyEmailCode, EmailVerification } from 'rsi-react-filipizen-components'\n\nconst AppTrackingWebController = (props) => {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [mode, setMode] = useState('init')\n  const [trackingno, setTrackingno] = useState()\n  const [app, setApp] = useState({subtasks: []})\n  const [verifiedInfo, setVerifiedInfo] = useState({})\n  const [contact, setContact] = useState()\n\n  const { partner, service, history } = props\n\n  const verifyTrackingNo = () => {\n    setError(null)\n    if (!trackingno) {\n      setError('Tracking No. is required.')\n    } else {\n      const svc = Service.lookup(`${partner.id}:OboOnlineService`, \"obo\");\n      svc.invoke(\"verifyApplication\", { trackingno }, (err, info) => {\n        if (err) {\n          setError(err);\n        } else {\n          setVerifiedInfo(info);\n          setMode('verification');\n        }\n      });\n    }\n  }\n\n  const onEmailVerified = (contact) => {\n    setContact(contact);\n    getApplicationStatus();\n  }\n\n  const resetStatus = () => {\n    setError(null);\n    setLoading(false);\n  }\n\n  const getApplicationStatus = () => {\n    setLoading(true);\n    const svc = Service.lookup(`${partner.id}:OboOnlineService`, \"obo\");\n    svc.invoke(\"findApplicationStatus\", { trackingno }, (err, app) => {\n      if (err) {\n        setError(err);\n      } else {\n        setApp(app);\n        setMode('info');\n        resetStatus();\n      }\n    })\n  };\n\n  const getLocation = () => {\n    if (!app.location) return \"\";\n\n    const location = [];\n    if (app.location.lotno) location.push(`Lot: ${app.location.lotno}`);\n    if (app.location.blockno) location.push(`Block: ${app.location.blockno}`);\n    if (app.location.street) location.push(`Street: ${app.location.street}`);\n    if (app.location.barangay.name) location.push(`Barangay: ${app.location.barangay.name}`);\n    return location.join(\" \");\n  }\n\n  const getWorkTypes = () => {\n    let worktypes = \"\";\n    if (app.worktypes && app.worktypes.length > 0) {\n      worktypes = app.worktypes?.join(\",\");\n    }\n    return worktypes;\n  }\n\n  let duration = \"\";\n  if (app && app.task) {\n    duration = getDuration(app.task.dtcreated);\n  }\n\n\n\n  return (\n    <Page>\n      <Card>\n        <Title>{service.title}</Title>\n        <Panel visibleWhen={mode === 'init'}>\n          <Subtitle>Building Permit Tracking No.</Subtitle>\n          <Spacer />\n          <Text\n            caption='Tracking No.'\n            name='trackingno'\n            value={trackingno}\n            onChange={setTrackingno}\n            required\n            error={error}\n            helperText={error}\n            fullWidth={false}\n            variant='outlined'\n          />\n          <ActionBar>\n            <BackLink action={() => history.goBack()} />\n            <Button caption='Next' action={verifyTrackingNo} />\n          </ActionBar>\n        </Panel>\n\n        <Panel visibleWhen={mode === 'verification'}>\n          <Subtitle>Account Verification</Subtitle>\n          <Spacer />\n\n          <VerifyEmailCode\n            partner={partner}\n            hiddenCode={verifiedInfo.key}\n            email={verifiedInfo.email}\n            onCancel={() => setMode(\"init\")}\n            onVerified={onEmailVerified}\n          />\n        </Panel>\n        <FormPanel visibleWhen={mode === 'info'} context={app} handler={setApp}>\n          <Subtitle>Building Permit Application Status</Subtitle>\n          <Spacer />\n          <Panel>\n            <Panel row>\n              <Text caption=\"Tracking No.\" name=\"trackingno\" readOnly={true} />\n              <Text caption=\"Application No.\" name=\"appno\" readOnly={true} />\n            </Panel>\n            <Text caption=\"Project Title\" name=\"title\" readOnly={true} />\n            <Text caption=\"Project Location\" expr={getLocation} readOnly={true} />\n            <Spacer />\n            <Text caption=\"Applicant\" name=\"applicant.name\" readOnly={true} />\n            <Text caption=\"Occupancy Type\" name=\"occupancytype.title\" readOnly={true} />\n            <Text caption=\"Type of Work\" expr={getWorkTypes} readOnly={true} />\n          </Panel>\n          <Spacer />\n\n          <Panel style={styles.currentTask}>\n            <div style={styles.title}>\n              <Subtitle2>Current Task (ongoing)</Subtitle2>\n            </div>\n            <div style={styles.taskInfo}>\n              <h3>{app && app.task && app.task.title}</h3>\n              <Label caption=\"Date Endorsed\" expr=\"task.dtcreated\" />\n              {app && app.task && app.task.assignee.name &&\n                <Label caption=\"Assigned To\" expr=\"task.assignee.name\" />\n              }\n              <Label caption=\"Duration\" context={app} expr={ctx => duration} />\n            </div>\n          </Panel>\n        </FormPanel>\n        <Panel visibleWhen={mode === 'info'}>\n          <Spacer />\n          <Subtitle2>Activity Summary</Subtitle2>\n          <table style={styles.table}>\n              <tr style={styles.trth}>\n                <th style={styles.tableText}>Section</th>\n                <th style={styles.tableText}>Name</th>\n                <th style={styles.tableText}>Date Endorsed</th>\n                <th style={styles.tableText}>Duration</th>\n              </tr>\n              <tbody>\n                {app.subtasks.map(st => (\n                  <tr key={st.objid} style={styles.trth}>\n                    <td style={styles.tableText}>{st.typeid}</td>\n                    <td style={styles.tableText}>{st.task.title}</td>\n                    <td style={styles.tableText}>{st.task.dtcreated || \"Not yet started\"}</td>\n                    <td style={styles.tableText}>{getDuration(st.task.dtcreated)}  </td>\n                  </tr>\n                ))}\n              </tbody>\n          </table>\n        </Panel>\n      </Card>\n    </Page>\n  )\n}\n\nconst styles = {\n  currentTask: {\n    border: \"1px solid #aaa\",\n    borderRadius: 5,\n    boxShadow: \"0px 5px 7px -7px rgba(0,0,0,0.75)\",\n  },\n  taskInfo: {\n    padding: \"0px 10px\",\n  },\n  title: {\n    padding: \"5px 10px\",\n    backgroundColor: \"#ddd\",\n    borderBottom: \"1px solid #aaa\",\n    borderRadius: 5,\n  },\n  table: {\n    width: \"100%\",\n    borderSpacing: 0,\n  },\n  tableText: {\n    fontSize: 12,\n    border: \"1px solid #ddd\",\n    padding: 5,\n  },\n  trth: {\n    border: \"1px solid #ddd\",\n    cellSpacing: 0,\n    padding: 5,\n  }\n}\n\nexport default AppTrackingWebController\n","import React, { useState, useEffect } from 'react'\nimport {\n  Card,\n  Panel,\n  Button,\n  Label,\n  ActionBar,\n  Spacer,\n  Text,\n  Error,\n  Subtitle,\n  Title,\n  BackLink,\n  useData,\n  Table,\n  TableColumn,\n  currencyFormat\n} from 'rsi-react-web-components'\n\nconst ORIGIN = 'filipizen'\n\nconst OnlineBilling = ({\n  title,\n  partner,\n  onCancel,\n  onSubmit,\n  error: paymentError\n}) => {\n  const [ctx, dispatch] = useData();\n  const { refno, apptype, txntype, contact, bill: initialBill } = ctx;\n\n  const [bill, setBill] = useState(initialBill);\n  const [error, setError] = useState(paymentError);\n  const [loading, setLoading] = useState(false)\n\n  const checkoutPayment = () => {\n    onSubmit({\n      refno,\n      txntype,\n      origin: ORIGIN,\n      orgcode: partner.id,\n      info: { data: bill },\n      paidby: bill.paidby,\n      paidbyaddress: bill.paidbyaddress,\n      amount: bill.amount,\n      particulars: `Obo Application No. ${bill.appno}`,\n    })\n  }\n\n  const onCancelBilling = () => {\n    onCancel(0);\n  }\n\n  const blur = contact && contact.email !== bill.email;\n\n  return (\n    <Card style={{maxWidth: 800}}>\n      <Title>{title}</Title>\n      <Subtitle>Billing Information</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n      <Panel>\n        <Panel row>\n          <Text context={bill} caption=\"Tracking No.\" expr=\"trackingno\" readOnly={true} />\n          <Text context={bill} caption=\"Application No.\" expr=\"appno\" readOnly={true} />\n        </Panel>\n        <Panel row>\n          <Text context={bill} caption=\"Permit Type\" expr=\"permittype\" readOnly={true} />\n          <Text context={bill} caption=\"Application Type\" expr=\"apptype\" readOnly={true} />\n        </Panel>\n        <Text context={bill} caption=\"Project Name\" expr=\"title\" readOnly={true} />\n        <Text context={bill} caption=\"Applicant\" expr=\"applicant.name\" readOnly={true} />\n        <Text context={bill} caption=\"Address\" expr=\"applicant.address.text\" readOnly={true} />\n        <h4>Bill Details</h4>\n        <Table items={bill ? bill.items : []} size=\"small\" showPagination={false} >\n          <TableColumn caption=\"Particulars\" expr=\"item.title\" />\n          <TableColumn caption=\"Amount\" expr=\"amount\" align=\"right\" format=\"currency\" />\n        </Table>\n        <Panel style={{display: \"flex\", flexDirection: \"row\", justifyContent: \"flex-end\", paddingRight: 15}}>\n          <Label context={bill} caption=\"Bill Amount:\" expr={item => currencyFormat(item.amount)} />\n        </Panel>\n      </Panel>\n      <ActionBar disabled={loading}>\n        <BackLink caption='Back' action={onCancelBilling} />\n        <Button caption='Confirm Payment' action={checkoutPayment} disableWhen={bill.amount === 0} />\n      </ActionBar>\n    </Card>\n  )\n}\n\nexport default OnlineBilling\n","import React, { useState } from 'react'\nimport { Page, Panel, StateProvider, Content } from \"rsi-react-web-components\";\nimport \"rsi-react-web-components/dist/index.css\";\n\nimport { ContactVerification } from 'rsi-react-filipizen-components'\n\nconst initialState = {\n  txntype: \"obo\",\n  contact: {},\n  refno: null,\n  apptype: null,\n  bill: {},\n}\n\nconst reducer = (draft, action) => {\n  switch(action.type) {\n    case \"SET_BILL\":\n      draft.refno = action.refno;\n      draft.apptype = action.apptype;\n      draft.bill = action.bill;\n      return;\n\n    case \"SET_CONTACT\":\n      draft.contact = action.contact;\n      return;\n  }\n}\n\nimport InitialInfo from \"./InitialInfo\";\nimport Payment from \"./Payment\";\n\nconst pages = [\n  {step: 1, name: \"verification\", caption: \"Verification\", Component: ContactVerification},\n  {step: 2, name: \"initial\", caption: \"Initial Information\", Component: InitialInfo},\n  {step: 3, name: \"payment\", caption: \"Payment\", Component: Payment},\n]\n\nconst OboBillingWebController = ({\n  partner,\n  service,\n  location,\n  history,\n  initialStep=1 //TODO: reset to 0\n}) => {\n\n  const [step, setStep] = useState(initialStep);\n\n  const moveNextStep = () => {\n    setStep(cs => cs+1);\n  }\n\n  const movePrevStep = () => {\n    if (step === 0) {\n      history.goBack();\n    } else {\n      setStep(cs => cs-1);\n    }\n  }\n\n  const cancelPayment = () => {\n    setStep(1);\n  }\n\n  const page = pages[step];\n  const PageComponent = page.Component;\n  const compProps = {\n    partner,\n    service,\n    location,\n    history,\n    moveNextStep,\n    movePrevStep,\n    cancelPayment,\n    title: \"Building Permit Online Billing\",\n  };\n\n  return (\n    <StateProvider initialState={initialState} reducer={reducer}>\n      <Page>\n        <Content center>\n          <Panel>\n            <PageComponent page={page} {...compProps} />\n          </Panel>\n        </Content>\n      </Page>\n    </StateProvider>\n  )\n};\n\nexport default OboBillingWebController;\n","import React, { useState } from 'react'\nimport {\n  FormPanel,\n  Panel,\n  Text,\n  Title,\n  Button,\n  ActionBar,\n  Subtitle,\n  Spacer,\n  Service,\n  Error,\n  BackLink,\n  useData,\n  Card,\n  Combobox,\n  Radio,\n  Item\n} from 'rsi-react-web-components'\n\n\nconst appTypes = [\"building\", \"occupancy\"];\n\nconst InitialInfo = ({\n  title,\n  partner,\n  moveNextStep,\n  movePrevStep,\n}) => {\n\n  const [ctx, dispatch] = useData();\n  const { txntype } = ctx;\n\n  const [error, setError] = useState();\n  const [errorText, setErrorText] =  useState({});\n  const [loading, setLoading] = useState(false);\n  const [params, setParams] = useState({apptype: \"building\"});\n\n  const getBilling = async () => {\n    const svc = await Service.lookupAsync(`${partner.id}:OboOnlineBillingService`, \"obo\");\n    return await svc.getBilling({txntype, ...params, qtr: 4, showdetails:true})\n  }\n\n  const loadBill = () => {\n    setErrorText({});\n    if (!params.refno) {\n      setErrorText({refno: \"Application No. is required.\"})\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    getBilling().then(bill => {\n      dispatch({type: \"SET_BILL\", ...params, bill: bill});\n      moveNextStep();\n    }).catch(err => {\n      setError(err.toString());\n      setLoading(false)\n    })\n  }\n\n  return (\n    <Card>\n      <Title>{title}</Title>\n      <Subtitle>Initial Information</Subtitle>\n      <Spacer />\n      <Error msg={error} />\n      <FormPanel context={params} handler={setParams}>\n        <Text\n          name=\"refno\"\n          caption=\"Application No.\"\n          autoFocus={true}\n          error={errorText.refno}\n          helperText={errorText.refno}\n        />\n        <Spacer />\n        <Panel>\n          <label>Application Type:</label>\n          <Panel style={{marginLeft: 20}}>\n            <Radio name=\"apptype\">\n              <Item caption=\"Building Permit\" value=\"building\" />\n              <Item caption=\"Occupancy Permit\" value=\"occupancy\" />\n            </Radio>\n          </Panel>\n        </Panel>\n      </FormPanel>\n      <ActionBar>\n        <BackLink caption='Back' variant=\"text\" action={movePrevStep} />\n        <Button caption='Next' action={loadBill} loading={loading} disabled={loading} />\n      </ActionBar>\n    </Card>\n  )\n}\n\nexport default InitialInfo\n","import React from 'react'\nimport { useData } from 'rsi-react-web-components'\nimport { EPayment } from 'rsi-react-filipizen-components'\nimport OnlineBilling from './OnlineBilling';\n\nconst Payment = (props) => {\n  const [ctx, dispatch] = useData()\n  const module = {\n    title: props.title,\n    component: OnlineBilling\n  }\n  return (\n    <EPayment\n      module={module}\n      {...props}\n      initialContact={ctx.contact}\n      initialStep={1}\n      cancelPayment={props.cancelPayment}\n    />\n  )\n}\n\nexport default Payment\n"],"sourceRoot":""}
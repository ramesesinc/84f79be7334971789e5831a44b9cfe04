(this["webpackJsonpfilipizen-client"]=this["webpackJsonpfilipizen-client"]||[]).push([[5],{1386:function(e,t,n){"use strict";n.r(t),n.d(t,"AppTrackingWebController",(function(){return Ce})),n.d(t,"BuildingPermitWebController",(function(){return z})),n.d(t,"OboBillingWebController",(function(){return Re})),n.d(t,"OccupancyPermitWebController",(function(){return ae})),n.d(t,"ProfessionalWebController",(function(){return fe})),n.d(t,"PtrBillingWebController",(function(){return Fe})),n.d(t,"UpdateProfessionalWebController",(function(){return Se}));var a=n(0),l=n.n(a),r=n(2),o=n(118);n(117);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t.indexOf(n=r[a])>=0||(l[n]=e[n]);return l}var s=function(e){var t=e.onCancel,n=e.onSubmit,o=e.service,i=e.partner,c=e.appService,s=Object(a.useState)({}),p=s[0],m=s[1],u=Object(a.useState)("new"),d=u[0],f=u[1],E=Object(a.useState)(),b=E[0],y=E[1],v=Object(a.useState)(!1),h=v[0],g=v[1],S=Object(a.useState)(),O=S[0],j=S[1];return l.a.createElement(r.H,null,l.a.createElement(r.d,null,l.a.createElement(r.Y,null,o.title),l.a.createElement(r.S,null,"Select an action"),l.a.createElement(r.P,{height:30}),l.a.createElement(r.r,{msg:O}),l.a.createElement(r.M,{value:d,onChange:f},l.a.createElement(r.v,{caption:"Create New Application",value:"new"}),l.a.createElement(r.v,{caption:"Resume Pending Application",value:"resume"})),l.a.createElement(r.I,{style:{paddingLeft:30}},l.a.createElement(r.X,{caption:"Application Tracking No.",value:b,onChange:y,visibleWhen:"resume"===d,variant:"outlined",fullWidth:!1,required:!0,style:{marginLeft:40},error:p.appno||O,helperText:p.appno||O,size:"small"})),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Cancel",action:t}),l.a.createElement(r.c,{caption:"Next",action:function(){"new"!==d?b?(g(!0),j(null),c.invoke("findCurrentInfo",{appid:b},(function(e,t){e?j(e):t?i.id!==t.orgcode?m({appno:"The application number provided is not for this local government"}):n({appType:d,appno:b,step:t.step}):m({appno:"Application no. does not exist"}),g(!1)}))):m({appno:"Tracking No. is required."}):n({appType:d,appno:b})},loading:h,disableWhen:h}))),l.a.createElement(r.P,{height:50}))},p=function(e){var t=e.partner,n=e.title,o=void 0===n?"New Permit Application":n,i=e.onCancel,c=e.onContinue,s=e.error,p=Object(a.useState)(!1),m=p[0],u=p[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.S,null,o),l.a.createElement(r.P,{height:30}),l.a.createElement(r.r,{msg:s}),l.a.createElement(r.T,null,"Please read thoroughly before proceeding"),l.a.createElement("p",{style:{opacity:.8}},"This online service will require personal information from the applicant, lot owner(s) and professionals involved in this transaction. In compliance with the Data Privacy Act, we are securing your consent that you have been authorized by the aforementioned parties to act on their behalf. The data collected will be stored, processed and used for effectively carrying out legitimate transactions with the local government of ",t.title,". If you do not agree to these terms, you can cancel out by click on the Cancel button. If you agree to these terms, tick on the checkbox and click Continue."),l.a.createElement(r.g,{caption:"Yes, I have read and agree to the terms and conditions",value:m,name:"agreeDisclaimer",onChange:u}),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Cancel",action:i}),l.a.createElement(r.c,{caption:"Continue",action:c,disableWhen:!m})))},m=function(e){var t=e.title,n=e.appno,a=e.onContinue;return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.S,null,void 0===t?"New Permit Application":t),l.a.createElement(r.P,{height:30}),l.a.createElement(r.T,null,"Application created"),l.a.createElement("p",null,"Please take note of the tracking number for this application. This will be your tracking reference for completing and follow up for this application."),l.a.createElement(r.T,null,n),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Continue",action:a})))},u=r.O.lookup("OnlineBuildingPermitService","obo"),d=[{name:"info",caption:"New Building Permit Application"},{name:"email",caption:"Email Verification"},{name:"select-apptype",caption:"Select Application Type"},{name:"project-name",caption:"Project Name"},{name:"confirmation",caption:"Confirmation"},{name:"newapp",caption:"New Application "}],f={new:"New Building Permit Application",renovation:"Building Renovation Permit Application",amendment:"Building Amendment Permit Application"},E=function(e){var t=Object(a.useState)({}),n=t[0],c=t[1],s=(Object(a.useState)(!1),Object(a.useState)(),Object(a.useState)()),E=s[0],b=s[1],y=Object(a.useState)({apptype:"new"}),v=y[0],h=y[1],g=Object(a.useState)(0),S=g[0],O=g[1],j=Object(a.useState)(),P=j[0],x=j[1],k=e.partner,w=e.service,I=e.handler,C=e.onCancel,N=d[S],T=Object(a.useRef)(),A=function(){O((function(e){return e+1}))};return l.a.createElement(r.H,null,"email"===N.name?l.a.createElement(o.g,{title:w.title,visibleWhen:"email"===N.name,showName:!0,onCancel:function(){return O(0)},onVerify:function(e){c(e),A()},partner:k,connection:"obo"}):l.a.createElement(r.d,null,l.a.createElement(r.Y,null,w.title),l.a.createElement(r.I,{visibleWhen:"info"===N.name},l.a.createElement(r.S,null,"New Building Permit Application"),l.a.createElement(r.P,null),l.a.createElement(r.I,{style:{marginLeft:20}},l.a.createElement("h3",null,"Before you begin, please take note of the following:"),l.a.createElement("p",null),l.a.createElement("ol",null,l.a.createElement("li",null,"Register first all professionals involved in the project. If you have not done this yet, select Register Professional in the main menu or click ",l.a.createElement("a",{href:"/partner/"+k.group.name+"_"+k.name+"/obo/registerprofessionals"},"here."),l.a.createElement("p",null)),l.a.createElement("li",null,"Make sure your Tax Declaration No. if valid and is cleared. You can check if from the Realty Tax Online Billing or you can click ",l.a.createElement("a",{href:"/partner/"+k.group.name+"_"+k.name+"/rptis/rptbilling"},"here.")))),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Cancel",action:C}),l.a.createElement(r.c,{caption:"Next",action:A}))),l.a.createElement(r.s,{visibleWhen:"select-apptype"===N.name,context:v,handler:h},l.a.createElement(r.S,null,"Select Application Type"),l.a.createElement(r.P,null),l.a.createElement(r.I,{style:{marginLeft:20}},l.a.createElement(r.M,{name:"apptype"},l.a.createElement(r.v,{caption:"New Construction",value:"new"}),l.a.createElement(r.v,{caption:"Renovation",value:"renovation"}),l.a.createElement(r.v,{caption:"Amendment",value:"amendment"}))),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Back",action:C}),l.a.createElement(r.c,{caption:"Next",action:A}))),l.a.createElement(r.s,{visibleWhen:"project-name"===N.name,context:v,handler:h},l.a.createElement(r.S,null,f[v.apptype]),l.a.createElement(r.P,{height:30}),l.a.createElement(r.T,null,"Project Information"),l.a.createElement("form",{ref:T},l.a.createElement(r.X,{caption:"Project Name",name:"title",required:!0,autoFocus:!0}),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){O((function(e){return e-1}))}}),l.a.createElement(r.c,{caption:"Next",action:function(){T.current.reportValidity()&&A()}})))),l.a.createElement(r.I,{visibleWhen:"confirmation"===N.name},l.a.createElement(p,{partner:k,error:P,onCancel:e.goBack,onContinue:function(){var e=i({},v,{orgcode:k.orgcode||k.id,contact:n,worktypes:[]});u.invoke("create",e,(function(e,t){e?x(e):(b(t.objid),A())}))}})),l.a.createElement(r.I,{visibleWhen:"newapp"===N.name,width:400},l.a.createElement(m,{appno:E,onContinue:function(){I(E)}}))),l.a.createElement(r.P,{height:50}))},b=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],y=["name","caption","showCaption"],v=function(e){var t=e.name,n=e.caption,a=void 0===n?"Lot Ownership":n,o=e.showCaption,s=void 0===o||o,p=c(e,y);return l.a.createElement(l.a.Fragment,null,s&&l.a.createElement(r.T,null,a),l.a.createElement(r.M,i({name:t},p),l.a.createElement(r.v,{caption:"Lot Owned",value:"1"}),l.a.createElement(r.v,{caption:"Leased",value:"0"})))},h=["owner","editable","editableAddress","editableIdEntry","orgcode","onError"],g=["INDIVIDUAL","MULTIPLE","CORPORATION","GOVERNMENT","OTHER"],S=function(e){var t=e.owner,n=e.editable,a=e.editableAddress,i=void 0!==a&&a,s=e.editableIdEntry,p=void 0!==s&&s,m=e.orgcode,u=e.onError,d=void 0===u?function(){}:u,f=c(e,h),E=f.showIdEntry||!1;return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.T,null,f.title||"Lot Owner Information"),l.a.createElement(r.I,null,l.a.createElement(r.X,{caption:"Profile No.",name:"owner.profileno",editable:n}),l.a.createElement(r.h,{items:g,name:"owner.entitytype",caption:"Ownership Type",editable:n}),"INDIVIDUAL"!==t.entitytype&&l.a.createElement(l.a.Fragment,null,l.a.createElement(r.X,{caption:"Lot Owner Name",name:"owner.name",editable:n}),l.a.createElement(r.w,null,"Name of administrator/contact of property owner")),l.a.createElement(r.X,{caption:"Last Name",name:"owner.lastname",editable:n}),l.a.createElement(r.X,{caption:"First Name",name:"owner.firstname",editable:n}),l.a.createElement(r.X,{caption:"Middle Name",name:"owner.middlename",editable:n}),l.a.createElement(o.n,{person:t,orgcode:m,name:"owner",editable:n||i}),E&&l.a.createElement(o.h,{name:"owner.id",onError:d,editable:n||p,dtIssued:t.id?t.id.dtissued:null})))},O=["editable"],j=function(e){var t=e.editable,n=c(e,O);return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.T,null,n.title||"Lot Information"),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"PIN",name:"pin",editable:t}),l.a.createElement(r.X,{caption:"Lot No.",name:"lotno",editable:t}),l.a.createElement(r.X,{caption:"Block No.",name:"blockno",editable:t})),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"Street",name:"street",editable:t}),l.a.createElement(r.X,{caption:"Barangay",name:"barangay",editable:t})),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"TD No.",name:"tdno",editable:t}),l.a.createElement(r.X,{caption:"Title No.",name:"titleno",editable:t})),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"Classification",name:"classcode",editable:t}),l.a.createElement(r.X,{caption:"Area",name:"areasqm",editable:t})))},P={balanceText:{color:"red",fontWeight:"bold",fontSize:"14px",paddingBottom:10},locationContainer:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",marginBottom:10},tdno:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},rpuInfoContainer:{padding:"10px"}},x=r.O.lookup("OboMiscListService","obo"),k={column:{display:"flex",flexDirection:"column",marginLeft:20}},w=r.O.lookup("OboProfessionalService","obo"),I=function(e){var t=e.caption,n=void 0===t?"Search Professional":t,o=e.searchFieldTitle,c=void 0===o?"PRC No.":o,s=e.onSelect,p=e.hideSearchText,m=void 0!==p&&p,u=e.fullWidth,d=void 0===u||u,f=e.role,E=Object(a.useState)({prc:{}}),b=E[0],y=E[1],v=Object(a.useState)(),h=v[0],g=v[1],S=Object(a.useState)(),O=S[0],j=S[1],P=Object(a.useState)(!1),x=P[0],k=P[1],I=Object(a.useState)(!1),C=I[0],N=I[1],T=Object(a.useState)(),A=T[0],W=T[1],R=function(){var e=window.location.pathname;if(!e)return"";var t=e.match(/\/(.*?)\/(.*?)\/(.*)/);return t.length>3?"/"+t[1]+"/"+t[2]+"/obo/registerprofessionals?ref="+window.location.href.match(/\/partner.*/):"/partners"}(),D=function(e){if(w&&b.prc.idno){var t=i({},b,e);w.invoke("getList",t,(function(e,t){e?console.log("ERROR",e):(j(t),0===t.length&&N(!0))}))}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.G,{title:"Invalid Profession",open:x,msg:A,onAccept:function(){return k(!1)}}),l.a.createElement(r.G,{title:"Invalid PRC No. "+b.prc.idno,open:C,msg:A,onAccept:function(){return N(!1)}},l.a.createElement("p",null,"The PRC No. you are looking for is not found in our database. Please register professional first. You can do so by selecting Register Professional in the transaction page under Building Permits. You can also click ",l.a.createElement("a",{href:R},"here")," to register.")),l.a.createElement(r.C,{caption:n,query:b,setQuery:y,searchFieldTitle:c,searchField:"prc.idno",onSelect:function(){var e=h[0];return function(e){if(!f)return!0;var t=f.toLowerCase(),n="";if(!(t.indexOf(e.profession.toLowerCase())>=0)){var a=t.split(",");if(1==a.length)n="Only "+a[0].toLowerCase()+" is allowed.";else{var l=(n="Only "+a.join(", ")+" are allowed.").lastIndexOf(",");n=n.substring(0,l)+" and "+n.substring(l+2)}return W("The profession of the selected professional is invalid. "+n),!1}return!0}(e)?(s(e),!0):(k(!0),!1)},fetchList:D,hideSearchText:m,enableSelect:h&&h.length>0,fullWidth:d},l.a.createElement(r.s,{context:b,handler:y},l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"PRC No.",name:"prc.idno",width:200,variant:"outlined"}),l.a.createElement(r.c,{caption:"Search",action:function(){D({limit:5,start:0})}}))),l.a.createElement(r.V,{items:O,fetchList:D,rowsPerPage:5,showPagination:!1,singleSelect:!0,keyId:"objid",onSelectItems:function(e){g(e)}},l.a.createElement(r.W,{caption:"PRC",expr:"prc.idno"}),l.a.createElement(r.W,{caption:"Name",expr:function(e){return e.lastname+", "+e.firstname+" "+e.middlename}}),l.a.createElement(r.W,{caption:"Profession",expr:"profession"}))))},C=function(e){var t=e.professional,n=void 0===t?{prc:{},ptr:{}}:t,a=e.caption,o=e.onSelectProfessional,c=e.photoUrl,s=e.role,p="";n.lastname&&(p=n.lastname+", "+n.firstname+" "+n.middlename);var m=N.container,u=N.lookupContainer,d=N.caption;return"string"==typeof n.lastname&&(m=i({},m,{backgroundColor:"#d1d7f8"}),u=i({},u,{backgroundColor:"#454f88"}),d=i({},d,{color:"white"})),l.a.createElement("div",{style:m},l.a.createElement(r.I,{style:u},l.a.createElement(r.w,{captionStyle:d,caption:a}),l.a.createElement(I,{hideSearchText:!0,onSelect:o,fullWidth:!1,role:s})),l.a.createElement("div",{style:{marginTop:10,marginBottom:10,padding:10}},l.a.createElement("div",{style:N.nameContainer},l.a.createElement(r.I,null,l.a.createElement(r.w,{labelStyle:N.name},p),l.a.createElement(r.w,{labelStyle:N.profession},n.profession)),l.a.createElement(r.t,{src:c})),l.a.createElement(r.I,{style:N.row},l.a.createElement(r.I,null,l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"PRC ID No."},n.prc.idno),l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"Date Issued"},n.prc.dtissued),l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"Valid Until"},n.prc.dtvalid),l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"Place Issued"},n.prc.placeissued)),l.a.createElement(r.I,null,l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"PTR ID No."},n.ptr.refno),l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"Date Issued"},n.ptr.dtissued),l.a.createElement(r.w,{style:N.label,captionStyle:{width:120},caption:"Place Issued"},n.ptr.placeissued)))))},N={container:{borderWidth:1,borderColor:"#aaa",boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",backgroundColor:"#d1d1d1",borderRadius:5},caption:{fontSize:18,width:"100%"},lookupContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#8b8b8b",paddingTop:5,paddingLeft:10,paddingRight:10,borderRadius:5,minWidth:400},nameContainer:{dipslay:"flex",justifyContent:"space-between",marginBottom:5},name:{fontSize:18,fontWeight:800},profession:{fontSize:14,fontWeight:600,backgroundColor:"#ddddd",width:"100%"},row:{display:"flex",flexDirection:"row",justifyContent:"space-between"},label:{paddingBottom:2}},T=r.O.lookup("OboMiscListService","obo"),A={row:{display:"flex",alignItems:"flex-start"},group:{fontSize:20,fontWeight:700,marginRight:15,paddingTop:8}},W=function(e){var t=e.item;return l.a.createElement(r.I,{style:{paddingBottom:5}},l.a.createElement(r.I,{style:A.row},l.a.createElement("div",{style:A.group},t.objid),l.a.createElement(r.I,null,l.a.createElement(r.T,null,t.title),l.a.createElement("label",null,t.description))))},R={decimal:r.l,integer:r.u,boolean:function(e){return l.a.createElement("div",{style:L.checkInfo},l.a.createElement(r.g,e))}},D=function(e){var t=e.category,n=e.dataType,a=void 0===n?"integer":n,o=e.unit,i=e.name,c=R[a],s=e.caption.toLowerCase();return"boolean"!==a&&(s+=" ("+o.toLowerCase()+")"),l.a.createElement(r.I,null,t&&l.a.createElement(r.w,{style:L.category},t),l.a.createElement("div",{style:L.infoContainer},l.a.createElement("label",null,s),l.a.createElement(c,{name:i,fullWidth:!1,variant:"outlined",size:"small",width:120,style:{flexBasis:100}})))},L={infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20},category:{fontSize:16,fontWeight:600,border:"1px solid #aaa",backgroundColor:"#eee",padding:"2px 10px",margin:"10px 0px"},checkInfo:{width:100,display:"flex",justifyContent:"flex-start",alignItems:"center",borderWidth:1,borderColor:"#aaa",borderRadius:3}},B=function(e){var t=e.url,n=e.open,o=e.onAccept,i=e.onCancel,c=Object(a.useRef)(null);return Object(a.useRef)(),l.a.createElement(r.F,{open:n,caption:"Copy Link",onAccept:function(){o()},onCancel:i,showCancel:!1},l.a.createElement("div",{style:X.container},l.a.createElement("input",{type:"text",ref:c,style:X.url,readOnly:!0,defaultValue:t}),l.a.createElement("p",null),l.a.createElement(r.j,{action:function(){c.current.select(),document.execCommand("copy"),window.getSelection()?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},caption:"Copy"})))},X={container:{display:"flex",flexDirection:"row",alignItems:"center"},url:{minWidth:500,border:"1px solid lightgray",borderRadius:3,height:20,paddingTop:2,paddingBottom:2,color:"#888888"}},q={professionalLookup:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"lightgray"},itemsContainer:{marginLeft:20,display:"flex",flexDirection:"column"},workTypeContainer:{display:"flex",flexDirection:"column",marginLeft:20},reportContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},_={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},ancillaryContainer:{marginRight:15,marginBottom:20},ancillaryItem:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginRight:10,border:"1px solid #aaa"}},F=function(e,t){void 0===t&&(t="");var n=e||{officename:"<OFFICE>",address1:"<ADDRESS1>",address2:"<ADDRESS2>"},a="";a+="Please download and print the "+t+" forms, prepare the ",a+="requirements listed below, and submit at the receiving window of our ",a+=n.officename,a+=" at the ",a+=n.address1,a+=n.address2?", "+n.address2+". ":". ";var l=[];return n.phoneno&&l.push(n.phoneno),n.mobileno&&l.push(n.mobileno),n.email?(l.length>0?(a+="You can email at "+n.email,a+=" or contact us on "+l.join(" or ")):a+="You can email us at "+n.email,a+=" for any inquiries on application."):l.length>0&&(a+="You can contact us on "+l.join(" or ")+" for any inquiries on application."),a},V={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},infoContainer:{display:"flex",flexDirection:"column",marginRight:10,width:"100%"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},H=r.O.lookup("OnlineBuildingPermitService","obo"),M=[{step:0,component:null},{step:1,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,c=e.appService,s=e.moveNextStep,p=Object(a.useState)(!1)[1],m=Object(a.useState)(!1),u=m[0],d=m[1],f=Object(a.useState)("read")[1],E=Object(a.useState)(!1),y=E[0],v=E[1],h=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1,id:{}}),g=h[0],S=h[1],O=Object(a.useRef)();return Object(a.useEffect)((function(){p(!0),d(null),c.invoke("getApplicant",{appid:t},(function(e,n){e?d(e):n?(n.id||(n.id={}),n.appid=t,S(n),f("read")):f("create"),p(!1)}))}),[]),l.a.createElement("form",{ref:O},l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Building Applicant Details"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:u}),l.a.createElement(r.s,{context:g,handler:S},l.a.createElement(r.h,{items:b,name:"entitytype",caption:"Type of Applicant"}),l.a.createElement(r.X,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==g.entitytype}),l.a.createElement(r.P,null),l.a.createElement(r.I,null,l.a.createElement(r.T,null,"Administrator or contact name of applicant"),l.a.createElement(r.X,{caption:"Last Name",name:"lastname",required:!0}),l.a.createElement(r.X,{caption:"First Name",name:"firstname",required:!0}),l.a.createElement(r.X,{caption:"Middle Name",name:"middlename",required:!0}),l.a.createElement(r.X,{caption:"TIN",name:"tin"}),l.a.createElement(r.q,{name:"email",required:!0}),l.a.createElement(r.E,{name:"mobileno",required:!0}),l.a.createElement(r.K,{name:"phoneno"})),l.a.createElement(r.P,null),l.a.createElement(r.T,null,"Applicant Address"),l.a.createElement(r.g,{caption:"Resident",name:"resident",onChange:function(){var e=i({},g,{appid:t,resident:!g.resident,address:{}});S(e)}}),g.resident?l.a.createElement(o.i,{orgcode:n.id,name:"address",caption:"Address"}):l.a.createElement(o.j,{name:"address",caption:"Address"}),l.a.createElement(r.P,null),l.a.createElement(r.T,null,"Proof of Identity"),l.a.createElement(o.h,{name:"id",onError:function(e){v(e)},dtIssued:g.id.dtissued})),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){!y&&O.current.reportValidity()&&(d(null),c.invoke("saveApplicant",g,(function(e,t){e?d(e):s(),p(!1)})))}}))))}},{step:2,name:"rpu",caption:"Real Property Info",component:function(e){var t=e.partner,n=e.appno,o=e.appService,i=e.moveNextStep,c=Object(a.useState)(),s=c[0],p=c[1],m=Object(a.useState)(!1),u=m[0],d=m[1],f=Object(a.useState)("view-rpus"),E=f[0],b=f[1],y=Object(a.useState)(),h=y[0],g=y[1],O=Object(a.useState)([]),x=O[0],k=O[1],w=Object(a.useState)({}),I=w[0],C=w[1],N=Object(a.useState)(!1),T=N[0],A=N[1],W=Object(a.useRef)();Object(a.useEffect)((function(){"view-rpus"===E&&D()}),[E]);var R=function(){g(),p(null),b("initial")},D=function(){o.invoke("getRpus",{appid:n},(function(e,t){e?p(e):k(t)}))};return l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+n),l.a.createElement(r.S,null,"Real Property Information"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:s}),l.a.createElement(r.I,{visibleWhen:"view-rpus"===E},l.a.createElement(r.T,null,"Lot Information"),x.map((function(e){return l.a.createElement(r.I,{style:P.locationContainer,key:e.tdno},l.a.createElement("div",{style:P.tdno},l.a.createElement(r.T,null,"TD No. "+e.tdno)),l.a.createElement("div",{style:P.rpuInfoContainer},l.a.createElement(r.w,{caption:"Title No."},e.titleno),l.a.createElement(r.w,{caption:"PIN"},e.pin),l.a.createElement(r.w,{caption:"Address"},(n=[],(t=e).lotno&&n.push("Lot: "+t.lotno),t.blockno&&n.push("Block: "+t.blockno),t.street&&n.push("Street: "+t.street),t.barangay&&n.push("Barangay: "+t.barangay),n.join(" "))),l.a.createElement(r.w,{caption:"Class"},e.classcode),l.a.createElement(r.w,{caption:"Area"},e.areasqm),l.a.createElement(r.w,{caption:"Owner"},e.owner.name)));var t,n})),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Add Lot Info",action:R}),l.a.createElement(r.c,{caption:"Next",action:function(){p(null),0===x.length?p("Add at least one Lot Information."):i()}}))),l.a.createElement(r.I,{visibleWhen:"initial"===E},l.a.createElement(r.T,null,"Specify the Site Location/Property"),l.a.createElement(r.r,{msg:s}),l.a.createElement(r.P,null),l.a.createElement(r.X,{caption:"Tax Declaration No.",value:h,onChange:g,autoFocus:!0}),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Back to List",action:function(){b("view-rpus")},variant:"text"}),l.a.createElement(r.c,{caption:"Search",action:function(){d(!0),r.O.lookup((t.orgcode||t.id)+":OboOnlineService","obo").invoke("findLocation",{refno:h||newRefno},(function(e,t){e?p(e):(t.owner.resident="local"==t.owner.address.type?1:0,t.owner.address.city&&(t.owner.address.citymunicipality=t.owner.address.city),t.owner.address.municipality&&(t.owner.address.citymunicipality=t.owner.address.municipality),t.owner.ctc={},t.lotowned="1",t.appid=n,"boolean"!=typeof t.bill.ispaid&&(t.bill.ispaid=!0),C(t),b("view-lot")),d(!1)}))},disableWhen:u,loading:u}))),l.a.createElement(r.I,{visibleWhen:"view-lot"===E},l.a.createElement("p",null,"Please check carefully if the information is correct. For any discrepancies, please contact the Assessor's Office before proceeding."),I&&I.bill&&0==I.bill.ispaid&&l.a.createElement("label",{style:P.balanceText},"Note: There is still an unpaid balance of ",l.a.createElement("u",null,"Php ",Object(r.Z)(I.bill.amtdue)),". You can settle this by paying online ",l.a.createElement("a",{href:"/partner/"+t.group.name+"_"+t.name+"/rptis/rptbilling",target:"0"},l.a.createElement("u",null,"here"))),l.a.createElement(r.s,{context:I,handler:C},l.a.createElement(j,{editable:!1}),l.a.createElement(r.P,null),l.a.createElement(S,{name:"owner",orgcode:t.id,owner:I.owner,editable:!0})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:R,caption:"Back"}),l.a.createElement(r.c,{action:function(e){null!==I.bill&&!1===I.bill.ispaid?p("Please settle all unpaid balances first before proceeding"):(p(null),b("edit-owner-info"))},caption:"Next"}))),l.a.createElement(r.I,{visibleWhen:"edit-owner-info"===E},l.a.createElement("form",{ref:W},l.a.createElement("label",null,"Please update the information if necessary"),l.a.createElement(r.s,{context:I,handler:C},l.a.createElement(v,{caption:"Is lot owned or leased?",property:I,name:"lotowned",row:!0,autoFocus:!0}),l.a.createElement(S,{name:"owner",owner:I.owner,orgcode:t.id,editable:!0,showIdEntry:!0,editableAddress:!0,editableIdEntry:!0,onError:function(e){A(e)}})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){return b("view-lot")},caption:"Back"}),l.a.createElement(r.c,{action:function(){!T&&W.current.reportValidity()&&(p(null),o.invoke("saveRpu",I,(function(e,t){e?p(e):(D(),b("view-rpus"))})))},caption:"Next"})))))}},{step:3,name:"location",caption:"Project Location",component:function(e){var t=e.appno,n=e.appService,c=e.moveNextStep,s=Object(o.p)(e.partner.id),p=Object(a.useState)(),m=p[0],u=p[1],d=Object(a.useState)(!1),f=d[0],E=d[1],b=Object(a.useState)({}),y=b[0],v=b[1],h=Object(a.useState)(),g=h[0],S=h[1];return Object(a.useEffect)((function(){E(!0),n.invoke("getLocation",{appid:e.appno},(function(e,t){e?(u(e),E(!1)):t&&t.barangay&&t.barangay.name?(v(t),S(t.barangay.name)):v({})}))}),[]),Object(a.useEffect)((function(){s.length>0&&n.invoke("getRpus",{appid:e.appno},(function(e,t){if(e)u(e);else{var n=t[0],a=y&&y.barangay?y.barangay.name:n.barangay,l=i({},y);y&&y.barangay&&y.barangay.objid||(l.lotno=n.lotno,l.lotarea=n.areasqm,l.blockno=n.blockno,l.street=n.street),l.barangay=s.find((function(e){return e.name===a})),v(l),E(!1)}}))}),[g,s]),f?l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Project Location")):l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Project Location"),l.a.createElement(r.P,null),l.a.createElement(r.I,null,l.a.createElement(r.T,null,"Specify Project Location"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:m}),l.a.createElement(r.s,{context:y,handler:v},l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{name:"lotno",caption:"Lot No."}),l.a.createElement(r.X,{name:"blockno",caption:"Block No."})),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{name:"unitno",caption:"Unit No."}),l.a.createElement(r.X,{name:"bldgno",caption:"Building No."})),l.a.createElement(r.X,{name:"bldgname",caption:"Building Name"}),l.a.createElement(r.X,{name:"street",caption:"Street"}),l.a.createElement(r.X,{name:"subdivision",caption:"Subdivision"}),l.a.createElement(o.a,{barangays:s,name:"barangay",caption:"Barangay"}),l.a.createElement(r.l,{name:"lotarea",caption:"Lot Area (sq.m.)",textAlign:"left"})),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){u(null),n.invoke("saveLocation",i({appid:t},y),(function(e,t){e?u(e):c()}))}}))))}},{step:4,name:"project",caption:"Project Details",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c={appid:t,apptype:"NEW",worktypes:[],numfloors:1,numunits:1,occupancytype:{objid:null,group:{},division:{}}},s=Object(a.useState)(),p=s[0],m=s[1],u=(Object(a.useState)({}),Object(a.useState)(!1)),d=u[0],f=u[1],E=Object(a.useState)("project-detail"),b=E[0],y=E[1],v=Object(a.useState)("group")[0],h=Object(a.useState)(c),g=h[0],S=h[1],O=Object(a.useState)([])[1],j=Object(a.useState)([])[1],P=Object(a.useState)([])[1],w=Object(a.useState)()[1],I=Object(a.useState)([]),C=I[0],N=I[1],T=Object(a.useState)(!1),A=T[0],W=T[1],R=Object(a.useState)({dtproposedconstruction:!1,dtexpectedcompletion:!1}),D=R[0],L=R[1],B=Object(a.useRef)();return Object(a.useEffect)((function(){f(!0),m(null),x.invoke("getWorkTypes",null,(function(e,t){e?m(e):N(t),f(!1)}))}),[]),Object(a.useEffect)((function(){0!==C.length&&(f(!0),m(null),n.invoke("getProjectInfo",{appid:t},(function(e,t){if(e)m(e);else{if(0===t.worktypes.length)t.worktypes=C;else{var n=C.map((function(e){return t.worktypes.find((function(t){return e.objid===t}))?i({},e,{checked:!0}):e}));t.worktypes=n}t.numunits=t.numunits||1,t.numfloors=t.numfloors||1,w(t.contractor),S(t),y("project-detail")}f(!1)})))}),[C]),Object(a.useEffect)((function(){"group"===v?x.invoke("getOccupancyTypeGroups",null,(function(e,t){e?m(e):O(t)})):"division"===v?x.invoke("getOccupancyTypeDivisions",{groupid:g.occupancytype.group.objid},(function(e,t){e?m(e):j(t)})):"type"===v&&x.invoke("getOccupancyTypes",{divisionid:g.occupancytype.division.objid},(function(e,t){e?m(e):P(t)}))}),[v]),d?l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Project Details")):l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Project Details"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:p}),l.a.createElement(r.s,{visibleWhen:"project-detail"===b,context:g,handler:S},l.a.createElement("form",{ref:B},l.a.createElement(r.X,{caption:"Project Title",name:"title",required:!0,autoFocus:!0}),l.a.createElement(r.X,{caption:"Project Description",name:"description",required:!0}),g.occupancytypeid&&l.a.createElement(r.X,{caption:"Occupancy Type",name:"occupancytype.title",required:!0}),l.a.createElement(r.P,null),l.a.createElement(r.u,{caption:"No of Units",name:"numunits",required:!0,fullWidth:!0}),l.a.createElement(r.I,{row:!0},l.a.createElement(r.l,{caption:"Total Floor Area [sq.meter]",name:"totalfloorarea",required:!0,fullWidth:!0,textAlign:"left"}),l.a.createElement(r.l,{caption:"Building Height [meter]",name:"height",required:!0,fullWidth:!0,textAlign:"left"})),l.a.createElement(r.u,{caption:"No. of Storeys",name:"numfloors",required:!0,fullWidth:!0}),l.a.createElement(r.P,null),l.a.createElement(r.l,{caption:"Estimated Cost [Php]",name:"projectcost",required:!0,decimalScale:2,textAlign:"left",fullWidth:!0}),l.a.createElement(r.I,null,l.a.createElement(r.k,{caption:"Proposed Construction Date",name:"dtproposedconstruction",required:!0,helperText:D.dtproposedconstruction?"Date is invalid":"mm/dd/yyyy"}),l.a.createElement(r.k,{caption:"Expected Completion Date",name:"dtexpectedcompletion",required:!0,minDate:g.dtproposedconstruction,helperText:A?"Date should not be before proposed date":"mm/dd/yyyy",onError:function(){W(!0)}})),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){B.current.reportValidity()&&(g.dtproposedconstruction?g.dtexpectedcompletion?Object(r.jb)(g.dtexpectedcompletion,g.dtproposedconstruction)||(L({dtproposedconstruction:!1,dtexpectedcompletion:!1}),W(!1),m(null),n.invoke("update",{appid:t,title:g.title,description:g.description,numunits:g.numunits,totalfloorarea:g.totalfloorarea,height:g.height,numfloors:g.numfloors,projectcost:g.projectcost,dtproposedconstruction:g.dtproposedconstruction,dtexpectedcompletion:g.dtexpectedcompletion},(function(e,t){e?m(e):(m(null),f(!1),y("select-worktype"))}))):L(i({},D,{dtexpectedcompletion:!0})):L(i({},D,{dtproposedconstruction:!0})))}})))),l.a.createElement(r.s,{visibleWhen:"select-worktype"===b,context:g,handler:S},l.a.createElement(r.T,null,"Select Work Types"),l.a.createElement(r.I,{style:k.column},g.worktypes.map((function(e,t){return l.a.createElement(r.g,{key:t,caption:e.name,name:"worktypes["+t+"].checked",value:e.objid})}))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){return y("project-detail")}}),l.a.createElement(r.c,{caption:"Next",action:function(){if(m(null),g.worktypes.findIndex((function(e){return!0===e.checked}))>=0){m(null);var e={appid:t,worktypes:g.worktypes.filter((function(e){return e.checked})).map((function(e){return e.objid}))};n.invoke("update",e,(function(e,t){e?m(p):(f(!1),o())}))}else m("Please check at least one work type.")}}))))}},{step:5,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,i={appid:t,apptype:"NEW"},c=Object(a.useState)(),s=c[0],p=c[1],m=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)(i)),u=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getProjectInfo",{appid:t},(function(e,t){e?p(e):(b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{appid:t,supervisorid:e.objid},(function(t,n){t?p(t):(p(null),b(e))}))};return l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Project Supervisor"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:s}),l.a.createElement(r.I,null,l.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),l.a.createElement(r.P,{height:10}),E&&E.lastname&&l.a.createElement(r.I,null,l.a.createElement(C,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y,role:u.type?u.type.supervisorrole:null})),(!E||!E.lastname)&&l.a.createElement(I,{caption:"Search Professional",onSelect:y,fullWidth:!1}),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){E?o():p("Please select a professional.")},disableWhen:!E||!E.objid}))))}},{step:6,name:"occupancy",caption:"Occupancy Type",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,i=Object(a.useState)(),c=i[0],s=i[1],p=Object(a.useState)(!1),m=p[0],u=p[1],d=Object(a.useState)("select-occupancytype")[0],f=Object(a.useState)("group"),E=f[0],b=f[1],y=Object(a.useState)({}),v=y[0],h=y[1],g=Object(a.useState)([]),S=g[0],O=g[1],j=Object(a.useState)([]),P=j[0],x=j[1],k=Object(a.useState)([]),w=k[0],I=k[1],C=Object(a.useState)(!1)[1],N=Object(a.useState)(!1)[1];return Object(a.useEffect)((function(){u(!0),n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):(h({occupancytype:t.occupancytype}),C(t.occupancytype.objid)),u(!1)}))}),[]),Object(a.useEffect)((function(){"group"===E?(u(!0),T.invoke("getOccupancyTypeGroups",null,(function(e,t){e?s(e):O(t),u(!1)}))):"division"===E?(u(!0),T.invoke("getOccupancyTypeDivisions",{groupid:v.occupancytype.group.objid},(function(e,t){e?s(e):x(t),u(!1)}))):"type"===E&&(u(!0),T.invoke("getOccupancyTypes",{divisionid:v.occupancytype.division.objid},(function(e,t){e?s(e):I(t),u(!1)})))}),[E]),l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+t),l.a.createElement(r.S,null,"Occupancy Type"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:c}),l.a.createElement(r.I,{visibleWhen:"select-occupancytype"===d},l.a.createElement(r.s,{visibleWhen:"group"===E,context:v,handler:h},l.a.createElement(r.T,null,"Select Occupancy Group"),l.a.createElement(r.M,{name:"occupancytype.group.objid",list:S,Control:W}),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){v.occupancytype.group.objid?b("division"):s("Kindly select an occupancy group.")},disableWhen:m,loading:m}))),l.a.createElement(r.s,{visibleWhen:"division"===E,context:v,handler:h},l.a.createElement(r.T,null,"Select Occupancy Group Division"),l.a.createElement(r.M,{name:"occupancytype.division.objid",list:P,Control:W}),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Back",action:function(){return b("group")}}),l.a.createElement(r.c,{caption:"Next",action:function(){v.occupancytype.division.objid?b("type"):s("Kindly select an occupancy division group.")},disableWhen:m,loading:m}))),l.a.createElement(r.s,{visibleWhen:"type"===E,context:v,handler:h},l.a.createElement(r.T,null,"Select Occupancy Type"),l.a.createElement(r.M,{name:"occupancytype.objid",list:w,Control:W}),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Back",action:function(){return b("division")}}),l.a.createElement(r.c,{caption:"Next",action:function(){v.occupancytype.objid?(u(!0),n.invoke("updateOccupancyType",{appid:t,occupancytype:v.occupancytype},(function(e,t){e?s(e):(s(null),u(!1),N(!1),o()),u(!1)}))):s("Kindly select an occupancy type.")},disableWhen:m,loading:m})))))}},{step:7,name:"accessories",caption:"Accessories",component:function(e){var t=e.moveNextStep;return Object(a.useEffect)((function(){t()}),[]),null},visible:!1},{step:8,name:"ancillarylist",caption:"Other Permits",component:function(e){var t,n,o,c,s=e.partner,p=e.appno,m=e.appService,u=e.moveNextStep,d=e.history,f=Object(a.useState)(!1),E=f[0],b=f[1],y=Object(a.useState)(),v=y[0],h=y[1],g=Object(a.useState)(!1),S=g[0],O=g[1],j=Object(a.useState)("permit-list"),P=j[0],x=j[1],k=Object(a.useState)([]),w=k[0],I=k[1],N=Object(a.useState)([]),T=N[0],A=N[1],W=Object(a.useState)({worktypes:[],type:{}}),R=W[0],L=W[1],X=Object(a.useState)(!1),_=X[0],F=X[1],V=Object(a.useState)(),H=V[0],M=V[1],z=Object(a.useState)(),Y=z[0],G=z[1];Object(a.useEffect)((function(){var e=Object(r.eb)(d.location,"permitid");e&&(M(e),Q({objid:e}))}),[]),Object(a.useEffect)((function(){U()}),[T]),Object(a.useEffect)((function(){K()}),[P,E]);var U=function(){O(!0),m.invoke("getAvailableAncillaryPermitTypes",{appid:p},(function(e,t){e?h(e):I(t),O(!1)}))},K=function(){O(!0),m.invoke("getAncillaryPermits",{appid:p},(function(e,t){e?h(e):(A(t),E||0!==t.length||(b(!0),x("available-list"))),O(!1)}))},Q=function(e){O(!0),m.invoke("getAncillaryPermit",{objid:e.objid},(function(e,t){e?h(e):(h(null),function(e){O(!0),r.O.lookup("OboMiscListService","obo").invoke("getWorkTypes",{typeid:e.type.objid},(function(t,n){t?h(t):n&&n.length>0?(n.forEach((function(t){e.worktypes.findIndex((function(e){return e.toLowerCase()===t.name.toLowerCase()}))>=0&&(t.checked=!0)})),L(i({},e,{worktypes:n})),x("select-worktypes")):(x(e.infos.length>0?"infos":1===e.type.includecost?"cost":"professional"),L(e)),O(!1)}))}(t)),O(!1)}))},Z=!1;T.length>0&&(Z=T.findIndex((function(e){return!e.designprofessionalid}))>=0);var J=null;return l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+p),l.a.createElement(r.S,null,"Other Permits"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:v}),l.a.createElement(B,{url:Y,open:_,onAccept:function(){return F(!1)}}),H&&l.a.createElement("div",null,l.a.createElement("div",{style:q.reportContainer},l.a.createElement(r.L,{caption:"Preview Application",href:"/jreports/partner/"+s.group.name+"_"+s.name+"/obo/building_permit?refid="+p})),l.a.createElement(r.P,null)),l.a.createElement(r.I,{visibleWhen:"permit-list"===P&&!H},l.a.createElement("label",null,"Click on edit ",l.a.createElement(r.p,{fontSize:"small",color:"primary"})," for each document and complete the details."),l.a.createElement(r.P,{height:40}),T.map((function(e){var t=window.location,n=""+t.origin+t.pathname+"?appid="+p+"&permitid="+e.objid+"&mode=select-worktypes#ancillarylist";return l.a.createElement(r.I,{key:e.objid,style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},l.a.createElement(r.I,{row:!0},e.designprofessionalid?l.a.createElement("div",{style:{width:40}},l.a.createElement(r.f,{style:{color:"green",paddingRight:10}})):l.a.createElement("div",{style:{width:40}}),l.a.createElement("label",null,e.type.title)),l.a.createElement(r.I,{row:!0},e.designprofessionalid&&l.a.createElement(r.L,{caption:null,href:"/jreports/partner/"+s.group.name+"_"+s.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),l.a.createElement(r.o,{action:function(){return Q(e)},size:"small"}),l.a.createElement(r.m,{action:function(){return t=e,O(!0),void m.invoke("removeAncillaryPermit",{objid:t.objid},(function(e,t){e?h(e):(h(null),K()),O(!1)}));var t},size:"small"}),l.a.createElement(r.z,{action:function(){return G(n),void F(!0)},size:"small"})))})),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Add New Permits",action:function(){return x("available-list")}}),l.a.createElement(r.c,{caption:"Next",action:function(){var e=[];T.forEach((function(t){t.designprofessionalid||e.push(t.type.title)})),1===e.length?h("Permit "+e[0]+" is not processed"):e.length>1?h("The following permist are not processed: "+e.join(",")):u()},disableWhen:Z}))),l.a.createElement(r.s,{visibleWhen:"select-worktypes"===P,context:R,handler:L},l.a.createElement("h4",null,R.type.title),l.a.createElement(r.T,null,"Select Work Types"),l.a.createElement(r.I,{style:q.workTypeContainer},R.worktypes.map((function(e,t){return l.a.createElement(r.g,{caption:e.name.toUpperCase(),name:"worktypes["+t+"].checked",value:e.name})}))),l.a.createElement(r.a,null,H?l.a.createElement("div",null):l.a.createElement(r.b,{action:function(){return x("permit-list")}}),l.a.createElement(r.c,{caption:"Next",action:function(){h(null),h(null),O(!0);var e={objid:R.objid,worktypes:R.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))};m.invoke("updateAncillaryPermit",e,(function(e,t){e?h(v):(x("infos"),O(!1)),O(!1)}))},disableWhen:S,loading:S}))),l.a.createElement(r.s,{visibleWhen:"infos"===P,context:R,handler:L},l.a.createElement(r.T,null,null===(t=R.type)||void 0===t?void 0:t.title),l.a.createElement("p",null,"Please fill the applicable values and click Save and Complete when done."),R.infos&&R.infos.map((function(e,t){var n=null;return null!==J&&J.category===e.category||(n=e.category,J=e),l.a.createElement(D,{key:e.name+":"+t,name:"infos["+t+"].value",category:n,dataType:e.datatype,caption:e.caption,unit:e.unit})})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){x(R.worktypes&&R.worktypes.length>0?"select-worktypes":"permit-list")}}),l.a.createElement(r.c,{caption:"Next",action:function(){O(!0),m.invoke("updateAncillaryPermit",{objid:R.objid,projectcost:R.projectcost,equipmentcost:R.equipmentcost},(function(e,t){e?h(e):x(1===R.type.includecost?"cost":"professional"),O(!1)}))},disableWhen:S,loading:S}))),l.a.createElement(r.I,{visibleWhen:"available-list"===P},l.a.createElement(r.T,null,"Select ancillary and other permits to include in the project"),l.a.createElement(r.s,{context:w,handler:I,style:q.itemsContainer},w.map((function(e,t){return l.a.createElement(r.g,{key:e.objid,caption:e.title,name:"["+t+"].selected"})}))),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){var e=w.filter((function(e){return!0===e.selected}));e.length>0?(O(!0),A(e),m.invoke("saveAncillaryPermits",{appid:p,permits:e},(function(e,t){e?h(e):(h(null),x("permit-list")),O(!1)}))):x("permit-list")},disableWhen:S,loading:S}))),l.a.createElement(r.s,{visibleWhen:"cost"===P,context:R,handler:L},l.a.createElement(r.T,null,null===(n=R.type)||void 0===n?void 0:n.title),l.a.createElement(r.l,{name:"projectcost",caption:"Project Cost",textAlign:"left",fullWidth:!1}),l.a.createElement(r.l,{name:"equipmentcost",caption:"Equipment Cost",textAlign:"left"}),l.a.createElement(r.P,null),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){return x("infos")}}),l.a.createElement(r.c,{caption:"Next",action:function(){O(!0),h(null),m.invoke("saveAncillaryPermit",{appid:p,objid:R.objid,infos:R.infos},(function(e,t){e?h(e):x("professional"),O(!1)}))},disableWhen:S,loading:S}))),l.a.createElement(r.s,{visibleWhen:"professional"===P,context:R,handler:L},l.a.createElement(r.T,null,null===(o=R.type)||void 0===o?void 0:o.title),l.a.createElement(r.P,null),l.a.createElement(C,{caption:"Design Professional",professional:R.designprofessional,onSelectProfessional:function(e){L(i({},R,{designprofessional:e,designprofessionalid:e.objid}))},role:R.type.designprofessionalrole}),l.a.createElement(r.P,null),l.a.createElement(C,{caption:"Supervisor in Charge Professional",professional:R.supervisor,onSelectProfessional:function(e){L(i({},R,{supervisor:e,supervisorid:e.objid}))},role:R.type.supervisorrole}),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){return x("permit-list")}}),l.a.createElement(r.c,{caption:"Save and Complete",action:function(){if(h(null),R.designprofessionalid)if(R.supervisorid){O(!0);var e=i({},R,{worktypes:R.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))});m.invoke("saveAncillaryPermit",e,(function(e,t){e?h(e):x(H?"ancillary-submitted":"permit-list"),O(!1)}))}else h("Supervisor is required.");else h("Design Professional is required.")},disableWhen:S,loading:S}))),l.a.createElement(r.I,{visibleWhen:"ancillary-submitted"===P},l.a.createElement(r.T,null,null===(c=R.type)||void 0===c?void 0:c.title),l.a.createElement(r.P,null),l.a.createElement("p",null,"Your changes has been succcessfully submitted. ",l.a.createElement("br",null)," Thank you for using this service.")))}},{step:9,name:"confirm",caption:"Confirm",component:function(e){var t=e.partner,n=e.appno,o=e.appService,i=e.moveNextStep,c=Object(a.useState)(!1),s=c[0],p=c[1],m=Object(a.useState)()[1],u=Object(a.useState)(!1),d=u[0],f=u[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)([]),h=v[0],g=v[1],S=(Object(a.useState)(!1),function(){m(null),f(!1)});return Object(a.useEffect)((function(){f(!0),o.invoke("getApplication",{appid:n},(function(e,t){e?m(e):(y(t),S())})),f(!0),o.invoke("getAncillaryPermits",{appid:n},(function(e,t){e?m(e):(g(t),S())}))}),[]),l.a.createElement(r.I,null,l.a.createElement("label",null,"Tracking No. "+n),l.a.createElement(r.S,null,"Confirm Application"),l.a.createElement(r.P,null),l.a.createElement(r.G,{open:s,type:"confirm",msg:"Permit processing will now be completed. Make sure that all information are correct.",onAccept:function(){p(!1),i("END")},onCancel:function(){return p(!1)}}),l.a.createElement(r.B,{visibleWhen:d}),l.a.createElement("p",null,"Please confirm the info and preview each permit application before submitting"),l.a.createElement(r.s,{visibleWhen:!d,context:b,handler:y},l.a.createElement(r.I,{style:_.container},l.a.createElement(r.I,{style:_.linkContainer},l.a.createElement(r.L,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n}),l.a.createElement(r.n,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n})),l.a.createElement(r.I,null,l.a.createElement(r.X,{caption:"Tracking No.",name:"objid",readOnly:!0}),l.a.createElement(r.X,{caption:"Project Title",name:"title",readOnly:!0}),l.a.createElement(r.X,{caption:"Project Location",expr:function(){if(!b.location)return"";var e=[];return b.location.lotno&&e.push("Lot: "+b.location.lotno),b.location.blockno&&e.push("Block: "+b.location.blockno),b.location.street&&e.push("Street: "+b.location.street),b.location.barangay.name&&e.push("Barangay: "+b.location.barangay.name),e.join(" ")},readOnly:!0}),l.a.createElement(r.P,null),l.a.createElement(r.X,{caption:"Applicant",name:"applicant.name",readOnly:!0}),l.a.createElement(r.X,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),l.a.createElement(r.X,{caption:"Type of Work",expr:function(){var e,t="";return b.worktypes&&b.worktypes.length>0&&(t=null===(e=b.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0}),l.a.createElement(r.X,{caption:"Supervisor in Charge of Construction",expr:function(){var e="";return b.contractor&&(e=b.contractor.lastname+", "+b.contractor.firstname+" "+b.contractor.middlename),e},readOnly:!0})),l.a.createElement(r.I,null,l.a.createElement(r.I,{row:!0},l.a.createElement(r.u,{caption:"No. of Units",name:"numunits",readOnly:!0}),l.a.createElement(r.u,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),l.a.createElement(r.l,{caption:"Bldg. Height",name:"height",readOnly:!1,textAlign:"left"})),l.a.createElement(r.P,null),l.a.createElement(r.I,{row:!0},l.a.createElement(r.l,{caption:"Total Area (sqm)",name:"totalfloorarea",readOnly:!0,textAlign:"left",fullWidth:!0}),l.a.createElement(r.l,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left",fullWidth:!0})),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),l.a.createElement(r.X,{caption:"Est. Completion Date",name:"dtexpectedcompletion",readOnly:!0})))),l.a.createElement(r.P,null),l.a.createElement(r.I,{style:_.ancillaryContainer},l.a.createElement(r.T,{style:_.label},"Other Permits"),l.a.createElement(r.I,{visibleWhen:h.length>0},h.map((function(e,n){return l.a.createElement(r.I,{style:_.ancillaryItem,key:n},l.a.createElement("label",{style:{marginLeft:20}},e.type.title),l.a.createElement(r.I,{row:!0},l.a.createElement(r.L,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),l.a.createElement(r.n,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid})))})))),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Submit",action:function(){p(!0)}}))))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.partner,n=e.appno,o=e.appService,i=e.history,c=Object(a.useState)(),s=c[0],p=c[1],m=Object(a.useState)(!1)[1],u=Object(a.useState)({}),d=u[0],f=u[1],E=Object(a.useState)(),b=E[0],y=E[1],v=Object(a.useState)([]),h=v[0],g=v[1],S=function(){p(null),m(!1)};Object(a.useEffect)((function(){m(!0),o.invoke("getProjectInfo",{appid:n},(function(e,t){e?p(e):(f(t),S())})),m(!0),o.invoke("getRequirements",{appid:n},(function(e,t){e?p(e):(y(t.text),S())})),m(!0),o.invoke("getDocsForDownload",{appid:n},(function(e,t){e?p(e):(g(t),S())}))}),[]);var O=[];d.location&&(d.location.lotno&&O.push("Lot: "+d.location.lotno),d.location.blockno&&O.push("Block: "+d.location.blockno),d.location.street&&O.push("Street: "+d.location.street),d.location.barangay.name&&O.push("Barangay: "+d.location.barangay.name));var j=F(d.obocontactinfo,"Building and Ancillary Permit");return l.a.createElement(r.I,null,l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:s}),l.a.createElement(r.s,{context:d,handler:f},l.a.createElement("label",null,j),l.a.createElement(r.P,{height:10}),l.a.createElement(r.I,{style:V.container},l.a.createElement(r.I,{style:V.infoContainer},l.a.createElement(r.X,{caption:"Tracking No.",name:"objid",readOnly:!0}),l.a.createElement(r.X,{caption:"Project Title",name:"title",readOnly:!0}),l.a.createElement(r.X,{caption:"Location",expr:function(){return O.join(" ,")},readOnly:!0}),l.a.createElement(r.X,{caption:"Applicant",name:"applicant.name",readOnly:!0}),l.a.createElement(r.l,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left"}),l.a.createElement(r.I,{row:!0},l.a.createElement(r.k,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),l.a.createElement(r.k,{caption:"Est. End Date",name:"dtexpectedcompletion",readOnly:!0}))))),l.a.createElement(r.P,null),h.length>0&&function(e,t){var n=t.map((function(t){return l.a.createElement(r.I,{key:t.reportid,style:V.document},l.a.createElement("label",{style:{marginLeft:20}},t.title),l.a.createElement(r.I,{row:!0},l.a.createElement(r.L,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),l.a.createElement(r.n,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Documents for Download:"),l.a.createElement(r.P,{height:10}),l.a.createElement(r.I,{style:{margin:"0px 20px"}},n))}(t,h),l.a.createElement(r.P,null),l.a.createElement("h3",null,"List of Requirements:"),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:b}}),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Return",action:function(){return i.push("/partner/"+t.group.name+"_"+t.name+"/services")}})))}}],z=function(e){var t=Object(a.useState)(!1),n=t[0],o=t[1],c=Object(a.useState)(!1),p=c[0],m=c[1],u=Object(a.useState)("init"),d=u[0],f=u[1],b=Object(a.useState)(Object(r.eb)(e.location,"appid")),y=b[0],v=b[1],h=Object(a.useState)(),g=h[0],S=h[1],O=Object(a.useState)({step:1}),j=O[0],P=O[1],x=Object(a.useState)(1),k=x[0],w=x[1],I=Object(a.useState)(!0),C=I[0],N=I[1],T=e.partner,A=e.service,W=e.history;g!==e.location.hash&&S(e.location.hash);var R=function(){"init"===d&&(f("apptype"),e.history.push(""+location.pathname))};Object(a.useEffect)((function(){y?(o(!0),H.invoke("findCurrentInfo",{appid:y},(function(t,n){var a=T.orgcode||T.id;if(t)m(t);else if(n)if(a!=n.orgcode)m("The application number provided is not for this local government"),R();else if(P(n),f("processing"),Object(r.eb)(W.location,"permitid")){var l=Object(r.eb)(W.location,"mode");f(l||"applicant");var i=M.find((function(e){return e.name===W.location.hash.substring(1)}));w(i?i.step:1),N(!1),e.history.push(""+location.pathname+location.search+location.hash)}else w(n.step),e.history.push(location.pathname+"?appid="+y+"#"+M[n.step].name);else m("Application no. does not exist"),R();o(!1)}))):f("apptype")}),[y]),Object(a.useEffect)((function(){if(g){var e=M.find((function(e){return e.name===g.substring(1)}));w(e.step)}}),[g]);var D=function(t){w(t),e.history.push(location.pathname+"?appid="+y+"#"+M[t].name)};if("init"===d||n)return l.a.createElement("div",null,l.a.createElement(r.x,null));if("apptype"===d)return l.a.createElement(s,{partner:T,appService:H,service:A,error:p,onCancel:W.goBack,onSubmit:function(e){var t=e.appType,n=e.appno;"new"===t?f(t):n&&v(n)}});if("new"===d)return l.a.createElement(E,i({},e,{handler:function(e){v(e),f("processing")},onCancel:function(){return e.history.goBack()}}));var L=M[k],B=L.component,X={partner:T,appno:y,pages:M,moveNextStep:function(e){k<j.step&&1!==j.step?(w(j.step),D(j.step)):H.invoke("update",{appid:y,state:e,step:k+1},(function(e,t){e?m(e):(w(t.step),P(i({},j,{step:t.step})),D(t.step))}))},appService:H,stepCompleted:k<j.step,history:e.history};return l.a.createElement(r.H,null,C&&j.step<M.length&&"completed"!==L.name&&l.a.createElement(r.I,{target:"left",style:Y.stepperContainer},l.a.createElement(r.R,{steps:M,completedStep:j.step>7?j.step-1:j.step,activeStep:k,handleStep:D})),l.a.createElement(r.d,null,l.a.createElement(r.Y,null,A.title),l.a.createElement(B,i({page:L},X))),l.a.createElement(r.P,{height:50}))},Y={stepperContainer:{paddingLeft:40,marginBottom:50,overflowY:"auto",overflowX:"hidden",height:"80vh"}},G=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],U=[{name:"email",title:"Email Verification"},{name:"specifybldgpermit",title:"Specify Building Permit"},{name:"verifybldgpermit",title:"Verify Building Permit Information"},{name:"confirmation",title:"Confirmation"},{name:"newapp",title:"New Application "}],K=function(e){var t=e.partner,n=e.service,i=e.onComplete,c=e.appService,s=e.onCancel,u=Object(a.useState)(),d=u[0],f=u[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)({}),h=v[0],g=v[1],S=Object(a.useState)("new")[0],O=Object(a.useState)(),j=O[0],P=O[1],x=Object(a.useState)(),k=x[0],w=x[1],I=Object(a.useState)({}),C=I[0],N=I[1],T=Object(a.useState)(0),A=T[1],W=U[T[0]],R=function(){A((function(e){return e+1}))},D=function(){A((function(e){return e-1}))};return l.a.createElement(r.H,null,"email"===W.name?l.a.createElement(o.g,{title:n.title,showName:!0,onCancel:s,onVerify:function(e){g(e),R()},partner:t,connection:"obo"}):l.a.createElement(r.d,null,l.a.createElement(r.Y,null,n.title),l.a.createElement(r.I,{visibleWhen:"specifybldgpermit"===W.name},l.a.createElement(r.S,null,W.title),l.a.createElement(r.P,{height:30}),l.a.createElement(r.X,{caption:"Building Permit No.",value:k,onChange:w,variant:"outlined",fullWidth:!1,required:!0,error:b.bldgPermitNo||d,helperText:b.bldgPermitNo||d,size:"small",autoFocus:!0}),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:D}),l.a.createElement(r.c,{caption:"Next",action:function(){k?(f(null),r.O.lookup(t.id+":OboOnlineService","obo").invoke("findBldgPermitNo",{permitno:k},(function(e,t){e?f(e):(N(t),R())}))):y({bldgPermitNo:"Please specify the Building Permit No."})}}))),l.a.createElement(r.s,{visibleWhen:"verifybldgpermit"===W.name,context:C,handler:N},l.a.createElement(r.S,null,"Verify Building Permit Information"),l.a.createElement(r.P,{height:30}),l.a.createElement(r.X,{caption:"Building Permit No.",name:"permitno",readOnly:!0}),l.a.createElement(r.X,{caption:"Applicant",name:"applicant.name",readOnly:!0}),l.a.createElement(r.P,null),l.a.createElement(r.X,{caption:"Project Title",name:"title",readOnly:!0}),l.a.createElement(r.X,{caption:"Location",name:"location.text",readOnly:!0}),l.a.createElement(r.l,{caption:"Project Cost",name:"projectcost",readOnly:!0}),l.a.createElement(r.u,{caption:"No. of Units",name:"numunits",readOnly:!0}),l.a.createElement(r.u,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),l.a.createElement(r.l,{caption:"Total Floor Area",name:"totalfloorarea",readOnly:!0}),l.a.createElement(r.l,{caption:"Height",name:"height",readOnly:!0}),l.a.createElement(r.k,{caption:"Proposed Construction Date",name:"dtproposedconstruction",readOnly:!0}),l.a.createElement(r.k,{caption:"Expected Completion Date",name:"dtexpectedcompletion",readOnly:!0}),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:D}),l.a.createElement(r.c,{caption:"Next",action:function(){R()}}))),l.a.createElement(r.I,{visibleWhen:"confirmation"===W.name},l.a.createElement(p,{partner:t,error:d,onCancel:D,onContinue:function(){c.invoke("create",{orgcode:t.id,apptype:S,permittype:C.apptype,applicant:C.applicant,bldgpermit:C,contact:h},(function(e,t){e?f(e):(P(t.objid),R())}))}})),l.a.createElement(r.I,{visibleWhen:"newapp"===W.name,width:400},l.a.createElement(m,{appno:j,onContinue:function(){i({appType:"new",appno:j})}}))),l.a.createElement(r.P,{height:50}))},Q={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},columnTitle:{fontWeight:"bold",textAlign:"center",width:300,padding:10},row:{display:"flex",flexDirection:"row",alignItems:"flex-start"},label:{width:"100%"},item:{width:400,marginRight:10}},Z={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},J={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},$={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"}},ee={container:{padding:"0px 30px"},label:{fontWeight:"bold"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},te=r.O.lookup("OnlineOccupancyPermitService","obo"),ne=[{step:0,component:null},{step:1,name:"apptype",caption:"Application Type",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,i=Object(a.useState)(),c=i[0],s=i[1],p=(Object(a.useState)(!1),Object(a.useState)({})),m=p[0],u=p[1];return Object(a.useEffect)((function(){s(null),n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):u(t)}))}),[]),l.a.createElement(r.I,null,l.a.createElement(r.r,{msg:c}),l.a.createElement(r.s,{context:m,handler:u},l.a.createElement(r.M,{name:"apptype"},l.a.createElement(r.v,{caption:"Full (Completed)",value:"full"}),l.a.createElement(r.v,{caption:"Partial",value:"partial"}))),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){n.invoke("update",{objid:m.objid,apptype:m.apptype},(function(e,t){e?s(e):o()}))}})))}},{step:2,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,c=e.appService,s=e.movePrevStep,p=e.moveNextStep,m=Object(a.useState)(!1),u=m[0],d=m[1],f=Object(a.useState)(!1),E=f[0],b=f[1],y=Object(a.useState)("read")[1],v=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1}),h=v[0],g=v[1],S=Object(a.useRef)();return Object(a.useEffect)((function(){d(!0),b(null),c.invoke("getApplicant",{appid:t},(function(e,t){e?b(e):g(t||{}),d(!1),y("read")}))}),[]),l.a.createElement(r.I,null,l.a.createElement(r.r,{msg:E}),l.a.createElement(r.s,{context:h,handler:g},l.a.createElement("form",{ref:S},l.a.createElement(r.h,{items:G,name:"entitytype",caption:"Type of Applicant"}),l.a.createElement(r.X,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==h.entitytype}),l.a.createElement(r.P,null),l.a.createElement(r.I,null,l.a.createElement(r.T,null,"Administrator or contact name of applicant"),l.a.createElement(r.X,{caption:"Last Name",name:"lastname",required:!0}),l.a.createElement(r.X,{caption:"First Name",name:"firstname",required:!0}),l.a.createElement(r.X,{caption:"Middle Name",name:"middlename",required:!0}),l.a.createElement(r.q,{name:"email"}),l.a.createElement(r.E,{name:"mobileno"})),l.a.createElement(r.P,null),l.a.createElement(r.T,null,"Applicant Address"),l.a.createElement(r.g,{caption:"Resident",name:"resident",onChange:function(){var e=i({},h,{resident:!h.resident,address:{}});g(e)}}),h.resident?l.a.createElement(o.i,{orgcode:n.id,name:"address",caption:"Address",isResident:h.resident}):l.a.createElement(o.j,{name:"address",caption:"Address"}),l.a.createElement(r.P,null),l.a.createElement(r.T,null,"Proof of Identity"),l.a.createElement(o.h,{name:"id"}))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:s}),l.a.createElement(r.c,{caption:"Next",action:function(){S.current.reportValidity()&&(h.resident&&h.address&&!h.address.barangay||(b(null),d(!0),c.invoke("saveApplicant",h,(function(e,t){e?b(e):p(),d(!1)}))))},disableWhen:u,loading:u})))}},{step:3,name:"actualcost",caption:"Actual Costs",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c=e.movePrevStep,s=Object(a.useState)(),p=s[0],m=s[1],u=Object(a.useState)({}),d=u[0],f=u[1],E=Object(a.useState)({items:[{caption:"Total Materials Cost",field:"totalmaterialcost",value:0},{caption:"Total Direct Cost",field:"totaldirectlaborcost",value:0},{caption:"Total Equipment Cost",field:"totalequipmentcost",value:0},{caption:"Total Other Cost",field:"totalothercost",value:0}]}),b=E[0],y=E[1],v=Object(a.useState)(!1),h=v[0],g=v[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){if(e)m(e);else{f(t);var n=i({},b);n.items.forEach((function(e){e.value=t[e.field]})),y(n)}}))}),[t]),l.a.createElement(r.I,{style:{maxWidth:600}},l.a.createElement(r.w,null,"Please indicate the actual cost of construction."),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:p}),l.a.createElement(r.s,{context:b,handler:y,style:Z.container},b.items.map((function(e,t){return l.a.createElement(r.I,{key:e.field,style:Z.row},l.a.createElement(r.w,{caption:e.caption,style:Z.label}),l.a.createElement(r.l,{name:"items["+t+"].value",variant:"outlined",style:Z.item,fullWdith:!1}))}))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:c}),l.a.createElement(r.c,{caption:"Next",action:function(){var e=i({},d);b.items.forEach((function(t){e[t.field]=t.value?t.value:0})),g(!0),n.invoke("update",e,(function(e,t){e?m(e):o(),g(!1)}))},disableWhen:h,loading:h})))}},{step:4,name:"firecodefee",caption:"Fire Code Fees",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c=e.movePrevStep,s=Object(a.useState)(!1),p=s[0],m=s[1],u=Object(a.useState)(),d=u[0],f=u[1],E=(Object(a.useState)({}),Object(a.useState)({items:[]})),b=E[0],y=E[1];return Object(a.useEffect)((function(){n.invoke("getAppInfos",{appid:t},(function(e,t){e?f(e):y(i({},b,{items:t}))}))}),[t]),l.a.createElement(r.I,{style:{maxWidth:600}},l.a.createElement(r.w,null,"Please indicate the other cost of construction."),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:d}),l.a.createElement(r.s,{context:b,handler:y,style:J.container},b.items.map((function(e,t){return l.a.createElement(r.I,{key:e.objid,style:J.row},l.a.createElement(r.w,{caption:e.caption,style:J.label}),l.a.createElement(r.l,{name:"items["+t+"].value",variant:"outlined",style:J.item,fullWdith:!1}))}))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:c}),l.a.createElement(r.c,{caption:"Next",action:function(){m(!0);var e=b.items.map((function(e){var t=i({},e);return t.value||(t.value=0),t}));n.invoke("saveAppInfos",{appid:t,infos:e},(function(e,t){e?f(e):o(),m(!1)}))},disableWhen:p,loading:p})))}},{step:5,name:"plannedactual",caption:"Planned vs Actual",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c=e.movePrevStep,s=Object(a.useState)()[1],p=Object(a.useState)(!1),m=p[0],u=p[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)({}),y=b[0],v=b[1],h=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):v(t)}))}),[t]),l.a.createElement(r.I,{style:{maxWidth:600}},l.a.createElement(r.w,null,"Please indicate the actual values of construction."),l.a.createElement(r.P,null),l.a.createElement(r.s,{context:y,handler:v,style:Q.container},l.a.createElement("form",{ref:h},l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"",style:Q.label}),l.a.createElement("div",{style:Q.columnTitle},"Planned"),l.a.createElement("div",{style:Q.columnTitle},"Actual")),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"Project Total Cost",style:Q.label}),l.a.createElement(r.l,{name:"bldgpermit.projectcost",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.l,{name:"actualprojectcost",disabled:!0,style:Q.item,fullWdith:!1,variant:"outlined"})),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"Total Floor Area (sqm)",style:Q.label}),l.a.createElement(r.l,{name:"bldgpermit.totalfloorarea",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.l,{name:"actualtotalfloorarea",required:!0,style:Q.item,fullWdith:!1,variant:"outlined",autoFocus:!0})),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"No. of Units",style:Q.label}),l.a.createElement(r.l,{name:"bldgpermit.numunits",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.l,{name:"actualnumunits",style:Q.item,fullWdith:!1,variant:"outlined",required:!0})),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"No. of Floors",style:Q.label}),l.a.createElement(r.l,{name:"bldgpermit.numfloors",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.l,{name:"actualnumfloors",style:Q.item,fullWdith:!1,variant:"outlined",required:!0})),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"Height (m)",style:Q.label}),l.a.createElement(r.l,{name:"bldgpermit.height",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.l,{name:"actualheight",style:Q.item,fullWdith:!1,variant:"outlined",required:!0})),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"Start Date",style:Q.label}),l.a.createElement(r.k,{name:"bldgpermit.dtproposedconstruction",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.k,{name:"dtactualstarted",style:Q.item,fullWdith:!1,variant:"outlined",required:!0})),l.a.createElement(r.I,{style:Q.row},l.a.createElement(r.w,{caption:"Completion Date",style:Q.label}),l.a.createElement(r.k,{name:"bldgpermit.dtexpectedcompletion",disabled:!0,variant:"outlined",style:Q.item,fullWdith:!1}),l.a.createElement(r.k,{name:"dtactualcompleted",style:Q.item,fullWdith:!1,variant:"outlined",required:!0,error:f.dtactualcompleted,helperText:f.dtactualcompleted})),l.a.createElement(r.P,null))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:c}),l.a.createElement(r.c,{caption:"Next",action:function(){if(h.current.reportValidity()&&function(){var e={};return y.dtactualstarted&&y.dtactualcompleted&&Object(r.jb)(y.dtactualcompleted,y.dtactualstarted)&&(e.dtactualcompleted="Actual date completed should be after actual date started."),Object(r.gb)(e)?(E(e),!1):(E({}),!0)}()){u(!0);var e=i({},y);e.actualprojectcost||(e.actualprojectcost=0),e.actualtotalfloorarea||(e.actualtotalfloorarea=0),e.actualnumunits||(e.actualnumunits=0),e.actualnumfloors||(e.actualnumfloors=0),e.actualheight||(e.actualheight=0),e.dtactualstarted||(e.dtactualstarted=0),e.dtactualcompleted||(e.dtactualcompleted=0),n.invoke("update",e,(function(e,t){e?s(e):o(),u(!1)}))}},disableWhen:m,loading:m})))}},{step:6,name:"contractor",caption:"Contractor",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,i=e.movePrevStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),p=s[0],m=s[1],u=Object(a.useState)({})[0],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(!1),y=b[0],v=b[1],h=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):(t.contractor=t.contractor||{pcab:{},manager:{}},t.contractor.pcab||(t.contractor.pcab={}),v(!(!t.contractor||!t.contractor.name)),E(t))}))}),[t]),l.a.createElement(r.I,null,l.a.createElement(r.w,null,"Please specify contractor if available"),l.a.createElement(r.P,null),l.a.createElement(r.g,{value:y,onChange:v,caption:"Is undertaken by a Contractor?"}),l.a.createElement(r.s,{visibleWhen:y,context:f,handler:E},l.a.createElement("form",{ref:h},l.a.createElement(r.X,{name:"contractor.name",caption:"Contractor",required:!0,error:u.name}),l.a.createElement(r.X,{name:"contractor.address",caption:"Address",required:!0,error:u.address}),l.a.createElement(r.X,{name:"contractor.pcab.idno",caption:"PCAB License No.",required:!0,error:u.pcabidno}),l.a.createElement(r.k,{name:"contractor.pcab.dtvalid",caption:"Validity Date",required:!0,error:u.pcabdtvalid}),l.a.createElement(r.X,{name:"contractor.tin",caption:"TIN",required:!0,error:u.tin}),l.a.createElement(r.X,{name:"contractor.manager.name",caption:"Authorized Managing Officer",required:!0,error:u.manageroffice}),l.a.createElement(r.q,{name:"contractor.manager.email",required:!0,error:u.manageremail}))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:i}),l.a.createElement(r.c,{caption:"Next",action:function(){if(m(!0),y){if(!h.current.reportValidity())return;n.invoke("update",{objid:f.objid,contractor:f.contractor},(function(e,t){e?c(e):o(),m(!1)}))}else n.invoke("update",{objid:f.objid,contractor:{name:null,address:null,pcab_idno:null,pcab_dtvalid:null,tin:null,manager:{name:null,email:null}}},(function(e,t){e?c(e):o(),m(!1)}))},disableWhen:p,loading:p})))}},{step:7,name:"professionals",caption:"Professionals",component:function(e){var t=e.appno,n=e.appService,o=e.movePrevStep,i=e.moveNextStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),p=s[0],m=s[1],u=Object(a.useState)("design"),d=u[0],f=u[1],E=Object(a.useState)([]),b=E[0],y=E[1];Object(a.useEffect)((function(){m(!0),n.invoke("getProfessionals",{appid:t},(function(e,t){e?c(e):y(t),m(!1)}))}),[t]);var v=function(e,t){var n=b[t];"design"===d?(n.designprofessionalid=e.objid,n.designprofessional=e):(n.supervisorid=e.objid,n.supervisor=e);var a=[].concat(b);a[t]=n,y(a)},h=function(){m(!0),n.invoke("updateProfessionals",b,(function(e,t){e?c(e):"design"===d?f("supervisor"):i(),m(!1)}))};return l.a.createElement(r.I,null,l.a.createElement(r.I,{visibleWhen:"design"===d},l.a.createElement("h3",null,"List of Design Professionals"),b.map((function(e,t){return e.section.designprofessionalrole?l.a.createElement("div",{key:e.objid},e.designprofessionalid?l.a.createElement(C,{caption:e.sectionid+" Design Professional",professional:b[t].designprofessional,onSelectProfessional:function(e){return v(e,t)},role:e.section.designprofessionalrole}):l.a.createElement(I,{caption:e.sectionid+" Design Professional",searchFieldTitle:"Please input the 7-digit PRC ID Number and click search",onSelect:function(e){return v(e,t)},role:e.section.designprofessionalrole})):null})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:o}),l.a.createElement(r.c,{caption:"Next",action:h,disableWhen:p,loading:p}))),l.a.createElement(r.I,{visibleWhen:"supervisor"===d},l.a.createElement("h3",null,"List of Supervisors"),b.map((function(e,t){return e.section.supervisorrole?l.a.createElement("div",{key:e.objid},e.supervisorid?l.a.createElement(C,{caption:e.sectionid+" Supervisor",professional:b[t].supervisor,onSelectProfessional:function(e){return v(e,t)},role:e.section.supervisorrole}):l.a.createElement(I,{caption:e.sectionid+" Supervisor",searchFieldTitle:"",onSelect:function(e){return v(e,t)},role:e.section.supervisorrole})):null})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){return f("design")}}),l.a.createElement(r.c,{caption:"Next",action:h,disableWhen:p,loading:p}))))}},{step:8,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,o=e.movePrevStep,i=e.moveNextStep,c=Object(a.useState)(),s=c[0],p=c[1],m=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)({})),u=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?p(e):(b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{objid:u.objid,supervisorid:e.objid},(function(t,n){t?p(t):(p(null),b(e))}))};return l.a.createElement(r.I,null,l.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),l.a.createElement(r.r,{msg:s}),l.a.createElement(r.P,null),l.a.createElement(r.I,null,E&&E.lastname?l.a.createElement(C,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y}):l.a.createElement(I,{caption:"Inspector/Supervisor",searchFieldTitle:"",onSelect:y})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:o}),l.a.createElement(r.c,{caption:"Next",action:function(){E?i():p("Please select a professional.")},disableWhen:!E||!E.objid})))}},{step:9,name:"confirmation",caption:"Confirmation",component:function(e){var t=e.appno,n=e.partner,o=e.appService,i=e.movePrevStep,c=e.onComplete,s=Object(a.useState)()[1],p=Object(a.useState)({}),m=p[0],u=p[1];return Object(a.useEffect)((function(){o.invoke("getApplication",{appid:t},(function(e,t){e?s(e):u(t)}))}),[t]),l.a.createElement(r.I,null,l.a.createElement("p",null,"Before sending please check first the generated application info. If everything is in order, you can click Submit button to complete the transaction."),l.a.createElement(r.P,null),l.a.createElement(r.I,{style:$.container},l.a.createElement(r.I,{style:$.row},l.a.createElement(r.w,{style:$.label},"Application for Certificate of Occupancy"),l.a.createElement(r.I,{row:!0},l.a.createElement(r.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),l.a.createElement(r.I,{style:$.row},l.a.createElement(r.w,{style:$.label},"Certificate of Completion"),l.a.createElement(r.I,{row:!0},l.a.createElement(r.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:i}),l.a.createElement(r.c,{caption:"Submit",action:function(){o.invoke("update",m,(function(e,t){e?s(e):c()}))}})))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.appno,n=e.partner,o=e.appService,i=e.history,c=Object(a.useState)(),s=c[0],p=c[1],m=Object(a.useState)(!1)[1],u=Object(a.useState)({})[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1];Object(a.useEffect)((function(){o.invoke("getApplication",{appid:t},(function(e,a){e?p(e):(u(a),r.O.lookup("OboContactInfoService","obo").invoke("getInfo",{orgcode:n.id},(function(e,t){e?p(e):E(t)})),m(!0),o.invoke("getRequirements",{appid:t},(function(e,t){e?p(e):v(t.text)})))}))}),[t]);var h=F(f,"Application for Certificate of Occupancy and Certificate of Completion");return l.a.createElement(r.I,null,s&&l.a.createElement(l.a.Fragment,null,l.a.createElement(r.r,{msg:s}),l.a.createElement(r.P,null)),l.a.createElement("label",null,h),l.a.createElement(r.P,null),l.a.createElement(r.I,{style:ee.container},l.a.createElement(r.I,{style:ee.document},l.a.createElement(r.w,{style:ee.label},"Application for Certificate of Occupancy"),l.a.createElement(r.I,{row:!0},l.a.createElement(r.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),l.a.createElement(r.n,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),l.a.createElement(r.I,{style:ee.document},l.a.createElement(r.w,{style:ee.label},"Certificate of Completion"),l.a.createElement(r.I,{row:!0},l.a.createElement(r.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),l.a.createElement(r.n,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),l.a.createElement(r.P,null),l.a.createElement("h3",null,"List of Requirements:"),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:y}}),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Return",action:function(){return i.push("/partner/"+n.group.name+"_"+n.name+"/services")}})))}}],ae=function(e){var t=Object(a.useState)(!1),n=t[0],o=t[1],c=Object(a.useState)(!1),p=c[0],m=c[1],u=Object(a.useState)("init"),d=u[0],f=u[1],E=(Object(a.useState)("full"),Object(a.useState)(Object(r.eb)(e.location,"appid"))),b=E[0],y=E[1],v=Object(a.useState)(),h=v[0],g=v[1],S=Object(a.useState)({}),O=S[0],j=S[1],P=Object(a.useState)(1),x=P[0],k=P[1],w=e.partner,I=e.service;h!==e.location.hash&&g(e.location.hash),Object(a.useEffect)((function(){b?(o(!0),o(!0),te.invoke("findCurrentInfo",{appid:b},(function(t,n){if(t)m(t);else{if(n||(m("Application no. does not exist"),"init"===d&&(f("apptype"),e.history.push(""+location.pathname))),w.id!=n.orgcode)return m("The application number provided is not for this local government"),void f("init");j(n),k(n.step),f("processing"),e.history.push(location.pathname+"?appid="+b+"#"+ne[n.step].name)}o(!1)}))):f("apptype")}),[b]),Object(a.useEffect)((function(){if(h){var e=ne.find((function(e){return e.name===h.substring(1)}));k(e.step)}}),[h]);var C=function(e){y(e.appno),k(1),f("processing")},N=function(e){if(O.step!=ne.length-1){m(null);var t=x<O.step?O.step:x+1;te.invoke("update",{objid:b,state:e,step:t},(function(e,n){e?m(e):(k(t),j(i({},O,{step:t})))}))}};if("init"===d||n)return l.a.createElement("div",null,l.a.createElement(r.x,null));if("apptype"===d)return l.a.createElement(s,{appService:te,partner:w,service:e.service,error:p,onCancel:function(){return e.history.goBack()},onSubmit:function(e){var t=e.appType,n=e.appno;m(null),"new"===t?f("new"):te.invoke("findCurrentInfo",{appid:n},(function(e,a){e?m(e):C({appType:t,appno:n,step:a.step})}))}});if("new"===d)return l.a.createElement(K,i({},e,{appService:te,onComplete:C,onCancel:function(){return e.history.goBack()}}));var T=ne[x],A=T.component,W={partner:w,appno:b,pages:ne,moveNextStep:N,movePrevStep:function(){k((function(e){return e-1}))},appService:te,currentStep:x,stepCompleted:x<O.step,onComplete:function(){N("END")},history:e.history};return l.a.createElement(r.H,null,O.step<ne.length-1&&l.a.createElement(r.I,{target:"left",style:le.stepperContainer},l.a.createElement(r.R,{steps:ne,completedStep:O.step,activeStep:x,handleStep:function(t){k(t),e.history.push(location.pathname+"?appid="+b+"#"+ne[t].name)}})),l.a.createElement(r.d,null,l.a.createElement(r.Y,null,I.title),l.a.createElement(r.T,null,"Tracking No. "+b),l.a.createElement(r.S,null,T.caption),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:p}),l.a.createElement(A,i({page:T},W))),l.a.createElement(r.P,{height:50}))},le={stepperContainer:{paddingLeft:40}},re=["name","caption","professions"],oe=function(e){var t=e.name,n=void 0===t?"profession":t,a=e.caption,o=void 0===a?"Profession":a,s=e.professions,p=c(e,re);return l.a.createElement(r.h,i({name:n,caption:o,items:s},p))},ie=r.O.lookup("OboProfessionalService","obo"),ce=function(e){var t=e.partner,n=e.onCancel,i=e.onVerified,c=Object(a.useState)("init"),s=c[0],p=c[1],m=Object(a.useState)({})[0],u=Object(a.useState)(),d=u[0],f=u[1],E=Object(a.useState)(!1),b=E[0],y=E[1],v=Object(a.useState)({}),h=v[0],g=v[1],S=Object(a.useState)(),O=S[0],j=S[1],P=Object(a.useState)([]),x=P[0],k=P[1],w=Object(a.useRef)();return Object(a.useEffect)((function(){ie.invoke("getProfessionList",null,(function(e,t){k(t)}))}),[]),Object(a.useEffect)((function(){Object.keys(m).length>0&&validInfo()}),[h]),l.a.createElement(l.a.Fragment,null,l.a.createElement(r.s,{visibleWhen:"init"===s,context:h,handler:g},l.a.createElement("form",{ref:w},l.a.createElement(r.S,null,"Please specify initial information"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:d}),l.a.createElement(r.D,{name:"prc.idno",caption:"PRC No.",required:!0}),l.a.createElement(oe,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:x,required:!0}),l.a.createElement(r.q,{name:"email",required:!0}),l.a.createElement(r.E,{name:"mobileno",required:!0}),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Cancel",action:n}),l.a.createElement(r.c,{caption:"Next",action:function(){w.current.reportValidity()&&(f(null),y(!0),ie.invoke("verifyInfo",h,(function(e,n){e?f(e):(function(){try{var e=r.O.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:h.email,mobileno:h.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){f(null),j(e.key),p("verify")})).catch((function(e){f(e)})),y(!1))})))},loading:b,disableWhen:b})))),l.a.createElement(r.I,{visibleWhen:"verify"===s},l.a.createElement(r.S,null,"Email Verification"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:d}),l.a.createElement("p",null,"Please enter the key code sent to your email at ",h.email,"."),l.a.createElement(o.o,{partner:t,hiddenCode:O,email:h.email,onCancel:function(){return p("init")},onVerified:function(){return i(h)},onResendCode:function(e){j(e)},width:200,connection:"obo"})))},se=function(e){var t=e.info,n=void 0===t?{}:t,c=e.partner,s=e.onCancel,p=e.onSubmit,m=Object(a.useRef)(),u={entity:i({},n,{resident:!0}),prc:n.prc,id:{},resident:!0},d=Object(a.useState)()[0],f=Object(a.useState)(u),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],h=y[1],g=function(e,t){if(h(e),t)if("prc.dtissued"===t){var n=i({},E.id);n.dtvalid=null,b(i({},E,{id:n}))}else if("id.dtissued"===t){var a=i({},E.prc);a.dtvalid=null,b(i({},E,{prc:a}))}};return l.a.createElement(r.I,null,l.a.createElement(r.S,null,"Register New Professional"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:d}),l.a.createElement(r.I,null,l.a.createElement("form",{ref:m},l.a.createElement(r.s,{context:E,handler:b},l.a.createElement("p",null,"Please fill in the necessary data below. Text marked with * are required fields."," "),l.a.createElement(r.X,{caption:"Profession",name:"entity.profession",readOnly:!0}),l.a.createElement(o.k,{name:"entity",person:E,showAddress:!0,orgcode:c.id}),l.a.createElement(r.P,null),l.a.createElement(o.l,{name:"prc",disableIdNo:!0,onError:g,dtIssued:E.prc.dtissued}),l.a.createElement(o.m,{name:"ptr",onError:g}),l.a.createElement(o.h,{caption:"Primary Identification",name:"id",onError:g,dtIssued:E.id.dtissued}),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:s}),l.a.createElement(r.c,{caption:"Next",action:function(){!v&&m.current.reportValidity()&&p(E)}}))))),l.a.createElement(r.P,{height:50}))},pe=function(e){var t=e.onClose,n=e.redirectUrl,a=e.msg,o=void 0===a?"You have successfully registered your professional information.":a;return l.a.createElement(r.I,null,l.a.createElement(r.i,{center:!0},l.a.createElement(r.P,null),l.a.createElement(r.t,{src:"/assets/success.png",width:120,alt:"success"}),l.a.createElement(r.P,null),l.a.createElement(r.Y,null,"Success!"),l.a.createElement(r.P,null),l.a.createElement(r.w,{style:i({},me.text,{maxWidth:300})},o),l.a.createElement(r.w,{labelStyle:me.text},"Thank you for using this service."),l.a.createElement(r.P,null),l.a.createElement(r.e,null,n?l.a.createElement("a",{href:redi},"Return"):l.a.createElement(r.c,{variant:"text",caption:"Return",onClick:t}))))},me={text:{display:"block",textAlign:"center"}},ue=r.O.lookup("OboProfessionalService","obo"),de=[{step:1,name:"initial",caption:"Initial"},{step:2,name:"newprofessional",caption:"New Professional"},{step:3,name:"disclaimer",caption:"Disclaimer"},{step:4,name:"registered",caption:"Registered"}],fe=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),c=n[0],s=n[1],p=(Object(a.useState)({}),Object(a.useState)("new"),Object(a.useState)(0)),m=p[0],u=p[1],d=(Object(a.useState)(),Object(a.useState)()),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1],h=e.partner,g=e.service,S=e.history,O=function(){u((function(e){return e+1}))},j=de[m],P=null,x=e.location||{},k=x.search,w=x.hash;return k&&w&&y&&(P=k.match(/\/partner.*/)[0]+"/"+w),l.a.createElement(r.H,null,l.a.createElement(r.I,{target:"left",style:Ee.stepperContainer},l.a.createElement(r.R,{steps:de,activeStep:m})),l.a.createElement(r.d,null,l.a.createElement(r.Y,null,g.title),l.a.createElement(r.r,{msg:c}),l.a.createElement(r.I,{visibleWhen:"initial"===j.name},l.a.createElement(ce,{partner:h,onCancel:S.goBack,onVerified:function(e){E(e),O()}})),l.a.createElement(r.I,{visibleWhen:"newprofessional"===j.name},l.a.createElement(se,{partner:h,info:f,onSubmit:function(e){v(e),O()}})),l.a.createElement(r.I,{visibleWhen:"disclaimer"===j.name},l.a.createElement(o.c,{partner:h,onCancel:function(){u((function(e){return e-1}))},onSubmit:function(){t(!0);var e=function(){var e=i({},y.entity.address);y.entity.resident&&(e.citymunicipality=h.title,e.province=h.group.title);var t=i({},y.entity,{address:e}),n=i({},t,y,{orgcode:h.id});return delete n.entity,n}();ue.invoke("create",e,(function(e,n){e?function(e){t(!1),s(e.toString())}(e):(v(n),O())}))}})),l.a.createElement(r.I,{visibleWhen:"registered"===j.name},l.a.createElement(pe,{onClose:function(){return S.goBack()},redirect:P}))),l.a.createElement(r.P,{height:50}))},Ee={stepperContainer:{paddingTop:30,paddingLeft:40}},be=r.O.lookup("OboProfessionalService","obo"),ye={professional:{},changeType:null},ve=function(e,t){switch(t.type){case"SET_PROFESSIONAL":return void(e.professional=t.professional);case"SET_CHANGE_TYPE":return void(e.changeType=t.changeType)}},he=r.O.lookup("OboProfessionalService","obo"),ge=[{step:0,component:null},{step:1,name:"initial",caption:"Initial",component:function(e){var t=e.partner,n=e.history,i=e.moveNextStep,c=Object(r.lb)(),s=c[1],p=c[0].professional,m=Object(a.useState)("init"),u=m[0],d=m[1],f=Object(a.useState)(),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],h=y[1],g=Object(a.useState)({}),S=g[0],O=g[1],j=Object(a.useState)([]),P=j[0],x=j[1],k=Object(a.useState)(),w=k[0],I=k[1],C=Object(a.useRef)();return Object(a.useEffect)((function(){be.invoke("getProfessionList",null,(function(e,t){x(t)}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{ref:C},l.a.createElement(r.s,{visibleWhen:"init"===u,context:S,handler:O},l.a.createElement(r.S,null,"Please specify PRC Number"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:E}),l.a.createElement(r.D,{name:"prc.idno",caption:"PRC No.",required:!0,autoFocus:!0}),l.a.createElement(oe,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:P,required:!0}),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Cancel",action:function(){return n.goBack()}}),l.a.createElement(r.c,{caption:"Next",action:function(){C.current.reportValidity()&&(b(null),h(!0),be.invoke("verifyProfessional",S,(function(e,n){e?b(e):function(e){var n=e.email,a=e.mobileno;try{var l=r.O.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(l.invoke("verifyEmail",{email:n,mobileno:a}))}catch(e){return Promise.reject(e)}}(n).then((function(e){b(null),s({type:"SET_PROFESSIONAL",professional:n}),I(e.key),d("verifyemail")})).catch((function(e){b(e)})),h(!1)})))},loading:v,disableWhen:v})))),l.a.createElement(r.I,{visibleWhen:"verifyemail"===u},l.a.createElement(r.S,null,"Email Verification"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:E}),l.a.createElement("p",null,"Please enter the key code sent to your email at ",p?p.email:"","."),l.a.createElement(o.o,{partner:t,hiddenCode:w,email:p.email,onCancel:function(){return d("init")},onVerified:i,onResendCode:function(e){I(e)},width:200,connection:"obo"})))}},{step:2,name:"changetype",caption:"Change Type",component:function(e){var t=e.moveNextStep,n=Object(r.lb)(),o=n[1],i=n[0].professional,c=Object(a.useState)({changeType:"CHANGE_PERSONINFO"}),s=c[0],p=c[1];return l.a.createElement(r.I,null,l.a.createElement(r.S,null,"Edit Professional Information "),l.a.createElement(r.P,null),l.a.createElement(r.X,{caption:"Profession",value:i.profession,readOnly:!0}),l.a.createElement(r.X,{caption:"Name",value:i.name,readOnly:!0}),l.a.createElement(r.s,{context:s,handler:p},l.a.createElement(r.P,null),l.a.createElement("h4",null,"Please select type of change to make"),l.a.createElement(r.M,{name:"changeType"},l.a.createElement(r.v,{caption:"Change Personal Info",value:"CHANGE_PERSONINFO"}),l.a.createElement(r.v,{caption:"Change Address",value:"CHANGE_ADDRESS"}),l.a.createElement(r.v,{caption:"Change Primary ID",value:"CHANGE_ID"}),l.a.createElement(r.v,{caption:"Change PTR",value:"CHANGE_PTR"}),l.a.createElement(r.v,{caption:"Change PRC",value:"CHANGE_PRC"}),l.a.createElement(r.v,{caption:"Change Email/Mobile No.",value:"CHANGE_CONTACT"})),l.a.createElement(r.a,null,l.a.createElement(r.c,{caption:"Next",action:function(){o({type:"SET_CHANGE_TYPE",changeType:s.changeType}),t()}}))))}},{step:3,name:"editinfo",caption:"Edit Information",component:function(e){var t=e.partner,n=e.appService,c=e.moveNextStep,s=e.movePrevStep,p=Object(r.lb)(),m=p[0],u=p[1],d=m.professional,f=m.changeType,E=Object(a.useRef)(),b=Object(a.useState)(),y=b[0],v=b[1],h=Object(a.useState)(!1),g=h[0],S=h[1],O=Object(a.useState)(d),j=O[0],P=O[1],x=Object(a.useState)(!1)[1],k=function(e,t){if(x(e),t)if("prc.dtissued"===t){var n=i({},j.id);n.dtvalid=null,P(i({},j,{id:n}))}else if("id.dtissued"===t){var a=i({},j.prc);a.dtvalid=null,P(i({},j,{prc:a}))}};return l.a.createElement(r.I,null,l.a.createElement(r.S,null,"Edit Professional Information "),l.a.createElement(r.r,{msg:y}),l.a.createElement(r.I,null,l.a.createElement("form",{ref:E},l.a.createElement(r.s,{context:j,handler:P},l.a.createElement(r.I,{visibleWhen:"CHANGE_PERSONINFO"===f},l.a.createElement("h4",null,"Change Personal Information"),l.a.createElement(r.X,{caption:"Last Name",name:"lastname",required:!0}),l.a.createElement(r.X,{caption:"First Name",name:"firstname",required:!0}),l.a.createElement(r.X,{caption:"Middle Name",name:"middlename",required:!0}),l.a.createElement(r.k,{caption:"Birth Date",name:"birthdate",required:!0})),l.a.createElement(r.I,{visibleWhen:"CHANGE_ADDRESS"===f},l.a.createElement("h4",null,"Change Address Information"),l.a.createElement(l.a.Fragment,null,l.a.createElement(r.g,{caption:"Resident?",name:"resident"}),j.resident?l.a.createElement(o.i,{orgcode:t.id,name:"address",caption:"Address"}):l.a.createElement(o.j,{name:"address",caption:"Address"}))),l.a.createElement(r.I,{visibleWhen:"CHANGE_ID"===f},l.a.createElement("h4",null,"Change Primary ID Information"),l.a.createElement(o.h,{caption:"",name:"id",onError:k,dtIssued:j.id.dtissued})),l.a.createElement(r.I,{visibleWhen:"CHANGE_PTR"===f},l.a.createElement("h4",null,"Change PTR Information"),l.a.createElement(o.m,{caption:"",name:"ptr",disableIdNo:!0,onError:k,dtIssued:j.ptr.dtissued})),l.a.createElement(r.I,{visibleWhen:"CHANGE_PRC"===f},l.a.createElement("h4",null,"Change PRC Information"),l.a.createElement(o.l,{caption:"",name:"prc",disableIdNo:!0,editValidity:!0,onError:k,dtIssued:j.prc.dtissued})),l.a.createElement(r.I,{visibleWhen:"CHANGE_CONTACT"===f},l.a.createElement("h4",null,"Change Email/Mobile No. Information"),l.a.createElement(r.q,{name:"email",required:!0}),l.a.createElement(r.E,{name:"mobileno",required:!0})),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:s}),l.a.createElement(r.c,{caption:"Update",action:function(){if(E.current.reportValidity()){S(!0);var e=i({},j,{changetype:f});n.invoke("updateProfessional",e,(function(e,t){e?v(e):(u({type:"SET_PROFESSIONAL",updatedProfessional:t}),c()),S(!1)}))}},loading:g,disableWhen:g}))))))}},{step:4,name:"success",caption:"Success",component:pe}],Se=function(e){var t=e.partner,n=e.service,o=e.history,c=Object(a.useState)(1),s=c[0],p=c[1],m=ge[s],u=m.component,d={partner:t,service:n,appService:he,moveNextStep:function(){p((function(e){return e+1}))},movePrevStep:function(){p((function(e){return e-1}))},history:o,page:m,onClose:function(){o.goBack()},msg:"success"===m.name?"You have successfully updated your professional information.":null};return l.a.createElement(r.Q,{initialState:ye,reducer:ve},l.a.createElement(r.H,null,l.a.createElement(r.I,{target:"left",style:Oe.stepperContainer},l.a.createElement(r.R,{steps:ge,activeStep:s-1})),l.a.createElement(r.d,null,l.a.createElement(r.Y,null,n.title),l.a.createElement(u,i({page:m},d)))),l.a.createElement(r.P,{height:50}))},Oe={stepperContainer:{paddingTop:30,paddingLeft:40}},je=function(e){var t=e.task;return l.a.createElement("div",null,l.a.createElement("div",{style:i({},Pe.container)},l.a.createElement("label",{style:Pe.title},t.title),l.a.createElement("div",{style:Pe.column},l.a.createElement("label",{style:Pe.caption},"Start Date/Time"),l.a.createElement("label",{style:Pe.info},t.startdate)),l.a.createElement("div",{style:Pe.column},l.a.createElement("label",{style:Pe.caption},"End Date/Time"),l.a.createElement("label",{style:Pe.info},t.enddate)),l.a.createElement("div",{style:Pe.column},l.a.createElement("label",{style:Pe.caption},"Accountable Hours"),l.a.createElement("label",{style:Pe.info},t.hours)),l.a.createElement("div",{style:Pe.column},l.a.createElement("label",{style:Pe.caption},"Status"),l.a.createElement("label",{style:Pe.info},t.status))))},Pe={container:{display:"flex",justifyContent:"space-between",padding:"5px 10px",border:"1px solid #ddd",backgroundColor:"#eee"},title:{fontSize:14},column:{display:"flex",flexDirection:"column",alignItems:"center"},caption:{fontSize:8},info:{fontSize:10}},xe=function(e){var t=e.section;return l.a.createElement("div",{style:ke.container},l.a.createElement(je,{task:t}),l.a.createElement("table",{style:ke.table},l.a.createElement("tr",{style:ke.trth},l.a.createElement("th",{style:ke.tableText},"Activity"),l.a.createElement("th",{style:ke.tableText},"Start Date/Time"),l.a.createElement("th",{style:ke.tableText},"End Date/Time"),l.a.createElement("th",{style:ke.tableText},"Accountable Hours")),l.a.createElement("tbody",null,t.subtasks.map((function(e){return l.a.createElement("tr",{key:e.objid,style:i({},ke.trth)},l.a.createElement("td",{style:i({},ke.tableText,{textAlign:"left"})},e.title),l.a.createElement("td",{style:ke.tableText},e.startdate),l.a.createElement("td",{style:ke.tableText},e.enddate),l.a.createElement("td",{style:ke.tableText},e.hours))})))))},ke={container:{marginTop:10,marginLeft:25},title:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #ddd",borderRadius:5},table:{width:"100%",borderSpacing:0},tableText:{fontSize:10,border:"1px solid #ddd",padding:5,textAlign:"center"},trth:{border:"1px solid #ddd",cellSpacing:0,padding:5}},we=function(e){var t=e.task,n=e.toggleOpenTask;return 1===t.tracktime?l.a.createElement("div",null,l.a.createElement("div",{style:Ie.container},l.a.createElement("div",{style:Ie.titleContainer},t.sections.length>0&&l.a.createElement("div",{style:Ie.toggleButton,onClick:function(){return n(t)}},t.isOpenSubtasks?"-":"+"),l.a.createElement("label",null,t.title)),l.a.createElement("div",{style:Ie.column},l.a.createElement("label",{style:Ie.caption},"Start Date/Time"),l.a.createElement("label",{style:Ie.info},t.startdate)),l.a.createElement("div",{style:Ie.column},l.a.createElement("label",{style:Ie.caption},"End Date/Time"),l.a.createElement("label",{style:Ie.info},t.enddate)),l.a.createElement("div",{style:Ie.column},l.a.createElement("label",{style:Ie.caption},"Accountable Hours"),l.a.createElement("label",{style:Ie.info},t.hours)),l.a.createElement("div",{style:Ie.column},l.a.createElement("label",{style:Ie.caption},"Status"),l.a.createElement("label",{style:Ie.info},t.status))),t.isOpenSubtasks&&t.sections.map((function(e){return l.a.createElement(xe,{section:e})}))):l.a.createElement("div",{style:i({},Ie.container,{backgroundColor:"#C5F5D9"})},l.a.createElement("label",null,t.title))},Ie={container:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #ddd",borderRadius:5},titleContainer:{display:"flex",justifyContent:"center"},toggleButton:{cursor:"pointer",fontSize:"16px",paddingRight:8},column:{display:"flex",flexDirection:"column",alignItems:"center"},caption:{fontSize:8},info:{fontSize:12}},Ce=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),c=n[0],s=n[1],p=Object(a.useState)("init"),m=p[0],u=p[1],d=Object(a.useState)({apptype:"BUILDING_PERMIT"}),f=d[0],E=d[1],b=Object(a.useState)({tasks:[]}),y=b[0],v=b[1],h=Object(a.useState)({}),g=h[0],S=h[1],O=Object(a.useState)()[1],j=e.partner,P=e.history,x=function(e){var t=i({},y);t.tasks=y.tasks.map((function(t){return e.title===t.title?i({},t,{isOpenSubtasks:!t.isOpenSubtasks}):t})),v(t)};return l.a.createElement(r.H,null,l.a.createElement(r.d,null,l.a.createElement(r.Y,null,e.service.title),l.a.createElement(r.s,{visibleWhen:"init"===m,context:f,handler:E},l.a.createElement(r.S,null,"Tracking or Application No."),l.a.createElement(r.P,null),l.a.createElement(r.X,{caption:"Enter Tracking or Application No.",name:"trackingno",required:!0,error:c,helperText:c,variant:"outlined",autoFocus:!0}),l.a.createElement(r.a,null,l.a.createElement(r.b,{action:function(){return P.goBack()}}),l.a.createElement(r.c,{caption:"Next",action:function(){s(null),f.trackingno?r.O.lookup(j.id+":OboOnlineService","obo").invoke("verifyApplication",{trackingno:f.trackingno},(function(e,t){e?s(e):(t.apptype=f.apptype,t.refno=t.appno,S(t),u("verification"))})):s("Tracking No. is required.")}}))),l.a.createElement(r.I,{visibleWhen:"verification"===m},l.a.createElement(r.S,null,"Account Verification"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:c}),l.a.createElement(o.o,{partner:j,hiddenCode:g.key,email:g.email,onCancel:function(){s(!1),u("init")},onVerified:function(e){O(e),t(!0),s(!1),r.O.lookup(j.id+":OboAppProgressService","obo").invoke("getInfo",g,(function(e,n){e?s(e):(n.tasks.forEach((function(e){return e.isOpenSubtasks=!1})),v(n),u("info"),s(null),t(!1))}))},containerStyle:{width:200}})),l.a.createElement(r.s,{visibleWhen:"info"===m,context:y,handler:v},l.a.createElement(r.S,null,y.doctitle+" Application Status"),l.a.createElement(r.P,null),l.a.createElement(r.I,null,l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{caption:"Tracking No.",name:"trackingno",readOnly:!0}),l.a.createElement(r.X,{caption:"Application No.",name:"appno",readOnly:!0})),l.a.createElement(r.X,{caption:"Project Title",name:"title",readOnly:!0}),l.a.createElement(r.X,{caption:"Project Location",expr:function(){if(!y.location)return"";var e=[];return y.location.lotno&&e.push("Lot: "+y.location.lotno),y.location.blockno&&e.push("Block: "+y.location.blockno),y.location.street&&e.push("Street: "+y.location.street),y.location.barangay&&y.location.barangay.name&&e.push("Barangay: "+y.location.barangay.name),y.location.text&&e.push(y.location.text),e.join(" ")},readOnly:!0}),l.a.createElement(r.X,{caption:"Project Owner",name:"applicant.name",readOnly:!0}),l.a.createElement(r.X,{caption:"Txn Type",name:"txntype",readOnly:!0}),l.a.createElement(r.P,null))),l.a.createElement(r.I,{visibleWhen:"info"===m,style:{minWidth:600}},l.a.createElement(r.T,null,"Application Progress"),y.tasks.length>0?y.tasks.map((function(e){return l.a.createElement("div",null,l.a.createElement(r.P,null),l.a.createElement(we,{task:e,toggleOpenTask:x}))})):l.a.createElement("label",null,"Not yet started."),y.remarks&&l.a.createElement("div",null,l.a.createElement(r.P,null),l.a.createElement("label",{style:{color:"#E74C3C",fontSize:"10pt"}},"Remarks: "+y.remarks)),l.a.createElement(r.P,null),l.a.createElement("p",{style:{fontSize:12}},l.a.createElement("b",null,"Note:")," Accountable hours applies only from 8:00AM - 5:00PM every workday (excluding Saturday and Sunday)")),l.a.createElement(r.P,{height:50})))},Ne=function(e){var t=e.title,n=e.partner,o=e.onCancel,i=e.onSubmit,c=e.error,s=Object(r.lb)()[0],p=s.refno,m=s.apptype,u=s.txntype,d=Object(a.useState)(s.bill)[0],f=Object(a.useState)(c)[0],E=Object(a.useState)(!1)[0];return l.a.createElement(r.d,{style:{maxWidth:800}},l.a.createElement(r.Y,null,t),l.a.createElement(r.S,null,"Billing Information"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:f}),l.a.createElement(r.I,null,l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{context:d,caption:"Tracking No.",expr:"trackingno",readOnly:!0}),l.a.createElement(r.X,{context:d,caption:"Application No.",expr:"appno",readOnly:!0})),l.a.createElement(r.I,{row:!0},l.a.createElement(r.X,{context:d,caption:"Permit Type",expr:"permittype",readOnly:!0}),l.a.createElement(r.X,{context:d,caption:"Application Type",expr:"apptype",readOnly:!0})),l.a.createElement(r.X,{context:d,caption:"Project Name",expr:"title",readOnly:!0}),l.a.createElement(r.X,{context:d,caption:"Applicant",expr:"applicant.name",readOnly:!0}),l.a.createElement(r.X,{context:d,caption:"Address",expr:"applicant.address.text",readOnly:!0}),l.a.createElement("h4",null,"Bill Details"),l.a.createElement(r.V,{items:d?d.items:[],size:"small",showPagination:!1},l.a.createElement(r.W,{caption:"Particulars",expr:"item.title",width:500}),l.a.createElement(r.W,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),l.a.createElement(r.I,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},l.a.createElement(r.w,{context:d,caption:"Bill Amount:",expr:function(e){return Object(r.Z)(e.amount)}}))),l.a.createElement(r.a,{disabled:E},l.a.createElement(r.b,{caption:"Back",action:function(){o(0)}}),l.a.createElement(r.c,{caption:"Confirm Payment",action:function(){i({refno:p,txntype:u,origin:"filipizen",orgcode:n.id,info:{apptype:m,data:d},paidby:d.paidby,paidbyaddress:d.paidbyaddress,amount:d.amount,particulars:"Obo Application No. "+d.appno})},disableWhen:0===d.amount})))},Te={txntype:"obo",contact:{},refno:null,apptype:null,bill:{}},Ae=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},We=[{step:1,name:"verification",caption:"Verification",Component:o.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,o=e.moveNextStep,c=e.movePrevStep,s=Object(r.lb)(),p=s[1],m=s[0].txntype,u=Object(a.useState)(),d=u[0],f=u[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)(!1),h=v[0],g=v[1],S=Object(a.useState)({apptype:"building"}),O=S[0],j=S[1];return l.a.createElement(r.d,null,l.a.createElement(r.Y,null,t),l.a.createElement(r.S,null,"Initial Information"),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:d}),l.a.createElement(r.s,{context:O,handler:j},l.a.createElement(r.X,{name:"refno",caption:"Application No.",autoFocus:!0,error:b.refno,helperText:b.refno}),l.a.createElement(r.P,null),l.a.createElement(r.I,null,l.a.createElement("label",null,"Application Type:"),l.a.createElement(r.I,{style:{marginLeft:20}},l.a.createElement(r.M,{name:"apptype"},l.a.createElement(r.v,{caption:"Building Permit",value:"building"}),l.a.createElement(r.v,{caption:"Occupancy Permit",value:"occupancy"}))))),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Back",variant:"text",action:c}),l.a.createElement(r.c,{caption:"Next",action:function(){y({}),O.refno?(g(!0),f(null),function(){try{return Promise.resolve(r.O.lookupAsync(n.id+":OboOnlineBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",i({txntype:m},O,{qtr:4,showdetails:!0})))}))}catch(e){return Promise.reject(e)}}().then((function(e){p(i({type:"SET_BILL"},O,{bill:e})),o()})).catch((function(e){f(e.toString()),g(!1)}))):y({refno:"Application No. is required."})},loading:h,disabled:h})))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(r.lb)();return l.a.createElement(o.d,i({module:{title:e.title,component:Ne}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],Re=function(e){var t=e.partner,n=e.service,o=e.location,c=e.history,s=e.initialStep,p=Object(a.useState)(void 0===s?0:s),m=p[0],u=p[1],d=We[m];return l.a.createElement(r.Q,{initialState:Te,reducer:Ae},l.a.createElement(r.H,null,l.a.createElement(r.i,{center:!0},l.a.createElement(d.Component,i({page:d},{partner:t,service:n,location:o,history:c,moveNextStep:function(){u((function(e){return e+1}))},movePrevStep:function(){0===m?c.goBack():u((function(e){return e-1}))},cancelPayment:function(){u(1)},title:"OSCP Online Billing and Payment"})))),l.a.createElement(r.P,{height:50}))},De=r.O.lookup("OboProfessionalService","obo"),Le=function(e){var t=e.title,n=e.partner,o=e.onCancel,i=e.onSubmit,c=e.error,s=Object(r.lb)()[0],p=s.txntype,m=Object(a.useState)(s.bill)[0],u=Object(a.useState)(c)[0],d=Object(a.useState)(!1)[0];return l.a.createElement(r.d,null,l.a.createElement(r.Y,null,t),l.a.createElement(r.S,null,"Please check if details are correct"),l.a.createElement("div",{style:{width:450}}),l.a.createElement(r.P,null),l.a.createElement(r.r,{msg:u}),l.a.createElement(r.I,null,l.a.createElement(r.X,{context:m,caption:"PRC No.",expr:"professional.prc.idno",readOnly:!0}),l.a.createElement(r.X,{context:m,caption:"Profession",expr:"professional.profession",readOnly:!0}),l.a.createElement(r.X,{context:m,caption:"Name",expr:function(e){return e.professional.firstname+" "+e.professional.middlename+" "+e.professional.lastname},readOnly:!0}),l.a.createElement(r.P,null),l.a.createElement("label",null,"Last PTR Issued"),l.a.createElement(r.X,{context:m,caption:"PTR No.",expr:"professional.ptr.refno",readOnly:!0}),l.a.createElement(r.X,{context:m,caption:"Place Issued",expr:"professional.ptr.placeissued",readOnly:!0}),l.a.createElement(r.X,{context:m,caption:"Date Issued",expr:"professional.ptr.dtissued",readOnly:!0}),l.a.createElement(r.P,null),l.a.createElement(r.I,{style:Be.amountContainer},l.a.createElement("label",{style:Be.amountTitle},"Amount to Pay: "),l.a.createElement("label",{style:Be.amount},"Php ",Object(r.Z)(m.amount)))),l.a.createElement(r.a,{disabled:d},l.a.createElement(r.b,{caption:"Back",action:function(){o(0)}}),l.a.createElement(r.c,{caption:"Confirm Payment",action:function(){i({refno:m.professional.prc.idno,txntype:p,origin:"filipizen",orgcode:n.id,info:{data:m},paidby:m.paidby,paidbyaddress:m.paidbyaddress,amount:m.amount,items:m.items,particulars:"Professional Tax Payment for PRC No. "+m.professional.prc.idno})},disableWhen:0===m.amount})))},Be={amountContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between"},amountTitle:{},amount:{fontWeight:"bold"}},Xe={txntype:"ptrpayment",contact:{},refno:null,apptype:null,bill:{}},qe=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},_e=[{step:1,name:"initial",caption:"Specify Details",Component:function(e){var t=e.title,n=e.page,c=e.partner,s=e.moveNextStep,p=e.movePrevStep,m=Object(r.lb)()[1],u=Object(a.useState)(),d=u[0],f=u[1],E=Object(a.useState)(!1),b=E[0],y=E[1],v=Object(a.useState)({}),h=v[0],g=v[1],S=Object(a.useState)([]),O=S[0],j=S[1],P=Object(a.useState)({}),x=P[0],k=P[1],w=Object(a.useState)(),I=w[0],C=w[1],N=Object(a.useState)("init"),T=N[0],A=N[1],W=Object(a.useRef)();return Object(a.useEffect)((function(){De.invoke("getProfessionList",null,(function(e,t){j(t)}))}),[]),l.a.createElement(r.d,null,l.a.createElement(r.Y,null,t),l.a.createElement(r.r,{msg:d}),l.a.createElement("div",{style:{width:500}}),l.a.createElement(r.s,{context:h,handler:g,visibleWhen:"init"===T},l.a.createElement(r.S,null,n.caption),l.a.createElement("form",{ref:W},l.a.createElement(r.D,{name:"prc.idno",caption:"PRC No.",required:!0}),l.a.createElement(oe,{caption:"Profession (Copy profession in the PRC card)",name:"profession",expr:function(e){return e},professions:O,required:!0}),l.a.createElement(r.q,{name:"email",caption:"Email",required:"true"}),l.a.createElement(r.a,null,l.a.createElement(r.b,{caption:"Back",variant:"text",action:p}),l.a.createElement(r.c,{caption:"Next",action:function(){W.current.reportValidity()&&(f(null),y(!0),De.invoke("verifyProfessional",h,(function(e,t){e?(f(e),y(!1)):(k(t),m({type:"SET_CONTACT",contact:h}),function(){try{var e=r.O.lookupAsync(c.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:h.email,mobileno:h.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){f(null),C(e.key),A("verify")})).catch((function(e){f(e)})),y(!1))})))},loading:b,disabled:b})))),l.a.createElement(r.I,{visibleWhen:"verify"===T},l.a.createElement(r.S,null,"Email Verification"),l.a.createElement(r.P,null),l.a.createElement("p",null,"Please enter the key code sent to your email at ",h.email,"."),l.a.createElement(o.o,{partner:c,hiddenCode:I,email:h.email,onCancel:function(){return A("init")},onVerified:function(){y(!0),f(null),function(){try{return Promise.resolve(r.O.lookupAsync(c.id+":OboPtrBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",i({},h,{professional:x,partner:{name:c.name,title:c.title}})))}))}catch(e){return Promise.reject(e)}}().then((function(e){m({type:"SET_BILL",bill:e}),s()})).catch((function(e){f(e.toString()),y(!1)}))},onResendCode:function(e){C(e)},width:200,connection:"obo"})))}},{step:2,name:"payment",caption:"Payment",Component:function(e){var t=Object(r.lb)();return l.a.createElement(o.d,i({module:{title:e.title,component:Le}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],Fe=function(e){var t=e.partner,n=e.service,o=e.location,c=e.history,s=e.initialStep,p=Object(a.useState)(void 0===s?0:s),m=p[0],u=p[1],d=_e[m];return l.a.createElement(r.Q,{initialState:Xe,reducer:qe},l.a.createElement(r.H,null,l.a.createElement(r.i,{center:!0},l.a.createElement(d.Component,i({page:d},{partner:t,service:n,location:o,history:c,moveNextStep:function(){u((function(e){return e+1}))},movePrevStep:function(){0===m?c.goBack():u((function(e){return e-1}))},cancelPayment:function(){u(1)},title:"Pay Professional Tax Receipt"})))),l.a.createElement(r.P,{height:50}))}}}]);
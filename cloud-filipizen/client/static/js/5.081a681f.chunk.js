(this["webpackJsonpfilipizen-client"]=this["webpackJsonpfilipizen-client"]||[]).push([[5],{748:function(e,t,n){"use strict";n.r(t),n.d(t,"PoWebController",(function(){return s}));var a=n(0),r=n.n(a),i=n(2),l=(n(117),n(118));function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o=function(e){var t=e.title,n=e.partner,l=e.onCancel,o=e.onSubmit,m=Object(i.ob)()[0],u=m.refno,p=m.txntype,s=m.txntypename,f=Object(a.useState)(m.bill),d=f[0],y=f[1];return r.a.createElement(i.e,null,r.a.createElement(i.ab,null,t),r.a.createElement(i.U,null,"Payment Order Information"),r.a.createElement(i.R,null),r.a.createElement(i.K,{style:{minWidth:350}}),r.a.createElement(i.u,{context:d,handler:y},r.a.createElement(i.Z,{name:"txnno",caption:"PO No.",readOnly:!0}),r.a.createElement(i.Z,{name:"txndate",caption:"PO Date",readOnly:!0}),r.a.createElement(i.Z,{name:"billto",caption:"Bill To:",readOnly:!0}),r.a.createElement(i.Z,{name:"billtoaddress",caption:"Address",readOnly:!0}),r.a.createElement(i.R,null),r.a.createElement(i.X,{items:d?d.items:[],size:"small",showPagination:!1},r.a.createElement(i.Y,{caption:"Account",expr:function(e){return e.item.title}}),r.a.createElement(i.Y,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),r.a.createElement(i.K,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},r.a.createElement(i.y,{context:d,caption:"Amount Due:",expr:function(e){return Object(i.cb)(e.amount)}}))),r.a.createElement(i.a,null,r.a.createElement(i.b,{caption:"Back",action:function(){l(0)}}),r.a.createElement(i.c,{caption:"Confirm Payment",action:function(){var e=c({},d),t=e.items;delete e.items,o({refno:u,txntype:p,txntypename:s,origin:"filipizen",orgcode:n.id,paidby:d.paidby,paidbyaddress:d.paidbyaddress,amount:d.amount,particulars:"Payment Order "+u+" Payment for: "+e.particulars,items:t,info:{data:e}})},disableWhen:0===d.amount})))},m={txntype:"po",txntypename:"Payment Order",refno:null,bill:{},contact:{}},u=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},p=[{step:1,name:"verification",caption:"Verification",Component:l.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,l=e.moveNextStep,c=e.movePrevStep,o=Object(i.ob)(),m=o[1],u=o[0].txntype,p=Object(a.useState)(),s=p[0],f=p[1],d=Object(a.useState)(!1),y=d[0],E=d[1],b=Object(a.useState)(""),O=b[0],v=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.e,null,r.a.createElement(i.ab,null,t),r.a.createElement(i.U,null,"Initial Information"),r.a.createElement(i.R,null),r.a.createElement(i.t,{msg:s}),r.a.createElement(i.K,null,r.a.createElement(i.Z,{caption:"Payment Order No.",name:"refno",value:O,onChange:v,readOnly:y,autoFocus:!0,required:!0})),r.a.createElement(i.a,null,r.a.createElement(i.b,{caption:"Cancel",variant:"text",action:c}),r.a.createElement(i.c,{caption:"Next",action:function(){E(!0),f(null),i.Q.lookup(n.channelid+":OnlinePoService","po").invoke("getBilling",{txntype:u,refno:O},(function(e,t){e?f("An internal error is encountered. Please try again later or contact LGU for assistance."):(m({type:"SET_BILL",refno:O,bill:t}),f(null),l()),E(!1)}))},processing:y,disableWhen:!(!y&&O&&0!==O.trim().length)}))))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(i.ob)();return r.a.createElement(l.d,c({module:{title:"Online Payment Order",component:o}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],s=function(e){var t=e.partner,n=e.service,l=e.location,o=e.history,s=e.initialStep,f=Object(a.useState)(void 0===s?0:s),d=f[0],y=f[1],E=p[d];return r.a.createElement(i.S,{initialState:m,reducer:u},r.a.createElement(i.J,null,r.a.createElement(i.j,{center:!0},r.a.createElement(E.Component,c({page:E},{partner:t,service:n,location:l,history:o,moveNextStep:function(){y((function(e){return e+1}))},movePrevStep:function(){0===d?o.goBack():y((function(e){return e-1}))},cancelPayment:function(){y(1)},title:"Online Payment Order"})))),r.a.createElement(i.R,{height:50}))}}}]);
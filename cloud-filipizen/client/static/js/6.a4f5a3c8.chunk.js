(this["webpackJsonpfilipizen-client"]=this["webpackJsonpfilipizen-client"]||[]).push([[6],{1388:function(e,t,n){"use strict";n.r(t),n.d(t,"PoWebController",(function(){return s}));var a=n(0),r=n.n(a),i=n(2),l=(n(117),n(118));function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var o=function(e){var t=e.title,n=e.partner,l=e.onCancel,o=e.onSubmit,m=Object(i.lb)()[0],u=m.refno,p=m.txntype,s=m.txntypename,d=Object(a.useState)(m.bill),f=d[0],y=d[1];return r.a.createElement(i.d,null,r.a.createElement(i.Y,null,t),r.a.createElement(i.S,null,"Payment Order Information"),r.a.createElement(i.P,null),r.a.createElement(i.I,{style:{minWidth:350}}),r.a.createElement(i.s,{context:f,handler:y},r.a.createElement(i.X,{name:"txnno",caption:"PO No.",readOnly:!0}),r.a.createElement(i.X,{name:"txndate",caption:"PO Date",readOnly:!0}),r.a.createElement(i.X,{name:"billto",caption:"Bill To:",readOnly:!0}),r.a.createElement(i.X,{name:"billtoaddress",caption:"Address",readOnly:!0}),r.a.createElement(i.P,null),r.a.createElement(i.V,{items:f?f.items:[],size:"small",showPagination:!1},r.a.createElement(i.W,{caption:"Account",expr:function(e){return e.item.title}}),r.a.createElement(i.W,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),r.a.createElement(i.I,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},r.a.createElement(i.w,{context:f,caption:"Amount Due:",expr:function(e){return Object(i.Z)(e.amount)}}))),r.a.createElement(i.a,null,r.a.createElement(i.b,{caption:"Back",action:function(){l(0)}}),r.a.createElement(i.c,{caption:"Confirm Payment",action:function(){var e=c({},f),t=e.items;delete e.items,o({refno:u,txntype:p,txntypename:s,origin:"filipizen",orgcode:n.id,paidby:f.paidby,paidbyaddress:f.paidbyaddress,amount:f.amount,particulars:"Payment Order "+u+" Payment for: "+e.particulars,items:t,info:{data:e}})},disableWhen:0===f.amount})))},m={txntype:"po",txntypename:"Payment Order",refno:null,bill:{},contact:{}},u=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},p=[{step:1,name:"verification",caption:"Verification",Component:l.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,l=e.moveNextStep,c=e.movePrevStep,o=Object(i.lb)(),m=o[1],u=o[0].txntype,p=Object(a.useState)(),s=p[0],d=p[1],f=Object(a.useState)(!1),y=f[0],E=f[1],b=Object(a.useState)(""),O=b[0],v=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.Y,null,t),r.a.createElement(i.S,null,"Initial Information"),r.a.createElement(i.P,null),r.a.createElement(i.r,{msg:s}),r.a.createElement(i.I,null,r.a.createElement(i.X,{caption:"Payment Order No.",name:"refno",value:O,onChange:v,readOnly:y,autoFocus:!0,required:!0})),r.a.createElement(i.a,null,r.a.createElement(i.b,{caption:"Cancel",variant:"text",action:c}),r.a.createElement(i.c,{caption:"Next",action:function(){E(!0),d(null),i.O.lookup(n.id+":OnlinePoService","po").invoke("getBilling",{txntype:u,refno:O},(function(e,t){e?d("An internal error is encountered. Please try again later or contact LGU for assistance."):(m({type:"SET_BILL",refno:O,bill:t}),d(null),l()),E(!1)}))},processing:y,disableWhen:!(!y&&O&&0!==O.trim().length)}))))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(i.lb)();return r.a.createElement(l.d,c({module:{title:"Online Payment Order",component:o}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],s=function(e){var t=e.partner,n=e.service,l=e.location,o=e.history,s=e.initialStep,d=Object(a.useState)(void 0===s?0:s),f=d[0],y=d[1],E=p[f];return r.a.createElement(i.Q,{initialState:m,reducer:u},r.a.createElement(i.H,null,r.a.createElement(i.i,{center:!0},r.a.createElement(E.Component,c({page:E},{partner:t,service:n,location:l,history:o,moveNextStep:function(){y((function(e){return e+1}))},movePrevStep:function(){0===f?o.goBack():y((function(e){return e-1}))},cancelPayment:function(){y(1)},title:"Online Payment Order"})))),r.a.createElement(i.P,{height:50}))}}}]);
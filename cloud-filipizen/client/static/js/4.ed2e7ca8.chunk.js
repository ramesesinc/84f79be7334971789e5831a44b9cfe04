(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{528:function(e,t,n){"use strict";n.r(t),n.d(t,"AppTrackingWebController",(function(){return ye})),n.d(t,"BuildingPermitWebController",(function(){return V})),n.d(t,"OboBillingWebController",(function(){return Oe})),n.d(t,"OccupancyPermitWebController",(function(){return Z})),n.d(t,"ProfessionalWebController",(function(){return ce})),n.d(t,"UpdateProfessionalWebController",(function(){return Ee}));var a=n(0),r=n.n(a),i=n(2),o=n(85);n(117);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t.indexOf(n=i[a])>=0||(r[n]=e[n]);return r}var s=function(e){var t=e.onCancel,n=e.onSubmit,o=e.service,l=e.partner,c=e.appService,s=Object(a.useState)({}),p=s[0],u=s[1],m=Object(a.useState)("new"),d=m[0],f=m[1],E=Object(a.useState)(),b=E[0],y=E[1],v=Object(a.useState)(!1),g=v[0],h=v[1],S=Object(a.useState)(),j=S[0],O=S[1];return r.a.createElement(i.I,null,r.a.createElement(i.f,null,r.a.createElement(i.X,null,o.title),r.a.createElement(i.S,null,"Select an action"),r.a.createElement(i.P,{height:30}),r.a.createElement(i.s,{msg:j}),r.a.createElement(i.M,{value:d,onChange:f},r.a.createElement(i.x,{caption:"Create New Application",value:"new"}),r.a.createElement(i.x,{caption:"Resume Pending Application",value:"resume"})),r.a.createElement(i.J,{style:{paddingLeft:30}},r.a.createElement(i.W,{caption:"Application Tracking No.",value:b,onChange:y,visibleWhen:"resume"===d,variant:"outlined",fullWidth:!1,required:!0,style:{marginLeft:40},error:p.appno||j,helperText:p.appno||j,size:"small"})),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Cancel",action:t}),r.a.createElement(i.e,{caption:"Next",action:function(){"new"!==d?b?(h(!0),O(null),c.invoke("findCurrentInfo",{appid:b},(function(e,t){e?O(e):t?l.id!==t.orgcode?u({appno:"The application number provided is not for this local government"}):n({appType:d,appno:b,step:t.step}):u({appno:"Application no. does not exist"}),h(!1)}))):u({appno:"Tracking No. is required."}):n({appType:d,appno:b})},loading:g,disableWhen:g}))))},p=function(e){var t=e.partner,n=e.title,o=void 0===n?"New Permit Application":n,l=e.onCancel,c=e.onContinue,s=e.error,p=Object(a.useState)(!1),u=p[0],m=p[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.S,null,o),r.a.createElement(i.P,{height:30}),r.a.createElement(i.s,{msg:s}),r.a.createElement(i.T,null,"Please read thoroughly before proceeding"),r.a.createElement("p",{style:{opacity:.8}},"This online service will require personal information from the applicant, lot owner(s) and professionals involved in this transaction. In compliance with the Data Privacy Act, we are securing your consent that you have been authorized by the aforementioned parties to act on their behalf. The data collected will be stored, processed and used for effectively carrying out legitimate transactions with the local government of ",t.title,". If you do not agree to these terms, you can cancel out by click on the Cancel button. If you agree to these terms, tick on the checkbox and click Continue."),r.a.createElement(i.i,{caption:"Yes, I have read and agree to the terms and conditions",value:u,name:"agreeDisclaimer",onChange:m}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Cancel",action:l}),r.a.createElement(i.e,{caption:"Continue",action:c,disableWhen:!u})))},u=function(e){var t=e.title,n=e.appno,a=e.onContinue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.S,null,void 0===t?"New Permit Application":t),r.a.createElement(i.P,{height:30}),r.a.createElement(i.T,null,"Application created"),r.a.createElement("p",null,"Please take note of the tracking number for this application. This will be your tracking reference for completing and follow up for this application."),r.a.createElement(i.T,null,n),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Continue",action:a})))},m=i.O.lookup("OnlineBuildingPermitService","obo"),d=[{name:"email",caption:"Email Verification"},{name:"select-apptype",caption:"Select Application Type"},{name:"project-name",caption:"Project Name"},{name:"confirmation",caption:"Confirmation"},{name:"newapp",caption:"New Application "}],f=function(e){var t=Object(a.useState)({}),n=t[0],c=t[1],s=(Object(a.useState)(!1),Object(a.useState)("new")[0]),f=(Object(a.useState)(),Object(a.useState)()),E=f[0],b=f[1],y=Object(a.useState)({apptype:"NEW"}),v=y[0],g=y[1],h=Object(a.useState)(0),S=h[0],j=h[1],O=Object(a.useState)(),x=O[0],k=O[1],w=e.partner,P=e.service,C=e.handler,W=e.onCancel,N=d[S],T=Object(a.useRef)(),J=function(){j((function(e){return e+1}))};return r.a.createElement(i.I,null,"email"===N.name?r.a.createElement(o.g,{title:P.title,visibleWhen:"email"===N.name,showName:!0,onCancel:W,onVerify:function(e){c(e),J()},partner:w,connection:"obo"}):r.a.createElement(i.f,null,r.a.createElement(i.X,null,P.title),r.a.createElement(i.t,{visibleWhen:"select-apptype"===N.name,context:v,handler:g},r.a.createElement(i.S,null,"Select Application Type"),r.a.createElement(i.P,null),r.a.createElement(i.J,{style:{marginLeft:20}},r.a.createElement(i.M,{name:"apptype"},r.a.createElement(i.x,{caption:"New Construction",value:"NEW"}),r.a.createElement(i.x,{caption:"Renovation",value:"RENOVATION",editable:!1}),r.a.createElement(i.x,{caption:"Demolition",value:"DEMOLITION",editable:!1}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",action:W}),r.a.createElement(i.e,{caption:"Next",action:J}))),r.a.createElement(i.t,{visibleWhen:"project-name"===N.name,context:v,handler:g},r.a.createElement(i.S,null,"New Building Permit Application"),r.a.createElement(i.P,{height:30}),r.a.createElement(i.T,null,"Project Information"),r.a.createElement("form",{ref:T},r.a.createElement(i.W,{caption:"Project Name",name:"title",required:!0,autoFocus:!0}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){j((function(e){return e-1}))}}),r.a.createElement(i.e,{caption:"Next",action:function(){T.current.reportValidity()&&J()}})))),r.a.createElement(i.J,{visibleWhen:"confirmation"===N.name},r.a.createElement(p,{partner:w,error:x,onCancel:e.goBack,onContinue:function(){var e=l({},v,{orgcode:w.orgcode||w.id,apptype:s,contact:n,worktypes:[]});m.invoke("create",e,(function(e,t){e?k(e):(b(t.objid),J())}))}})),r.a.createElement(i.J,{visibleWhen:"newapp"===N.name,width:400},r.a.createElement(u,{appno:E,onContinue:function(){C(E)}}))))},E=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],b=function(e){var t=e.name,n=e.caption,a=void 0===n?"Lot Ownership":n,o=e.showCaption,s=void 0===o||o,p=c(e,["name","caption","showCaption"]);return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(i.T,null,a),r.a.createElement(i.M,l({name:t},p),r.a.createElement(i.x,{caption:"Lot Owned",value:"1"}),r.a.createElement(i.x,{caption:"Leased",value:"0"})))},y=["INDIVIDUAL","MULTIPLE","CORPORATION","GOVERNMENT","OTHER"],v=function(e){var t=e.owner,n=e.editable,a=e.editableAddress,l=void 0!==a&&a,s=e.editableIdEntry,p=void 0!==s&&s,u=e.orgcode,m=e.onError,d=void 0===m?function(){}:m,f=c(e,["owner","editable","editableAddress","editableIdEntry","orgcode","onError"]),E=f.showIdEntry||!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.T,null,f.title||"Lot Owner Information"),r.a.createElement(i.J,null,r.a.createElement(i.W,{caption:"Profile No.",name:"owner.profileno",editable:n}),r.a.createElement(i.j,{items:y,name:"owner.entitytype",caption:"Ownership Type",editable:n}),"INDIVIDUAL"!==t.entitytype&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.W,{caption:"Lot Owner Name",name:"owner.name",editable:n}),r.a.createElement(i.y,null,"Name of administrator/contact of property owner")),r.a.createElement(i.W,{caption:"Last Name",name:"owner.lastname",editable:n}),r.a.createElement(i.W,{caption:"First Name",name:"owner.firstname",editable:n}),r.a.createElement(i.W,{caption:"Middle Name",name:"owner.middlename",editable:n}),r.a.createElement(o.n,{person:t,orgcode:u,name:"owner",editable:n||l}),E&&r.a.createElement(o.h,{name:"owner.id",onError:d,editable:n||p,dtIssued:t.id?t.id.dtissued:null})))},g=function(e){var t=e.editable,n=c(e,["editable"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.T,null,n.title||"Lot Information"),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"PIN",name:"pin",editable:t}),r.a.createElement(i.W,{caption:"Lot No.",name:"lotno",editable:t}),r.a.createElement(i.W,{caption:"Block No.",name:"blockno",editable:t})),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"Street",name:"street",editable:t}),r.a.createElement(i.W,{caption:"Barangay",name:"barangay",editable:t})),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"TD No.",name:"tdno",editable:t}),r.a.createElement(i.W,{caption:"Title No.",name:"titleno",editable:t})),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"Classification",name:"classcode",editable:t}),r.a.createElement(i.W,{caption:"Area",name:"areasqm",editable:t})))},h={balanceText:{color:"red",fontWeight:"bold"},locationContainer:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",marginBottom:10},tdno:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},rpuInfoContainer:{padding:"10px"}},S=i.O.lookup("OboMiscListService","obo"),j={column:{display:"flex",flexDirection:"column",marginLeft:20}},O=i.O.lookup("OboProfessionalService","obo"),x=function(e){var t=e.caption,n=void 0===t?"Search Professional":t,o=e.searchFieldTitle,c=void 0===o?"PRC No.":o,s=e.onSelect,p=e.hideSearchText,u=void 0!==p&&p,m=e.fullWidth,d=void 0===m||m,f=e.role,E=Object(a.useState)({prc:{}}),b=E[0],y=E[1],v=Object(a.useState)(),g=v[0],h=v[1],S=Object(a.useState)(),j=S[0],x=S[1],k=Object(a.useState)(!1),w=k[0],P=k[1],C=Object(a.useState)(),W=C[1],N=function(e){if(O&&b.prc.idno){var t=l({},b,e);O.invoke("getList",t,(function(e,t){e?console.log("ERROR",e):x(t)}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.H,{title:"Invalid Profession",open:w,msg:C[0],onAccept:function(){return P(!1)}}),r.a.createElement(i.D,{caption:n,query:b,setQuery:y,searchFieldTitle:c,searchField:"prc.idno",onSelect:function(){var e=g[0];return function(e){if(!f)return!0;var t=f.toLowerCase(),n="";if(!(t.indexOf(e.profession.toLowerCase())>=0)){var a=t.split(",");if(1==a.length)n="Only "+a[0].toLowerCase()+" is allowed.";else{var r=(n="Only "+a.join(", ")+" are allowed.").lastIndexOf(",");n=n.substring(0,r)+" and "+n.substring(r+2)}var i="The profession of the selected professional is invalid. "+n;return W(i),console.log("ERROR",i),!1}return!0}(e)?(s(e),!0):(P(!0),!1)},fetchList:N,hideSearchText:u,enableSelect:g&&g.length>0,fullWidth:d,rootStyle:{minWidth:400}},r.a.createElement(i.t,{context:b,handler:y},r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"PRC No.",name:"prc.idno",width:200,variant:"outlined"}),r.a.createElement(i.e,{caption:"Search",action:function(){N({limit:5,start:0})}}))),r.a.createElement(i.U,{items:j,fetchList:N,rowsPerPage:5,showPagination:!1,singleSelect:!0,keyId:"objid",onSelectItems:function(e){h(e)}},r.a.createElement(i.V,{caption:"PRC",expr:"prc.idno"}),r.a.createElement(i.V,{caption:"Name",expr:function(e){return e.lastname+", "+e.firstname+" "+e.middlename}}),r.a.createElement(i.V,{caption:"Profession",expr:"profession"}))))},k=function(e){var t=e.professional,n=void 0===t?{prc:{},ptr:{}}:t,a=e.caption,o=e.onSelectProfessional,c=e.photoUrl,s=e.role,p="";n.lastname&&(p=n.lastname+", "+n.firstname+" "+n.middlename);var u=w.container,m=w.lookupContainer,d=w.caption;return"string"==typeof n.lastname&&(u=l({},u,{backgroundColor:"#d1d7f8"}),m=l({},m,{backgroundColor:"#454f88"}),d=l({},d,{color:"white"})),r.a.createElement("div",{style:u},r.a.createElement(i.J,{style:m},r.a.createElement(i.y,{captionStyle:d,caption:a}),r.a.createElement(x,{hideSearchText:!0,onSelect:o,fullWidth:!1,role:s})),r.a.createElement("div",{style:{marginTop:10,marginBottom:10,padding:10}},r.a.createElement("div",{style:w.nameContainer},r.a.createElement(i.J,{center:!0},r.a.createElement(i.y,{labelStyle:w.name},p),r.a.createElement(i.y,{labelStyle:w.profession},n.profession)),r.a.createElement(i.v,{src:c})),r.a.createElement(i.J,{style:w.row},r.a.createElement(i.J,null,r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"PRC ID No."},n.prc.idno),r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"Date Issued"},n.prc.dtissued),r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"Valid Until"},n.prc.dtvalid),r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"Place Issued"},n.prc.placeissued)),r.a.createElement(i.J,null,r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"PTR ID No."},n.ptr.refno),r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"Date Issued"},n.ptr.dtissued),r.a.createElement(i.y,{style:w.label,captionStyle:{width:120},caption:"Place Issued"},n.ptr.placeissued)))))},w={container:{borderWidth:1,borderColor:"#aaa",boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",backgroundColor:"#d1d1d1",borderRadius:5},caption:{fontSize:18,width:"100%"},lookupContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#8b8b8b",paddingTop:5,paddingLeft:10,paddingRight:10,borderRadius:5,minWidth:400},nameContainer:{dipslay:"flex",justifyContent:"space-between",marginBottom:5},name:{fontSize:18,fontWeight:800},profession:{fontSize:14,fontWeight:600,backgroundColor:"#ddddd",width:"100%"},row:{display:"flex",flexDirection:"row",justifyContent:"space-between"},label:{paddingBottom:2}},P=i.O.lookup("OboMiscListService","obo"),C={row:{display:"flex",alignItems:"flex-start"},group:{fontSize:20,fontWeight:700,marginRight:15,paddingTop:8}},W=function(e){var t=e.item;return r.a.createElement(i.J,{style:{paddingBottom:5}},r.a.createElement(i.J,{style:C.row},r.a.createElement("div",{style:C.group},t.objid),r.a.createElement(i.J,null,r.a.createElement(i.T,null,t.title),r.a.createElement("label",null,t.description))))},N={decimal:i.m,integer:i.w,boolean:function(e){return r.a.createElement("div",{style:J.checkInfo},r.a.createElement(i.i,e))}},T=function(e){var t=e.category,n=e.dataType,a=void 0===n?"integer":n,o=e.unit,l=e.name,c=N[a],s=e.caption.toLowerCase();return"boolean"!==a&&(s+=" ("+o.toLowerCase()+")"),r.a.createElement(i.J,null,t&&r.a.createElement(i.y,{style:J.category},t),r.a.createElement("div",{style:J.infoContainer},r.a.createElement("label",null,s),r.a.createElement(c,{name:l,fullWidth:!1,variant:"outlined",size:"small",width:120,style:{flexBasis:100}})))},J={infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20},category:{fontSize:16,fontWeight:600,border:"1px solid #aaa",backgroundColor:"#eee",padding:"2px 10px",margin:"10px 0px"},checkInfo:{width:100,display:"flex",justifyContent:"flex-start",alignItems:"center",borderWidth:1,borderColor:"#aaa",borderRadius:3}},A={infoTitle:{fontWeight:"bold"},infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20}},I={professionalLookup:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"lightgray"},itemsContainer:{marginLeft:20,display:"flex",flexDirection:"column"},workTypeContainer:{display:"flex",flexDirection:"column",marginLeft:20}},L={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},ancillaryContainer:{marginRight:15,marginBottom:20},ancillaryItem:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginRight:10,border:"1px solid #aaa"}},R=function(e,t){void 0===e&&(e={}),void 0===t&&(t="");var n="";n+="Please download and print the "+t+" forms, prepare the ",n+="requirements listed below, and submit at the receiving window of our ",n+=e.officename,n+=" at the ",n+=e.address1,n+=e.address2?", "+e.address2+". ":". ";var a=[];return e.phoneno&&a.push(e.phoneno),e.mobileno&&a.push(e.mobileno),e.email?(a.length>0?(n+="You can email at "+e.email,n+=" or contact us on "+a.join(" or ")):n+="You can email us at "+e.email,n+=" for any inquiries on application."):a.length>0&&(n+="You can contact us on "+a.join(" or ")+" for any inquiries on application."),n},B={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},infoContainer:{display:"flex",flexDirection:"column",marginRight:10,width:"100%"},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},requirementsContainer:{marginRight:15,marginBottom:20},requirement:{fontSize:"0.9rem"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},q=i.O.lookup("OnlineBuildingPermitService","obo"),D=[{step:0,component:null},{step:1,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,c=e.appService,s=e.moveNextStep,p=Object(a.useState)(!1)[1],u=Object(a.useState)(!1),m=u[0],d=u[1],f=Object(a.useState)("read")[1],b=Object(a.useState)(!1),y=b[0],v=b[1],g=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1,id:{}}),h=g[0],S=g[1],j=Object(a.useRef)();return Object(a.useEffect)((function(){p(!0),d(null),c.invoke("getApplicant",{appid:t},(function(e,n){e?d(e):n?(n.id||(n.id={}),n.appid=t,S(n),f("read")):f("create"),p(!1)}))}),[]),r.a.createElement("form",{ref:j},r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(i.S,null,"Building Applicant Details"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:m}),r.a.createElement(i.t,{context:h,handler:S},r.a.createElement(i.j,{items:E,name:"entitytype",caption:"Type of Applicant"}),r.a.createElement(i.W,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==h.entitytype}),r.a.createElement(i.P,null),r.a.createElement(i.J,null,r.a.createElement(i.T,null,"Administrator or contact name of applicant"),r.a.createElement(i.W,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(i.W,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(i.W,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(i.r,{name:"email"}),r.a.createElement(i.F,{name:"mobileno"})),r.a.createElement(i.P,null),r.a.createElement(i.T,null,"Applicant Address"),r.a.createElement(i.i,{caption:"Resident",name:"resident",onChange:function(){var e=l({},h,{appid:t,resident:!h.resident,address:{}});S(e)}}),h.resident?r.a.createElement(o.i,{orgcode:n.id,name:"address",caption:"Address"}):r.a.createElement(o.j,{name:"address",caption:"Address"}),r.a.createElement(i.P,null),r.a.createElement(i.T,null,"Proof of Identity"),r.a.createElement(o.h,{name:"id",onError:function(e){v(e)},dtIssued:h.id.dtissued})),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){!y&&j.current.reportValidity()&&(d(null),c.invoke("saveApplicant",h,(function(e,t){e?d(e):s(),p(!1)})))}}))))}},{step:2,name:"rpu",caption:"Real Property Info",component:function(e){var t=e.partner,n=e.appno,o=e.appService,l=e.moveNextStep,c=Object(a.useState)(),s=c[0],p=c[1],u=Object(a.useState)(!1),m=u[0],d=u[1],f=Object(a.useState)("view-rpus"),E=f[0],y=f[1],S=Object(a.useState)(),j=S[0],O=S[1],x=Object(a.useState)([]),k=x[0],w=x[1],P=Object(a.useState)({}),C=P[0],W=P[1],N=Object(a.useState)(!1),T=N[0],J=N[1],A=Object(a.useRef)();Object(a.useEffect)((function(){"view-rpus"===E&&L()}),[E]);var I=function(){O(),p(null),y("initial")},L=function(){o.invoke("getRpus",{appid:n},(function(e,t){e?p(e):w(t)}))};return r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+n),r.a.createElement(i.S,null,"Real Property Information"),r.a.createElement(i.P,null),r.a.createElement(i.J,{visibleWhen:"view-rpus"===E},r.a.createElement(i.T,null,"Lot Information"),r.a.createElement(i.s,{msg:s}),k.map((function(e){return r.a.createElement(i.J,{style:h.locationContainer,key:e.tdno},r.a.createElement("div",{style:h.tdno},r.a.createElement(i.T,null,"TD No. "+e.tdno)),r.a.createElement("div",{style:h.rpuInfoContainer},r.a.createElement(i.y,{caption:"Title No."},e.titleno),r.a.createElement(i.y,{caption:"PIN"},e.pin),r.a.createElement(i.y,{caption:"Address"},(n=[],(t=e).lotno&&n.push("Lot: "+t.lotno),t.blockno&&n.push("Block: "+t.blockno),t.street&&n.push("Street: "+t.street),t.barangay&&n.push("Barangay: "+t.barangay),n.join(" "))),r.a.createElement(i.y,{caption:"Class"},e.classcode),r.a.createElement(i.y,{caption:"Area"},e.areasqm),r.a.createElement(i.y,{caption:"Owner"},e.owner.name)));var t,n})),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Add Lot Info",action:I}),r.a.createElement(i.e,{caption:"Next",action:function(){p(null),0===k.length?p("Add at least one Lot Information."):l()}}))),r.a.createElement(i.J,{visibleWhen:"initial"===E},r.a.createElement(i.T,null,"Specify the Site Location/Property"),r.a.createElement(i.s,{msg:s}),r.a.createElement(i.P,null),r.a.createElement(i.W,{caption:"Tax Declaration No.",value:j,onChange:O,autoFocus:!0}),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Back to List",action:function(){y("view-rpus")},variant:"text"}),r.a.createElement(i.e,{caption:"Search",action:function(){d(!0),i.O.lookup((t.orgcode||t.id)+":OboOnlineService","obo").invoke("findLocation",{refno:j||newRefno},(function(e,t){e?p(e):(t.owner.resident="local"==t.owner.address.type?1:0,t.owner.address.city&&(t.owner.address.citymunicipality=t.owner.address.city),t.owner.address.municipality&&(t.owner.address.citymunicipality=t.owner.address.municipality),t.owner.ctc={},t.lotowned="1",t.appid=n,console.log("Property",t),W(t),y("view-lot")),d(!1)}))},disableWhen:m,loading:m}))),r.a.createElement(i.J,{visibleWhen:"view-lot"===E},r.a.createElement("p",null,"Please check carefully if the information is correct. For any discrepancies, please contact the Assessor's Office before proceeding."),C&&C.bill&&C.appno&&r.a.createElement("label",{style:h.balanceText},"Note: There is still an unpaid balance of ",r.a.createElement("u",null,"Php #",C.bill?C.bill.amtdue:0),". You can settle this by paying online ",r.a.createElement("a",{href:"/partner/"+t.group.name+"_"+t.name+"/rptis/rptbilling",target:"0"},r.a.createElement("u",null,"here"))),r.a.createElement(i.t,{context:C,handler:W},r.a.createElement(g,{editable:!1}),r.a.createElement(i.P,null),r.a.createElement(v,{name:"owner",orgcode:t.id,owner:C.owner,editable:!1})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:I,caption:"Back"}),r.a.createElement(i.e,{action:function(e){y("edit-owner-info")},caption:"Next"}))),r.a.createElement(i.J,{visibleWhen:"edit-owner-info"===E},r.a.createElement("form",{ref:A},r.a.createElement("label",null,"Please update the information if necessary"),r.a.createElement(i.t,{context:C,handler:W},r.a.createElement(b,{caption:"Is lot owned or leased?",property:C,name:"lotowned",row:!0,autoFocus:!0}),r.a.createElement(v,{name:"owner",owner:C.owner,orgcode:t.id,editable:!1,showIdEntry:!0,editableAddress:!0,editableIdEntry:!0,onError:function(e){J(e)}})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return y("view-lot")},caption:"Back"}),r.a.createElement(i.e,{action:function(){!T&&A.current.reportValidity()&&(p(null),o.invoke("saveRpu",C,(function(e,t){e?p(e):(L(),y("view-rpus"))})))},caption:"Next"})))))}},{step:3,name:"location",caption:"Project Location",component:function(e){var t=e.appno,n=e.appService,c=e.moveNextStep,s=Object(o.p)(e.partner.id),p=Object(a.useState)(),u=p[0],m=p[1],d=Object(a.useState)(!1)[1],f=Object(a.useState)({}),E=f[0],b=f[1],y=Object(a.useState)(),v=y[0],g=y[1];return Object(a.useEffect)((function(){d(!0),n.invoke("getLocation",{appid:e.appno},(function(e,t){e?(m(e),d(!1)):t&&t.barangay&&t.barangay.name?(b(t),g(t.barangay.name)):b({})}))}),[]),Object(a.useEffect)((function(){s.length>0&&n.invoke("getRpus",{appid:e.appno},(function(e,t){if(e)m(e);else{var n=t[0],a=E&&E.barangay?E.barangay.name:n.barangay,r=l({},E);E&&E.barangay&&E.barangay.objid||(r.lotno=n.lotno,r.blockno=n.blockno,r.street=n.street),r.barangay=s.find((function(e){return e.name===a})),b(r),d(!1)}}))}),[v,s]),r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(i.S,null,"Project Location"),r.a.createElement(i.P,null),r.a.createElement(i.J,null,r.a.createElement(i.T,null,"Specify Project Location"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:u}),r.a.createElement(i.t,{context:E,handler:b},r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{name:"lotno",caption:"Lot No."}),r.a.createElement(i.W,{name:"blockno",caption:"Block No."})),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{name:"unitno",caption:"Unit No."}),r.a.createElement(i.W,{name:"bldgno",caption:"Building No."})),r.a.createElement(i.W,{name:"bldgname",caption:"Building Name"}),r.a.createElement(i.W,{name:"street",caption:"Street"}),r.a.createElement(i.W,{name:"subdivision",caption:"Subdivision"}),r.a.createElement(o.a,{barangays:s,name:"barangay",caption:"Barangay"})),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",action:function(){return setMode("view-rpus")},variant:"text"}),r.a.createElement(i.e,{caption:"Next",action:function(){m(null),n.invoke("saveLocation",l({appid:t},E),(function(e,t){e?m(e):c()}))}}))))}},{step:4,name:"project",caption:"Project Details",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c={appid:t,apptype:"NEW",worktypes:[],numfloors:1,numunits:1,occupancytype:{objid:null,group:{},division:{}}},s=Object(a.useState)(),p=s[0],u=s[1],m=(Object(a.useState)({}),Object(a.useState)(!1)[1]),d=Object(a.useState)("project-detail"),f=d[0],E=d[1],b=Object(a.useState)("group")[0],y=Object(a.useState)(c),v=y[0],g=y[1],h=Object(a.useState)([])[1],O=Object(a.useState)([])[1],x=Object(a.useState)([])[1],k=Object(a.useState)()[1],w=Object(a.useState)([]),P=w[0],C=w[1],W=Object(a.useState)(!1),N=W[0],T=W[1],J=Object(a.useRef)();return Object(a.useEffect)((function(){m(!0),u(null),S.invoke("getWorkTypes",null,(function(e,t){e?u(e):C(t),m(!1)}))}),[]),Object(a.useEffect)((function(){0!==P.length&&(m(!0),u(null),n.invoke("getProjectInfo",{appid:t},(function(e,t){if(e)u(e);else{if(0===t.worktypes.length)t.worktypes=P;else{var n=P.map((function(e){return t.worktypes.find((function(t){return e.objid===t}))?l({},e,{checked:!0}):e}));t.worktypes=n}t.numunits=t.numunits||1,t.numfloors=t.numfloors||1,k(t.contractor),g(t),E("project-detail")}m(!0)})))}),[P]),Object(a.useEffect)((function(){"group"===b?S.invoke("getOccupancyTypeGroups",null,(function(e,t){e?u(e):h(t)})):"division"===b?S.invoke("getOccupancyTypeDivisions",{groupid:v.occupancytype.group.objid},(function(e,t){e?u(e):O(t)})):"type"===b&&S.invoke("getOccupancyTypes",{divisionid:v.occupancytype.division.objid},(function(e,t){e?u(e):x(t)}))}),[b]),r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(i.S,null,"Project Details"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:p}),r.a.createElement(i.t,{visibleWhen:"project-detail"===f,context:v,handler:g},r.a.createElement("form",{ref:J},r.a.createElement(i.W,{caption:"Project Title",name:"title",required:!0,autoFocus:!0}),r.a.createElement(i.W,{caption:"Project Description",name:"description",required:!0}),v.occupancytypeid&&r.a.createElement(i.W,{caption:"Occupancy Type",name:"occupancytype.title",required:!0}),r.a.createElement(i.P,null),r.a.createElement(i.w,{caption:"No of Units",name:"numunits",required:!0,fullWidth:!0}),r.a.createElement(i.J,{row:!0},r.a.createElement(i.m,{caption:"Total Floor Area [sq.meter]",name:"totalfloorarea",required:!0,fullWidth:!0,textAlign:"left"}),r.a.createElement(i.m,{caption:"Building Height [meter]",name:"height",required:!0,fullWidth:!0,textAlign:"left"})),r.a.createElement(i.w,{caption:"No. of Storeys",name:"numfloors",required:!0,fullWidth:!0}),r.a.createElement(i.P,null),r.a.createElement(i.m,{caption:"Estimated Cost [Php]",name:"projectcost",required:!0,decimalScale:2,textAlign:"left",fullWidth:!0}),r.a.createElement(i.J,{row:!0},r.a.createElement(i.l,{caption:"Proposed Construction Date",name:"dtproposedconstruction",required:!0}),r.a.createElement(i.l,{caption:"Expected Completion Date",name:"dtexpectedcompletion",required:!0,minDate:v.dtproposedconstruction,helperText:N?"Date should not be before proposed date":null,onError:function(){T(!0)}})),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){J.current.reportValidity()&&(Object(i.ib)(v.dtexpectedcompletion,v.dtproposedconstruction)||(u(null),n.invoke("update",{appid:t,title:v.title,description:v.description,numunits:v.numunits,totalfloorarea:v.totalfloorarea,height:v.height,numfloors:v.numfloors,projectcost:v.projectcost,dtproposedconstruction:v.dtproposedconstruction,dtexpectedcompletion:v.dtexpectedcompletion},(function(e,t){e?u(e):(u(null),m(!1),E("select-worktype"))}))))}})))),r.a.createElement(i.t,{visibleWhen:"select-worktype"===f,context:v,handler:g},r.a.createElement(i.T,null,"Select Work Types"),r.a.createElement(i.J,{style:j.column},v.worktypes.map((function(e,t){return r.a.createElement(i.i,{caption:e.name,name:"worktypes["+t+"].checked",value:e.objid})}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return E("project-detail")}}),r.a.createElement(i.e,{caption:"Next",action:function(){if(u(null),v.worktypes.findIndex((function(e){return!0===e.checked}))>=0){u(null);var e={appid:t,worktypes:v.worktypes.filter((function(e){return e.checked})).map((function(e){return e.objid}))};n.invoke("update",e,(function(e,t){e?u(p):(m(!1),o())}))}else u("Please check at least one work type.")}}))))}},{step:5,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,l={appid:t,apptype:"NEW"},c=Object(a.useState)(),s=c[0],p=c[1],u=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)(l)),m=u[0],d=u[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getProjectInfo",{appid:t},(function(e,t){e?p(e):(b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{appid:t,supervisorid:e.objid},(function(t,n){t?p(t):(p(null),b(e))}))};return r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(i.S,null,"Project Details"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:s}),r.a.createElement(i.J,null,r.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),r.a.createElement(i.P,{height:10}),E&&E.lastname&&r.a.createElement(i.J,null,r.a.createElement(k,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y,role:m.type?m.type.supervisorrole:null})),(!E||!E.lastname)&&r.a.createElement(x,{caption:"Search Professional",onSelect:y,fullWidth:!1}),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){E?o():p("Please select a professional.")},disableWhen:!E||!E.objid}))))}},{step:6,name:"occupancy",caption:"Occupancy Type",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,l=Object(a.useState)(),c=l[0],s=l[1],p=Object(a.useState)(!1),u=p[0],m=p[1],d=Object(a.useState)("select-occupancytype")[0],f=Object(a.useState)("group"),E=f[0],b=f[1],y=Object(a.useState)({}),v=y[0],g=y[1],h=Object(a.useState)([]),S=h[0],j=h[1],O=Object(a.useState)([]),x=O[0],k=O[1],w=Object(a.useState)([]),C=w[0],N=w[1],T=Object(a.useState)(!1)[1],J=Object(a.useState)(!1)[1];return Object(a.useEffect)((function(){m(!0),n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):(g({occupancytype:t.occupancytype}),T(t.occupancytype.objid)),m(!1)}))}),[]),Object(a.useEffect)((function(){"group"===E?(m(!0),P.invoke("getOccupancyTypeGroups",null,(function(e,t){e?s(e):j(t),m(!1)}))):"division"===E?(m(!0),P.invoke("getOccupancyTypeDivisions",{groupid:v.occupancytype.group.objid},(function(e,t){e?s(e):k(t),m(!1)}))):"type"===E&&(m(!0),P.invoke("getOccupancyTypes",{divisionid:v.occupancytype.division.objid},(function(e,t){e?s(e):N(t),m(!1)})))}),[E]),r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(i.S,null,"Occupancy Type"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:c}),r.a.createElement(i.J,{visibleWhen:"select-occupancytype"===d},r.a.createElement(i.t,{visibleWhen:"group"===E,context:v,handler:g},r.a.createElement(i.T,null,"Select Occupancy Group"),r.a.createElement(i.M,{name:"occupancytype.group.objid",list:S,Control:W}),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){v.occupancytype.group.objid?b("division"):s("Kindly select an occupancy group.")},disableWhen:u,loading:u}))),r.a.createElement(i.t,{visibleWhen:"division"===E,context:v,handler:g},r.a.createElement(i.T,null,"Select Occupancy Group Division"),r.a.createElement(i.M,{name:"occupancytype.division.objid",list:x,Control:W}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",action:function(){return b("group")}}),r.a.createElement(i.e,{caption:"Next",action:function(){v.occupancytype.division.objid?b("type"):s("Kindly select an occupancy division group.")},disableWhen:u,loading:u}))),r.a.createElement(i.t,{visibleWhen:"type"===E,context:v,handler:g},r.a.createElement(i.T,null,"Select Occupancy Type"),r.a.createElement(i.M,{name:"occupancytype.objid",list:C,Control:W}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",action:function(){return b("division")}}),r.a.createElement(i.e,{caption:"Next",action:function(){v.occupancytype.objid?(m(!0),n.invoke("updateOccupancyType",{appid:t,occupancytype:v.occupancytype},(function(e,t){e?s(e):(s(null),m(!1),J(!1),o()),m(!1)}))):s("Kindly select an occupancy type.")},disableWhen:u,loading:u})))))}},{step:7,name:"accessories",caption:"Accessories",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,l=Object(a.useState)(),c=l[0],s=l[1],p=Object(a.useState)(!1),u=p[0],m=p[1],d=Object(a.useState)("initial"),f=d[0],E=d[1],b=Object(a.useState)("TRUE"),y=b[0],v=b[1],g=Object(a.useState)([]),h=g[0],S=g[1],j=Object(a.useState)([]),O=j[0],x=j[1],k=Object(a.useState)([]),w=k[0],P=k[1],C=function(){m(!0),n.invoke("getAccessories",{appid:t},(function(e,t){S(t),function(e){return!!(e.length>0&&/j.*/i.test(e[0].occupancytypeid))}(t)&&E("infos"),m(!1)}))};return Object(a.useEffect)((function(){m(!0),i.O.lookup("OboMiscListService","obo").invoke("getAccessoryOccupancyTypes",null,(function(e,t){if(e)s(e);else{var n={};t.forEach((function(e){n[""+e.objid.toLowerCase()]=!1})),P(t),x(n)}m(!1)})),C()}),[]),r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+t),r.a.createElement(i.S,null,"Accessories"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:c}),r.a.createElement(i.J,{visibleWhen:"initial"===f},r.a.createElement("p",null,"Does the plan include accessories?"),r.a.createElement(i.M,{name:"hasAccessories",value:y,onChange:v},r.a.createElement(i.x,{caption:"Yes",value:"TRUE"}),r.a.createElement(i.x,{caption:"No",value:"FALSE"})),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){"TRUE"===y?E("select-accessories"):(s(null),m(!0),n.invoke("saveAccessories",{appid:t,items:[]},(function(e,t){e?s(e):o(),m(!1)})))},disableWhen:u,loading:u}))),r.a.createElement(i.J,{visibleWhen:"select-accessories"===f},r.a.createElement(i.T,null,"Select accessory to add if applicable"),r.a.createElement(i.t,{context:O,handler:x},w.map((function(e){return r.a.createElement(i.i,{key:e.objid,caption:e.title,name:""+e.objid.toLowerCase()})}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return E("initial")}}),r.a.createElement(i.e,{caption:"Next",action:function(){if(Object.keys(O).length>0){m(!0);var e=function(){var e=[];for(var n in O)O[n]&&e.push(n);return{appid:t,items:e}}();n.invoke("saveAccessories",e,(function(e,t){e?s(e):(C(),E("infos")),m(!1)}))}else s("Select at least one accessory type before proceeding.")},disableWhen:u,loading:u}))),r.a.createElement(i.t,{visibleWhen:"infos"===f,context:h,handler:S},h.map((function(e,t){return r.a.createElement("div",{key:e.objid},r.a.createElement(i.y,{style:A.infoTitle},e.type.title),e.infos.map((function(e,n){return r.a.createElement(T,{key:e.name+":"+t+":"+n,name:"["+t+"].infos["+n+"].value",dataType:e.datatype,caption:e.caption,unit:e.unit})})))})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return E("select-accessories")}}),r.a.createElement(i.e,{caption:"Next",action:function(){m(!0);var e={appid:t,infos:[]};h.forEach((function(t){var n;(n=e.infos).push.apply(n,t.infos)})),n.invoke("saveAccessoryInfos",e,(function(e,t){e?s(e):o(),m(!1)}))},disableWhen:u,loading:u}))))}},{step:8,name:"ancillarylist",caption:"Other Permits",component:function(e){var t,n,o,c=e.partner,s=e.appno,p=e.appService,u=e.moveNextStep,m=Object(a.useState)(!1),d=m[0],f=m[1],E=Object(a.useState)(),b=E[0],y=E[1],v=Object(a.useState)(!1),g=v[0],h=v[1],S=Object(a.useState)("permit-list"),j=S[0],O=S[1],x=Object(a.useState)([]),w=x[0],P=x[1],C=Object(a.useState)([]),W=C[0],N=C[1],J=Object(a.useState)({worktypes:[],type:{}}),A=J[0],L=J[1],R=function(){h(!0),p.invoke("getAncillaryPermits",{appid:s},(function(e,t){e?y(e):(N(t),d||0!==t.length||(f(!0),O("available-list"))),h(!1)}))};Object(a.useEffect)((function(){h(!0),p.invoke("getAvailableAncillaryPermitTypes",{appid:s},(function(e,t){e?y(e):P(t),h(!1)}))}),[W]),Object(a.useEffect)((function(){R()}),[j,d]);var B=!1;W.length>0&&(B=W.findIndex((function(e){return!e.designprofessionalid}))>=0);var q=null;return r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+s),r.a.createElement(i.S,null,"Other Permits"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:b}),r.a.createElement(i.J,{visibleWhen:"permit-list"===j},r.a.createElement("label",null,"Click on edit ",r.a.createElement(i.q,{fontSize:"small",color:"primary"})," for each document and complete the details."),r.a.createElement(i.P,{height:40}),W.map((function(e){return r.a.createElement(i.J,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement(i.J,{row:!0},e.designprofessionalid?r.a.createElement("div",{style:{width:40}},r.a.createElement(i.h,{style:{color:"green",paddingRight:10}})):r.a.createElement("div",{style:{width:40}}),r.a.createElement("label",null,e.type.title)),r.a.createElement(i.J,{row:!0},e.designprofessionalid&&r.a.createElement(i.L,{caption:null,href:"/jreports/partner/"+c.group.name+"_"+c.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),r.a.createElement(i.p,{action:function(){return t=e,h(!0),void p.invoke("getAncillaryPermit",{objid:t.objid},(function(e,t){e?y(e):(y(null),function(e){h(!0),i.O.lookup("OboMiscListService","obo").invoke("getWorkTypes",{typeid:e.type.objid},(function(t,n){t?y(t):n&&n.length>0?(n.forEach((function(t){e.worktypes.findIndex((function(e){return e.toLowerCase()===t.name.toLowerCase()}))>=0&&(t.checked=!0)})),L(l({},e,{worktypes:n})),O("select-worktypes")):(O(e.infos.length>0?"infos":1===e.type.includecost?"cost":"professional"),L(e)),h(!1)}))}(t)),h(!1)}));var t},size:"small"}),r.a.createElement(i.n,{action:function(){return t=e,h(!0),void p.invoke("removeAncillaryPermit",{objid:t.objid},(function(e,t){e?y(e):(y(null),R()),h(!1)}));var t},size:"small"})))})),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Add New Permits",action:function(){return O("available-list")}}),r.a.createElement(i.e,{caption:"Next",action:function(){var e=[];W.forEach((function(t){t.designprofessionalid||e.push(t.type.title)})),1===e.length?y("Permit "+e[0]+" is not processed"):e.length>1?y("The following permist are not processed: "+e.join(",")):u()},disableWhen:B}))),r.a.createElement(i.t,{visibleWhen:"select-worktypes"===j,context:A,handler:L},r.a.createElement("h4",null,A.type.title),r.a.createElement(i.T,null,"Select Work Types"),r.a.createElement(i.J,{style:I.workTypeContainer},A.worktypes.map((function(e,t){return r.a.createElement(i.i,{caption:e.name.toUpperCase(),name:"worktypes["+t+"].checked",value:e.name})}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return O("permit-list")}}),r.a.createElement(i.e,{caption:"Next",action:function(){y(null),y(null),h(!0);var e={objid:A.objid,worktypes:A.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))};p.invoke("updateAncillaryPermit",e,(function(e,t){e?y(b):(O("infos"),h(!1)),h(!1)}))},disableWhen:g,loading:g}))),r.a.createElement(i.t,{visibleWhen:"infos"===j,context:A,handler:L},r.a.createElement(i.T,null,null===(t=A.type)||void 0===t?void 0:t.title),r.a.createElement(i.P,null),r.a.createElement("p",null,"Please fill the applicable values and click Save and Complete when done."),A.infos&&A.infos.map((function(e,t){var n=null;return null!==q&&q.category===e.category||(n=e.category,q=e),r.a.createElement(T,{key:e.name+":"+t,name:"infos["+t+"].value",category:n,dataType:e.datatype,caption:e.caption,unit:e.unit})})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){O(A.worktypes&&A.worktypes.length>0?"select-worktypes":"permit-list")}}),r.a.createElement(i.e,{caption:"Next",action:function(){h(!0),p.invoke("updateAncillaryPermit",{objid:A.objid,projectcost:A.projectcost,equipmentcost:A.equipmentcost},(function(e,t){e?y(e):O(1===A.type.includecost?"cost":"professional"),h(!1)}))},disableWhen:g,loading:g}))),r.a.createElement(i.J,{visibleWhen:"available-list"===j},r.a.createElement(i.T,null,"Select ancillary and other permits to include in the project"),r.a.createElement(i.t,{context:w,handler:P,style:I.itemsContainer},w.map((function(e,t){return r.a.createElement(i.i,{key:e.objid,caption:e.title,name:"["+t+"].selected"})}))),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){var e=w.filter((function(e){return!0===e.selected}));e.length>0?(h(!0),N(e),p.invoke("saveAncillaryPermits",{appid:s,permits:e},(function(e,t){e?y(e):(y(null),O("permit-list")),h(!1)}))):O("permit-list")},disableWhen:g,loading:g}))),r.a.createElement(i.t,{visibleWhen:"cost"===j,context:A,handler:L},r.a.createElement(i.T,null,null===(n=A.type)||void 0===n?void 0:n.title),r.a.createElement(i.m,{name:"projectcost",caption:"Project Cost",textAlign:"left",fullWidth:!1}),r.a.createElement(i.m,{name:"equipmentcost",caption:"Equipment Cost",textAlign:"left"}),r.a.createElement(i.P,null),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return O("infos")}}),r.a.createElement(i.e,{caption:"Next",action:function(){h(!0),y(null),p.invoke("saveAncillaryPermit",{objid:A.objid,infos:A.infos},(function(e,t){e?y(e):O("professional"),h(!1)}))},disableWhen:g,loading:g}))),r.a.createElement(i.t,{visibleWhen:"professional"===j,context:A,handler:L},r.a.createElement(i.T,null,null===(o=A.type)||void 0===o?void 0:o.title),r.a.createElement(i.P,null),r.a.createElement(k,{caption:"Design Professional",professional:A.designprofessional,onSelectProfessional:function(e){L(l({},A,{designprofessional:e,designprofessionalid:e.objid}))},role:A.type.designprofessionalrole}),r.a.createElement(i.P,null),r.a.createElement(k,{caption:"Supervisor in Charge Professional",professional:A.supervisor,onSelectProfessional:function(e){L(l({},A,{supervisor:e,supervisorid:e.objid}))},role:A.type.supervisorrole}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return O("permit-list")}}),r.a.createElement(i.e,{caption:"Save and Complete",action:function(){if(y(null),A.designprofessionalid)if(A.supervisorid){h(!0);var e=l({},A,{worktypes:A.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))});p.invoke("saveAncillaryPermit",e,(function(e,t){e?y(e):O("permit-list"),h(!1)}))}else y("Supervisor is required.");else y("Design Professional is required.")},disableWhen:g,loading:g}))))}},{step:9,name:"confirm",caption:"Confirm",component:function(e){var t=e.partner,n=e.appno,o=e.appService,l=e.moveNextStep,c=Object(a.useState)(!1),s=c[0],p=c[1],u=Object(a.useState)()[1],m=Object(a.useState)(!1),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)([]),g=v[0],h=v[1],S=(Object(a.useState)(!1),function(){u(null),f(!1)});return Object(a.useEffect)((function(){f(!0),o.invoke("getApplication",{appid:n},(function(e,t){e?u(e):(y(t),S())})),f(!0),o.invoke("getAncillaryPermits",{appid:n},(function(e,t){e?u(e):(h(t),S())}))}),[]),r.a.createElement(i.J,null,r.a.createElement("label",null,"Tracking No. "+n),r.a.createElement(i.S,null,"Confirm Application"),r.a.createElement(i.P,null),r.a.createElement(i.H,{open:s,type:"confirm",msg:"Permit processing will now be completed. Make sure that all information are correct.",onAccept:function(){p(!1),l()},onCancel:function(){return p(!1)}}),r.a.createElement(i.C,{visibleWhen:d}),r.a.createElement("p",null,"Please confirm the info and preview each permit application before submitting"),r.a.createElement(i.t,{visibleWhen:!d,context:b,handler:y},r.a.createElement(i.J,{style:L.container},r.a.createElement(i.J,{style:L.linkContainer},r.a.createElement(i.L,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n})),r.a.createElement(i.J,null,r.a.createElement(i.W,{caption:"Tracking No.",name:"objid",readOnly:!0}),r.a.createElement(i.W,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(i.W,{caption:"Project Location",expr:function(){if(!b.location)return"";var e=[];return b.location.lotno&&e.push("Lot: "+b.location.lotno),b.location.blockno&&e.push("Block: "+b.location.blockno),b.location.street&&e.push("Street: "+b.location.street),b.location.barangay.name&&e.push("Barangay: "+b.location.barangay.name),e.join(" ")},readOnly:!0}),r.a.createElement(i.P,null),r.a.createElement(i.W,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(i.W,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),r.a.createElement(i.W,{caption:"Type of Work",expr:function(){var e,t="";return b.worktypes&&b.worktypes.length>0&&(t=null===(e=b.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0}),r.a.createElement(i.W,{caption:"Supervisor in Charge of Construction",expr:function(){var e="";return b.contractor&&(e=b.contractor.lastname+", "+b.contractor.firstname+" "+b.contractor.middlename),e},readOnly:!0})),r.a.createElement(i.J,null,r.a.createElement(i.J,{row:!0},r.a.createElement(i.w,{caption:"No. of Units",name:"numunits",readOnly:!0}),r.a.createElement(i.w,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),r.a.createElement(i.m,{caption:"Bldg. Height",name:"height",readOnly:!0,textAlign:"left"})),r.a.createElement(i.P,null),r.a.createElement(i.J,{row:!0},r.a.createElement(i.m,{caption:"Total Area (sqm)",name:"totalfloorarea",readOnly:!0,textAlign:"left",fullWidth:!0}),r.a.createElement(i.m,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left",fullWidth:!0})),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(i.W,{caption:"Est. Completion Date",name:"dtexpectedcompletion",readOnly:!0})))),r.a.createElement(i.P,null),r.a.createElement(i.J,{style:L.ancillaryContainer},r.a.createElement(i.T,{style:L.label},"Other Permits"),r.a.createElement(i.J,{visibleWhen:g.length>0},g.map((function(e){return r.a.createElement(i.J,{style:L.ancillaryItem},r.a.createElement("label",{style:{marginLeft:20}},e.type.title),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid})))})))),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Submit",action:function(){p(!0)}}))))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.partner,n=e.appno,o=e.appService,l=e.history,c=Object(a.useState)(),s=c[0],p=c[1],u=Object(a.useState)(!1)[1],m=Object(a.useState)({}),d=m[0],f=m[1],E=Object(a.useState)([]),b=E[0],y=E[1],v=function(){p(null),u(!1)};Object(a.useEffect)((function(){u(!0),o.invoke("getProjectInfo",{appid:n},(function(e,t){e?p(e):(f(t),v())})),u(!0),o.invoke("getRequirements",{appid:n},(function(e,t){e?p(e):(y(t),v())}))}),[]);var g=[];d.location&&(d.location.lotno&&g.push("Lot: "+d.location.lotno),d.location.blockno&&g.push("Block: "+d.location.blockno),d.location.street&&g.push("Street: "+d.location.street),d.location.barangay.name&&g.push("Barangay: "+d.location.barangay.name));var h="";d.contractor&&(h=d.contractor.lastname+", "+d.contractor.firstname+" "+d.contractor.middlename,h+="\n"+d.contractor.profession,h+=" PRC NO.: "+d.contractor.prc.idno+" Issued: "+d.contractor.prc.dtissued);var S=R(d.obocontactinfo,"Building and Ancillary Permit");return r.a.createElement(i.J,null,r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:s}),r.a.createElement(i.t,{context:d,handler:f},r.a.createElement("label",null,S),r.a.createElement(i.P,{height:10}),r.a.createElement(i.J,{style:B.container},r.a.createElement(i.J,{style:B.infoContainer},r.a.createElement(i.W,{caption:"Tracking No.",name:"objid",readOnly:!0}),r.a.createElement(i.W,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(i.W,{caption:"Location",expr:function(){return g.join(" ,")},readOnly:!0}),r.a.createElement(i.W,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(i.m,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left"}),r.a.createElement(i.J,{row:!0},r.a.createElement(i.l,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),r.a.createElement(i.l,{caption:"Est. End Date",name:"dtexpectedcompletion",readOnly:!0})),r.a.createElement(i.W,{caption:"Supervisor/In Charge of Project",expr:function(){return h},readOnly:!0,multiline:!0,rows:2})))),r.a.createElement(i.P,null),r.a.createElement("h3",null,"List of Requirements:"),r.a.createElement(i.J,{style:B.requirementsContainer},b.map((function(e,n){var a=e.title.split("\n"),o=function(e){if(1===e.length)return null;var t=e.map((function(e,t){return 0!==t&&e?r.a.createElement("li",{style:B.requirement},e):null}));return r.a.createElement("ul",null,t)}(a),l=function(e,t){var n;return t.docs?(n=t.docs.map((function(t){return r.a.createElement(i.J,{key:t.reportid,style:B.document},r.a.createElement("label",{style:{marginLeft:20}},t.title),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))})),r.a.createElement(i.J,{style:{margin:"0px 20px"}},n)):null}(t,e);return r.a.createElement(i.J,null,r.a.createElement("p",{key:n,style:B.requirement},n+1+".  "+a[0]),l,o)}))),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Return",action:function(){return l.push("/partner/"+t.group.name+"_"+t.name+"/services")}})))}}],V=function(e){var t=Object(a.useState)(!1),n=t[0],o=t[1],c=Object(a.useState)(!1),p=c[0],u=c[1],m=Object(a.useState)("init"),d=m[0],E=m[1],b=Object(a.useState)(Object(i.db)(e.location,"appid")),y=b[0],v=b[1],g=Object(a.useState)(),h=g[0],S=g[1],j=Object(a.useState)({step:1}),O=j[0],x=j[1],k=Object(a.useState)(1),w=k[0],P=k[1],C=(Object(a.useState)({}),e.partner),W=e.service,N=e.history;h!==e.location.hash&&S(e.location.hash);var T=function(){"init"===d&&(E("apptype"),e.history.push(""+location.pathname))};if(Object(a.useEffect)((function(){y?(o(!0),q.invoke("findCurrentInfo",{appid:y},(function(t,n){var a=C.orgcode||C.id;t?u(t):n?a!=n.orgcode?(u("The application number provided is not for this local government"),T()):(x(n),P(n.step),E("processing"),e.history.push(location.pathname+"?appid="+y+"#"+D[n.step].name)):(u("Application no. does not exist"),T()),o(!1)}))):E("apptype")}),[y]),Object(a.useEffect)((function(){if(h){var e=D.find((function(e){return e.name===h.substring(1)}));P(e.step)}}),[h]),"init"===d||n)return r.a.createElement("div",null,r.a.createElement(i.z,null));if("apptype"===d)return r.a.createElement(s,{partner:C,appService:q,service:W,error:p,onCancel:N.goBack,onSubmit:function(e){var t=e.appType,n=e.appno;"new"===t?E(t):n&&v(n)}});if("new"===d)return r.a.createElement(f,l({},e,{handler:function(e){v(e),E("processing")},onCancel:function(){return e.history.goBack()}}));var J=D[w],A=J.component,I={partner:C,appno:y,pages:D,moveNextStep:function(){w<O.step&&1!==w?P((function(e){return e+1})):q.invoke("update",{appid:y,step:w+1},(function(e,t){e?u(e):(P(t.step),x(l({},O,{step:t.step})))}))},appService:q,stepCompleted:w<O.step,history:e.history};return r.a.createElement(i.I,null,O.step<9&&r.a.createElement(i.J,{target:"left",style:_.stepperContainer},r.a.createElement(i.R,{steps:D,completedStep:O.step,activeStep:w,handleStep:function(t){P(t),e.history.push(location.pathname+"?appid="+y+"#"+D[t].name)}})),r.a.createElement(i.f,null,r.a.createElement(i.X,null,W.title),r.a.createElement(A,l({page:J},I))))},_={stepperContainer:{paddingLeft:40}},F=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],M=[{name:"email",title:"Email Verification"},{name:"specifybldgpermit",title:"Specify Building Permit"},{name:"verifybldgpermit",title:"Verify Building Permit Information"},{name:"confirmation",title:"Confirmation"},{name:"newapp",title:"New Application "}],U=function(e){var t=e.partner,n=e.service,l=e.onComplete,c=e.appService,s=e.onCancel,m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)({}),g=v[0],h=v[1],S=Object(a.useState)("new")[0],j=Object(a.useState)(),O=j[0],x=j[1],k=Object(a.useState)(),w=k[0],P=k[1],C=Object(a.useState)({}),W=C[0],N=C[1],T=Object(a.useState)(0),J=T[1],A=M[T[0]],I=function(){J((function(e){return e+1}))},L=function(){J((function(e){return e-1}))};return r.a.createElement(i.I,null,"email"===A.name?r.a.createElement(o.g,{title:n.title,showName:!0,onCancel:s,onVerify:function(e){h(e),I()},partner:t,connection:"obo"}):r.a.createElement(i.f,null,r.a.createElement(i.X,null,n.title),r.a.createElement(i.J,{visibleWhen:"specifybldgpermit"===A.name},r.a.createElement(i.S,null,A.title),r.a.createElement(i.P,{height:30}),r.a.createElement(i.W,{caption:"Building Permit No.",value:w,onChange:P,variant:"outlined",fullWidth:!1,required:!0,error:b.bldgPermitNo||d,helperText:b.bldgPermitNo||d,size:"small",autoFocus:!0}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:L}),r.a.createElement(i.e,{caption:"Next",action:function(){w?(f(null),i.O.lookup(t.id+":OboOnlineService","obo").invoke("findBldgPermitNo",{permitno:w},(function(e,t){e?f(e):(N(t),I())}))):y({bldgPermitNo:"Please specify the Building Permit No."})}}))),r.a.createElement(i.t,{visibleWhen:"verifybldgpermit"===A.name,context:W,handler:N},r.a.createElement(i.S,null,"Verify Building Permit Information"),r.a.createElement(i.P,{height:30}),r.a.createElement(i.W,{caption:"Building Permit No.",name:"permitno",readOnly:!0}),r.a.createElement(i.W,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(i.P,null),r.a.createElement(i.W,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(i.W,{caption:"Location",name:"location.text",readOnly:!0}),r.a.createElement(i.m,{caption:"Project Cost",name:"projectcost",readOnly:!0}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:L}),r.a.createElement(i.e,{caption:"Next",action:function(){I()}}))),r.a.createElement(i.J,{visibleWhen:"confirmation"===A.name},r.a.createElement(p,{partner:t,error:d,onCancel:L,onContinue:function(){c.invoke("create",{orgcode:t.id,apptype:S,permittype:W.apptype,applicant:W.applicant,bldgpermit:W,contact:g},(function(e,t){e?f(e):(x(t.objid),I())}))}})),r.a.createElement(i.J,{visibleWhen:"newapp"===A.name,width:400},r.a.createElement(u,{appno:O,onContinue:function(){l({appType:"new",appno:O})}}))))},z={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},columnTitle:{fontWeight:"bold",textAlign:"center",width:300,padding:10},row:{display:"flex",flexDirection:"row",alignItems:"flex-start"},label:{width:"100%"},item:{width:400,marginRight:10}},X={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},H={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},Y={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"}},G={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"},requirementsContainer:{marginRight:15,marginBottom:20},requirement:{fontSize:"0.9rem"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},K=i.O.lookup("OnlineOccupancyPermitService","obo"),Q=[{step:0,component:null},{step:1,name:"apptype",caption:"Application Type",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,l=Object(a.useState)(),c=l[0],s=l[1],p=(Object(a.useState)(!1),Object(a.useState)({})),u=p[0],m=p[1];return Object(a.useEffect)((function(){s(null),n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):m(t)}))}),[]),r.a.createElement(i.J,null,r.a.createElement(i.s,{msg:c}),r.a.createElement(i.t,{context:u,handler:m},r.a.createElement(i.M,{name:"apptype"},r.a.createElement(i.x,{caption:"Full (Completed)",value:"full"}),r.a.createElement(i.x,{caption:"Partial",value:"partial"}))),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Next",action:function(){n.invoke("update",{objid:u.objid,apptype:u.apptype},(function(e,t){e?s(e):o()}))}})))}},{step:2,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,c=e.appService,s=e.movePrevStep,p=e.moveNextStep,u=Object(a.useState)(!1),m=u[0],d=u[1],f=Object(a.useState)(!1),E=f[0],b=f[1],y=Object(a.useState)("read")[1],v=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1}),g=v[0],h=v[1],S=Object(a.useRef)();return Object(a.useEffect)((function(){d(!0),b(null),c.invoke("getApplicant",{appid:t},(function(e,t){e?b(e):h(t||{}),d(!1),y("read")}))}),[]),r.a.createElement(i.J,null,r.a.createElement(i.s,{msg:E}),r.a.createElement(i.t,{context:g,handler:h},r.a.createElement("form",{ref:S},r.a.createElement(i.j,{items:F,name:"entitytype",caption:"Type of Applicant"}),r.a.createElement(i.W,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==g.entitytype}),r.a.createElement(i.P,null),r.a.createElement(i.J,null,r.a.createElement(i.T,null,"Administrator or contact name of applicant"),r.a.createElement(i.W,{caption:"Last Name",name:"lastname",required:!0}),r.a.createElement(i.W,{caption:"First Name",name:"firstname",required:!0}),r.a.createElement(i.W,{caption:"Middle Name",name:"middlename",required:!0}),r.a.createElement(i.r,{name:"email"}),r.a.createElement(i.F,{name:"mobileno"})),r.a.createElement(i.P,null),r.a.createElement(i.T,null,"Applicant Address"),r.a.createElement(i.i,{caption:"Resident",name:"resident",onChange:function(){var e=l({},g,{resident:!g.resident,address:{}});h(e)}}),g.resident?r.a.createElement(o.i,{orgcode:n.id,name:"address",caption:"Address",isResident:g.resident}):r.a.createElement(o.j,{name:"address",caption:"Address"}),r.a.createElement(i.P,null),r.a.createElement(i.T,null,"Proof of Identity"),r.a.createElement(o.h,{name:"id"}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:s}),r.a.createElement(i.e,{caption:"Next",action:function(){S.current.reportValidity()&&(g.resident&&g.address&&!g.address.barangay||(b(null),d(!0),c.invoke("saveApplicant",g,(function(e,t){e?b(e):p(),d(!1)}))))},disableWhen:m,loading:m})))}},{step:3,name:"actualcost",caption:"Actual Costs",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c=e.movePrevStep,s=Object(a.useState)(),p=s[0],u=s[1],m=Object(a.useState)({}),d=m[0],f=m[1],E=Object(a.useState)({items:[{caption:"Total Materials Cost",field:"totalmaterialcost",value:0},{caption:"Total Direct Cost",field:"totaldirectlaborcost",value:0},{caption:"Total Equipment Cost",field:"totalequipmentcost",value:0},{caption:"Total Other Cost",field:"totalothercost",value:0}]}),b=E[0],y=E[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){if(e)u(e);else{f(t);var n=l({},b);n.items.forEach((function(e){e.value=t[e.field]})),y(n)}}))}),[t]),r.a.createElement(i.J,{style:{maxWidth:600}},r.a.createElement(i.y,null,"Please indicate the actual cost of construction."),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:p}),r.a.createElement(i.t,{context:b,handler:y,style:X.container},b.items.map((function(e,t){return r.a.createElement(i.J,{key:e.field,style:X.row},r.a.createElement(i.y,{caption:e.caption,style:X.label}),r.a.createElement(i.m,{name:"items["+t+"].value",variant:"outlined",style:X.item,fullWdith:!1}))}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:c}),r.a.createElement(i.e,{caption:"Next",action:function(){var e=l({},d);b.items.forEach((function(t){e[t.field]=t.value})),n.invoke("update",e,(function(e,t){e?u(e):o()}))}})))}},{step:4,name:"firesafetycost",caption:"Fire Safety Costs",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,c=e.movePrevStep,s=Object(a.useState)(!1),p=s[0],u=s[1],m=Object(a.useState)(),d=m[0],f=m[1],E=(Object(a.useState)({}),Object(a.useState)({items:[]})),b=E[0],y=E[1];return Object(a.useEffect)((function(){n.invoke("getAppInfos",{appid:t},(function(e,t){e?f(e):y(l({},b,{items:t}))}))}),[t]),r.a.createElement(i.J,{style:{maxWidth:600}},r.a.createElement(i.y,null,"Please indicate the other cost of construction."),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.t,{context:b,handler:y,style:H.container},b.items.map((function(e,t){return r.a.createElement(i.J,{key:e.objid,style:H.row},r.a.createElement(i.y,{caption:e.caption,style:H.label}),r.a.createElement(i.m,{name:"items["+t+"].value",variant:"outlined",style:H.item,fullWdith:!1}))}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:c}),r.a.createElement(i.e,{caption:"Next",action:function(){u(!0),n.invoke("saveAppInfos",{appid:t,infos:b.items},(function(e,t){e?f(e):o(),u(!1)}))},disableWhen:p,loading:p})))}},{step:5,name:"plannedactual",caption:"Planned vs Actual",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,l=e.movePrevStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),p=s[0],u=s[1],m=Object(a.useState)({}),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):y(t)}))}),[t]),r.a.createElement(i.J,{style:{maxWidth:600}},r.a.createElement(i.y,null,"Please indicate the actual values of construction."),r.a.createElement(i.P,null),r.a.createElement(i.t,{context:b,handler:y,style:z.container},r.a.createElement("form",{ref:v},r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"",style:z.label}),r.a.createElement("div",{style:z.columnTitle},"Planned"),r.a.createElement("div",{style:z.columnTitle},"Actual")),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"Project Total Cost",style:z.label}),r.a.createElement(i.m,{name:"bldgpermit.projectcost",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.m,{name:"actualprojectcost",disabled:!0,style:z.item,fullWdith:!1,variant:"outlined"})),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"Total Floor Area (sqm)",style:z.label}),r.a.createElement(i.m,{name:"bldgpermit.totalfloorarea",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.m,{name:"actualtotalfloorarea",required:!0,style:z.item,fullWdith:!1,variant:"outlined",autoFocus:!0})),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"No. of Units",style:z.label}),r.a.createElement(i.m,{name:"bldgpermit.numunits",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.m,{name:"actualnumunits",style:z.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"No. of Floors",style:z.label}),r.a.createElement(i.m,{name:"bldgpermit.numfloors",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.m,{name:"actualnumfloors",style:z.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"Height (m)",style:z.label}),r.a.createElement(i.m,{name:"bldgpermit.height",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.m,{name:"actualheight",style:z.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"Start Date",style:z.label}),r.a.createElement(i.l,{name:"bldgpermit.dtproposedconstruction",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.l,{name:"dtactualstarted",style:z.item,fullWdith:!1,variant:"outlined",required:!0})),r.a.createElement(i.J,{style:z.row},r.a.createElement(i.y,{caption:"Completion Date",style:z.label}),r.a.createElement(i.l,{name:"bldgpermit.dtexpectedcompletion",disabled:!0,variant:"outlined",style:z.item,fullWdith:!1}),r.a.createElement(i.l,{name:"dtactualcompleted",style:z.item,fullWdith:!1,variant:"outlined",required:!0,error:d.dtactualcompleted,helperText:d.dtactualcompleted})),r.a.createElement(i.P,null))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:l}),r.a.createElement(i.e,{caption:"Next",action:function(){v.current.reportValidity()&&function(){var e={};return b.dtactualstarted&&b.dtactualcompleted&&Object(i.ib)(b.dtactualcompleted,b.dtactualstarted)&&(e.dtactualcompleted="Actual date completed should be after actual date started."),Object(i.fb)(e)?(f(e),!1):(f({}),!0)}()&&(u(!0),n.invoke("update",b,(function(e,t){e?c(e):o(),u(!1)})))},disableWhen:p,loading:p})))}},{step:6,name:"contractor",caption:"Contractor",component:function(e){var t=e.appno,n=e.appService,o=e.moveNextStep,l=e.movePrevStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),p=s[0],u=s[1],m=Object(a.useState)({})[0],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(!1),y=b[0],v=b[1],g=Object(a.useRef)();return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):(t.contractor=t.contractor||{pcab:{},manager:{}},t.contractor.pcab||(t.contractor.pcab={}),v(!(!t.contractor||!t.contractor.name)),E(t))}))}),[t]),r.a.createElement(i.J,null,r.a.createElement(i.y,null,"Please specify contractor if available"),r.a.createElement(i.P,null),r.a.createElement(i.i,{value:y,onChange:v,caption:"Is undertaken by a Contractor?"}),r.a.createElement(i.t,{visibleWhen:y,context:f,handler:E},r.a.createElement("form",{ref:g},r.a.createElement(i.W,{name:"contractor.name",caption:"Contractor",required:!0,error:m.name}),r.a.createElement(i.W,{name:"contractor.address",caption:"Address",required:!0,error:m.address}),r.a.createElement(i.W,{name:"contractor.pcab.idno",caption:"PCAB License No.",required:!0,error:m.pcabidno}),r.a.createElement(i.l,{name:"contractor.pcab.dtvalid",caption:"Validity Date",required:!0,error:m.pcabdtvalid}),r.a.createElement(i.W,{name:"contractor.tin",caption:"TIN",required:!0,error:m.tin}),r.a.createElement(i.W,{name:"contractor.manager.name",caption:"Authorized Managing Officer",required:!0,error:m.manageroffice}),r.a.createElement(i.r,{name:"contractor.manager.email",required:!0,error:m.manageremail}))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:l}),r.a.createElement(i.e,{caption:"Next",action:function(){if(u(!0),y){if(!g.current.reportValidity())return;n.invoke("update",{objid:f.objid,contractor:f.contractor},(function(e,t){e?c(e):o(),u(!1)}))}else n.invoke("update",{objid:f.objid,contractor:{name:null,address:null,pcab_idno:null,pcab_dtvalid:null,tin:null,manager:{name:null,email:null}}},(function(e,t){e?c(e):o(),u(!1)}))},disableWhen:p,loading:p})))}},{step:7,name:"professionals",caption:"Professionals",component:function(e){var t=e.appno,n=e.appService,o=e.movePrevStep,l=e.moveNextStep,c=Object(a.useState)()[1],s=Object(a.useState)(!1),p=s[0],u=s[1],m=Object(a.useState)("design"),d=m[0],f=m[1],E=Object(a.useState)([]),b=E[0],y=E[1];Object(a.useEffect)((function(){u(!0),n.invoke("getProfessionals",{appid:t},(function(e,t){e?c(e):y(t),u(!1)}))}),[t]);var v=function(e,t){var n=b[t];"design"===d?(n.designprofessionalid=e.objid,n.designprofessional=e):(n.supervisorid=e.objid,n.supervisor=e);var a=[].concat(b);a[t]=n,y(a)},g=function(){u(!0),n.invoke("updateProfessionals",b,(function(e,t){e?c(e):"design"===d?f("supervisor"):l(),u(!1)}))};return r.a.createElement(i.J,null,r.a.createElement(i.J,{visibleWhen:"design"===d},r.a.createElement("h3",null,"List of Design Professionals"),b.map((function(e,t){return e.section.designprofessionalrole?r.a.createElement("div",{key:e.objid},e.designprofessionalid?r.a.createElement(k,{caption:e.sectionid+" Design Professional",professional:b[t].designprofessional,onSelectProfessional:function(e){return v(e,t)},role:e.section.designprofessionalrole}):r.a.createElement(x,{caption:e.sectionid+" Design Professional",searchFieldTitle:"",onSelect:function(e){return v(e,t)},role:e.section.designprofessionalrole})):null})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:o}),r.a.createElement(i.e,{caption:"Next",action:g,disableWhen:p,loading:p}))),r.a.createElement(i.J,{visibleWhen:"supervisor"===d},r.a.createElement("h3",null,"List of Supervisors"),b.map((function(e,t){return e.section.supervisorrole?r.a.createElement("div",{key:e.objid},e.supervisorid?r.a.createElement(k,{caption:e.sectionid+" Supervisor",professional:b[t].supervisor,onSelectProfessional:function(e){return v(e,t)},role:e.section.supervisorrole}):r.a.createElement(x,{caption:e.sectionid+" Supervisor",searchFieldTitle:"",onSelect:function(e){return v(e,t)},role:e.section.supervisorrole})):null})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return f("design")}}),r.a.createElement(i.e,{caption:"Next",action:g,disableWhen:p,loading:p}))))}},{step:8,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,o=e.movePrevStep,l=e.moveNextStep,c=Object(a.useState)(),s=c[0],p=c[1],u=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)({})),m=u[0],d=u[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?p(e):(console.log("app.supervisor",t.supervisor),b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{objid:m.objid,supervisorid:e.objid},(function(t,n){t?p(t):(p(null),b(e))}))};return r.a.createElement(i.J,null,r.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),r.a.createElement(i.s,{msg:s}),r.a.createElement(i.P,null),r.a.createElement(i.J,null,E&&E.lastname?r.a.createElement(k,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y}):r.a.createElement(x,{caption:"Inspector/Supervisor",searchFieldTitle:"",onSelect:y})),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:o}),r.a.createElement(i.e,{caption:"Next",action:function(){E?l():p("Please select a professional.")},disableWhen:!E||!E.objid})))}},{step:9,name:"confirmation",caption:"Confirmation",component:function(e){var t=e.appno,n=e.partner,o=e.appService,l=e.movePrevStep,c=e.onComplete,s=Object(a.useState)()[1],p=Object(a.useState)({}),u=p[0],m=p[1];return Object(a.useEffect)((function(){o.invoke("getApplication",{appid:t},(function(e,t){e?s(e):m(t)}))}),[t]),r.a.createElement(i.J,null,r.a.createElement("p",null,"Before sending please check first the generated application info. If everything is in order, you can click Submit button to complete the transaction."),r.a.createElement(i.P,null),r.a.createElement(i.J,{style:Y.container},r.a.createElement(i.J,{style:Y.row},r.a.createElement(i.y,{style:Y.label},"Application for Occupancy Permit"),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),r.a.createElement(i.J,{style:Y.row},r.a.createElement(i.y,{style:Y.label},"Certificate of Completion"),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:l}),r.a.createElement(i.e,{caption:"Submit",action:function(){o.invoke("update",u,(function(e,t){e?s(e):c()}))}})))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.appno,n=e.partner,o=e.appService,l=e.history,c=Object(a.useState)(),s=c[0],p=c[1],u=Object(a.useState)(!1)[1],m=Object(a.useState)({})[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)([]),y=b[0],v=b[1];Object(a.useEffect)((function(){o.invoke("getApplication",{appid:t},(function(e,a){e?p(e):(m(a),i.O.lookup("OboContactInfoService","obo").invoke("getInfo",{orgcode:n.id},(function(e,t){e?p(e):E(t)})),u(!0),p(null),o.invoke("getRequirements",{appid:t},(function(e,t){e?p(e):(v(t),u(!1))})))}))}),[t]);var g=R(f,"Application for Occupancy Permit and Certificate of Completion");return r.a.createElement(i.J,null,s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.s,{msg:s}),r.a.createElement(i.P,null)),r.a.createElement("label",null,g),r.a.createElement(i.P,null),r.a.createElement(i.J,{style:G.container},r.a.createElement(i.J,{style:G.document},r.a.createElement(i.y,{style:G.label},"Application for Occupancy Permit"),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),r.a.createElement(i.J,{style:G.document},r.a.createElement(i.y,{style:G.label},"Certificate of Completion"),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),r.a.createElement(i.P,null),r.a.createElement("h3",null,"List of Requirements:"),r.a.createElement(i.J,{style:G.requirementsContainer},y.map((function(e,t){var a=e.title.split("\n"),o=function(e){if(1===e.length)return null;var t=e.map((function(e,t){return 0!==t&&e?r.a.createElement("li",{style:G.requirement},e):null}));return r.a.createElement("ul",null,t)}(a),l=function(e,t){var n;return t.docs?(n=t.docs.map((function(t){return r.a.createElement(i.J,{key:t.reportid,style:G.document},r.a.createElement("label",{style:{marginLeft:20}},t.title),r.a.createElement(i.J,{row:!0},r.a.createElement(i.L,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),r.a.createElement(i.o,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))})),r.a.createElement(i.J,{style:{margin:"0px 20px"}},n)):null}(n,e);return r.a.createElement(i.J,null,r.a.createElement("p",{key:t,style:G.requirement},t+1+". "+a[0]),l,o)}))),r.a.createElement(i.a,null,r.a.createElement(i.e,{caption:"Return",action:function(){return l.push("/partner/"+n.group.name+"_"+n.name+"/services")}})))}}],Z=function(e){var t=Object(a.useState)(!1),n=t[0],o=t[1],c=Object(a.useState)(!1),p=c[0],u=c[1],m=Object(a.useState)("init"),d=m[0],f=m[1],E=(Object(a.useState)("full"),Object(a.useState)(Object(i.db)(e.location,"appid"))),b=E[0],y=E[1],v=Object(a.useState)(),g=v[0],h=v[1],S=Object(a.useState)({}),j=S[0],O=S[1],x=Object(a.useState)(1),k=x[0],w=x[1],P=e.partner,C=e.service;g!==e.location.hash&&h(e.location.hash),Object(a.useEffect)((function(){b?(o(!0),o(!0),K.invoke("findCurrentInfo",{appid:b},(function(t,n){if(t)u(t);else{if(n||(u("Application no. does not exist"),"init"===d&&(f("apptype"),e.history.push(""+location.pathname))),P.id!=n.orgcode)return u("The application number provided is not for this local government"),void f("init");O(n),w(n.step),f("processing"),e.history.push(location.pathname+"?appid="+b+"#"+Q[n.step].name)}o(!1)}))):f("apptype")}),[b]),Object(a.useEffect)((function(){if(g){var e=Q.find((function(e){return e.name===g.substring(1)}));w(e.step)}}),[g]);var W=function(e){y(e.appno),w(1),f("processing")},N=function(){if(j.step!=Q.length-1){u(null);var e=k<j.step?j.step:k+1;K.invoke("update",{objid:b,step:e},(function(t,n){t?u(t):(w(e),O(l({},j,{step:e})))}))}};if("init"===d||n)return r.a.createElement("div",null,r.a.createElement(i.z,null));if("apptype"===d)return r.a.createElement(s,{appService:K,partner:P,service:e.service,error:p,onCancel:function(){return e.history.goBack()},onSubmit:function(e){var t=e.appType,n=e.appno;u(null),"new"===t?f("new"):K.invoke("findCurrentInfo",{appid:n},(function(e,a){e?u(e):W({appType:t,appno:n,step:a.step})}))}});if("new"===d)return r.a.createElement(U,l({},e,{appService:K,onComplete:W,onCancel:function(){return e.history.goBack()}}));var T=Q[k],J=T.component,A={partner:P,appno:b,pages:Q,moveNextStep:N,movePrevStep:function(){w((function(e){return e-1}))},appService:K,currentStep:k,stepCompleted:k<j.step,onComplete:function(){N()},history:e.history};return r.a.createElement(i.I,null,j.step<Q.length-1&&r.a.createElement(i.J,{target:"left",style:$.stepperContainer},r.a.createElement(i.R,{steps:Q,completedStep:j.step,activeStep:k,handleStep:function(t){w(t),e.history.push(location.pathname+"?appid="+b+"#"+Q[t].name)}})),r.a.createElement(i.f,null,r.a.createElement(i.X,null,C.title),r.a.createElement(i.T,null,"Tracking No. "+b),r.a.createElement(i.S,null,T.caption),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:p}),r.a.createElement(J,l({page:T},A))))},$={stepperContainer:{paddingLeft:40}},ee=function(e){var t=e.name,n=void 0===t?"profession":t,a=e.caption,o=void 0===a?"Profession":a,s=e.professions,p=c(e,["name","caption","professions"]);return r.a.createElement(i.j,l({name:n,caption:o,items:s},p))},te=i.O.lookup("OboProfessionalService","obo"),ne=function(e){var t=e.partner,n=e.onCancel,l=e.onVerified,c=Object(a.useState)("init"),s=c[0],p=c[1],u=Object(a.useState)({})[0],m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)(!1),b=E[0],y=E[1],v=Object(a.useState)({}),g=v[0],h=v[1],S=Object(a.useState)(),j=S[0],O=S[1],x=Object(a.useState)([]),k=x[0],w=x[1],P=Object(a.useRef)();return Object(a.useEffect)((function(){te.invoke("getProfessionList",null,(function(e,t){w(t)}))}),[]),Object(a.useEffect)((function(){Object.keys(u).length>0&&validInfo()}),[g]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.t,{visibleWhen:"init"===s,context:g,handler:h},r.a.createElement("form",{ref:P},r.a.createElement(i.S,null,"Please specify initial information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.E,{name:"prc.idno",caption:"PRC No.",required:!0}),r.a.createElement(ee,{caption:"Profession (Copy profession in the PRC card",name:"profession",expr:function(e){return e},professions:k,required:!0}),r.a.createElement(i.r,{name:"email",required:!0}),r.a.createElement(i.F,{name:"mobileno",required:!0}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Cancel",action:n}),r.a.createElement(i.e,{caption:"Next",action:function(){P.current.reportValidity()&&(f(null),y(!0),te.invoke("verifyInfo",g,(function(e,n){e?f(e):(function(){try{var e=i.O.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:g.email,mobileno:g.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){f(null),O(e.key),p("verify")})).catch((function(e){f(e)})),y(!1))})))},loading:b,disableWhen:b})))),r.a.createElement(i.J,{visibleWhen:"verify"===s},r.a.createElement(i.S,null,"Email Verification"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement("p",null,"Please enter the key code sent to your email at ",g.email,"."),r.a.createElement(o.o,{partner:t,hiddenCode:j,email:g.email,onCancel:function(){return p("init")},onVerified:function(){return l(g)},onResendCode:function(e){O(e)},width:200,connection:"obo"})))},ae=function(e){var t=e.info,n=void 0===t?{}:t,c=e.partner,s=e.onCancel,p=e.onSubmit,u=Object(a.useRef)(),m={entity:l({},n,{resident:!0}),prc:n.prc,id:{},resident:!0},d=Object(a.useState)()[0],f=Object(a.useState)(m),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],g=y[1],h=function(e,t){if(g(e),t)if("prc.dtissued"===t){var n=l({},E.id);n.dtvalid=null,b(l({},E,{id:n}))}else if("id.dtissued"===t){var a=l({},E.prc);a.dtvalid=null,b(l({},E,{prc:a}))}};return r.a.createElement(i.J,null,r.a.createElement(i.S,null,"Register New Professional"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.J,null,r.a.createElement("form",{ref:u},r.a.createElement(i.t,{context:E,handler:b},r.a.createElement("p",null,"Please fill in the necessary data below. Text marked with * are required fields. "),r.a.createElement(i.W,{caption:"Profession",name:"entity.profession",readOnly:!0}),r.a.createElement(o.k,{name:"entity",person:E,showAddress:!0,orgcode:c.id}),r.a.createElement(i.P,null),r.a.createElement(o.l,{name:"prc",disableIdNo:!0,onError:h,dtIssued:E.prc.dtissued}),r.a.createElement(o.m,{name:"ptr",onError:h}),r.a.createElement(o.h,{caption:"Primary Identification",name:"id",onError:h,dtIssued:E.id.dtissued}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:s}),r.a.createElement(i.e,{caption:"Next",action:function(){!v&&u.current.reportValidity()&&p(E)}}))))))},re=function(e){var t=e.onClose,n=e.msg,a=void 0===n?"You have successfully registered your professional information.":n;return r.a.createElement(i.J,null,r.a.createElement(i.k,{center:!0},r.a.createElement(i.P,null),r.a.createElement(i.v,{src:"/assets/success.png",width:120,alt:"success"}),r.a.createElement(i.P,null),r.a.createElement(i.X,null,"Success!"),r.a.createElement(i.P,null),r.a.createElement(i.y,{style:l({},ie.text,{maxWidth:300})},a),r.a.createElement(i.y,{labelStyle:ie.text},"Thank you for using this service."),r.a.createElement(i.P,null),r.a.createElement(i.g,null,r.a.createElement(i.e,{variant:"text",caption:"Return",onClick:t}))))},ie={text:{display:"block",textAlign:"center"}},oe=i.O.lookup("OboProfessionalService","obo"),le=[{step:1,name:"initial",caption:"Initial"},{step:2,name:"newprofessional",caption:"New Professional"},{step:3,name:"disclaimer",caption:"Disclaimer"},{step:4,name:"registered",caption:"Registered"}],ce=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),c=n[0],s=n[1],p=(Object(a.useState)({}),Object(a.useState)("new"),Object(a.useState)(0)),u=p[0],m=p[1],d=(Object(a.useState)(),Object(a.useState)()),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1],g=e.partner,h=e.service,S=e.history,j=function(){m((function(e){return e+1}))},O=le[u];return r.a.createElement(i.I,null,r.a.createElement(i.J,{target:"left",style:se.stepperContainer},r.a.createElement(i.R,{steps:le,activeStep:u})),r.a.createElement(i.f,null,r.a.createElement(i.X,null,h.title),r.a.createElement(i.s,{msg:c}),r.a.createElement(i.J,{visibleWhen:"initial"===O.name},r.a.createElement(ne,{partner:g,onCancel:S.goBack,onVerified:function(e){E(e),j()}})),r.a.createElement(i.J,{visibleWhen:"newprofessional"===O.name},r.a.createElement(ae,{partner:g,info:f,onSubmit:function(e){v(e),j()}})),r.a.createElement(i.J,{visibleWhen:"disclaimer"===O.name},r.a.createElement(o.c,{partner:g,onCancel:function(){m((function(e){return e-1}))},onSubmit:function(){t(!0);var e=function(){var e=l({},y.entity.address);y.entity.resident&&(e.citymunicipality=g.title,e.province=g.group.title);var t=l({},y.entity,{address:e}),n=l({},t,y);return delete n.entity,n}();oe.invoke("create",e,(function(e,n){e?function(e){t(!1),s(e.toString())}(e):j()}))}})),r.a.createElement(i.J,{visibleWhen:"registered"===O.name},r.a.createElement(re,{onClose:function(){return S.goBack()}}))))},se={stepperContainer:{paddingTop:30,paddingLeft:40}},pe=i.O.lookup("OboProfessionalService","obo"),ue=function(e){var t=e.partner,n=e.onCancel,l=e.onVerified,c=Object(a.useState)("init"),s=c[0],p=c[1],u=Object(a.useState)(),m=u[0],d=u[1],f=Object(a.useState)(!1),E=f[0],b=f[1],y=Object(a.useState)({}),v=y[0],g=y[1],h=Object(a.useState)({}),S=h[0],j=h[1],O=Object(a.useState)(),x=O[0],k=O[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.t,{visibleWhen:"init"===s,context:v,handler:g},r.a.createElement(i.S,null,"Please specify PRC Number"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:m}),r.a.createElement(i.E,{name:"prc.idno",caption:"PRC No.",required:!0,autoFocus:!0}),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Cancel",action:n}),r.a.createElement(i.e,{caption:"Next",action:function(){d(null),b(!0),pe.invoke("verifyProfessional",v,(function(e,n){e?d(e):function(e){var n=e.email,a=e.mobileno;try{var r=i.O.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(r.invoke("verifyEmail",{email:n,mobileno:a}))}catch(e){return Promise.reject(e)}}(n).then((function(e){d(null),j(n),k(e.key),p("verifyemail")})).catch((function(e){d(e)})),b(!1)}))},loading:E,disableWhen:E}))),r.a.createElement(i.J,{visibleWhen:"verifyemail"===s},r.a.createElement(i.S,null,"Email Verification"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:m}),r.a.createElement("p",null,"Please enter the key code sent to your email at ",S?S.email:"","."),r.a.createElement(o.o,{partner:t,hiddenCode:x,email:S.email,onCancel:function(){return p("init")},onVerified:function(){return l(S)},onResendCode:function(e){k(e)},width:200,connection:"obo"})))},me=function(e){var t=e.appService,n=e.professional,c=void 0===n?{}:n,s=e.onCancel,p=e.onSubmit,u=Object(a.useRef)(),m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)(!1),b=E[0],y=E[1],v=Object(a.useState)(c),g=v[0],h=v[1],S=Object(a.useState)(!1),j=S[0],O=S[1],x=function(e,t){if(O(e),t)if("prc.dtissued"===t){var n=l({},g.id);n.dtvalid=null,h(l({},g,{id:n}))}else if("id.dtissued"===t){var a=l({},g.prc);a.dtvalid=null,h(l({},g,{prc:a}))}};return r.a.createElement(i.J,null,r.a.createElement(i.S,null,"Edit Professional Information "),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.J,null,r.a.createElement("form",{ref:u},r.a.createElement(i.t,{context:g,handler:h},r.a.createElement(i.W,{caption:"Profession",name:"profession",readOnly:!0}),r.a.createElement(i.W,{caption:"Full Name",name:"name",readOnly:!0}),r.a.createElement(i.P,null),r.a.createElement("p",null,"Update the databelow and then submit"),r.a.createElement(o.l,{name:"prc",disableIdNo:!0,editValidity:!0,readOnly:!0,onError:x,dtIssued:g.prc.dtissued}),r.a.createElement(o.m,{name:"ptr",disableIdNo:!0,onError:x}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:s}),r.a.createElement(i.e,{caption:"Next",action:function(){if(!j&&u.current.reportValidity()){y(!0),f(null);var e={objid:g.objid};e.prc=g.prc,e.ptr=g.ptr,t.invoke("updateProfessional",e,(function(e,t){e?f(e):p(),y(!1)}))}},loading:b,disableWhen:b}))))))},de=i.O.lookup("OboProfessionalService","obo"),fe=[{step:1,name:"initial",caption:"Initial"},{step:2,name:"editinfo",caption:"Edit Information"},{step:3,name:"success",caption:"Success"}],Ee=function(e){Object(a.useState)(!1);var t=Object(a.useState)(!1)[0],n=(Object(a.useState)({}),Object(a.useState)("new"),Object(a.useState)(0)),o=n[0],l=n[1],c=(Object(a.useState)(),Object(a.useState)({})),s=c[0],p=c[1],u=e.partner,m=e.service,d=e.history,f=function(){l((function(e){return e+1}))},E=fe[o];return r.a.createElement(i.I,null,r.a.createElement(i.J,{target:"left",style:be.stepperContainer},r.a.createElement(i.R,{steps:fe,activeStep:o})),r.a.createElement(i.f,null,r.a.createElement(i.X,null,m.title),r.a.createElement(i.s,{msg:t}),r.a.createElement(i.J,{visibleWhen:"initial"===E.name},r.a.createElement(ue,{partner:u,onCancel:d.goBack,onVerified:function(e){p(e),f()}})),r.a.createElement(i.J,{visibleWhen:"editinfo"===E.name},r.a.createElement(me,{appService:de,partner:u,professional:s,onCancel:function(){l((function(e){return e-1}))},onSubmit:f})),r.a.createElement(i.J,{visibleWhen:"success"===E.name},r.a.createElement(re,{onClose:function(){return d.goBack()},msg:"You have successfully updated your professional information."}))))},be={stepperContainer:{paddingTop:30,paddingLeft:40}},ye=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),l=n[0],c=n[1],s=Object(a.useState)("init"),p=s[0],u=s[1],m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)({subtasks:[]}),b=E[0],y=E[1],v=Object(a.useState)({}),g=v[0],h=v[1],S=Object(a.useState)()[1],j=e.partner,O=e.service,x=e.history,k="";return b&&b.task&&(k=Object(i.bb)(b.task.dtcreated)),r.a.createElement(i.I,null,r.a.createElement(i.f,null,r.a.createElement(i.X,null,O.title),r.a.createElement(i.J,{visibleWhen:"init"===p},r.a.createElement(i.S,null,"Building Permit Tracking No."),r.a.createElement(i.P,null),r.a.createElement(i.W,{caption:"Tracking No.",name:"trackingno",value:d,onChange:f,required:!0,error:l,helperText:l,fullWidth:!1,variant:"outlined"}),r.a.createElement(i.a,null,r.a.createElement(i.c,{action:function(){return x.goBack()}}),r.a.createElement(i.e,{caption:"Next",action:function(){c(null),d?i.O.lookup(j.id+":OboOnlineService","obo").invoke("verifyApplication",{trackingno:d},(function(e,t){e?c(e):(h(t),u("verification"))})):c("Tracking No. is required.")}}))),r.a.createElement(i.J,{visibleWhen:"verification"===p},r.a.createElement(i.S,null,"Account Verification"),r.a.createElement(i.P,null),r.a.createElement(o.o,{partner:j,hiddenCode:g.key,email:g.email,onCancel:function(){return u("init")},onVerified:function(e){S(e),t(!0),i.O.lookup(j.id+":OboOnlineService","obo").invoke("findApplicationStatus",{trackingno:d},(function(e,n){e?c(e):(y(n),u("info"),c(null),t(!1))}))}})),r.a.createElement(i.t,{visibleWhen:"info"===p,context:b,handler:y},r.a.createElement(i.S,null,"Building Permit Application Status"),r.a.createElement(i.P,null),r.a.createElement(i.J,null,r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{caption:"Tracking No.",name:"trackingno",readOnly:!0}),r.a.createElement(i.W,{caption:"Application No.",name:"appno",readOnly:!0})),r.a.createElement(i.W,{caption:"Project Title",name:"title",readOnly:!0}),r.a.createElement(i.W,{caption:"Project Location",expr:function(){if(!b.location)return"";var e=[];return b.location.lotno&&e.push("Lot: "+b.location.lotno),b.location.blockno&&e.push("Block: "+b.location.blockno),b.location.street&&e.push("Street: "+b.location.street),b.location.barangay.name&&e.push("Barangay: "+b.location.barangay.name),e.join(" ")},readOnly:!0}),r.a.createElement(i.P,null),r.a.createElement(i.W,{caption:"Applicant",name:"applicant.name",readOnly:!0}),r.a.createElement(i.W,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),r.a.createElement(i.W,{caption:"Type of Work",expr:function(){var e,t="";return b.worktypes&&b.worktypes.length>0&&(t=null===(e=b.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0})),r.a.createElement(i.P,null),r.a.createElement(i.J,{style:ve.currentTask},r.a.createElement("div",{style:ve.title},r.a.createElement(i.T,null,"Current Task (ongoing)")),r.a.createElement("div",{style:ve.taskInfo},r.a.createElement("h3",null,b&&b.task&&b.task.title),r.a.createElement(i.y,{caption:"Date Endorsed",expr:"task.dtcreated"}),b&&b.task&&b.task.assignee.name&&r.a.createElement(i.y,{caption:"Assigned To",expr:"task.assignee.name"}),r.a.createElement(i.y,{caption:"Duration",context:b,expr:function(e){return k}})))),r.a.createElement(i.J,{visibleWhen:"info"===p},r.a.createElement(i.P,null),r.a.createElement(i.T,null,"Activity Summary"),r.a.createElement("table",{style:ve.table},r.a.createElement("tr",{style:ve.trth},r.a.createElement("th",{style:ve.tableText},"Section"),r.a.createElement("th",{style:ve.tableText},"Name"),r.a.createElement("th",{style:ve.tableText},"Date Endorsed"),r.a.createElement("th",{style:ve.tableText},"Duration")),r.a.createElement("tbody",null,b.subtasks.map((function(e){return r.a.createElement("tr",{key:e.objid,style:ve.trth},r.a.createElement("td",{style:ve.tableText},e.typeid),r.a.createElement("td",{style:ve.tableText},e.task.title),r.a.createElement("td",{style:ve.tableText},e.task.dtcreated||"Not yet started"),r.a.createElement("td",{style:ve.tableText},Object(i.bb)(e.task.dtcreated),"  "))})))))))},ve={currentTask:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)"},taskInfo:{padding:"0px 10px"},title:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},table:{width:"100%",borderSpacing:0},tableText:{fontSize:12,border:"1px solid #ddd",padding:5},trth:{border:"1px solid #ddd",cellSpacing:0,padding:5}},ge=function(e){var t=e.title,n=e.partner,o=e.onCancel,l=e.onSubmit,c=e.error,s=Object(i.jb)()[0],p=s.refno,u=s.txntype,m=Object(a.useState)(s.bill)[0],d=Object(a.useState)(c)[0],f=Object(a.useState)(!1)[0];return r.a.createElement(i.f,{style:{maxWidth:800}},r.a.createElement(i.X,null,t),r.a.createElement(i.S,null,"Billing Information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.J,null,r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{context:m,caption:"Tracking No.",expr:"trackingno",readOnly:!0}),r.a.createElement(i.W,{context:m,caption:"Application No.",expr:"appno",readOnly:!0})),r.a.createElement(i.J,{row:!0},r.a.createElement(i.W,{context:m,caption:"Permit Type",expr:"permittype",readOnly:!0}),r.a.createElement(i.W,{context:m,caption:"Application Type",expr:"apptype",readOnly:!0})),r.a.createElement(i.W,{context:m,caption:"Project Name",expr:"title",readOnly:!0}),r.a.createElement(i.W,{context:m,caption:"Applicant",expr:"applicant.name",readOnly:!0}),r.a.createElement(i.W,{context:m,caption:"Address",expr:"applicant.address.text",readOnly:!0}),r.a.createElement("h4",null,"Bill Details"),r.a.createElement(i.U,{items:m?m.items:[],size:"small",showPagination:!1},r.a.createElement(i.V,{caption:"Particulars",expr:"item.title",width:500}),r.a.createElement(i.V,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),r.a.createElement(i.J,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},r.a.createElement(i.y,{context:m,caption:"Bill Amount:",expr:function(e){return Object(i.Z)(e.amount)}}))),r.a.createElement(i.a,{disabled:f},r.a.createElement(i.c,{caption:"Back",action:function(){o(0)}}),r.a.createElement(i.e,{caption:"Confirm Payment",action:function(){l({refno:p,txntype:u,origin:"filipizen",orgcode:n.id,info:{data:m},paidby:m.paidby,paidbyaddress:m.paidbyaddress,amount:m.amount,particulars:"Obo Application No. "+m.appno})},disableWhen:0===m.amount})))},he={txntype:"obo",contact:{},refno:null,apptype:null,bill:{}},Se=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},je=[{step:1,name:"verification",caption:"Verification",Component:o.b},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,o=e.moveNextStep,c=e.movePrevStep,s=Object(i.jb)(),p=s[1],u=s[0].txntype,m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)(!1),g=v[0],h=v[1],S=Object(a.useState)({apptype:"building"}),j=S[0],O=S[1];return r.a.createElement(i.f,null,r.a.createElement(i.X,null,t),r.a.createElement(i.S,null,"Initial Information"),r.a.createElement(i.P,null),r.a.createElement(i.s,{msg:d}),r.a.createElement(i.t,{context:j,handler:O},r.a.createElement(i.W,{name:"refno",caption:"Application No.",autoFocus:!0,error:b.refno,helperText:b.refno}),r.a.createElement(i.P,null),r.a.createElement(i.J,null,r.a.createElement("label",null,"Application Type:"),r.a.createElement(i.J,{style:{marginLeft:20}},r.a.createElement(i.M,{name:"apptype"},r.a.createElement(i.x,{caption:"Building Permit",value:"building"}),r.a.createElement(i.x,{caption:"Occupancy Permit",value:"occupancy"}))))),r.a.createElement(i.a,null,r.a.createElement(i.c,{caption:"Back",variant:"text",action:c}),r.a.createElement(i.e,{caption:"Next",action:function(){y({}),j.refno?(h(!0),f(null),function(){try{return Promise.resolve(i.O.lookupAsync(n.id+":OboOnlineBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",l({txntype:u},j,{qtr:4,showdetails:!0})))}))}catch(e){return Promise.reject(e)}}().then((function(e){p(l({type:"SET_BILL"},j,{bill:e})),o()})).catch((function(e){f(e.toString()),h(!1)}))):y({refno:"Application No. is required."})},loading:g,disabled:g})))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(i.jb)();return r.a.createElement(o.d,l({module:{title:e.title,component:ge}},e,{contact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],Oe=function(e){var t=e.partner,n=e.service,o=e.location,c=e.history,s=e.initialStep,p=Object(a.useState)(void 0===s?0:s),u=p[0],m=p[1],d=je[u];return r.a.createElement(i.Q,{initialState:he,reducer:Se},r.a.createElement(i.I,null,r.a.createElement(i.k,{center:!0},r.a.createElement(d.Component,l({page:d},{partner:t,service:n,location:o,history:c,moveNextStep:function(){m((function(e){return e+1}))},movePrevStep:function(){0===u?c.goBack():m((function(e){return e-1}))},cancelPayment:function(){m(1)},title:"Building Permit Online Billing"})))))}}}]);
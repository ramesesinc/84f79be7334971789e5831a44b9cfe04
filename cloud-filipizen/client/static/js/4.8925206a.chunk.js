(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{1044:function(e,t){},1098:function(e,t,n){"use strict";n.r(t),n.d(t,"AppTrackingWebController",(function(){return pe})),n.d(t,"BuildingPermitWebController",(function(){return M})),n.d(t,"OboBillingWebController",(function(){return Ee})),n.d(t,"OccupancyPermitWebController",(function(){return X})),n.d(t,"ProfessionalWebController",(function(){return le}));var a=n(609),o=n.n(a),r=n(825),i=n(1052);n(1053);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t.indexOf(n=r[a])>=0||(o[n]=e[n]);return o}var p=function(e){var t=e.onCancel,n=e.onSubmit,i=e.error,l=e.service,c=Object(a.useState)({}),p=c[0],s=c[1],u=Object(a.useState)("new"),m=u[0],d=u[1],f=Object(a.useState)(),E=f[0],b=f[1];return o.a.createElement(r.C,null,o.a.createElement(r.d,null,o.a.createElement(r.Q,null,l.title),o.a.createElement(r.L,null,"Select an action"),o.a.createElement(r.I,{height:30}),o.a.createElement(r.G,{value:m,onChange:d},o.a.createElement(r.v,{caption:"Create New Application",value:"new"}),o.a.createElement(r.v,{caption:"Resume Pending Application",value:"resume"})),o.a.createElement(r.D,{style:{paddingLeft:30}},o.a.createElement(r.P,{caption:"Application Tracking No.",value:E,onChange:b,visibleWhen:"resume"===m,variant:"outlined",fullWidth:!1,required:!0,style:{marginLeft:40},error:p.appno||i,helperText:p.appno||i,size:"small"})),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Cancel",action:t}),o.a.createElement(r.c,{caption:"Next",action:function(){"new"===m||E?n({appType:m,appno:E}):s({appno:"Tracking No. is required."})}}))))},s=function(e){var t=e.partner,n=e.title,i=void 0===n?"New Permit Application":n,l=e.onCancel,c=e.onContinue,p=e.error,s=Object(a.useState)(!1),u=s[0],m=s[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.L,null,i),o.a.createElement(r.I,{height:30}),o.a.createElement(r.q,{msg:p}),o.a.createElement(r.M,null,"Please read thoroughly before proceeding"),o.a.createElement("p",{style:{opacity:.8}},"This online service will require personal information from the applicant, lot owner(s) and professionals involved in this transaction. In compliance with the Data Privacy Act, we are securing your consent that you have been authorized by the aforementioned parties to act on their behalf. The data collected will be stored, processed and used for effectively carrying out legitimate transactions with the local government of ",t.title,". If you do not agree to these terms, you can cancel out by click on the Cancel button. If you agree to these terms, tick on the checkbox and click Continue."),o.a.createElement(r.g,{caption:"Yes, I have read and agree to the terms and conditions",value:u,name:"agreeDisclaimer",onChange:m}),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Cancel",action:l}),o.a.createElement(r.c,{caption:"Continue",action:c,disableWhen:!u})))},u=function(e){var t=e.title,n=e.appno,a=e.onContinue;return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.L,null,void 0===t?"New Permit Application":t),o.a.createElement(r.I,{height:30}),o.a.createElement(r.M,null,"Application created"),o.a.createElement("p",null,"Please take note of the tracking number for this application. This will be your tracking reference for completing and follow up for this application."),o.a.createElement(r.M,null,n),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Continue",action:a})))},m=r.H.lookup("OnlineBuildingPermitService","obo"),d=[{name:"email",caption:"Email Verification"},{name:"select-apptype",caption:"Select Application Type"},{name:"project-name",caption:"Project Name"},{name:"confirmation",caption:"Confirmation"},{name:"newapp",caption:"New Application "}],f=function(e){var t=Object(a.useState)({}),n=t[0],c=t[1],p=(Object(a.useState)(!1),Object(a.useState)("new")[0]),f=(Object(a.useState)(),Object(a.useState)()),E=f[0],b=f[1],y=Object(a.useState)({apptype:"NEW"}),v=y[0],g=y[1],h=Object(a.useState)(0),j=h[0],S=h[1],O=Object(a.useState)(),w=O[0],k=O[1],x=e.partner,P=e.service,C=e.handler,D=e.onCancel,I=d[j],N=function(){S((function(e){return e+1}))};return o.a.createElement(r.C,null,"email"===I.name?o.a.createElement(i.d,{title:P.title,visibleWhen:"email"===I.name,showName:!0,onCancel:D,onVerify:function(e){c(e),N()},partner:x,connection:"obo"}):o.a.createElement(r.d,null,o.a.createElement(r.Q,null,P.title),o.a.createElement(r.r,{visibleWhen:"select-apptype"===I.name,context:v,handler:g},o.a.createElement(r.L,null,"Select Application Type"),o.a.createElement(r.D,{style:{marginLeft:20}},o.a.createElement(r.G,{name:"apptype"},o.a.createElement(r.v,{caption:"New Construction",value:"NEW"}),o.a.createElement(r.v,{caption:"Renovation",value:"RENOVATION",editable:!1}),o.a.createElement(r.v,{caption:"Demolition",value:"DEMOLITION",editable:!1}))),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Back",action:D}),o.a.createElement(r.c,{caption:"Next",action:N}))),o.a.createElement(r.r,{visibleWhen:"project-name"===I.name,context:v,handler:g},o.a.createElement(r.L,null,"New Building Permit Application"),o.a.createElement(r.I,{height:30}),o.a.createElement(r.M,null,"Project Information"),o.a.createElement(r.P,{caption:"Project Name",name:"title",autoFocus:!0}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){S((function(e){return e-1}))}}),o.a.createElement(r.c,{caption:"Next",action:N}))),o.a.createElement(r.D,{visibleWhen:"confirmation"===I.name},o.a.createElement(s,{partner:x,error:w,onCancel:e.goBack,onContinue:function(){var e=l({},v,{orgcode:x.orgcode||x.id,apptype:p,contact:n,worktypes:[]});m.invoke("create",e,(function(e,t){e?k(e):(b(t.objid),N())}))}})),o.a.createElement(r.D,{visibleWhen:"newapp"===I.name,width:400},o.a.createElement(u,{appno:E,onContinue:function(){C(E)}}))))},E=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],b=function(e){var t=e.name,n=e.caption,a=void 0===n?"Lot Ownership":n,i=e.showCaption,p=void 0===i||i,s=c(e,["name","caption","showCaption"]);return o.a.createElement(o.a.Fragment,null,p&&o.a.createElement(r.M,null,a),o.a.createElement(r.G,l({name:t},s),o.a.createElement(r.v,{caption:"Lot Owned",value:"1"}),o.a.createElement(r.v,{caption:"Leased",value:"0"})))},y=["INDIVIDUAL","MULTIPLE","CORPORATION","GOVERNMENT","OTHER"],v=function(e){var t=e.owner,n=e.editable,a=e.editableAddress,l=void 0!==a&&a,p=e.editableIdEntry,s=void 0!==p&&p,u=e.orgcode,m=c(e,["owner","editable","editableAddress","editableIdEntry","orgcode"]),d=m.showIdEntry||!1;return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.M,null,m.title||"Lot Owner Information"),o.a.createElement(r.D,null,o.a.createElement(r.P,{caption:"Profile No.",name:"owner.profileno",editable:n}),o.a.createElement(r.h,{items:y,name:"owner.entitytype",caption:"Ownership Type",editable:n}),"INDIVIDUAL"!==t.entitytype&&o.a.createElement(o.a.Fragment,null,o.a.createElement(r.P,{caption:"Lot Owner Name",name:"owner.name",editable:n}),o.a.createElement(r.w,null,"Name of administrator/contact of property owner")),o.a.createElement(r.P,{caption:"Last Name",name:"owner.lastname",editable:n}),o.a.createElement(r.P,{caption:"First Name",name:"owner.firstname",editable:n}),o.a.createElement(r.P,{caption:"Middle Name",name:"owner.middlename",editable:n}),o.a.createElement(i.k,{person:t,orgcode:u,name:"owner",editable:n||l}),d&&o.a.createElement(i.e,{name:"owner.id",editable:n||s})))},g=function(e){var t=e.editable,n=c(e,["editable"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.M,null,n.title||"Lot Information"),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"PIN",name:"pin",editable:t}),o.a.createElement(r.P,{caption:"Lot No.",name:"lotno",editable:t}),o.a.createElement(r.P,{caption:"Block No.",name:"blockno",editable:t})),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"Street",name:"street",editable:t}),o.a.createElement(r.P,{caption:"Barangay",name:"barangay",editable:t})),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"TD No.",name:"tdno",editable:t}),o.a.createElement(r.P,{caption:"Title No.",name:"titleno",editable:t})),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"Classification",name:"classcode",editable:t}),o.a.createElement(r.P,{caption:"Area",name:"areasqm",editable:t})))},h={balanceText:{color:"red",fontWeight:"bold"},locationContainer:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",marginBottom:10},tdno:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},rpuInfoContainer:{padding:"10px"}},j=r.H.lookup("OboMiscListService","obo"),S={column:{display:"flex",flexDirection:"column",marginLeft:20}},O=r.H.lookup("OboProfessionalService","obo"),w=function(e){var t=e.caption,n=void 0===t?"Search Professional":t,i=e.searchFieldTitle,c=void 0===i?"PRC No.":i,p=e.onSelect,s=e.hideSearchText,u=void 0!==s&&s,m=e.fullWidth,d=void 0===m||m,f=e.role,E=Object(a.useState)({prc:{}}),b=E[0],y=E[1],v=Object(a.useState)(),g=v[0],h=v[1],j=Object(a.useState)(),S=j[0],w=j[1],k=Object(a.useState)(!1),x=k[0],P=k[1],C=Object(a.useState)(),D=C[1],I=function(e){if(O&&b.prc.idno){var t=l({},b,e);O.invoke("getList",t,(function(e,t){e?console.log("ERROR",e):w(t)}))}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.B,{title:"Invalid Profession",open:x,msg:C[0],onAccept:function(){return P(!1)}}),o.a.createElement(r.y,{caption:n,query:b,setQuery:y,searchFieldTitle:c,searchField:"prc.idno",onSelect:function(){var e=g[0];return function(e){if(!f)return!0;var t=f.toLowerCase(),n="";if(!(t.indexOf(e.profession.toLowerCase())>=0)){var a=t.split(",");if(1==a.length)n="Only "+a[0].toLowerCase()+" profession is allowed.";else{var o=(n="Only "+a.join(", ")+" professions are allowed.").lastIndexOf(",");n=n.substring(0,o)+" and "+n.substring(o+2)}var r="The profession of the selected professional is invalid. "+n;return D(r),console.log("ERROR",r),!1}return!0}(e)?(p(e),!0):(P(!0),!1)},fetchList:I,hideSearchText:u,enableSelect:g&&g.length>0,fullWidth:d,rootStyle:{minWidth:400}},o.a.createElement(r.r,{context:b,handler:y},o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"PRC No.",name:"prc.idno",width:200,variant:"outlined"}),o.a.createElement(r.c,{caption:"Search",action:function(){I({limit:5,start:0})}}))),o.a.createElement(r.N,{items:S,fetchList:I,rowsPerPage:5,showPagination:!1,singleSelect:!0,keyId:"objid",onSelectItems:function(e){h(e)}},o.a.createElement(r.O,{caption:"PRC",expr:"prc.idno"}),o.a.createElement(r.O,{caption:"Name",expr:function(e){return e.lastname+", "+e.firstname+" "+e.middlename}}),o.a.createElement(r.O,{caption:"Profession",expr:"profession"}))))},k=function(e){var t=e.professional,n=void 0===t?{prc:{},ptr:{}}:t,a=e.caption,i=e.onSelectProfessional,c=e.photoUrl,p=e.role,s="";n.lastname&&(s=n.lastname+", "+n.firstname+" "+n.middlename);var u=x.container,m=x.lookupContainer,d=x.caption;return"string"==typeof n.lastname&&(u=l({},u,{backgroundColor:"#d1d7f8"}),m=l({},m,{backgroundColor:"#454f88"}),d=l({},d,{color:"white"})),o.a.createElement("div",{style:u},o.a.createElement(r.D,{style:m},o.a.createElement(r.w,{captionStyle:d,caption:a}),o.a.createElement(w,{hideSearchText:!0,onSelect:i,fullWidth:!1,role:p})),o.a.createElement("div",{style:{marginTop:10,marginBottom:10,padding:10}},o.a.createElement("div",{style:x.nameContainer},o.a.createElement(r.D,{center:!0},o.a.createElement(r.w,{labelStyle:x.name},s),o.a.createElement(r.w,{labelStyle:x.profession},n.profession)),o.a.createElement(r.t,{src:c})),o.a.createElement(r.D,{style:x.row},o.a.createElement(r.D,null,o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"PRC ID No."},n.prc.idno),o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"Date Issued"},n.prc.dtissued),o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"Valid Until"},n.prc.dtvalid),o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"Place Issued"},n.prc.placeissued)),o.a.createElement(r.D,null,o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"PTR ID No."},n.ptr.refno),o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"Date Issued"},n.ptr.dtissued),o.a.createElement(r.w,{style:x.label,captionStyle:{width:120},caption:"Place Issued"},n.ptr.placeissued)))))},x={container:{borderWidth:1,borderColor:"#aaa",boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)",backgroundColor:"#d1d1d1",borderRadius:5},caption:{fontSize:18,width:"100%"},lookupContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#8b8b8b",paddingTop:5,paddingLeft:10,paddingRight:10,borderRadius:5,minWidth:400},nameContainer:{dipslay:"flex",justifyContent:"space-between",marginBottom:5},name:{fontSize:18,fontWeight:800},profession:{fontSize:14,fontWeight:600,backgroundColor:"#ddddd",width:"100%"},row:{display:"flex",flexDirection:"row",justifyContent:"space-between"},label:{paddingBottom:2}},P=r.H.lookup("OboMiscListService","obo"),C={row:{display:"flex",alignItems:"flex-start"},group:{fontSize:20,fontWeight:700,marginRight:15,paddingTop:8}},D=function(e){var t=e.item;return o.a.createElement(r.D,{style:{paddingBottom:5}},o.a.createElement(r.D,{style:C.row},o.a.createElement("div",{style:C.group},t.objid),o.a.createElement(r.D,null,o.a.createElement(r.M,null,t.title),o.a.createElement("label",null,t.description))))},I={decimal:r.k,integer:r.u,boolean:function(e){return o.a.createElement("div",{style:T.checkInfo},o.a.createElement(r.g,e))}},N=function(e){var t=e.category,n=e.dataType,a=void 0===n?"integer":n,i=e.unit,l=e.name,c=I[a],p=e.caption.toLowerCase();return"boolean"!==a&&(p+=" ("+i.toLowerCase()+")"),o.a.createElement(r.D,null,t&&o.a.createElement(r.w,{style:T.category},t),o.a.createElement("div",{style:T.infoContainer},o.a.createElement("label",null,p),o.a.createElement(c,{name:l,fullWidth:!1,variant:"outlined",size:"small",width:120,style:{flexBasis:100}})))},T={infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20},category:{fontSize:16,fontWeight:600,border:"1px solid #aaa",backgroundColor:"#eee",padding:"2px 10px",margin:"10px 0px"},checkInfo:{width:100,display:"flex",justifyContent:"flex-start",alignItems:"center",borderWidth:1,borderColor:"#aaa",borderRadius:3}},A={infoTitle:{fontWeight:"bold"},infoContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginLeft:20}},W={professionalLookup:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"lightgray"},itemsContainer:{marginLeft:20,display:"flex",flexDirection:"column"},workTypeContainer:{display:"flex",flexDirection:"column",marginLeft:20}},L={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},ancillaryContainer:{marginRight:15,marginBottom:20},ancillaryItem:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginRight:10,border:"1px solid #aaa"}},q={container:{display:"flex",flexDirection:"column",justifyConent:"flex-start",border:"1px solid #aaa",padding:20,borderRadius:3},infoContainer:{display:"flex",flexDirection:"column",marginRight:10,width:"100%"},linkContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%"},requirementsContainer:{marginRight:15,marginBottom:20},requirement:{fontSize:"0.9rem"},document:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:5,marginBottom:"5px",border:"1px solid #aaa"}},R=r.H.lookup("OnlineBuildingPermitService","obo"),B=[{step:0,component:null},{step:1,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,c=e.appService,p=e.moveNextStep,s=Object(a.useState)(!1)[1],u=Object(a.useState)(!1),m=u[0],d=u[1],f=Object(a.useState)("read")[1],b=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1}),y=b[0],v=b[1];return Object(a.useEffect)((function(){s(!0),d(null),c.invoke("getApplicant",{appid:t},(function(e,t){e?d(e):t?(v(t),f("read")):f("create"),s(!1)}))}),[]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+t),o.a.createElement(r.L,null,"Building Applicant Details"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:m}),o.a.createElement(r.r,{context:y,handler:v},o.a.createElement(r.h,{items:E,name:"entitytype",caption:"Type of Applicant"}),o.a.createElement(r.P,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==y.entitytype}),o.a.createElement(r.I,null),o.a.createElement(r.D,null,o.a.createElement(r.M,null,"Administrator or contact name of applicant"),o.a.createElement(r.P,{caption:"Last Name",name:"lastname",required:!0}),o.a.createElement(r.P,{caption:"First Name",name:"firstname",required:!0}),o.a.createElement(r.P,{caption:"Middle Name",name:"middlename",required:!0}),o.a.createElement(r.p,{name:"email"}),o.a.createElement(r.z,{name:"mobileno"})),o.a.createElement(r.I,null),o.a.createElement(r.M,null,"Applicant Address"),o.a.createElement(r.g,{caption:"Resident",name:"resident",onChange:function(){var e=l({},y,{resident:!y.resident,address:{}});v(e)}}),y.resident?o.a.createElement(i.f,{orgcode:n.id,name:"address",caption:"Address"}):o.a.createElement(i.g,{name:"address",caption:"Address"}),o.a.createElement(r.I,null),o.a.createElement(r.M,null,"Proof of Identity"),o.a.createElement(i.e,{name:"id"})),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){d(null),c.invoke("saveApplicant",y,(function(e,t){e?d(e):p(),s(!1)}))}})))}},{step:2,name:"rpu",caption:"Real Property Info",component:function(e){var t=e.partner,n=e.appno,i=e.appService,l=e.moveNextStep,c=Object(a.useState)(),p=c[0],s=c[1],u=Object(a.useState)(!1),m=u[0],d=u[1],f=Object(a.useState)("view-rpus"),E=f[0],y=f[1],j=Object(a.useState)(),S=j[0],O=j[1],w=Object(a.useState)([]),k=w[0],x=w[1],P=Object(a.useState)({}),C=P[0],D=P[1];Object(a.useEffect)((function(){"view-rpus"===E&&N()}),[E]);var I=function(){O(),s(null),y("initial")},N=function(){i.invoke("getRpus",{appid:n},(function(e,t){e?s(e):x(t)}))};return o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+n),o.a.createElement(r.L,null,"Real Property Information"),o.a.createElement(r.I,null),o.a.createElement(r.D,{visibleWhen:"view-rpus"===E},o.a.createElement(r.M,null,"Lot Information"),o.a.createElement(r.q,{msg:p}),k.map((function(e){return o.a.createElement(r.D,{style:h.locationContainer,key:e.tdno},o.a.createElement("div",{style:h.tdno},o.a.createElement(r.M,null,"TD No. "+e.tdno)),o.a.createElement("div",{style:h.rpuInfoContainer},o.a.createElement(r.w,{caption:"Title No."},e.titleno),o.a.createElement(r.w,{caption:"PIN"},e.pin),o.a.createElement(r.w,{caption:"Address"},(n=[],(t=e).lotno&&n.push("Lot: "+t.lotno),t.blockno&&n.push("Block: "+t.blockno),t.street&&n.push("Street: "+t.street),t.barangay&&n.push("Barangay: "+t.barangay),n.join(" "))),o.a.createElement(r.w,{caption:"Class"},e.classcode),o.a.createElement(r.w,{caption:"Area"},e.areasqm),o.a.createElement(r.w,{caption:"Owner"},e.owner.name)));var t,n})),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Add Lot Info",action:I}),o.a.createElement(r.c,{caption:"Next",action:function(){s(null),0===k.length?s("Add at least one Lot Information."):l()}}))),o.a.createElement(r.D,{visibleWhen:"initial"===E},o.a.createElement(r.M,null,"Specify the Site Location/Property"),o.a.createElement(r.q,{msg:p}),o.a.createElement(r.I,null),o.a.createElement(r.P,{caption:"Tax Declaration No.",value:S,onChange:O,autoFocus:!0}),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Back to List",action:function(){y("view-rpus")},variant:"text"}),o.a.createElement(r.c,{caption:"Search",action:function(){d(!0),r.H.lookup((t.orgcode||t.id)+":OboOnlineService","obo").invoke("findLocation",{refno:S||newRefno},(function(e,t){e?s(e):(t.owner.resident="local"==t.owner.address.type?1:0,t.owner.address.city&&(t.owner.address.citymunicipality=t.owner.address.city),t.owner.address.municipality&&(t.owner.address.citymunicipality=t.owner.address.municipality),t.owner.ctc={},t.lotowned="1",t.appid=n,console.log("Property",t),D(t),y("view-lot")),d(!1)}))},disableWhen:m,loading:m}))),o.a.createElement(r.D,{visibleWhen:"view-lot"===E},o.a.createElement("p",null,"Please check carefully if the information is correct. For any discrepancies, please contact the Assessor's Office before proceeding."),C&&C.bill&&C.appno&&o.a.createElement("label",{style:h.balanceText},"Note: There is still an unpaid balance of ",o.a.createElement("u",null,"Php #",C.bill?C.bill.amtdue:0),". You can settle this by paying online ",o.a.createElement("a",{href:"/partner/"+t.group.name+"_"+t.name+"/rptis/rptbilling",target:"0"},o.a.createElement("u",null,"here"))),o.a.createElement(r.r,{context:C,handler:D},o.a.createElement(g,{editable:!1}),o.a.createElement(r.I,null),o.a.createElement(v,{name:"owner",orgcode:t.id,owner:C.owner,editable:!1})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:I,caption:"Back"}),o.a.createElement(r.c,{action:function(e){y("edit-owner-info")},caption:"Next"}))),o.a.createElement(r.D,{visibleWhen:"edit-owner-info"===E},o.a.createElement("label",null,"Please update the information if necessary"),o.a.createElement(r.r,{context:C,handler:D},o.a.createElement(b,{caption:"Is lot owned or leased?",property:C,name:"lotowned",row:!0,autoFocus:!0}),o.a.createElement(v,{name:"owner",owner:C.owner,orgcode:t.id,editable:!1,showIdEntry:!0,editableAddress:!0,editableIdEntry:!0})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return y("view-lot")},caption:"Back"}),o.a.createElement(r.c,{action:function(){C.owner.id?(s(null),i.invoke("saveRpu",C,(function(e,t){e?s(e):(N(),y("view-rpus"))}))):alert("Please provide proof of identity for owner/administrator of property")},caption:"Next"}))))}},{step:3,name:"location",caption:"Project Location",component:function(e){var t=e.partner,n=e.appno,c=e.appService,p=e.moveNextStep,s=Object(i.m)(t.id),u=Object(a.useState)(),m=u[0],d=u[1],f=Object(a.useState)(!1)[1],E=Object(a.useState)({}),b=E[0],y=E[1];return Object(a.useEffect)((function(){f(!0),c.invoke("getLocation",{appid:e.appno},(function(e,n){e?(d(e),f(!1)):n&&n.barangay&&n.barangay.objid?(n.barangay.parentid=t.id,y(n)):y(null)}))}),[]),Object(a.useEffect)((function(){null===b&&s.length>0&&c.invoke("getRpus",{appid:e.appno},(function(e,t){if(e)d(e);else{var n=t[0];y({lotno:n.lotno,blockno:n.blockno,street:n.street,barangay:s.find((function(e){return e.name===n.barangay}))}),f(!1)}}))}),[b,s]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+n),o.a.createElement(r.L,null,"Project Location"),o.a.createElement(r.I,null),o.a.createElement(r.D,null,o.a.createElement(r.M,null,"Specify Project Location"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:m}),o.a.createElement(r.r,{context:b,handler:y},o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{name:"lotno",caption:"Lot No."}),o.a.createElement(r.P,{name:"blockno",caption:"Block No."})),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{name:"unitno",caption:"Unit No."}),o.a.createElement(r.P,{name:"bldgno",caption:"Building No."})),o.a.createElement(r.P,{name:"bldgname",caption:"Building Name"}),o.a.createElement(r.P,{name:"street",caption:"Street"}),o.a.createElement(r.P,{name:"subdivision",caption:"Subdivision"}),o.a.createElement(r.P,{name:"barangay.name",caption:"Barangay"})),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Back",action:function(){return setMode("view-rpus")},variant:"text"}),o.a.createElement(r.c,{caption:"Next",action:function(){d(null),c.invoke("saveLocation",l({appid:n},b),(function(e,t){e?d(e):p()}))}}))))}},{step:4,name:"project",caption:"Project Details",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,c=e.stepCompleted,p={appid:t,apptype:"NEW",worktypes:[],numfloors:1,numunits:1,occupancytype:{objid:null,group:{},division:{}}},s=Object(a.useState)(),u=s[0],m=s[1],d=(Object(a.useState)({}),Object(a.useState)(!1)[1]),f=Object(a.useState)("project-detail"),E=f[0],b=f[1],y=Object(a.useState)("group")[0],v=Object(a.useState)(p),g=v[0],h=v[1],O=Object(a.useState)([])[1],w=Object(a.useState)([])[1],k=Object(a.useState)([])[1],x=Object(a.useState)()[1],P=Object(a.useState)([]),C=P[0],D=P[1];return Object(a.useEffect)((function(){d(!0),m(null),j.invoke("getWorkTypes",null,(function(e,t){e?m(e):D(t),d(!1)}))}),[]),Object(a.useEffect)((function(){0!==C.length&&(d(!0),m(null),n.invoke("getProjectInfo",{appid:t},(function(e,t){if(e)m(e);else{if(0===t.worktypes.length)t.worktypes=C;else{var n=C.map((function(e){return t.worktypes.find((function(t){return e.objid===t}))?l({},e,{checked:!0}):e}));t.worktypes=n}t.numunits=t.numunits||1,t.numfloors=t.numfloors||1,x(t.contractor),h(t),b("project-detail")}d(!0)})))}),[C]),Object(a.useEffect)((function(){"group"===y?j.invoke("getOccupancyTypeGroups",null,(function(e,t){e?m(e):O(t)})):"division"===y?j.invoke("getOccupancyTypeDivisions",{groupid:g.occupancytype.group.objid},(function(e,t){e?m(e):w(t)})):"type"===y&&j.invoke("getOccupancyTypes",{divisionid:g.occupancytype.division.objid},(function(e,t){e?m(e):k(t)}))}),[y]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+t),o.a.createElement(r.L,null,"Project Details"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:u}),o.a.createElement(r.r,{visibleWhen:"project-detail"===E,context:g,handler:h},o.a.createElement(r.P,{caption:"Project Title",name:"title",required:!0,readOnly:c,autoFocus:!0}),o.a.createElement(r.P,{caption:"Project Description",name:"description",required:!0,readOnly:c}),g.occupancytypeid&&o.a.createElement(r.P,{caption:"Occupancy Type",name:"occupancytype.title",required:!0,readOnly:c}),o.a.createElement(r.I,null),o.a.createElement(r.u,{caption:"No of Units",name:"numunits",required:!0,readOnly:c}),o.a.createElement(r.D,{row:!0},o.a.createElement(r.k,{caption:"Total Floor Area [sq.meter]",name:"totalfloorarea",required:!0,readOnly:c,fullWidth:!0,textAlign:"left"}),o.a.createElement(r.k,{caption:"Building Height [meter]",name:"height",required:!0,readOnly:c,fullWidth:!0,textAlign:"left"})),o.a.createElement(r.u,{caption:"No. of Storeys",name:"numfloors",required:!0,readOnly:c}),o.a.createElement(r.I,null),o.a.createElement(r.k,{caption:"Estimated Cost [Php]",name:"projectcost",required:!0,readOnly:c,decimalScale:2,textAlign:"left"}),o.a.createElement(r.D,{row:!0},o.a.createElement(r.j,{caption:"Proposed Construction Date",name:"dtproposedconstruction",readOnly:c}),o.a.createElement(r.j,{caption:"Expected Completion Date",name:"dtexpectedcompletion",readOnly:c})),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){m(null),n.invoke("update",{appid:t,title:g.title,description:g.description,numunits:g.numunits,totalfloorarea:g.totalfloorarea,height:g.height,numfloors:g.numfloors,projectcost:g.projectcost,dtproposedconstruction:g.dtproposedconstruction,dtexpectedcompletion:g.dtexpectedcompletion},(function(e,t){e?m(e):(m(null),d(!1),b("select-worktype"))}))}}))),o.a.createElement(r.r,{visibleWhen:"select-worktype"===E,context:g,handler:h},o.a.createElement(r.M,null,"Select Work Types"),o.a.createElement(r.D,{style:S.column},g.worktypes.map((function(e,t){return o.a.createElement(r.g,{caption:e.name,name:"worktypes["+t+"].checked",value:e.objid})}))),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return b("project-detail")}}),o.a.createElement(r.c,{caption:"Next",action:function(){if(m(null),g.worktypes.findIndex((function(e){return!0===e.checked}))>=0){m(null);var e={appid:t,worktypes:g.worktypes.filter((function(e){return e.checked})).map((function(e){return e.objid}))};n.invoke("update",e,(function(e,t){e?m(u):(d(!1),i())}))}else m("Please check at least one work type.")}}))))}},{step:5,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,l={appid:t,apptype:"NEW"},c=Object(a.useState)(),p=c[0],s=c[1],u=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)(l)),m=u[0],d=u[1],f=Object(a.useState)(),E=f[0],b=f[1];Object(a.useEffect)((function(){n.invoke("getProjectInfo",{appid:t},(function(e,t){e?s(e):(b(t.supervisor),d(t))}))}),[]);var y=function(e){n.invoke("update",{appid:t,supervisorid:e.objid},(function(t,n){t?s(t):(s(null),b(e))}))};return o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+t),o.a.createElement(r.L,null,"Project Details"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:p}),o.a.createElement(r.D,null,o.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),o.a.createElement(r.I,{height:10}),E&&E.lastname&&o.a.createElement(r.D,null,o.a.createElement(k,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:y,role:m.type?m.type.supervisorrole:null})),(!E||!E.lastname)&&o.a.createElement(w,{caption:"Search Professional",onSelect:y,fullWidth:!1}),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){E?i():s("Please select a professional.")},disableWhen:!E||!E.objid}))))}},{step:6,name:"occupancy",caption:"Occupancy Type",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,l=Object(a.useState)(),c=l[0],p=l[1],s=Object(a.useState)(!1)[1],u=Object(a.useState)("select-occupancytype")[0],m=Object(a.useState)("group"),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)([]),g=v[0],h=v[1],j=Object(a.useState)([]),S=j[0],O=j[1],w=Object(a.useState)([]),k=w[0],x=w[1],C=Object(a.useState)(!1)[1],I=Object(a.useState)(!1)[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?p(e):(y({occupancytype:t.occupancytype}),C(t.occupancytype.objid))}))}),[]),Object(a.useEffect)((function(){"group"===d?P.invoke("getOccupancyTypeGroups",null,(function(e,t){e?p(e):h(t)})):"division"===d?P.invoke("getOccupancyTypeDivisions",{groupid:b.occupancytype.group.objid},(function(e,t){e?p(e):O(t)})):"type"===d&&P.invoke("getOccupancyTypes",{divisionid:b.occupancytype.division.objid},(function(e,t){e?p(e):x(t)}))}),[d]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+t),o.a.createElement(r.L,null,"Occupancy Type"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:c}),o.a.createElement(r.D,{visibleWhen:"select-occupancytype"===u},o.a.createElement(r.r,{visibleWhen:"group"===d,context:b,handler:y},o.a.createElement(r.M,null,"Select Occupancy Group"),o.a.createElement(r.G,{name:"occupancytype.group.objid",list:g,Control:D}),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){b.occupancytype.group.objid?f("division"):p("Kindly select an occupancy group.")}}))),o.a.createElement(r.r,{visibleWhen:"division"===d,context:b,handler:y},o.a.createElement(r.M,null,"Select Occupancy Group Division"),o.a.createElement(r.G,{name:"occupancytype.division.objid",list:S,Control:D}),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Back",action:function(){return f("group")}}),o.a.createElement(r.c,{caption:"Next",action:function(){b.occupancytype.division.objid?f("type"):p("Kindly select an occupancy division group.")}}))),o.a.createElement(r.r,{visibleWhen:"type"===d,context:b,handler:y},o.a.createElement(r.M,null,"Select Occupancy Type"),o.a.createElement(r.G,{name:"occupancytype.objid",list:k,Control:D}),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Back",action:function(){return f("division")}}),o.a.createElement(r.c,{caption:"Next",action:function(){b.occupancytype.objid?n.invoke("updateOccupancyType",{appid:t,occupancytype:b.occupancytype},(function(e,t){e?p(e):(p(null),s(!1),I(!1),i())})):p("Kindly select an occupancy type.")}})))))}},{step:7,name:"accessories",caption:"Accessories",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,l=Object(a.useState)(),c=l[0],p=l[1],s=(Object(a.useState)(!1),Object(a.useState)("initial")),u=s[0],m=s[1],d=Object(a.useState)("TRUE"),f=d[0],E=d[1],b=Object(a.useState)([]),y=b[0],v=b[1],g=Object(a.useState)([]),h=g[0],j=g[1],S=Object(a.useState)([]),O=S[0],w=S[1],k=function(){n.invoke("getAccessories",{appid:t},(function(e,t){v(t),function(e){return!!(e.length>0&&/j.*/i.test(e[0].occupancytypeid))}(t)&&m("infos")}))};return Object(a.useEffect)((function(){r.H.lookup("OboMiscListService","obo").invoke("getAccessoryOccupancyTypes",null,(function(e,t){if(e)p(e);else{var n={};t.forEach((function(e){n[""+e.objid.toLowerCase()]=!1})),w(t),j(n)}})),k()}),[]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+t),o.a.createElement(r.L,null,"Accessories"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:c}),o.a.createElement(r.D,{visibleWhen:"initial"===u},o.a.createElement("p",null,"Does the plan include accessories?"),o.a.createElement(r.G,{name:"hasAccessories",value:f,onChange:E},o.a.createElement(r.v,{caption:"Yes",value:"TRUE"}),o.a.createElement(r.v,{caption:"No",value:"FALSE"})),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){"TRUE"===f?m("select-accessories"):(p(null),n.invoke("saveAccessories",{appid:t,items:[]},(function(e,t){e?p(e):i()})))}}))),o.a.createElement(r.D,{visibleWhen:"select-accessories"===u},o.a.createElement(r.M,null,"Select accessory to add if applicable"),o.a.createElement(r.r,{context:h,handler:j},O.map((function(e){return o.a.createElement(r.g,{key:e.objid,caption:e.title,name:""+e.objid.toLowerCase()})}))),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return m("initial")}}),o.a.createElement(r.c,{caption:"Next",action:function(){if(Object.keys(h).length>0){var e=function(){var e=[];for(var n in h)h[n]&&e.push(n);return{appid:t,items:e}}();n.invoke("saveAccessories",e,(function(e,t){e?p(e):(k(),m("infos"))}))}else p("Select at least one accessory type before proceeding.")}}))),o.a.createElement(r.r,{visibleWhen:"infos"===u,context:y,handler:v},y.map((function(e,t){return o.a.createElement("div",{key:e.objid},o.a.createElement(r.w,{style:A.infoTitle},e.type.title),e.infos.map((function(e,n){return o.a.createElement(N,{key:e.name+":"+t+":"+n,name:"["+t+"].infos["+n+"].value",dataType:e.datatype,caption:e.caption,unit:e.unit})})))})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return m("select-accessories")}}),o.a.createElement(r.c,{caption:"Next",action:function(){var e={appid:t,infos:[]};y.forEach((function(t){var n;(n=e.infos).push.apply(n,t.infos)})),n.invoke("saveAccessoryInfos",e,(function(e,t){e?p(e):i()}))}}))))}},{step:8,name:"ancillarylist",caption:"Other Permits",component:function(e){var t,n,i,c=e.partner,p=e.appno,s=e.appService,u=e.moveNextStep,m=Object(a.useState)(!1),d=m[0],f=m[1],E=Object(a.useState)(),b=E[0],y=E[1],v=Object(a.useState)(!1)[1],g=Object(a.useState)("permit-list"),h=g[0],j=g[1],S=Object(a.useState)([]),O=S[0],w=S[1],x=Object(a.useState)([]),P=x[0],C=x[1],D=Object(a.useState)({worktypes:[],type:{}}),I=D[0],T=D[1],A=function(){s.invoke("getAncillaryPermits",{appid:p},(function(e,t){e?y(e):(C(t),d||0!==t.length||(f(!0),j("available-list")))}))};Object(a.useEffect)((function(){s.invoke("getAvailableAncillaryPermitTypes",{appid:p},(function(e,t){e?y(e):w(t)}))}),[P]),Object(a.useEffect)((function(){A()}),[h,d]);var L=!1;P.length>0&&(L=P.findIndex((function(e){return!e.designprofessionalid}))>=0);var q=null;return o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+p),o.a.createElement(r.L,null,"Other Permits"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:b}),o.a.createElement(r.D,{visibleWhen:"permit-list"===h},o.a.createElement("label",null,"Click on edit ",o.a.createElement(r.o,{fontSize:"small",color:"primary"})," for each document and complete the details."),o.a.createElement(r.I,{height:40}),P.map((function(e){return o.a.createElement(r.D,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},o.a.createElement(r.D,{row:!0},e.designprofessionalid?o.a.createElement("div",{style:{width:40}},o.a.createElement(r.f,{style:{color:"green",paddingRight:10}})):o.a.createElement("div",{style:{width:40}}),o.a.createElement("label",null,e.type.title)),o.a.createElement(r.D,{row:!0},e.designprofessionalid&&o.a.createElement(r.F,{caption:null,href:"/jreports/partner/"+c.group.name+"_"+c.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),o.a.createElement(r.n,{action:function(){s.invoke("getAncillaryPermit",{objid:e.objid},(function(e,t){e?y(e):(y(null),function(e){r.H.lookup("OboMiscListService","obo").invoke("getWorkTypes",{typeid:e.type.objid},(function(t,n){t?y(t):n&&n.length>0?(n.forEach((function(t){e.worktypes.findIndex((function(e){return e.toLowerCase()===t.name.toLowerCase()}))>=0&&(t.checked=!0)})),T(l({},e,{worktypes:n})),j("select-worktypes")):(j(e.infos.length>0?"infos":1===e.type.includecost?"cost":"professional"),T(e))}))}(t))}))},size:"small"}),o.a.createElement(r.l,{action:function(){return t=e,void s.invoke("removeAncillaryPermit",{objid:t.objid},(function(e,t){e?y(e):(y(null),A())}));var t},size:"small"})))})),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Add New Permits",action:function(){return j("available-list")}}),o.a.createElement(r.c,{caption:"Next",action:function(){var e=[];P.forEach((function(t){t.designprofessionalid||e.push(t.type.title)})),1===e.length?y("Permit "+e[0]+" is not processed"):e.length>1?y("The following permist are not processed: "+e.join(",")):u()},disableWhen:L}))),o.a.createElement(r.r,{visibleWhen:"select-worktypes"===h,context:I,handler:T},o.a.createElement("h4",null,I.type.title),o.a.createElement(r.M,null,"Select Work Types"),o.a.createElement(r.D,{style:W.workTypeContainer},I.worktypes.map((function(e,t){return o.a.createElement(r.g,{caption:e.name.toUpperCase(),name:"worktypes["+t+"].checked",value:e.name})}))),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return j("permit-list")}}),o.a.createElement(r.c,{caption:"Next",action:function(){y(null),y(null);var e={objid:I.objid,worktypes:I.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))};s.invoke("updateAncillaryPermit",e,(function(e,t){e?y(b):(j("infos"),v(!1))}))}}))),o.a.createElement(r.r,{visibleWhen:"infos"===h,context:I,handler:T},o.a.createElement(r.M,null,null===(t=I.type)||void 0===t?void 0:t.title),o.a.createElement(r.I,null),o.a.createElement("p",null,"Please fill the applicable values and click Save and Complete when done."),I.infos&&I.infos.map((function(e,t){var n=null;return null!==q&&q.category===e.category||(n=e.category,q=e),o.a.createElement(N,{key:e.name+":"+t,name:"infos["+t+"].value",category:n,dataType:e.datatype,caption:e.caption,unit:e.unit})})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){j(I.worktypes&&I.worktypes.length>0?"select-worktypes":"permit-list")}}),o.a.createElement(r.c,{caption:"Next",action:function(){s.invoke("updateAncillaryPermit",{objid:I.objid,projectcost:I.projectcost,equipmentcost:I.equipmentcost},(function(e,t){e?y(e):j(1===I.type.includecost?"cost":"professional")}))}}))),o.a.createElement(r.D,{visibleWhen:"available-list"===h},o.a.createElement(r.M,null,"Select ancillary and other permits to include in the project"),o.a.createElement(r.r,{context:O,handler:w,style:W.itemsContainer},O.map((function(e,t){return o.a.createElement(r.g,{key:e.objid,caption:e.title,name:"["+t+"].selected"})}))),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){var e=O.filter((function(e){return!0===e.selected}));e.length>0?(C(e),s.invoke("saveAncillaryPermits",{appid:p,permits:e},(function(e,t){e?y(e):(y(null),j("permit-list"))}))):j("permit-list")}}))),o.a.createElement(r.r,{visibleWhen:"cost"===h,context:I,handler:T},o.a.createElement(r.M,null,null===(n=I.type)||void 0===n?void 0:n.title),o.a.createElement(r.k,{name:"projectcost",caption:"Project Cost",textAlign:"left",fullWidth:!1}),o.a.createElement(r.k,{name:"equipmentcost",caption:"Equipment Cost",textAlign:"left"}),o.a.createElement(r.I,null),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return j("infos")}}),o.a.createElement(r.c,{caption:"Next",action:function(){y(null),s.invoke("saveAncillaryPermit",{objid:I.objid,infos:I.infos},(function(e,t){e?y(e):j("professional")}))}}))),o.a.createElement(r.r,{visibleWhen:"professional"===h,context:I,handler:T},o.a.createElement(r.M,null,null===(i=I.type)||void 0===i?void 0:i.title),o.a.createElement(r.I,null),o.a.createElement(k,{caption:"Design Professional",professional:I.designprofessional,onSelectProfessional:function(e){T(l({},I,{designprofessional:e,designprofessionalid:e.objid}))},role:I.type.designprofessionalrole}),o.a.createElement(r.I,null),o.a.createElement(k,{caption:"Supervisor in Charge Professional",professional:I.supervisor,onSelectProfessional:function(e){T(l({},I,{supervisor:e,supervisorid:e.objid}))},role:I.type.supervisorrole}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return j("permit-list")}}),o.a.createElement(r.c,{caption:"Save and Complete",action:function(){if(y(null),I.designprofessionalid)if(I.supervisorid){var e=l({},I,{worktypes:I.worktypes.filter((function(e){return e.checked})).map((function(e){return e.name}))});s.invoke("saveAncillaryPermit",e,(function(e,t){e?y(e):j("permit-list")}))}else y("Supervisor is required.");else y("Design Professional is required.")}}))))}},{step:9,name:"confirm",caption:"Confirm",component:function(e){var t=e.partner,n=e.appno,i=e.appService,l=e.moveNextStep,c=Object(a.useState)(!1),p=c[0],s=c[1],u=Object(a.useState)()[1],m=Object(a.useState)(!1),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)([]),g=v[0],h=v[1],j=(Object(a.useState)(!1),function(){u(null),f(!1)});return Object(a.useEffect)((function(){f(!0),i.invoke("getApplication",{appid:n},(function(e,t){e?u(e):(y(t),j())})),f(!0),i.invoke("getAncillaryPermits",{appid:n},(function(e,t){e?u(e):(h(t),j())}))}),[]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Tracking No. "+n),o.a.createElement(r.L,null,"Confirm Application"),o.a.createElement(r.I,null),o.a.createElement(r.B,{open:p,type:"confirm",msg:"Permit processing will now be completed. Make sure that all information are correct.",onAccept:function(){s(!1),l()},onCancel:function(){return s(!1)}}),o.a.createElement(r.x,{visibleWhen:d}),o.a.createElement("p",null,"Please confirm the info and preview each permit application before submitting"),o.a.createElement(r.r,{visibleWhen:!d,context:b,handler:y},o.a.createElement(r.D,{style:L.container},o.a.createElement(r.D,{style:L.linkContainer},o.a.createElement(r.F,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_permit?refid="+n})),o.a.createElement(r.D,null,o.a.createElement(r.P,{caption:"Tracking No.",name:"objid",readOnly:!0}),o.a.createElement(r.P,{caption:"Project Title",name:"title",readOnly:!0}),o.a.createElement(r.P,{caption:"Project Location",expr:function(){if(!b.location)return"";var e=[];return b.location.lotno&&e.push("Lot: "+b.location.lotno),b.location.blockno&&e.push("Block: "+b.location.blockno),b.location.street&&e.push("Street: "+b.location.street),b.location.barangay.name&&e.push("Barangay: "+b.location.barangay.name),e.join(" ")},readOnly:!0}),o.a.createElement(r.I,null),o.a.createElement(r.P,{caption:"Applicant",name:"applicant.name",readOnly:!0}),o.a.createElement(r.P,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),o.a.createElement(r.P,{caption:"Type of Work",expr:function(){var e,t="";return b.worktypes&&b.worktypes.length>0&&(t=null===(e=b.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0}),o.a.createElement(r.P,{caption:"Supervisor in Charge of Construction",expr:function(){var e="";return b.contractor&&(e=b.contractor.lastname+", "+b.contractor.firstname+" "+b.contractor.middlename),e},readOnly:!0})),o.a.createElement(r.D,null,o.a.createElement(r.D,{row:!0},o.a.createElement(r.u,{caption:"No. of Units",name:"numunits",readOnly:!0}),o.a.createElement(r.u,{caption:"No. of Floors",name:"numfloors",readOnly:!0}),o.a.createElement(r.k,{caption:"Bldg. Height",name:"height",readOnly:!0,textAlign:"left"})),o.a.createElement(r.I,null),o.a.createElement(r.D,{row:!0},o.a.createElement(r.k,{caption:"Total Area (sqm)",name:"totalfloorarea",readOnly:!0,textAlign:"left",fullWidth:!0}),o.a.createElement(r.k,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left",fullWidth:!0})),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),o.a.createElement(r.P,{caption:"Est. Completion Date",name:"dtexpectedcompletion",readOnly:!0})))),o.a.createElement(r.I,null),o.a.createElement(r.D,{style:L.ancillaryContainer},o.a.createElement(r.M,{style:L.label},"Other Permits"),o.a.createElement(r.D,{visibleWhen:g.length>0},g.map((function(e){return o.a.createElement(r.D,{style:L.ancillaryItem},o.a.createElement("label",{style:{marginLeft:20}},e.type.title),o.a.createElement(r.D,{row:!0},o.a.createElement(r.F,{href:"/jreports/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+t.group.name+"_"+t.name+"/obo/building_ancillary_"+e.type.objid+"?refid="+e.objid})))})))),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Submit",action:function(){s(!0)}}))))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.partner,n=e.appno,i=e.appService,l=Object(a.useState)(),c=l[0],p=l[1],s=Object(a.useState)(!1)[1],u=Object(a.useState)({}),m=u[0],d=u[1],f=Object(a.useState)([]),E=f[0],b=f[1],y=function(){p(null),s(!1)};Object(a.useEffect)((function(){s(!0),i.invoke("getProjectInfo",{appid:n},(function(e,t){e?p(e):(d(t),y())})),s(!0),i.invoke("getRequirements",{appid:n},(function(e,t){e?p(e):(b(t),y())}))}),[]);var v=[];m.location&&(m.location.lotno&&v.push("Lot: "+m.location.lotno),m.location.blockno&&v.push("Block: "+m.location.blockno),m.location.street&&v.push("Street: "+m.location.street),m.location.barangay.name&&v.push("Barangay: "+m.location.barangay.name));var g="";m.contractor&&(g=m.contractor.lastname+", "+m.contractor.firstname+" "+m.contractor.middlename,g+="\n"+m.contractor.profession,g+=" PRC NO.: "+m.contractor.prc.idno+" Issued: "+m.contractor.prc.dtissued);var h=function(e){void 0===e&&(e={});var t="";t+="Please download and print the Building and Ancillary Permit forms, prepare the ",t+="requirements listed below, and submit at the receiving window of our ",t+=e.officename,t+=" at the ",t+=e.address1,t+=e.address2?", "+e.address2+". ":". ";var n=[];return e.phoneno&&n.push(e.phoneno),e.mobileno&&n.push(e.mobileno),e.email?(n.length>0?(t+="You can email at "+e.email,t+=" or contact us on "+n.join(" or ")):t+="You can email us at "+e.email,t+=" for any inquiries on application."):n.length>0&&(t+="You can contact us on "+n.join(" or ")+" for any inquiries on application."),t}(m.obocontactinfo);return o.a.createElement(r.D,null,o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:c}),o.a.createElement(r.r,{context:m,handler:d},o.a.createElement("label",null,h),o.a.createElement(r.I,{height:10}),o.a.createElement(r.D,{style:q.container},o.a.createElement(r.D,{style:q.infoContainer},o.a.createElement(r.P,{caption:"Tracking No.",name:"objid",readOnly:!0}),o.a.createElement(r.P,{caption:"Project Title",name:"title",readOnly:!0}),o.a.createElement(r.P,{caption:"Location",expr:function(){return v.join(" ,")},readOnly:!0}),o.a.createElement(r.P,{caption:"Applicant",name:"applicant.name",readOnly:!0}),o.a.createElement(r.k,{caption:"Project Cost",name:"projectcost",readOnly:!0,textAlign:"left"}),o.a.createElement(r.D,{row:!0},o.a.createElement(r.j,{caption:"Est. Start Date",name:"dtproposedconstruction",readOnly:!0}),o.a.createElement(r.j,{caption:"Est. End Date",name:"dtexpectedcompletion",readOnly:!0})),o.a.createElement(r.P,{caption:"Supervisor/In Charge of Project",expr:function(){return g},readOnly:!0,multiline:!0,rows:2})))),o.a.createElement(r.I,null),o.a.createElement(r.D,{style:q.requirementsContainer},E.map((function(e,n){var a=e.title.split("\n"),i=function(e){if(1===e.length)return null;var t=e.map((function(e,t){return 0!==t&&e?o.a.createElement("li",{style:q.requirement},e):null}));return o.a.createElement("ul",null,t)}(a),l=function(e,t){var n;return t.docs?(n=t.docs.map((function(t){return o.a.createElement(r.D,{key:t.reportid,style:q.document},o.a.createElement("label",{style:{marginLeft:20}},t.title),o.a.createElement(r.D,{row:!0},o.a.createElement(r.F,{href:"/jreports/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+e.group.name+"_"+e.name+"/obo/"+t.reportid+"?refid="+t.refid})))})),o.a.createElement(r.D,{style:{margin:"0px 20px"}},n)):null}(t,e);return o.a.createElement(r.D,null,o.a.createElement("p",{key:n,style:q.requirement},n+1+".  "+a[0]),l,i)}))))}}],M=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),i=n[0],c=n[1],s=Object(a.useState)("init"),u=s[0],m=s[1],d=Object(a.useState)(Object(r.T)(e.location,"appid")),E=d[0],b=d[1],y=Object(a.useState)(),v=y[0],g=y[1],h=Object(a.useState)({step:1}),j=h[0],S=h[1],O=Object(a.useState)(1),w=O[0],k=O[1],x=Object(a.useState)({}),P=x[0],C=x[1],D=e.partner,I=e.service,N=e.history;v!==e.location.hash&&g(e.location.hash);var T=function(){"init"===u&&(m("apptype"),e.history.push(""+location.pathname))};if(Object(a.useEffect)((function(){E?(t(!0),R.invoke("findCurrentInfo",{appid:E},(function(n,a){var o=D.orgcode||D.id;n?c(n):a?o!=a.orgcode?(c("The application number provided is not for this local government"),T()):(S(a),k(a.step),m("processing"),e.history.push(location.pathname+"?appid="+E+"#"+B[a.step].name)):(c("Application no. does not exist"),T()),t(!1)}))):m("apptype")}),[E]),Object(a.useEffect)((function(){if(v){var e=B.find((function(e){return e.name===v.substring(1)}));k(e.step)}}),[v]),"init"===u)return o.a.createElement("div",null);if("apptype"===u)return o.a.createElement(p,{service:I,error:i,onCancel:N.goBack,onSubmit:function(e){var t=e.appType,n=e.appno;"new"===t?m(t):n?b(n):C(l({},P,{appno:"Tracking No. is required"}))}});if("new"===u)return o.a.createElement(f,l({},e,{handler:function(e){b(e),m("processing")},onCancel:function(){return e.history.goBack()}}));var A=B[w],W=A.component,L={partner:D,appno:E,pages:B,moveNextStep:function(){w<j.step&&1!==w?k((function(e){return e+1})):R.invoke("update",{appid:E,step:w+1},(function(e,t){e?c(e):(k(t.step),S(l({},j,{step:t.step})))}))},appService:R,stepCompleted:w<j.step};return o.a.createElement(r.C,null,j.step<9&&o.a.createElement(r.D,{target:"left",style:_.stepperContainer},o.a.createElement(r.K,{steps:B,completedStep:j.step,activeStep:w,handleStep:function(t){k(t),e.history.push(location.pathname+"?appid="+E+"#"+B[t].name)}})),o.a.createElement(r.d,null,o.a.createElement(r.Q,null,I.title),o.a.createElement(W,l({page:A},L))))},_={stepperContainer:{paddingTop:10,paddingLeft:40}},F=["INDIVIDUAL","CORPORATION","GOVERNMENT","OTHER"],V=[{name:"email",title:"Email Verification"},{name:"specifybldgpermit",title:"Specify Building Permit"},{name:"verifybldgpermit",title:"Verify Building Permit Information"},{name:"confirmation",title:"Confirmation"},{name:"newapp",title:"New Application "}],H=function(e){var t=e.partner,n=e.service,l=e.onComplete,c=e.appService,p=e.onCancel,m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)({}),g=v[0],h=v[1],j=Object(a.useState)("new")[0],S=Object(a.useState)(),O=S[0],w=S[1],k=Object(a.useState)(),x=k[0],P=k[1],C=Object(a.useState)({}),D=C[0],I=C[1],N=Object(a.useState)(0),T=N[1],A=V[N[0]],W=function(){T((function(e){return e+1}))},L=function(){T((function(e){return e-1}))};return o.a.createElement(r.C,null,"email"===A.name?o.a.createElement(i.d,{title:n.title,showName:!0,onCancel:p,onVerify:function(e){h(e),W()},partner:t,connection:"obo"}):o.a.createElement(r.d,null,o.a.createElement(r.Q,null,n.title),o.a.createElement(r.D,{visibleWhen:"specifybldgpermit"===A.name},o.a.createElement(r.L,null,A.title),o.a.createElement(r.I,{height:30}),o.a.createElement(r.P,{caption:"Building Permit No.",value:x,onChange:P,variant:"outlined",fullWidth:!1,required:!0,error:b.bldgPermitNo||d,helperText:b.bldgPermitNo||d,size:"small",autoFocus:!0}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:L}),o.a.createElement(r.c,{caption:"Next",action:function(){x?(f(null),r.H.lookup(t.id+":OboOnlineService","obo").invoke("findBldgPermitNo",{permitno:x},(function(e,t){e?f(e):(I(t),W())}))):y({bldgPermitNo:"Please specify the Building Permit No."})}}))),o.a.createElement(r.r,{visibleWhen:"verifybldgpermit"===A.name,context:D,handler:I},o.a.createElement(r.L,null,"Verify Building Permit Information"),o.a.createElement(r.I,{height:30}),o.a.createElement(r.P,{caption:"Building Permit No.",name:"permitno",readOnly:!0}),o.a.createElement(r.P,{caption:"Applicant",name:"applicant.name",readOnly:!0}),o.a.createElement(r.I,null),o.a.createElement(r.P,{caption:"Project Title",name:"title",readOnly:!0}),o.a.createElement(r.P,{caption:"Location",name:"location.text",readOnly:!0}),o.a.createElement(r.k,{caption:"Project Cost",name:"projectcost",readOnly:!0}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:L}),o.a.createElement(r.c,{caption:"Next",action:function(){W()}}))),o.a.createElement(r.D,{visibleWhen:"confirmation"===A.name},o.a.createElement(s,{partner:t,error:d,onCancel:L,onContinue:function(){c.invoke("create",{orgcode:t.id,apptype:j,permittype:D.apptype,applicant:D.applicant,bldgpermit:D,contact:g},(function(e,t){e?f(e):(w(t.objid),W())}))}})),o.a.createElement(r.D,{visibleWhen:"newapp"===A.name,width:400},o.a.createElement(u,{appno:O,onContinue:function(){l({appType:"new",appno:O})}}))))},U={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},columnTitle:{fontWeight:"bold",textAlign:"center",width:300,padding:10},row:{display:"flex",flexDirection:"row",alignItems:"flex-start"},label:{width:"100%"},item:{width:400,marginRight:10}},z={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},G={container:{display:"flext",flexDirection:"column",justifyContent:"flex-start"},row:{display:"flex",flexDirection:"row",alignItems:"center"},label:{width:"100%"},item:{width:300,marginRight:10}},Q={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"}},Y={container:{padding:"0px 30px"},row:{display:"flex",justifyContent:"space-between",alignItems:"center"},label:{fontWeight:"bold"}},K=r.H.lookup("OnlineOccupancyPermitService","obo"),J=[{step:0,component:null},{step:1,name:"apptype",caption:"Application Type",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,l=Object(a.useState)(),c=l[0],p=l[1],s=(Object(a.useState)(!1),Object(a.useState)({})),u=s[0],m=s[1];return Object(a.useEffect)((function(){p(null),n.invoke("getApplication",{appid:t},(function(e,t){e?p(e):m(t)}))}),[]),o.a.createElement(r.D,null,o.a.createElement(r.q,{msg:c}),o.a.createElement(r.r,{context:u,handler:m},o.a.createElement(r.G,{name:"apptype"},o.a.createElement(r.v,{caption:"Full (Completed)",value:"full"}),o.a.createElement(r.v,{caption:"Partial",value:"partial"}))),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Next",action:function(){n.invoke("update",{objid:u.objid,apptype:u.apptype},(function(e,t){e?p(e):i()}))}})))}},{step:2,name:"applicant",caption:"Applicant",component:function(e){var t=e.appno,n=e.partner,c=e.appService,p=e.movePrevStep,s=e.moveNextStep,u=Object(a.useState)(!1),m=u[0],d=u[1],f=Object(a.useState)(!1),E=f[0],b=f[1],y=Object(a.useState)("read")[1],v=Object(a.useState)({appno:t,appid:t,entitytype:"INDIVIDUAL",resident:!1}),g=v[0],h=v[1];return Object(a.useEffect)((function(){d(!0),b(null),c.invoke("getApplicant",{appid:t},(function(e,t){e?b(e):h(t||{}),d(!1),y("read")}))}),[]),o.a.createElement(r.D,null,o.a.createElement(r.q,{msg:E}),o.a.createElement(r.r,{context:g,handler:h},o.a.createElement(r.h,{items:F,name:"entitytype",caption:"Type of Applicant"}),o.a.createElement(r.P,{caption:"Name",name:"name",visibleWhen:"INDIVIDUAL"!==g.entitytype}),o.a.createElement(r.I,null),o.a.createElement(r.D,null,o.a.createElement(r.M,null,"Administrator or contact name of applicant"),o.a.createElement(r.P,{caption:"Last Name",name:"lastname",required:!0}),o.a.createElement(r.P,{caption:"First Name",name:"firstname",required:!0}),o.a.createElement(r.P,{caption:"Middle Name",name:"middlename",required:!0}),o.a.createElement(r.p,{name:"email"}),o.a.createElement(r.z,{name:"mobileno"})),o.a.createElement(r.I,null),o.a.createElement(r.M,null,"Applicant Address"),o.a.createElement(r.g,{caption:"Resident",name:"resident",onChange:function(){var e=l({},g,{resident:!g.resident,address:{}});h(e)}}),g.resident?o.a.createElement(i.f,{orgcode:n.id,name:"address",caption:"Address"}):o.a.createElement(i.g,{name:"address",caption:"Address"}),o.a.createElement(r.I,null),o.a.createElement(r.M,null,"Proof of Identity"),o.a.createElement(i.e,{name:"id"})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:p}),o.a.createElement(r.c,{caption:"Next",action:function(){b(null),c.invoke("saveApplicant",g,(function(e,t){e?b(e):s(),d(!1)}))},disableWhen:m})))}},{step:3,name:"actualcost",caption:"Actual Costs",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,c=e.movePrevStep,p=Object(a.useState)(),s=p[0],u=p[1],m=Object(a.useState)({}),d=m[0],f=m[1],E=Object(a.useState)({items:[{caption:"Total Materials Cost",field:"totalmaterialcost",value:0},{caption:"Total Direct Cost",field:"totaldirectlaborcost",value:0},{caption:"Total Equipment Cost",field:"totalequipmentcost",value:0},{caption:"Total Other Cost",field:"totalothercost",value:0}]}),b=E[0],y=E[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){if(e)u(e);else{f(t);var n=l({},b);n.items.forEach((function(e){e.value=t[e.field]})),y(n)}}))}),[t]),o.a.createElement(r.D,{style:{maxWidth:600}},o.a.createElement(r.w,null,"Please indicate the actual cost of construction."),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:s}),o.a.createElement(r.r,{context:b,handler:y,style:z.container},b.items.map((function(e,t){return o.a.createElement(r.D,{key:e.field,style:z.row},o.a.createElement(r.w,{caption:e.caption,style:z.label}),o.a.createElement(r.k,{name:"items["+t+"].value",variant:"outlined",style:z.item,fullWdith:!1}))}))),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:c}),o.a.createElement(r.c,{caption:"Next",action:function(){var e=l({},d);b.items.forEach((function(t){e[t.field]=t.value})),n.invoke("update",e,(function(e,t){e?u(e):i()}))}})))}},{step:4,name:"firesafetycost",caption:"Fire Safety Costs",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,c=e.movePrevStep,p=Object(a.useState)(!1),s=p[0],u=p[1],m=Object(a.useState)(),d=m[0],f=m[1],E=(Object(a.useState)({}),Object(a.useState)({items:[]})),b=E[0],y=E[1];return Object(a.useEffect)((function(){n.invoke("getAppInfos",{appid:t},(function(e,t){e?f(e):y(l({},b,{items:t}))}))}),[t]),o.a.createElement(r.D,{style:{maxWidth:600}},o.a.createElement(r.w,null,"Please indicate the other cost of construction."),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:d}),o.a.createElement(r.r,{context:b,handler:y,style:G.container},b.items.map((function(e,t){return o.a.createElement(r.D,{key:e.objid,style:G.row},o.a.createElement(r.w,{caption:e.caption,style:G.label}),o.a.createElement(r.k,{name:"items["+t+"].value",variant:"outlined",style:G.item,fullWdith:!1}))}))),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:c}),o.a.createElement(r.c,{caption:"Next",action:function(){u(!0),n.invoke("saveAppInfos",{appid:t,infos:b.items},(function(e,t){e?f(e):i(),u(!1)}))},disableWhen:s,loading:s})))}},{step:5,name:"plannedactual",caption:"Planned vs Actual",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,l=e.movePrevStep,c=Object(a.useState)()[1],p=Object(a.useState)(!1),s=p[0],u=p[1],m=Object(a.useState)({}),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):y(t)}))}),[t]),o.a.createElement(r.D,{style:{maxWidth:600}},o.a.createElement(r.w,null,"Please indicate the actual values of construction."),o.a.createElement(r.I,null),o.a.createElement(r.r,{context:b,handler:y,style:U.container},o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"",style:U.label}),o.a.createElement("div",{style:U.columnTitle},"Planned"),o.a.createElement("div",{style:U.columnTitle},"Actual")),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"Project Total Cost",style:U.label}),o.a.createElement(r.k,{name:"bldgpermit.projectcost",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.k,{name:"actualprojectcost",disabled:!0,style:U.item,fullWdith:!1,variant:"outlined"})),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"Total Floor Area (sqm)",style:U.label}),o.a.createElement(r.k,{name:"bldgpermit.totalfloorarea",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.k,{name:"actualtotalfloorarea",style:U.item,fullWdith:!1,variant:"outlined",error:d.actualtotalfloorarea,autoFocus:!0})),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"No. of Units",style:U.label}),o.a.createElement(r.k,{name:"bldgpermit.numunits",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.k,{name:"actualnumunits",style:U.item,fullWdith:!1,variant:"outlined",error:d.actualnumunits})),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"No. of Floors",style:U.label}),o.a.createElement(r.k,{name:"bldgpermit.numfloors",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.k,{name:"actualnumfloors",style:U.item,fullWdith:!1,variant:"outlined",error:d.actualnumfloors})),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"Height (m)",style:U.label}),o.a.createElement(r.k,{name:"bldgpermit.height",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.k,{name:"actualheight",style:U.item,fullWdith:!1,variant:"outlined",error:d.actualheight})),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"Start Date",style:U.label}),o.a.createElement(r.j,{name:"bldgpermit.dtproposedconstruction",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.j,{name:"dtactualstarted",style:U.item,fullWdith:!1,variant:"outlined",error:d.dtactualstarted})),o.a.createElement(r.D,{style:U.row},o.a.createElement(r.w,{caption:"Completion Date",style:U.label}),o.a.createElement(r.j,{name:"bldgpermit.dtexpectedcompletion",disabled:!0,variant:"outlined",style:U.item,fullWdith:!1}),o.a.createElement(r.j,{name:"dtactualcompleted",style:U.item,fullWdith:!1,variant:"outlined",error:d.dtactualcompleted,helperText:d.dtactualcompleted})),o.a.createElement(r.I,null)),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:l}),o.a.createElement(r.c,{caption:"Next",action:function(){(function(){var e={};return b.actualtotalfloorarea||(e.actualtotalfloorarea="Required"),b.actualnumunits||(e.actualnumunits="Required"),b.actualnumfloors||(e.actualnumfloors="Required"),b.actualheight||(e.actualheight="Required"),b.dtactualstarted||(e.dtactualstarted="Required"),b.dtactualcompleted||(e.dtactualcompleted="Required"),b.dtactualstarted&&b.dtactualcompleted&&Object(r.V)(b.dtactualcompleted,b.dtactualstarted)&&(e.dtactualcompleted="Actual date completed should be after actual date started."),Object(r.U)(e)?(f(e),!1):(f({}),!0)})()&&(u(!0),n.invoke("update",b,(function(e,t){e?c(e):i(),u(!1)})))},loading:s})))}},{step:6,name:"contractor",caption:"Contractor",component:function(e){var t=e.appno,n=e.appService,i=e.moveNextStep,l=e.movePrevStep,c=Object(a.useState)()[1],p=Object(a.useState)(!1)[1],s=Object(a.useState)({}),u=s[0],m=s[1],d=Object(a.useState)({}),f=d[0],E=d[1],b=Object(a.useState)(!1),y=b[0],v=b[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?c(e):(t.contractor=t.contractor||{pcab:{},manager:{}},v(!(!t.contractor||!t.contractor.name)),E(t))}))}),[t]),o.a.createElement(r.D,null,o.a.createElement(r.w,null,"Please specify contractor if available"),o.a.createElement(r.I,null),o.a.createElement(r.g,{value:y,onChange:v,caption:"Is undertaken by a Contractor?"}),o.a.createElement(r.r,{visibleWhen:y,context:f,handler:E},o.a.createElement(r.P,{name:"contractor.name",caption:"Contractor",required:!0,error:u.name}),o.a.createElement(r.P,{name:"contractor.address",caption:"Address",required:!0,error:u.address}),o.a.createElement(r.P,{name:"contractor.pcab.idno",caption:"PCAB License No.",required:!0,error:u.pcabidno}),o.a.createElement(r.j,{name:"contractor.pcab.dtvalid",caption:"Validity Date",required:!0,error:u.pcabdtvalid}),o.a.createElement(r.P,{name:"contractor.tin",caption:"TIN",required:!0,error:u.tin}),o.a.createElement(r.P,{name:"contractor.manager.name",caption:"Authorized Managing Officer",required:!0,error:u.manageroffice}),o.a.createElement(r.p,{name:"contractor.manager.email",required:!0,error:u.manageremail})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:l}),o.a.createElement(r.c,{caption:"Next",action:function(){y&&!function(){var e=f.contractor,t={};return e&&e.name||(t.name="Required"),e&&e.address||(t.address="Required"),e&&e.pcab&&e.pcab.idno||(t.pcab.idno="Required"),e&&e.pcab&&e.pcab.dtvalid||(t.pcab.dtvalid="Required"),e&&e.tin||(t.tin="Required"),e&&e.manager&&e.manager.name||(t.manageroffice="Required"),e&&e.manager&&e.manager.email||(t.manageremail="Required"),Object(r.U)(t)?(m(t),!1):(m({}),!0)}()||(p(!0),n.invoke("update",{objid:f.objid,contractor:f.contractor},(function(e,t){e?c(e):i(),p(!1)})))}})))}},{step:7,name:"professionals",caption:"Professionals",component:function(e){var t=e.appno,n=e.appService,i=e.movePrevStep,l=e.moveNextStep,c=Object(a.useState)()[1],p=Object(a.useState)(!1),s=p[0],u=p[1],m=Object(a.useState)("design"),d=m[0],f=m[1],E=Object(a.useState)([]),b=E[0],y=E[1],v=Object(a.useState)([]),g=v[0],h=v[1];Object(a.useEffect)((function(){u(!0),r.H.lookup("OboMiscListService","obo").invoke("getPermitTypes",null,(function(e,a){e?c(e):(console.log("permitTypes",a),y(a),n.invoke("getProfessionals",{appid:t},(function(e,t){e?c(e):h(t),u(!1)})))}))}),[t]);var j=function(e,t){var n=g[t];"design"===d?(n.designprofessionalid=e.objid,n.designprofessional=e):(n.supervisorid=e.objid,n.supervisor=e);var a=[].concat(g);a[t]=n,h(a)},S=function(){u(!0),n.invoke("updateProfessionals",g,(function(e,t){e?c(e):"design"===d?f("supervisor"):l(),u(!1)}))};return o.a.createElement(r.D,null,o.a.createElement(r.D,{visibleWhen:"design"===d},o.a.createElement("h3",null,"List of Design Professionals"),g.map((function(e,t){var n=b.find((function(t){return t.objid.toLowerCase()===e.sectionid.toLowerCase()}));return n&&n.designprofessionalrole?o.a.createElement("div",{key:e.objid},e.designprofessionalid?o.a.createElement(k,{caption:e.sectionid+" Design Professional",professional:g[t].designprofessional,onSelectProfessional:function(e){return j(e,t)},role:n.designprofessionalrole}):o.a.createElement(w,{caption:e.sectionid+" Design Professional",searchFieldTitle:"",onSelect:function(e){return j(e,t)},role:n.designprofessionalrole})):null})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:i}),o.a.createElement(r.c,{caption:"Next",action:S,disableWhen:s}))),o.a.createElement(r.D,{visibleWhen:"supervisor"===d},o.a.createElement("h3",null,"List of Supervisors"),g.map((function(e,t){var n=b.find((function(t){return t.objid.toLowerCase()===e.sectionid.toLowerCase()}));return n&&n.supervisorrole?o.a.createElement("div",{key:e.objid},e.supervisorid?o.a.createElement(k,{caption:e.sectionid+" Supervisor",professional:g[t].supervisor,onSelectProfessional:function(e){return j(e,n)},role:n.supervisorrole}):o.a.createElement(w,{caption:e.sectionid+" Supervisor",searchFieldTitle:"",onSelect:function(e){return j(e,n)},role:n.supervisorrole})):null})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return f("design")}}),o.a.createElement(r.c,{caption:"Next",action:S,disableWhen:s}))))}},{step:8,name:"supervisor",caption:"Supervisor",component:function(e){var t=e.appno,n=e.appService,i=e.movePrevStep,l=e.moveNextStep,c=Object(a.useState)(),p=c[0],s=c[1],u=(Object(a.useState)({}),Object(a.useState)(!1),Object(a.useState)({})),m=u[0],d=u[1],f=Object(a.useState)(),E=f[0],b=f[1];return Object(a.useEffect)((function(){n.invoke("getApplication",{appid:t},(function(e,t){e?s(e):(console.log("app.supervisor",t.supervisor),b(t.supervisor),d(t))}))}),[]),o.a.createElement(r.D,null,o.a.createElement("label",null,"Specify full time inspector and supervisor of construction work"),o.a.createElement(r.q,{msg:p}),o.a.createElement(r.I,null),o.a.createElement(r.D,null,o.a.createElement(k,{caption:"Inspector/Supervisor",professional:E,onSelectProfessional:function(e){if(0!==e.length){var t=e[0];n.invoke("update",{objid:m.objid,supervisorid:t.objid},(function(e,n){e?s(e):(s(null),b(t))}))}else b({})}})),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:i}),o.a.createElement(r.c,{caption:"Next",action:function(){E?l():s("Please select a professional.")},disableWhen:!E||!E.objid})))}},{step:9,name:"confirmation",caption:"Confirmation",component:function(e){var t=e.appno,n=e.partner,i=e.appService,l=e.movePrevStep,c=e.onComplete,p=Object(a.useState)()[1],s=Object(a.useState)({}),u=s[0],m=s[1];return Object(a.useEffect)((function(){i.invoke("getApplication",{appid:t},(function(e,t){e?p(e):m(t)}))}),[t]),o.a.createElement(r.D,null,o.a.createElement("p",null,"Before sending please check first the generated application info. If everything is in order, you can click Submit button to complete the transaction."),o.a.createElement(r.I,null),o.a.createElement(r.D,{style:Q.container},o.a.createElement(r.D,{style:Q.row},o.a.createElement(r.w,{style:Q.label},"Application for Occupancy Permit"),o.a.createElement(r.D,{row:!0},o.a.createElement(r.F,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),o.a.createElement(r.D,{style:Q.row},o.a.createElement(r.w,{style:Q.label},"Certificate of Completion"),o.a.createElement(r.D,{row:!0},o.a.createElement(r.F,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:l}),o.a.createElement(r.c,{caption:"Submit",action:function(){i.invoke("update",u,(function(e,t){e?p(e):c()}))}})))}},{step:10,name:"completed",caption:"Completed",component:function(e){var t=e.appno,n=e.partner,i=e.appService,l=e.history,c=Object(a.useState)()[1],p=Object(a.useState)({})[1],s=Object(a.useState)({}),u=s[0],m=s[1];Object(a.useEffect)((function(){i.invoke("getApplication",{appid:t},(function(e,t){e?c(e):(p(t),r.H.lookup("OboContactInfoService","obo").invoke("getInfo",{orgcode:n.id},(function(e,t){e?c(e):m(t)})))}))}),[t]);var d=function(e){void 0===e&&(e={});var t="";t+="Please download and print the Application for Occupancy Permit and Certificate of Completion forms, ",t+="and submit at the receiving window of our ",t+=e.officename,t+=" at the ",t+=e.address1,t+=e.address2?", "+e.address2+". ":". ";var n=[];return e.phoneno&&n.push(e.phoneno),e.mobileno&&n.push(e.mobileno),e.email?(n.length>0?(t+="You can email at "+e.email,t+=" or contact us on "+n.join(" or ")):t+="You can email us at "+e.email,t+=" for any inquiries on application."):n.length>0&&(t+="You can contact us on "+n.join(" or ")+" for any inquiries on application."),t}(u);return o.a.createElement(r.D,null,o.a.createElement("label",null,d),o.a.createElement(r.I,null),o.a.createElement(r.D,{style:Y.container},o.a.createElement(r.D,{style:Y.row},o.a.createElement(r.w,{style:Y.label},"Application for Occupancy Permit"),o.a.createElement(r.D,{row:!0},o.a.createElement(r.F,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_occupancy?refid="+t}))),o.a.createElement(r.D,{style:Y.row},o.a.createElement(r.w,{style:Y.label},"Certificate of Completion"),o.a.createElement(r.D,{row:!0},o.a.createElement(r.F,{href:"/jreports/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t}),o.a.createElement(r.m,{href:"/jreports/download/partner/"+n.group.name+"_"+n.name+"/obo/certificate_of_completion?refid="+t})))),o.a.createElement(r.a,null,o.a.createElement(r.c,{caption:"Return",action:function(){return l.goBack()}})))}}],X=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),i=n[0],c=n[1],s=Object(a.useState)("init"),u=s[0],m=s[1],d=(Object(a.useState)("full"),Object(a.useState)(Object(r.T)(e.location,"appid"))),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1],g=Object(a.useState)({}),h=g[0],j=g[1],S=Object(a.useState)(1),O=S[0],w=S[1],k=e.partner,x=e.service;y!==e.location.hash&&v(e.location.hash);var P=function(){"init"===u&&(m("apptype"),e.history.push(""+location.pathname))};Object(a.useEffect)((function(){f?(t(!0),t(!0),K.invoke("findCurrentInfo",{appid:f},(function(n,a){n?c(n):(a||(c("Application no. does not exist"),P()),k.id!=a.orgcode&&(c("The application number provided is not for this local government"),P()),j(a),w(a.step),m("processing"),e.history.push(location.pathname+"?appid="+f+"#"+J[a.step].name)),t(!1)}))):m("apptype")}),[f]),Object(a.useEffect)((function(){if(y){var e=J.find((function(e){return e.name===y.substring(1)}));w(e.step)}}),[y]);var C=function(e){E(e.appno),w(1),m("processing")},D=function(){if(h.step!=J.length-1){c(null);var e=O<h.step?h.step:O+1;K.invoke("update",{objid:f,step:e},(function(t,n){t?c(t):(w(e),j(l({},h,{step:e})))}))}};if("init"===u)return o.a.createElement("div",null);if("apptype"===u)return o.a.createElement(p,{service:e.service,error:i,onCancel:function(){return e.history.goBack()},onSubmit:function(e){var t=e.appType,n=e.appno;c(null),"new"===t?m("new"):K.invoke("findCurrentInfo",{appid:n},(function(e,a){e?c(e):a?C({appType:t,appno:n,step:a.step}):c("Application no. does not exist.")}))}});if("new"===u)return o.a.createElement(H,l({},e,{appService:K,onComplete:C,onCancel:function(){return e.history.goBack()}}));var I=J[O],N=I.component,T={partner:k,appno:f,pages:J,moveNextStep:D,movePrevStep:function(){w((function(e){return e-1}))},appService:K,currentStep:O,stepCompleted:O<h.step,onComplete:function(){D()},history:e.history};return o.a.createElement(r.C,null,h.step<J.length-1&&o.a.createElement(r.D,{target:"left",style:Z.stepperContainer},o.a.createElement(r.K,{steps:J,completedStep:h.step,activeStep:O,handleStep:function(t){w(t),e.history.push(location.pathname+"?appid="+f+"#"+J[t].name)}})),o.a.createElement(r.d,null,o.a.createElement(r.Q,null,x.title),o.a.createElement(r.M,null,"Tracking No. "+f),o.a.createElement(r.L,null,I.caption),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:i}),o.a.createElement(N,l({page:I},T))))},Z={stepperContainer:{paddingTop:30,paddingLeft:40}},$=function(e){var t=e.name,n=void 0===t?"profession":t,a=e.caption,i=void 0===a?"Profession":a,p=e.professions,s=c(e,["name","caption","professions"]);return o.a.createElement(r.h,l({name:n,caption:i,items:p},s))},ee=r.H.lookup("OboProfessionalService","obo"),te=function(e){var t=e.partner,n=e.onCancel,l=e.onVerified,c=Object(a.useState)("init"),p=c[0],s=c[1],u=Object(a.useState)({}),m=u[0],d=u[1],f=Object(a.useState)(),E=f[0],b=f[1],y=Object(a.useState)(!1),v=y[0],g=y[1],h=Object(a.useState)({}),j=h[0],S=h[1],O=Object(a.useState)(),w=O[0],k=O[1],x=Object(a.useState)([]),P=x[0],C=x[1];Object(a.useEffect)((function(){ee.invoke("getProfessionList",null,(function(e,t){C(t)}))}),[]),Object(a.useEffect)((function(){Object.keys(m).length>0&&D()}),[j]);var D=function(){var e={};return j.prc&&j.prc.idno||(e.idno="PRC No. is required"),j.profession||(e.profession="Profession is required"),j.email||(e.email="Email is required"),0==Object.keys(e).length?(d({}),!0):(d(e),!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.r,{visibleWhen:"init"===p,context:j,handler:S},o.a.createElement(r.L,null,"Please specify initial information"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:E}),o.a.createElement(r.P,{name:"prc.idno",caption:"PRC No.",required:!0,error:m.idno,helperText:m.idno}),o.a.createElement($,{caption:"Profession (Copy profession in the PRC card",name:"profession",expr:function(e){return e},professions:P,required:!0,error:m.profession,helperText:m.profession}),o.a.createElement(r.p,{name:"email",required:!0,error:m.email,helperText:m.email}),o.a.createElement(r.z,{name:"mobileno"}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:n}),o.a.createElement(r.c,{caption:"Next",action:function(){D()&&(b(null),g(!0),ee.invoke("verifyInfo",j,(function(e,n){e?b(e):(function(){try{var e=r.H.lookupAsync(t.id+":VerifyEmailService","obo");return Promise.resolve(e.invoke("verifyEmail",{email:j.email,mobileno:j.mobileno}))}catch(e){return Promise.reject(e)}}().then((function(e){b(null),k(e.key),s("verify")})).catch((function(e){b(e)})),g(!1))})))},loading:v,disableWhen:v}))),o.a.createElement(r.D,{visibleWhen:"verify"===p},o.a.createElement(r.L,null,"Email Verification"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:E}),o.a.createElement("p",null,"Please enter the key code sent to your email at ",j.email,"."),o.a.createElement(i.l,{partner:t,hiddenCode:w,email:j.email,onCancel:function(){return s("init")},onVerified:function(){return l(j)},onResendCode:function(e){k(e)},width:200,connection:"obo"})))},ne=function(e){var t=e.info,n=void 0===t?{}:t,c=e.partner,p=e.onCancel,s=e.onSubmit,u={entity:l({},n,{resident:!0}),prc:n.prc,resident:!0},m=Object(a.useState)()[0],d=Object(a.useState)(u),f=d[0],E=d[1];return o.a.createElement(r.D,null,o.a.createElement(r.L,null,"Register New Professional"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:m}),o.a.createElement(r.D,null,o.a.createElement(r.r,{context:f,handler:E},o.a.createElement("p",null,"Please fill in the necessary data below. Text marked with * are required fields. "),o.a.createElement(r.P,{caption:"Profession",name:"entity.profession",readOnly:!0}),o.a.createElement(i.h,{name:"entity",person:f,showAddress:!0,orgcode:c.id}),o.a.createElement(r.I,null),o.a.createElement(i.i,{name:"prc",disableIdNo:!0}),o.a.createElement(i.j,{name:"ptr"}),o.a.createElement(i.e,{caption:"Primary Identification",name:"id"}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:p}),o.a.createElement(r.c,{caption:"Next",action:function(){s(f)}})))))},ae=function(e){var t=e.onClose;return o.a.createElement(r.D,null,o.a.createElement(r.i,{center:!0},o.a.createElement(r.I,null),o.a.createElement(r.t,{src:"/assets/success.png",width:120,alt:"success"}),o.a.createElement(r.I,null),o.a.createElement(r.Q,null,"Success!"),o.a.createElement(r.I,null),o.a.createElement(r.w,{style:l({},oe.text,{maxWidth:300})},"You have successfully registered your professional information."),o.a.createElement(r.w,{labelStyle:oe.text},"Thank you for using this service."),o.a.createElement(r.I,null),o.a.createElement(r.e,null,o.a.createElement(r.c,{variant:"text",caption:"Return",onClick:t}))))},oe={text:{display:"block",textAlign:"center"}},re=r.H.lookup("OboProfessionalService","obo"),ie=[{step:1,name:"initial",caption:"Initial"},{step:2,name:"newprofessional",caption:"New Professional"},{step:3,name:"disclaimer",caption:"Disclaimer"},{step:4,name:"registered",caption:"Registered"}],le=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),c=n[0],p=n[1],s=(Object(a.useState)({}),Object(a.useState)("new"),Object(a.useState)(0)),u=s[0],m=s[1],d=(Object(a.useState)(),Object(a.useState)()),f=d[0],E=d[1],b=Object(a.useState)(),y=b[0],v=b[1],g=e.partner,h=e.service,j=e.history,S=function(){m((function(e){return e+1}))},O=ie[u];return o.a.createElement(r.C,null,o.a.createElement(r.D,{target:"left",style:ce.stepperContainer},o.a.createElement(r.K,{steps:ie,activeStep:u})),o.a.createElement(r.d,null,o.a.createElement(r.Q,null,h.title),o.a.createElement(r.q,{msg:c}),o.a.createElement(r.D,{visibleWhen:"initial"===O.name},o.a.createElement(te,{partner:g,onCancel:j.goBack,onVerified:function(e){E(e),S()}})),o.a.createElement(r.D,{visibleWhen:"newprofessional"===O.name},o.a.createElement(ne,{partner:g,info:f,onSubmit:function(e){v(e),S()}})),o.a.createElement(r.D,{visibleWhen:"disclaimer"===O.name},o.a.createElement(i.b,{partner:g,onCancel:function(){m((function(e){return e-1}))},onSubmit:function(){t(!0);var e=function(){var e=l({},y.entity.address);y.entity.resident&&(e.citymunicipality=g.title,e.province=g.group.title);var t=l({},y.entity,{address:e}),n=l({},t,y);return delete n.entity,n}();re.invoke("create",e,(function(e,n){e?function(e){t(!1),p(e.toString())}(e):S()}))}})),o.a.createElement(r.D,{visibleWhen:"registered"===O.name},o.a.createElement(ae,{onClose:function(){return j.goBack()}}))))},ce={stepperContainer:{paddingTop:30,paddingLeft:40}},pe=function(e){var t=Object(a.useState)(!1)[1],n=Object(a.useState)(!1),l=n[0],c=n[1],p=Object(a.useState)("init"),s=p[0],u=p[1],m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)({subtasks:[]}),b=E[0],y=E[1],v=Object(a.useState)({}),g=v[0],h=v[1],j=Object(a.useState)()[1],S=e.partner,O=e.service,w=e.history,k="";return b&&b.task&&(k=Object(r.S)(b.task.dtcreated)),o.a.createElement(r.C,null,o.a.createElement(r.d,null,o.a.createElement(r.Q,null,O.title),o.a.createElement(r.D,{visibleWhen:"init"===s},o.a.createElement(r.L,null,"Building Permit Tracking No."),o.a.createElement(r.I,null),o.a.createElement(r.P,{caption:"Tracking No.",name:"trackingno",value:d,onChange:f,required:!0,error:l,helperText:l,fullWidth:!1,variant:"outlined"}),o.a.createElement(r.a,null,o.a.createElement(r.b,{action:function(){return w.goBack()}}),o.a.createElement(r.c,{caption:"Next",action:function(){c(null),d?r.H.lookup(S.id+":OboOnlineService","obo").invoke("verifyApplication",{trackingno:d},(function(e,t){e?c(e):(h(t),u("verification"))})):c("Tracking No. is required.")}}))),o.a.createElement(r.D,{visibleWhen:"verification"===s},o.a.createElement(r.L,null,"Account Verification"),o.a.createElement(r.I,null),o.a.createElement(i.l,{partner:S,hiddenCode:g.key,email:g.email,onCancel:function(){return u("init")},onVerified:function(e){j(e),t(!0),r.H.lookup(S.id+":OboOnlineService","obo").invoke("findApplicationStatus",{trackingno:d},(function(e,n){e?c(e):(y(n),u("info"),c(null),t(!1))}))}})),o.a.createElement(r.r,{visibleWhen:"info"===s,context:b,handler:y},o.a.createElement(r.L,null,"Building Permit Application Status"),o.a.createElement(r.I,null),o.a.createElement(r.D,null,o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{caption:"Tracking No.",name:"trackingno",readOnly:!0}),o.a.createElement(r.P,{caption:"Application No.",name:"appno",readOnly:!0})),o.a.createElement(r.P,{caption:"Project Title",name:"title",readOnly:!0}),o.a.createElement(r.P,{caption:"Project Location",expr:function(){if(!b.location)return"";var e=[];return b.location.lotno&&e.push("Lot: "+b.location.lotno),b.location.blockno&&e.push("Block: "+b.location.blockno),b.location.street&&e.push("Street: "+b.location.street),b.location.barangay.name&&e.push("Barangay: "+b.location.barangay.name),e.join(" ")},readOnly:!0}),o.a.createElement(r.I,null),o.a.createElement(r.P,{caption:"Applicant",name:"applicant.name",readOnly:!0}),o.a.createElement(r.P,{caption:"Occupancy Type",name:"occupancytype.title",readOnly:!0}),o.a.createElement(r.P,{caption:"Type of Work",expr:function(){var e,t="";return b.worktypes&&b.worktypes.length>0&&(t=null===(e=b.worktypes)||void 0===e?void 0:e.join(",")),t},readOnly:!0})),o.a.createElement(r.I,null),o.a.createElement(r.D,{style:se.currentTask},o.a.createElement("div",{style:se.title},o.a.createElement(r.M,null,"Current Task (ongoing)")),o.a.createElement("div",{style:se.taskInfo},o.a.createElement("h3",null,b&&b.task&&b.task.title),o.a.createElement(r.w,{caption:"Date Endorsed",expr:"task.dtcreated"}),b&&b.task&&b.task.assignee.name&&o.a.createElement(r.w,{caption:"Assigned To",expr:"task.assignee.name"}),o.a.createElement(r.w,{caption:"Duration",context:b,expr:function(e){return k}})))),o.a.createElement(r.D,{visibleWhen:"info"===s},o.a.createElement(r.I,null),o.a.createElement(r.M,null,"Activity Summary"),o.a.createElement("table",{style:se.table},o.a.createElement("tr",{style:se.trth},o.a.createElement("th",{style:se.tableText},"Section"),o.a.createElement("th",{style:se.tableText},"Name"),o.a.createElement("th",{style:se.tableText},"Date Endorsed"),o.a.createElement("th",{style:se.tableText},"Duration")),o.a.createElement("tbody",null,b.subtasks.map((function(e){return o.a.createElement("tr",{key:e.objid,style:se.trth},o.a.createElement("td",{style:se.tableText},e.typeid),o.a.createElement("td",{style:se.tableText},e.task.title),o.a.createElement("td",{style:se.tableText},e.task.dtcreated||"Not yet started"),o.a.createElement("td",{style:se.tableText},Object(r.S)(e.task.dtcreated),"  "))})))))))},se={currentTask:{border:"1px solid #aaa",borderRadius:5,boxShadow:"0px 5px 7px -7px rgba(0,0,0,0.75)"},taskInfo:{padding:"0px 10px"},title:{padding:"5px 10px",backgroundColor:"#ddd",borderBottom:"1px solid #aaa",borderRadius:5},table:{width:"100%",borderSpacing:0},tableText:{fontSize:12,border:"1px solid #ddd",padding:5},trth:{border:"1px solid #ddd",cellSpacing:0,padding:5}},ue=function(e){var t=e.title,n=e.partner,i=e.onCancel,l=e.onSubmit,c=e.error,p=Object(r.X)()[0],s=p.refno,u=p.txntype,m=Object(a.useState)(p.bill)[0],d=Object(a.useState)(c)[0],f=Object(a.useState)(!1)[0];return o.a.createElement(r.d,{style:{maxWidth:800}},o.a.createElement(r.Q,null,t),o.a.createElement(r.L,null,"Billing Information"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:d}),o.a.createElement(r.D,null,o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{context:m,caption:"Tracking No.",expr:"trackingno",readOnly:!0}),o.a.createElement(r.P,{context:m,caption:"Application No.",expr:"appno",readOnly:!0})),o.a.createElement(r.D,{row:!0},o.a.createElement(r.P,{context:m,caption:"Permit Type",expr:"permittype",readOnly:!0}),o.a.createElement(r.P,{context:m,caption:"Application Type",expr:"apptype",readOnly:!0})),o.a.createElement(r.P,{context:m,caption:"Project Name",expr:"title",readOnly:!0}),o.a.createElement(r.P,{context:m,caption:"Applicant",expr:"applicant.name",readOnly:!0}),o.a.createElement(r.P,{context:m,caption:"Address",expr:"applicant.address.text",readOnly:!0}),o.a.createElement("h4",null,"Bill Details"),o.a.createElement(r.N,{items:m?m.items:[],size:"small",showPagination:!1},o.a.createElement(r.O,{caption:"Particulars",expr:"item.title"}),o.a.createElement(r.O,{caption:"Amount",expr:"amount",align:"right",format:"currency"})),o.a.createElement(r.D,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingRight:15}},o.a.createElement(r.w,{context:m,caption:"Bill Amount:",expr:function(e){return Object(r.R)(e.amount)}}))),o.a.createElement(r.a,{disabled:f},o.a.createElement(r.b,{caption:"Back",action:function(){i(0)}}),o.a.createElement(r.c,{caption:"Confirm Payment",action:function(){l({refno:s,txntype:u,origin:"filipizen",orgcode:n.id,info:{data:m},paidby:m.paidby,paidbyaddress:m.paidbyaddress,amount:m.amount,particulars:"Obo Application No. "+m.appno})},disableWhen:0===m.amount})))},me={txntype:"obo",contact:{},refno:null,apptype:null,bill:{}},de=function(e,t){switch(t.type){case"SET_BILL":return e.refno=t.refno,e.apptype=t.apptype,void(e.bill=t.bill);case"SET_CONTACT":return void(e.contact=t.contact)}},fe=[{step:1,name:"verification",caption:"Verification",Component:i.a},{step:2,name:"initial",caption:"Initial Information",Component:function(e){var t=e.title,n=e.partner,i=e.moveNextStep,c=e.movePrevStep,p=Object(r.X)(),s=p[1],u=p[0].txntype,m=Object(a.useState)(),d=m[0],f=m[1],E=Object(a.useState)({}),b=E[0],y=E[1],v=Object(a.useState)(!1),g=v[0],h=v[1],j=Object(a.useState)({apptype:"building"}),S=j[0],O=j[1];return o.a.createElement(r.d,null,o.a.createElement(r.Q,null,t),o.a.createElement(r.L,null,"Initial Information"),o.a.createElement(r.I,null),o.a.createElement(r.q,{msg:d}),o.a.createElement(r.r,{context:S,handler:O},o.a.createElement(r.P,{name:"refno",caption:"Application No.",autoFocus:!0,error:b.refno,helperText:b.refno}),o.a.createElement(r.I,null),o.a.createElement(r.D,null,o.a.createElement("label",null,"Application Type:"),o.a.createElement(r.D,{style:{marginLeft:20}},o.a.createElement(r.G,{name:"apptype"},o.a.createElement(r.v,{caption:"Building Permit",value:"building"}),o.a.createElement(r.v,{caption:"Occupancy Permit",value:"occupancy"}))))),o.a.createElement(r.a,null,o.a.createElement(r.b,{caption:"Back",variant:"text",action:c}),o.a.createElement(r.c,{caption:"Next",action:function(){y({}),S.refno?(h(!0),f(null),function(){try{return Promise.resolve(r.H.lookupAsync(n.id+":OboOnlineBillingService","obo")).then((function(e){return Promise.resolve(e.invoke("getBilling",l({txntype:u},S,{qtr:4,showdetails:!0})))}))}catch(e){return Promise.reject(e)}}().then((function(e){s(l({type:"SET_BILL"},S,{bill:e})),i()})).catch((function(e){f(e.toString()),h(!1)}))):y({refno:"Application No. is required."})},loading:g,disabled:g})))}},{step:3,name:"payment",caption:"Payment",Component:function(e){var t=Object(r.X)();return o.a.createElement(i.c,l({module:{title:e.title,component:ue}},e,{initialContact:t[0].contact,initialStep:1,cancelPayment:e.cancelPayment}))}}],Ee=function(e){var t=e.partner,n=e.service,i=e.location,c=e.history,p=e.initialStep,s=Object(a.useState)(void 0===p?0:p),u=s[0],m=s[1],d=fe[u];return o.a.createElement(r.J,{initialState:me,reducer:de},o.a.createElement(r.C,null,o.a.createElement(r.i,{center:!0},o.a.createElement(r.D,null,o.a.createElement(d.Component,l({page:d},{partner:t,service:n,location:i,history:c,moveNextStep:function(){m((function(e){return e+1}))},movePrevStep:function(){0===u?c.goBack():m((function(e){return e-1}))},cancelPayment:function(){m(1)},title:"Building Permit Online Billing"}))))))}}}]);